function YA(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const h in a)if(h!=="default"&&!(h in e)){const g=Object.getOwnPropertyDescriptor(a,h);g&&Object.defineProperty(e,h,g.get?g:{enumerable:!0,get:()=>a[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const p of g.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function a(h){if(h.ep)return;h.ep=!0;const g=i(h);fetch(h.href,g)}})();var JA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var TS={exports:{}},zm={},CS={exports:{}},sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=Symbol.for("react.element"),QA=Symbol.for("react.portal"),eM=Symbol.for("react.fragment"),tM=Symbol.for("react.strict_mode"),nM=Symbol.for("react.profiler"),rM=Symbol.for("react.provider"),iM=Symbol.for("react.context"),sM=Symbol.for("react.forward_ref"),oM=Symbol.for("react.suspense"),aM=Symbol.for("react.memo"),lM=Symbol.for("react.lazy"),Sw=Symbol.iterator;function cM(e){return e===null||typeof e!="object"?null:(e=Sw&&e[Sw]||e["@@iterator"],typeof e=="function"?e:null)}var ES={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PS=Object.assign,IS={};function _u(e,t,i){this.props=e,this.context=t,this.refs=IS,this.updater=i||ES}_u.prototype.isReactComponent={};_u.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_u.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function AS(){}AS.prototype=_u.prototype;function Jv(e,t,i){this.props=e,this.context=t,this.refs=IS,this.updater=i||ES}var Qv=Jv.prototype=new AS;Qv.constructor=Jv;PS(Qv,_u.prototype);Qv.isPureReactComponent=!0;var kw=Array.isArray,MS=Object.prototype.hasOwnProperty,e0={current:null},DS={key:!0,ref:!0,__self:!0,__source:!0};function zS(e,t,i){var a,h={},g=null,p=null;if(t!=null)for(a in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(g=""+t.key),t)MS.call(t,a)&&!DS.hasOwnProperty(a)&&(h[a]=t[a]);var c=arguments.length-2;if(c===1)h.children=i;else if(1<c){for(var S=Array(c),E=0;E<c;E++)S[E]=arguments[E+2];h.children=S}if(e&&e.defaultProps)for(a in c=e.defaultProps,c)h[a]===void 0&&(h[a]=c[a]);return{$$typeof:Vd,type:e,key:g,ref:p,props:h,_owner:e0.current}}function uM(e,t){return{$$typeof:Vd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function t0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vd}function hM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Tw=/\/+/g;function wy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hM(""+e.key):t.toString(36)}function Rp(e,t,i,a,h){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(g){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case Vd:case QA:p=!0}}if(p)return p=e,h=h(p),e=a===""?"."+wy(p,0):a,kw(h)?(i="",e!=null&&(i=e.replace(Tw,"$&/")+"/"),Rp(h,t,i,"",function(E){return E})):h!=null&&(t0(h)&&(h=uM(h,i+(!h.key||p&&p.key===h.key?"":(""+h.key).replace(Tw,"$&/")+"/")+e)),t.push(h)),1;if(p=0,a=a===""?".":a+":",kw(e))for(var c=0;c<e.length;c++){g=e[c];var S=a+wy(g,c);p+=Rp(g,t,i,S,h)}else if(S=cM(e),typeof S=="function")for(e=S.call(e),c=0;!(g=e.next()).done;)g=g.value,S=a+wy(g,c++),p+=Rp(g,t,i,S,h);else if(g==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function tp(e,t,i){if(e==null)return e;var a=[],h=0;return Rp(e,a,"","",function(g){return t.call(i,g,h++)}),a}function dM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wi={current:null},Lp={transition:null},fM={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:Lp,ReactCurrentOwner:e0};function RS(){throw Error("act(...) is not supported in production builds of React.")}sn.Children={map:tp,forEach:function(e,t,i){tp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return tp(e,function(){t++}),t},toArray:function(e){return tp(e,function(t){return t})||[]},only:function(e){if(!t0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};sn.Component=_u;sn.Fragment=eM;sn.Profiler=nM;sn.PureComponent=Jv;sn.StrictMode=tM;sn.Suspense=oM;sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fM;sn.act=RS;sn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=PS({},e.props),h=e.key,g=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(g=t.ref,p=e0.current),t.key!==void 0&&(h=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(S in t)MS.call(t,S)&&!DS.hasOwnProperty(S)&&(a[S]=t[S]===void 0&&c!==void 0?c[S]:t[S])}var S=arguments.length-2;if(S===1)a.children=i;else if(1<S){c=Array(S);for(var E=0;E<S;E++)c[E]=arguments[E+2];a.children=c}return{$$typeof:Vd,type:e.type,key:h,ref:g,props:a,_owner:p}};sn.createContext=function(e){return e={$$typeof:iM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rM,_context:e},e.Consumer=e};sn.createElement=zS;sn.createFactory=function(e){var t=zS.bind(null,e);return t.type=e,t};sn.createRef=function(){return{current:null}};sn.forwardRef=function(e){return{$$typeof:sM,render:e}};sn.isValidElement=t0;sn.lazy=function(e){return{$$typeof:lM,_payload:{_status:-1,_result:e},_init:dM}};sn.memo=function(e,t){return{$$typeof:aM,type:e,compare:t===void 0?null:t}};sn.startTransition=function(e){var t=Lp.transition;Lp.transition={};try{e()}finally{Lp.transition=t}};sn.unstable_act=RS;sn.useCallback=function(e,t){return wi.current.useCallback(e,t)};sn.useContext=function(e){return wi.current.useContext(e)};sn.useDebugValue=function(){};sn.useDeferredValue=function(e){return wi.current.useDeferredValue(e)};sn.useEffect=function(e,t){return wi.current.useEffect(e,t)};sn.useId=function(){return wi.current.useId()};sn.useImperativeHandle=function(e,t,i){return wi.current.useImperativeHandle(e,t,i)};sn.useInsertionEffect=function(e,t){return wi.current.useInsertionEffect(e,t)};sn.useLayoutEffect=function(e,t){return wi.current.useLayoutEffect(e,t)};sn.useMemo=function(e,t){return wi.current.useMemo(e,t)};sn.useReducer=function(e,t,i){return wi.current.useReducer(e,t,i)};sn.useRef=function(e){return wi.current.useRef(e)};sn.useState=function(e){return wi.current.useState(e)};sn.useSyncExternalStore=function(e,t,i){return wi.current.useSyncExternalStore(e,t,i)};sn.useTransition=function(){return wi.current.useTransition()};sn.version="18.3.1";CS.exports=sn;var K=CS.exports;const Me=Yv(K),LS=YA({__proto__:null,default:Me},[K]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pM=K,mM=Symbol.for("react.element"),gM=Symbol.for("react.fragment"),yM=Object.prototype.hasOwnProperty,_M=pM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vM={key:!0,ref:!0,__self:!0,__source:!0};function BS(e,t,i){var a,h={},g=null,p=null;i!==void 0&&(g=""+i),t.key!==void 0&&(g=""+t.key),t.ref!==void 0&&(p=t.ref);for(a in t)yM.call(t,a)&&!vM.hasOwnProperty(a)&&(h[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)h[a]===void 0&&(h[a]=t[a]);return{$$typeof:mM,type:e,key:g,ref:p,props:h,_owner:_M.current}}zm.Fragment=gM;zm.jsx=BS;zm.jsxs=BS;TS.exports=zm;var re=TS.exports,FS={exports:{}},is={},OS={exports:{}},NS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Te,$e){var qe=Te.length;Te.push($e);e:for(;0<qe;){var yt=qe-1>>>1,Dt=Te[yt];if(0<h(Dt,$e))Te[yt]=$e,Te[qe]=Dt,qe=yt;else break e}}function i(Te){return Te.length===0?null:Te[0]}function a(Te){if(Te.length===0)return null;var $e=Te[0],qe=Te.pop();if(qe!==$e){Te[0]=qe;e:for(var yt=0,Dt=Te.length,at=Dt>>>1;yt<at;){var ft=2*(yt+1)-1,Rt=Te[ft],qt=ft+1,St=Te[qt];if(0>h(Rt,qe))qt<Dt&&0>h(St,Rt)?(Te[yt]=St,Te[qt]=qe,yt=qt):(Te[yt]=Rt,Te[ft]=qe,yt=ft);else if(qt<Dt&&0>h(St,qe))Te[yt]=St,Te[qt]=qe,yt=qt;else break e}}return $e}function h(Te,$e){var qe=Te.sortIndex-$e.sortIndex;return qe!==0?qe:Te.id-$e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var p=Date,c=p.now();e.unstable_now=function(){return p.now()-c}}var S=[],E=[],P=1,T=null,A=3,$=!1,X=!1,G=!1,ne=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(Te){for(var $e=i(E);$e!==null;){if($e.callback===null)a(E);else if($e.startTime<=Te)a(E),$e.sortIndex=$e.expirationTime,t(S,$e);else break;$e=i(E)}}function ee(Te){if(G=!1,H(Te),!X)if(i(S)!==null)X=!0,Ze(ye);else{var $e=i(E);$e!==null&&je(ee,$e.startTime-Te)}}function ye(Te,$e){X=!1,G&&(G=!1,F(le),le=-1),$=!0;var qe=A;try{for(H($e),T=i(S);T!==null&&(!(T.expirationTime>$e)||Te&&!ze());){var yt=T.callback;if(typeof yt=="function"){T.callback=null,A=T.priorityLevel;var Dt=yt(T.expirationTime<=$e);$e=e.unstable_now(),typeof Dt=="function"?T.callback=Dt:T===i(S)&&a(S),H($e)}else a(S);T=i(S)}if(T!==null)var at=!0;else{var ft=i(E);ft!==null&&je(ee,ft.startTime-$e),at=!1}return at}finally{T=null,A=qe,$=!1}}var be=!1,fe=null,le=-1,we=5,Le=-1;function ze(){return!(e.unstable_now()-Le<we)}function Ne(){if(fe!==null){var Te=e.unstable_now();Le=Te;var $e=!0;try{$e=fe(!0,Te)}finally{$e?De():(be=!1,fe=null)}}else be=!1}var De;if(typeof V=="function")De=function(){V(Ne)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,nt=Ke.port2;Ke.port1.onmessage=Ne,De=function(){nt.postMessage(null)}}else De=function(){ne(Ne,0)};function Ze(Te){fe=Te,be||(be=!0,De())}function je(Te,$e){le=ne(function(){Te(e.unstable_now())},$e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Te){Te.callback=null},e.unstable_continueExecution=function(){X||$||(X=!0,Ze(ye))},e.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<Te?Math.floor(1e3/Te):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return i(S)},e.unstable_next=function(Te){switch(A){case 1:case 2:case 3:var $e=3;break;default:$e=A}var qe=A;A=$e;try{return Te()}finally{A=qe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Te,$e){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var qe=A;A=Te;try{return $e()}finally{A=qe}},e.unstable_scheduleCallback=function(Te,$e,qe){var yt=e.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?yt+qe:yt):qe=yt,Te){case 1:var Dt=-1;break;case 2:Dt=250;break;case 5:Dt=1073741823;break;case 4:Dt=1e4;break;default:Dt=5e3}return Dt=qe+Dt,Te={id:P++,callback:$e,priorityLevel:Te,startTime:qe,expirationTime:Dt,sortIndex:-1},qe>yt?(Te.sortIndex=qe,t(E,Te),i(S)===null&&Te===i(E)&&(G?(F(le),le=-1):G=!0,je(ee,qe-yt))):(Te.sortIndex=Dt,t(S,Te),X||$||(X=!0,Ze(ye))),Te},e.unstable_shouldYield=ze,e.unstable_wrapCallback=function(Te){var $e=A;return function(){var qe=A;A=$e;try{return Te.apply(this,arguments)}finally{A=qe}}}})(NS);OS.exports=NS;var xM=OS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM=K,rs=xM;function Xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jS=new Set,md={};function Ll(e,t){au(e,t),au(e+"Capture",t)}function au(e,t){for(md[e]=t,e=0;e<t.length;e++)jS.add(t[e])}var Eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k_=Object.prototype.hasOwnProperty,wM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cw={},Ew={};function SM(e){return k_.call(Ew,e)?!0:k_.call(Cw,e)?!1:wM.test(e)?Ew[e]=!0:(Cw[e]=!0,!1)}function kM(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TM(e,t,i,a){if(t===null||typeof t>"u"||kM(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Si(e,t,i,a,h,g,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=h,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=g,this.removeEmptyString=p}var qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qr[e]=new Si(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qr[t]=new Si(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qr[e]=new Si(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qr[e]=new Si(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qr[e]=new Si(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qr[e]=new Si(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qr[e]=new Si(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qr[e]=new Si(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qr[e]=new Si(e,5,!1,e.toLowerCase(),null,!1,!1)});var n0=/[\-:]([a-z])/g;function r0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(n0,r0);qr[t]=new Si(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(n0,r0);qr[t]=new Si(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(n0,r0);qr[t]=new Si(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qr[e]=new Si(e,1,!1,e.toLowerCase(),null,!1,!1)});qr.xlinkHref=new Si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qr[e]=new Si(e,1,!1,e.toLowerCase(),null,!0,!0)});function i0(e,t,i,a){var h=qr.hasOwnProperty(t)?qr[t]:null;(h!==null?h.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TM(t,i,h,a)&&(i=null),a||h===null?SM(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):h.mustUseProperty?e[h.propertyName]=i===null?h.type===3?!1:"":i:(t=h.attributeName,a=h.attributeNamespace,i===null?e.removeAttribute(t):(h=h.type,i=h===3||h===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Do=bM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,np=Symbol.for("react.element"),Fc=Symbol.for("react.portal"),Oc=Symbol.for("react.fragment"),s0=Symbol.for("react.strict_mode"),T_=Symbol.for("react.profiler"),VS=Symbol.for("react.provider"),US=Symbol.for("react.context"),o0=Symbol.for("react.forward_ref"),C_=Symbol.for("react.suspense"),E_=Symbol.for("react.suspense_list"),a0=Symbol.for("react.memo"),_a=Symbol.for("react.lazy"),$S=Symbol.for("react.offscreen"),Pw=Symbol.iterator;function Lh(e){return e===null||typeof e!="object"?null:(e=Pw&&e[Pw]||e["@@iterator"],typeof e=="function"?e:null)}var Qn=Object.assign,Sy;function qh(e){if(Sy===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Sy=t&&t[1]||""}return`
`+Sy+e}var ky=!1;function Ty(e,t){if(!e||ky)return"";ky=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var a=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){a=E}e.call(t.prototype)}else{try{throw Error()}catch(E){a=E}e()}}catch(E){if(E&&a&&typeof E.stack=="string"){for(var h=E.stack.split(`
`),g=a.stack.split(`
`),p=h.length-1,c=g.length-1;1<=p&&0<=c&&h[p]!==g[c];)c--;for(;1<=p&&0<=c;p--,c--)if(h[p]!==g[c]){if(p!==1||c!==1)do if(p--,c--,0>c||h[p]!==g[c]){var S=`
`+h[p].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=p&&0<=c);break}}}finally{ky=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?qh(e):""}function CM(e){switch(e.tag){case 5:return qh(e.type);case 16:return qh("Lazy");case 13:return qh("Suspense");case 19:return qh("SuspenseList");case 0:case 2:case 15:return e=Ty(e.type,!1),e;case 11:return e=Ty(e.type.render,!1),e;case 1:return e=Ty(e.type,!0),e;default:return""}}function P_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oc:return"Fragment";case Fc:return"Portal";case T_:return"Profiler";case s0:return"StrictMode";case C_:return"Suspense";case E_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case US:return(e.displayName||"Context")+".Consumer";case VS:return(e._context.displayName||"Context")+".Provider";case o0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case a0:return t=e.displayName||null,t!==null?t:P_(e.type)||"Memo";case _a:t=e._payload,e=e._init;try{return P_(e(t))}catch{}}return null}function EM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P_(t);case 8:return t===s0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function za(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function HS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PM(e){var t=HS(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var h=i.get,g=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(p){a=""+p,g.call(this,p)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rp(e){e._valueTracker||(e._valueTracker=PM(e))}function GS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=HS(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Qp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function I_(e,t){var i=t.checked;return Qn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Iw(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=za(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WS(e,t){t=t.checked,t!=null&&i0(e,"checked",t,!1)}function A_(e,t){WS(e,t);var i=za(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?M_(e,t.type,i):t.hasOwnProperty("defaultValue")&&M_(e,t.type,za(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Aw(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function M_(e,t,i){(t!=="number"||Qp(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Zh=Array.isArray;function Qc(e,t,i,a){if(e=e.options,t){t={};for(var h=0;h<i.length;h++)t["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=t.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&a&&(e[i].defaultSelected=!0)}else{for(i=""+za(i),t=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,a&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function D_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Qn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mw(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Xe(92));if(Zh(i)){if(1<i.length)throw Error(Xe(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:za(i)}}function qS(e,t){var i=za(t.value),a=za(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Dw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ZS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function z_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ZS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ip,XS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,h){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ip=ip||document.createElement("div"),ip.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ip.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gd(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var ed={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IM=["Webkit","ms","Moz","O"];Object.keys(ed).forEach(function(e){IM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ed[t]=ed[e]})});function KS(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||ed.hasOwnProperty(e)&&ed[e]?(""+t).trim():t+"px"}function YS(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,h=KS(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,h):e[i]=h}}var AM=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function R_(e,t){if(t){if(AM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Xe(62))}}function L_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B_=null;function l0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var F_=null,eu=null,tu=null;function zw(e){if(e=Hd(e)){if(typeof F_!="function")throw Error(Xe(280));var t=e.stateNode;t&&(t=Om(t),F_(e.stateNode,e.type,t))}}function JS(e){eu?tu?tu.push(e):tu=[e]:eu=e}function QS(){if(eu){var e=eu,t=tu;if(tu=eu=null,zw(e),t)for(e=0;e<t.length;e++)zw(t[e])}}function ek(e,t){return e(t)}function tk(){}var Cy=!1;function nk(e,t,i){if(Cy)return e(t,i);Cy=!0;try{return ek(e,t,i)}finally{Cy=!1,(eu!==null||tu!==null)&&(tk(),QS())}}function yd(e,t){var i=e.stateNode;if(i===null)return null;var a=Om(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Xe(231,t,typeof i));return i}var O_=!1;if(Eo)try{var Bh={};Object.defineProperty(Bh,"passive",{get:function(){O_=!0}}),window.addEventListener("test",Bh,Bh),window.removeEventListener("test",Bh,Bh)}catch{O_=!1}function MM(e,t,i,a,h,g,p,c,S){var E=Array.prototype.slice.call(arguments,3);try{t.apply(i,E)}catch(P){this.onError(P)}}var td=!1,em=null,tm=!1,N_=null,DM={onError:function(e){td=!0,em=e}};function zM(e,t,i,a,h,g,p,c,S){td=!1,em=null,MM.apply(DM,arguments)}function RM(e,t,i,a,h,g,p,c,S){if(zM.apply(this,arguments),td){if(td){var E=em;td=!1,em=null}else throw Error(Xe(198));tm||(tm=!0,N_=E)}}function Bl(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function rk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rw(e){if(Bl(e)!==e)throw Error(Xe(188))}function LM(e){var t=e.alternate;if(!t){if(t=Bl(e),t===null)throw Error(Xe(188));return t!==e?null:e}for(var i=e,a=t;;){var h=i.return;if(h===null)break;var g=h.alternate;if(g===null){if(a=h.return,a!==null){i=a;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===i)return Rw(h),e;if(g===a)return Rw(h),t;g=g.sibling}throw Error(Xe(188))}if(i.return!==a.return)i=h,a=g;else{for(var p=!1,c=h.child;c;){if(c===i){p=!0,i=h,a=g;break}if(c===a){p=!0,a=h,i=g;break}c=c.sibling}if(!p){for(c=g.child;c;){if(c===i){p=!0,i=g,a=h;break}if(c===a){p=!0,a=g,i=h;break}c=c.sibling}if(!p)throw Error(Xe(189))}}if(i.alternate!==a)throw Error(Xe(190))}if(i.tag!==3)throw Error(Xe(188));return i.stateNode.current===i?e:t}function ik(e){return e=LM(e),e!==null?sk(e):null}function sk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sk(e);if(t!==null)return t;e=e.sibling}return null}var ok=rs.unstable_scheduleCallback,Lw=rs.unstable_cancelCallback,BM=rs.unstable_shouldYield,FM=rs.unstable_requestPaint,cr=rs.unstable_now,OM=rs.unstable_getCurrentPriorityLevel,c0=rs.unstable_ImmediatePriority,ak=rs.unstable_UserBlockingPriority,nm=rs.unstable_NormalPriority,NM=rs.unstable_LowPriority,lk=rs.unstable_IdlePriority,Rm=null,Js=null;function jM(e){if(Js&&typeof Js.onCommitFiberRoot=="function")try{Js.onCommitFiberRoot(Rm,e,void 0,(e.current.flags&128)===128)}catch{}}var Rs=Math.clz32?Math.clz32:$M,VM=Math.log,UM=Math.LN2;function $M(e){return e>>>=0,e===0?32:31-(VM(e)/UM|0)|0}var sp=64,op=4194304;function Xh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function rm(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,h=e.suspendedLanes,g=e.pingedLanes,p=i&268435455;if(p!==0){var c=p&~h;c!==0?a=Xh(c):(g&=p,g!==0&&(a=Xh(g)))}else p=i&~h,p!==0?a=Xh(p):g!==0&&(a=Xh(g));if(a===0)return 0;if(t!==0&&t!==a&&!(t&h)&&(h=a&-a,g=t&-t,h>=g||h===16&&(g&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Rs(t),h=1<<i,a|=e[i],t&=~h;return a}function HM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes;0<g;){var p=31-Rs(g),c=1<<p,S=h[p];S===-1?(!(c&i)||c&a)&&(h[p]=HM(c,t)):S<=t&&(e.expiredLanes|=c),g&=~c}}function j_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ck(){var e=sp;return sp<<=1,!(sp&4194240)&&(sp=64),e}function Ey(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ud(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rs(t),e[t]=i}function WM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var h=31-Rs(i),g=1<<h;t[h]=0,a[h]=-1,e[h]=-1,i&=~g}}function u0(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Rs(i),h=1<<a;h&t|e[a]&t&&(e[a]|=t),i&=~h}}var Cn=0;function uk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hk,h0,dk,fk,pk,V_=!1,ap=[],Ta=null,Ca=null,Ea=null,_d=new Map,vd=new Map,xa=[],qM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bw(e,t){switch(e){case"focusin":case"focusout":Ta=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":_d.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vd.delete(t.pointerId)}}function Fh(e,t,i,a,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:g,targetContainers:[h]},t!==null&&(t=Hd(t),t!==null&&h0(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function ZM(e,t,i,a,h){switch(t){case"focusin":return Ta=Fh(Ta,e,t,i,a,h),!0;case"dragenter":return Ca=Fh(Ca,e,t,i,a,h),!0;case"mouseover":return Ea=Fh(Ea,e,t,i,a,h),!0;case"pointerover":var g=h.pointerId;return _d.set(g,Fh(_d.get(g)||null,e,t,i,a,h)),!0;case"gotpointercapture":return g=h.pointerId,vd.set(g,Fh(vd.get(g)||null,e,t,i,a,h)),!0}return!1}function mk(e){var t=xl(e.target);if(t!==null){var i=Bl(t);if(i!==null){if(t=i.tag,t===13){if(t=rk(i),t!==null){e.blockedOn=t,pk(e.priority,function(){dk(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=U_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);B_=a,i.target.dispatchEvent(a),B_=null}else return t=Hd(i),t!==null&&h0(t),e.blockedOn=i,!1;t.shift()}return!0}function Fw(e,t,i){Bp(e)&&i.delete(t)}function XM(){V_=!1,Ta!==null&&Bp(Ta)&&(Ta=null),Ca!==null&&Bp(Ca)&&(Ca=null),Ea!==null&&Bp(Ea)&&(Ea=null),_d.forEach(Fw),vd.forEach(Fw)}function Oh(e,t){e.blockedOn===t&&(e.blockedOn=null,V_||(V_=!0,rs.unstable_scheduleCallback(rs.unstable_NormalPriority,XM)))}function xd(e){function t(h){return Oh(h,e)}if(0<ap.length){Oh(ap[0],e);for(var i=1;i<ap.length;i++){var a=ap[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Ta!==null&&Oh(Ta,e),Ca!==null&&Oh(Ca,e),Ea!==null&&Oh(Ea,e),_d.forEach(t),vd.forEach(t),i=0;i<xa.length;i++)a=xa[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<xa.length&&(i=xa[0],i.blockedOn===null);)mk(i),i.blockedOn===null&&xa.shift()}var nu=Do.ReactCurrentBatchConfig,im=!0;function KM(e,t,i,a){var h=Cn,g=nu.transition;nu.transition=null;try{Cn=1,d0(e,t,i,a)}finally{Cn=h,nu.transition=g}}function YM(e,t,i,a){var h=Cn,g=nu.transition;nu.transition=null;try{Cn=4,d0(e,t,i,a)}finally{Cn=h,nu.transition=g}}function d0(e,t,i,a){if(im){var h=U_(e,t,i,a);if(h===null)Fy(e,t,a,sm,i),Bw(e,a);else if(ZM(h,e,t,i,a))a.stopPropagation();else if(Bw(e,a),t&4&&-1<qM.indexOf(e)){for(;h!==null;){var g=Hd(h);if(g!==null&&hk(g),g=U_(e,t,i,a),g===null&&Fy(e,t,a,sm,i),g===h)break;h=g}h!==null&&a.stopPropagation()}else Fy(e,t,a,null,i)}}var sm=null;function U_(e,t,i,a){if(sm=null,e=l0(a),e=xl(e),e!==null)if(t=Bl(e),t===null)e=null;else if(i=t.tag,i===13){if(e=rk(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sm=e,null}function gk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OM()){case c0:return 1;case ak:return 4;case nm:case NM:return 16;case lk:return 536870912;default:return 16}default:return 16}}var wa=null,f0=null,Fp=null;function yk(){if(Fp)return Fp;var e,t=f0,i=t.length,a,h="value"in wa?wa.value:wa.textContent,g=h.length;for(e=0;e<i&&t[e]===h[e];e++);var p=i-e;for(a=1;a<=p&&t[i-a]===h[g-a];a++);return Fp=h.slice(e,1<a?1-a:void 0)}function Op(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lp(){return!0}function Ow(){return!1}function ss(e){function t(i,a,h,g,p){this._reactName=i,this._targetInst=h,this.type=a,this.nativeEvent=g,this.target=p,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(i=e[c],this[c]=i?i(g):g[c]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?lp:Ow,this.isPropagationStopped=Ow,this}return Qn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=lp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=lp)},persist:function(){},isPersistent:lp}),t}var vu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p0=ss(vu),$d=Qn({},vu,{view:0,detail:0}),JM=ss($d),Py,Iy,Nh,Lm=Qn({},$d,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nh&&(Nh&&e.type==="mousemove"?(Py=e.screenX-Nh.screenX,Iy=e.screenY-Nh.screenY):Iy=Py=0,Nh=e),Py)},movementY:function(e){return"movementY"in e?e.movementY:Iy}}),Nw=ss(Lm),QM=Qn({},Lm,{dataTransfer:0}),eD=ss(QM),tD=Qn({},$d,{relatedTarget:0}),Ay=ss(tD),nD=Qn({},vu,{animationName:0,elapsedTime:0,pseudoElement:0}),rD=ss(nD),iD=Qn({},vu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sD=ss(iD),oD=Qn({},vu,{data:0}),jw=ss(oD),aD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cD[e])?!!t[e]:!1}function m0(){return uD}var hD=Qn({},$d,{key:function(e){if(e.key){var t=aD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Op(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m0,charCode:function(e){return e.type==="keypress"?Op(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Op(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dD=ss(hD),fD=Qn({},Lm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vw=ss(fD),pD=Qn({},$d,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m0}),mD=ss(pD),gD=Qn({},vu,{propertyName:0,elapsedTime:0,pseudoElement:0}),yD=ss(gD),_D=Qn({},Lm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vD=ss(_D),xD=[9,13,27,32],g0=Eo&&"CompositionEvent"in window,nd=null;Eo&&"documentMode"in document&&(nd=document.documentMode);var bD=Eo&&"TextEvent"in window&&!nd,_k=Eo&&(!g0||nd&&8<nd&&11>=nd),Uw=" ",$w=!1;function vk(e,t){switch(e){case"keyup":return xD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nc=!1;function wD(e,t){switch(e){case"compositionend":return xk(t);case"keypress":return t.which!==32?null:($w=!0,Uw);case"textInput":return e=t.data,e===Uw&&$w?null:e;default:return null}}function SD(e,t){if(Nc)return e==="compositionend"||!g0&&vk(e,t)?(e=yk(),Fp=f0=wa=null,Nc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _k&&t.locale!=="ko"?null:t.data;default:return null}}var kD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kD[e.type]:t==="textarea"}function bk(e,t,i,a){JS(a),t=om(t,"onChange"),0<t.length&&(i=new p0("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var rd=null,bd=null;function TD(e){Dk(e,0)}function Bm(e){var t=Uc(e);if(GS(t))return e}function CD(e,t){if(e==="change")return t}var wk=!1;if(Eo){var My;if(Eo){var Dy="oninput"in document;if(!Dy){var Gw=document.createElement("div");Gw.setAttribute("oninput","return;"),Dy=typeof Gw.oninput=="function"}My=Dy}else My=!1;wk=My&&(!document.documentMode||9<document.documentMode)}function Ww(){rd&&(rd.detachEvent("onpropertychange",Sk),bd=rd=null)}function Sk(e){if(e.propertyName==="value"&&Bm(bd)){var t=[];bk(t,bd,e,l0(e)),nk(TD,t)}}function ED(e,t,i){e==="focusin"?(Ww(),rd=t,bd=i,rd.attachEvent("onpropertychange",Sk)):e==="focusout"&&Ww()}function PD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bm(bd)}function ID(e,t){if(e==="click")return Bm(t)}function AD(e,t){if(e==="input"||e==="change")return Bm(t)}function MD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fs=typeof Object.is=="function"?Object.is:MD;function wd(e,t){if(Fs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var h=i[a];if(!k_.call(t,h)||!Fs(e[h],t[h]))return!1}return!0}function qw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zw(e,t){var i=qw(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=qw(i)}}function kk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tk(){for(var e=window,t=Qp();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Qp(e.document)}return t}function y0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function DD(e){var t=Tk(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&kk(i.ownerDocument.documentElement,i)){if(a!==null&&y0(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=i.textContent.length,g=Math.min(a.start,h);a=a.end===void 0?g:Math.min(a.end,h),!e.extend&&g>a&&(h=a,a=g,g=h),h=Zw(i,g);var p=Zw(i,a);h&&p&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),g>a?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zD=Eo&&"documentMode"in document&&11>=document.documentMode,jc=null,$_=null,id=null,H_=!1;function Xw(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;H_||jc==null||jc!==Qp(a)||(a=jc,"selectionStart"in a&&y0(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),id&&wd(id,a)||(id=a,a=om($_,"onSelect"),0<a.length&&(t=new p0("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=jc)))}function cp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Vc={animationend:cp("Animation","AnimationEnd"),animationiteration:cp("Animation","AnimationIteration"),animationstart:cp("Animation","AnimationStart"),transitionend:cp("Transition","TransitionEnd")},zy={},Ck={};Eo&&(Ck=document.createElement("div").style,"AnimationEvent"in window||(delete Vc.animationend.animation,delete Vc.animationiteration.animation,delete Vc.animationstart.animation),"TransitionEvent"in window||delete Vc.transitionend.transition);function Fm(e){if(zy[e])return zy[e];if(!Vc[e])return e;var t=Vc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Ck)return zy[e]=t[i];return e}var Ek=Fm("animationend"),Pk=Fm("animationiteration"),Ik=Fm("animationstart"),Ak=Fm("transitionend"),Mk=new Map,Kw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fa(e,t){Mk.set(e,t),Ll(t,[e])}for(var Ry=0;Ry<Kw.length;Ry++){var Ly=Kw[Ry],RD=Ly.toLowerCase(),LD=Ly[0].toUpperCase()+Ly.slice(1);Fa(RD,"on"+LD)}Fa(Ek,"onAnimationEnd");Fa(Pk,"onAnimationIteration");Fa(Ik,"onAnimationStart");Fa("dblclick","onDoubleClick");Fa("focusin","onFocus");Fa("focusout","onBlur");Fa(Ak,"onTransitionEnd");au("onMouseEnter",["mouseout","mouseover"]);au("onMouseLeave",["mouseout","mouseover"]);au("onPointerEnter",["pointerout","pointerover"]);au("onPointerLeave",["pointerout","pointerover"]);Ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ll("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kh));function Yw(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,RM(a,t,void 0,e),e.currentTarget=null}function Dk(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],h=a.event;a=a.listeners;e:{var g=void 0;if(t)for(var p=a.length-1;0<=p;p--){var c=a[p],S=c.instance,E=c.currentTarget;if(c=c.listener,S!==g&&h.isPropagationStopped())break e;Yw(h,c,E),g=S}else for(p=0;p<a.length;p++){if(c=a[p],S=c.instance,E=c.currentTarget,c=c.listener,S!==g&&h.isPropagationStopped())break e;Yw(h,c,E),g=S}}}if(tm)throw e=N_,tm=!1,N_=null,e}function On(e,t){var i=t[X_];i===void 0&&(i=t[X_]=new Set);var a=e+"__bubble";i.has(a)||(zk(t,e,2,!1),i.add(a))}function By(e,t,i){var a=0;t&&(a|=4),zk(i,e,a,t)}var up="_reactListening"+Math.random().toString(36).slice(2);function Sd(e){if(!e[up]){e[up]=!0,jS.forEach(function(i){i!=="selectionchange"&&(BD.has(i)||By(i,!1,e),By(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[up]||(t[up]=!0,By("selectionchange",!1,t))}}function zk(e,t,i,a){switch(gk(t)){case 1:var h=KM;break;case 4:h=YM;break;default:h=d0}i=h.bind(null,t,i,e),h=void 0,!O_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),a?h!==void 0?e.addEventListener(t,i,{capture:!0,passive:h}):e.addEventListener(t,i,!0):h!==void 0?e.addEventListener(t,i,{passive:h}):e.addEventListener(t,i,!1)}function Fy(e,t,i,a,h){var g=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var p=a.tag;if(p===3||p===4){var c=a.stateNode.containerInfo;if(c===h||c.nodeType===8&&c.parentNode===h)break;if(p===4)for(p=a.return;p!==null;){var S=p.tag;if((S===3||S===4)&&(S=p.stateNode.containerInfo,S===h||S.nodeType===8&&S.parentNode===h))return;p=p.return}for(;c!==null;){if(p=xl(c),p===null)return;if(S=p.tag,S===5||S===6){a=g=p;continue e}c=c.parentNode}}a=a.return}nk(function(){var E=g,P=l0(i),T=[];e:{var A=Mk.get(e);if(A!==void 0){var $=p0,X=e;switch(e){case"keypress":if(Op(i)===0)break e;case"keydown":case"keyup":$=dD;break;case"focusin":X="focus",$=Ay;break;case"focusout":X="blur",$=Ay;break;case"beforeblur":case"afterblur":$=Ay;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Nw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=eD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=mD;break;case Ek:case Pk:case Ik:$=rD;break;case Ak:$=yD;break;case"scroll":$=JM;break;case"wheel":$=vD;break;case"copy":case"cut":case"paste":$=sD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Vw}var G=(t&4)!==0,ne=!G&&e==="scroll",F=G?A!==null?A+"Capture":null:A;G=[];for(var V=E,H;V!==null;){H=V;var ee=H.stateNode;if(H.tag===5&&ee!==null&&(H=ee,F!==null&&(ee=yd(V,F),ee!=null&&G.push(kd(V,ee,H)))),ne)break;V=V.return}0<G.length&&(A=new $(A,X,null,i,P),T.push({event:A,listeners:G}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",A&&i!==B_&&(X=i.relatedTarget||i.fromElement)&&(xl(X)||X[Po]))break e;if(($||A)&&(A=P.window===P?P:(A=P.ownerDocument)?A.defaultView||A.parentWindow:window,$?(X=i.relatedTarget||i.toElement,$=E,X=X?xl(X):null,X!==null&&(ne=Bl(X),X!==ne||X.tag!==5&&X.tag!==6)&&(X=null)):($=null,X=E),$!==X)){if(G=Nw,ee="onMouseLeave",F="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(G=Vw,ee="onPointerLeave",F="onPointerEnter",V="pointer"),ne=$==null?A:Uc($),H=X==null?A:Uc(X),A=new G(ee,V+"leave",$,i,P),A.target=ne,A.relatedTarget=H,ee=null,xl(P)===E&&(G=new G(F,V+"enter",X,i,P),G.target=H,G.relatedTarget=ne,ee=G),ne=ee,$&&X)t:{for(G=$,F=X,V=0,H=G;H;H=Mc(H))V++;for(H=0,ee=F;ee;ee=Mc(ee))H++;for(;0<V-H;)G=Mc(G),V--;for(;0<H-V;)F=Mc(F),H--;for(;V--;){if(G===F||F!==null&&G===F.alternate)break t;G=Mc(G),F=Mc(F)}G=null}else G=null;$!==null&&Jw(T,A,$,G,!1),X!==null&&ne!==null&&Jw(T,ne,X,G,!0)}}e:{if(A=E?Uc(E):window,$=A.nodeName&&A.nodeName.toLowerCase(),$==="select"||$==="input"&&A.type==="file")var ye=CD;else if(Hw(A))if(wk)ye=AD;else{ye=PD;var be=ED}else($=A.nodeName)&&$.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(ye=ID);if(ye&&(ye=ye(e,E))){bk(T,ye,i,P);break e}be&&be(e,A,E),e==="focusout"&&(be=A._wrapperState)&&be.controlled&&A.type==="number"&&M_(A,"number",A.value)}switch(be=E?Uc(E):window,e){case"focusin":(Hw(be)||be.contentEditable==="true")&&(jc=be,$_=E,id=null);break;case"focusout":id=$_=jc=null;break;case"mousedown":H_=!0;break;case"contextmenu":case"mouseup":case"dragend":H_=!1,Xw(T,i,P);break;case"selectionchange":if(zD)break;case"keydown":case"keyup":Xw(T,i,P)}var fe;if(g0)e:{switch(e){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else Nc?vk(e,i)&&(le="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(le="onCompositionStart");le&&(_k&&i.locale!=="ko"&&(Nc||le!=="onCompositionStart"?le==="onCompositionEnd"&&Nc&&(fe=yk()):(wa=P,f0="value"in wa?wa.value:wa.textContent,Nc=!0)),be=om(E,le),0<be.length&&(le=new jw(le,e,null,i,P),T.push({event:le,listeners:be}),fe?le.data=fe:(fe=xk(i),fe!==null&&(le.data=fe)))),(fe=bD?wD(e,i):SD(e,i))&&(E=om(E,"onBeforeInput"),0<E.length&&(P=new jw("onBeforeInput","beforeinput",null,i,P),T.push({event:P,listeners:E}),P.data=fe))}Dk(T,t)})}function kd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function om(e,t){for(var i=t+"Capture",a=[];e!==null;){var h=e,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=yd(e,i),g!=null&&a.unshift(kd(e,g,h)),g=yd(e,t),g!=null&&a.push(kd(e,g,h))),e=e.return}return a}function Mc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jw(e,t,i,a,h){for(var g=t._reactName,p=[];i!==null&&i!==a;){var c=i,S=c.alternate,E=c.stateNode;if(S!==null&&S===a)break;c.tag===5&&E!==null&&(c=E,h?(S=yd(i,g),S!=null&&p.unshift(kd(i,S,c))):h||(S=yd(i,g),S!=null&&p.push(kd(i,S,c)))),i=i.return}p.length!==0&&e.push({event:t,listeners:p})}var FD=/\r\n?/g,OD=/\u0000|\uFFFD/g;function Qw(e){return(typeof e=="string"?e:""+e).replace(FD,`
`).replace(OD,"")}function hp(e,t,i){if(t=Qw(t),Qw(e)!==t&&i)throw Error(Xe(425))}function am(){}var G_=null,W_=null;function q_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Z_=typeof setTimeout=="function"?setTimeout:void 0,ND=typeof clearTimeout=="function"?clearTimeout:void 0,e1=typeof Promise=="function"?Promise:void 0,jD=typeof queueMicrotask=="function"?queueMicrotask:typeof e1<"u"?function(e){return e1.resolve(null).then(e).catch(VD)}:Z_;function VD(e){setTimeout(function(){throw e})}function Oy(e,t){var i=t,a=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(a===0){e.removeChild(h),xd(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=h}while(i);xd(t)}function Pa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function t1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var xu=Math.random().toString(36).slice(2),Ks="__reactFiber$"+xu,Td="__reactProps$"+xu,Po="__reactContainer$"+xu,X_="__reactEvents$"+xu,UD="__reactListeners$"+xu,$D="__reactHandles$"+xu;function xl(e){var t=e[Ks];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Po]||i[Ks]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=t1(e);e!==null;){if(i=e[Ks])return i;e=t1(e)}return t}e=i,i=e.parentNode}return null}function Hd(e){return e=e[Ks]||e[Po],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Uc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Xe(33))}function Om(e){return e[Td]||null}var K_=[],$c=-1;function Oa(e){return{current:e}}function Nn(e){0>$c||(e.current=K_[$c],K_[$c]=null,$c--)}function Ln(e,t){$c++,K_[$c]=e.current,e.current=t}var Ra={},ai=Oa(Ra),Oi=Oa(!1),Pl=Ra;function lu(e,t){var i=e.type.contextTypes;if(!i)return Ra;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in i)h[g]=t[g];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function Ni(e){return e=e.childContextTypes,e!=null}function lm(){Nn(Oi),Nn(ai)}function n1(e,t,i){if(ai.current!==Ra)throw Error(Xe(168));Ln(ai,t),Ln(Oi,i)}function Rk(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var h in a)if(!(h in t))throw Error(Xe(108,EM(e)||"Unknown",h));return Qn({},i,a)}function cm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ra,Pl=ai.current,Ln(ai,e),Ln(Oi,Oi.current),!0}function r1(e,t,i){var a=e.stateNode;if(!a)throw Error(Xe(169));i?(e=Rk(e,t,Pl),a.__reactInternalMemoizedMergedChildContext=e,Nn(Oi),Nn(ai),Ln(ai,e)):Nn(Oi),Ln(Oi,i)}var wo=null,Nm=!1,Ny=!1;function Lk(e){wo===null?wo=[e]:wo.push(e)}function HD(e){Nm=!0,Lk(e)}function Na(){if(!Ny&&wo!==null){Ny=!0;var e=0,t=Cn;try{var i=wo;for(Cn=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}wo=null,Nm=!1}catch(h){throw wo!==null&&(wo=wo.slice(e+1)),ok(c0,Na),h}finally{Cn=t,Ny=!1}}return null}var Hc=[],Gc=0,um=null,hm=0,ps=[],ms=0,Il=null,So=1,ko="";function yl(e,t){Hc[Gc++]=hm,Hc[Gc++]=um,um=e,hm=t}function Bk(e,t,i){ps[ms++]=So,ps[ms++]=ko,ps[ms++]=Il,Il=e;var a=So;e=ko;var h=32-Rs(a)-1;a&=~(1<<h),i+=1;var g=32-Rs(t)+h;if(30<g){var p=h-h%5;g=(a&(1<<p)-1).toString(32),a>>=p,h-=p,So=1<<32-Rs(t)+h|i<<h|a,ko=g+e}else So=1<<g|i<<h|a,ko=e}function _0(e){e.return!==null&&(yl(e,1),Bk(e,1,0))}function v0(e){for(;e===um;)um=Hc[--Gc],Hc[Gc]=null,hm=Hc[--Gc],Hc[Gc]=null;for(;e===Il;)Il=ps[--ms],ps[ms]=null,ko=ps[--ms],ps[ms]=null,So=ps[--ms],ps[ms]=null}var ns=null,ts=null,Hn=!1,Ds=null;function Fk(e,t){var i=gs(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function i1(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ns=e,ts=Pa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ns=e,ts=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Il!==null?{id:So,overflow:ko}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=gs(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,ns=e,ts=null,!0):!1;default:return!1}}function Y_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function J_(e){if(Hn){var t=ts;if(t){var i=t;if(!i1(e,t)){if(Y_(e))throw Error(Xe(418));t=Pa(i.nextSibling);var a=ns;t&&i1(e,t)?Fk(a,i):(e.flags=e.flags&-4097|2,Hn=!1,ns=e)}}else{if(Y_(e))throw Error(Xe(418));e.flags=e.flags&-4097|2,Hn=!1,ns=e}}}function s1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ns=e}function dp(e){if(e!==ns)return!1;if(!Hn)return s1(e),Hn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!q_(e.type,e.memoizedProps)),t&&(t=ts)){if(Y_(e))throw Ok(),Error(Xe(418));for(;t;)Fk(e,t),t=Pa(t.nextSibling)}if(s1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ts=Pa(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ts=null}}else ts=ns?Pa(e.stateNode.nextSibling):null;return!0}function Ok(){for(var e=ts;e;)e=Pa(e.nextSibling)}function cu(){ts=ns=null,Hn=!1}function x0(e){Ds===null?Ds=[e]:Ds.push(e)}var GD=Do.ReactCurrentBatchConfig;function jh(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Xe(309));var a=i.stateNode}if(!a)throw Error(Xe(147,e));var h=a,g=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===g?t.ref:(t=function(p){var c=h.refs;p===null?delete c[g]:c[g]=p},t._stringRef=g,t)}if(typeof e!="string")throw Error(Xe(284));if(!i._owner)throw Error(Xe(290,e))}return e}function fp(e,t){throw e=Object.prototype.toString.call(t),Error(Xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function o1(e){var t=e._init;return t(e._payload)}function Nk(e){function t(F,V){if(e){var H=F.deletions;H===null?(F.deletions=[V],F.flags|=16):H.push(V)}}function i(F,V){if(!e)return null;for(;V!==null;)t(F,V),V=V.sibling;return null}function a(F,V){for(F=new Map;V!==null;)V.key!==null?F.set(V.key,V):F.set(V.index,V),V=V.sibling;return F}function h(F,V){return F=Da(F,V),F.index=0,F.sibling=null,F}function g(F,V,H){return F.index=H,e?(H=F.alternate,H!==null?(H=H.index,H<V?(F.flags|=2,V):H):(F.flags|=2,V)):(F.flags|=1048576,V)}function p(F){return e&&F.alternate===null&&(F.flags|=2),F}function c(F,V,H,ee){return V===null||V.tag!==6?(V=Wy(H,F.mode,ee),V.return=F,V):(V=h(V,H),V.return=F,V)}function S(F,V,H,ee){var ye=H.type;return ye===Oc?P(F,V,H.props.children,ee,H.key):V!==null&&(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===_a&&o1(ye)===V.type)?(ee=h(V,H.props),ee.ref=jh(F,V,H),ee.return=F,ee):(ee=Gp(H.type,H.key,H.props,null,F.mode,ee),ee.ref=jh(F,V,H),ee.return=F,ee)}function E(F,V,H,ee){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=qy(H,F.mode,ee),V.return=F,V):(V=h(V,H.children||[]),V.return=F,V)}function P(F,V,H,ee,ye){return V===null||V.tag!==7?(V=Cl(H,F.mode,ee,ye),V.return=F,V):(V=h(V,H),V.return=F,V)}function T(F,V,H){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Wy(""+V,F.mode,H),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case np:return H=Gp(V.type,V.key,V.props,null,F.mode,H),H.ref=jh(F,null,V),H.return=F,H;case Fc:return V=qy(V,F.mode,H),V.return=F,V;case _a:var ee=V._init;return T(F,ee(V._payload),H)}if(Zh(V)||Lh(V))return V=Cl(V,F.mode,H,null),V.return=F,V;fp(F,V)}return null}function A(F,V,H,ee){var ye=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return ye!==null?null:c(F,V,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case np:return H.key===ye?S(F,V,H,ee):null;case Fc:return H.key===ye?E(F,V,H,ee):null;case _a:return ye=H._init,A(F,V,ye(H._payload),ee)}if(Zh(H)||Lh(H))return ye!==null?null:P(F,V,H,ee,null);fp(F,H)}return null}function $(F,V,H,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return F=F.get(H)||null,c(V,F,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case np:return F=F.get(ee.key===null?H:ee.key)||null,S(V,F,ee,ye);case Fc:return F=F.get(ee.key===null?H:ee.key)||null,E(V,F,ee,ye);case _a:var be=ee._init;return $(F,V,H,be(ee._payload),ye)}if(Zh(ee)||Lh(ee))return F=F.get(H)||null,P(V,F,ee,ye,null);fp(V,ee)}return null}function X(F,V,H,ee){for(var ye=null,be=null,fe=V,le=V=0,we=null;fe!==null&&le<H.length;le++){fe.index>le?(we=fe,fe=null):we=fe.sibling;var Le=A(F,fe,H[le],ee);if(Le===null){fe===null&&(fe=we);break}e&&fe&&Le.alternate===null&&t(F,fe),V=g(Le,V,le),be===null?ye=Le:be.sibling=Le,be=Le,fe=we}if(le===H.length)return i(F,fe),Hn&&yl(F,le),ye;if(fe===null){for(;le<H.length;le++)fe=T(F,H[le],ee),fe!==null&&(V=g(fe,V,le),be===null?ye=fe:be.sibling=fe,be=fe);return Hn&&yl(F,le),ye}for(fe=a(F,fe);le<H.length;le++)we=$(fe,F,le,H[le],ee),we!==null&&(e&&we.alternate!==null&&fe.delete(we.key===null?le:we.key),V=g(we,V,le),be===null?ye=we:be.sibling=we,be=we);return e&&fe.forEach(function(ze){return t(F,ze)}),Hn&&yl(F,le),ye}function G(F,V,H,ee){var ye=Lh(H);if(typeof ye!="function")throw Error(Xe(150));if(H=ye.call(H),H==null)throw Error(Xe(151));for(var be=ye=null,fe=V,le=V=0,we=null,Le=H.next();fe!==null&&!Le.done;le++,Le=H.next()){fe.index>le?(we=fe,fe=null):we=fe.sibling;var ze=A(F,fe,Le.value,ee);if(ze===null){fe===null&&(fe=we);break}e&&fe&&ze.alternate===null&&t(F,fe),V=g(ze,V,le),be===null?ye=ze:be.sibling=ze,be=ze,fe=we}if(Le.done)return i(F,fe),Hn&&yl(F,le),ye;if(fe===null){for(;!Le.done;le++,Le=H.next())Le=T(F,Le.value,ee),Le!==null&&(V=g(Le,V,le),be===null?ye=Le:be.sibling=Le,be=Le);return Hn&&yl(F,le),ye}for(fe=a(F,fe);!Le.done;le++,Le=H.next())Le=$(fe,F,le,Le.value,ee),Le!==null&&(e&&Le.alternate!==null&&fe.delete(Le.key===null?le:Le.key),V=g(Le,V,le),be===null?ye=Le:be.sibling=Le,be=Le);return e&&fe.forEach(function(Ne){return t(F,Ne)}),Hn&&yl(F,le),ye}function ne(F,V,H,ee){if(typeof H=="object"&&H!==null&&H.type===Oc&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case np:e:{for(var ye=H.key,be=V;be!==null;){if(be.key===ye){if(ye=H.type,ye===Oc){if(be.tag===7){i(F,be.sibling),V=h(be,H.props.children),V.return=F,F=V;break e}}else if(be.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===_a&&o1(ye)===be.type){i(F,be.sibling),V=h(be,H.props),V.ref=jh(F,be,H),V.return=F,F=V;break e}i(F,be);break}else t(F,be);be=be.sibling}H.type===Oc?(V=Cl(H.props.children,F.mode,ee,H.key),V.return=F,F=V):(ee=Gp(H.type,H.key,H.props,null,F.mode,ee),ee.ref=jh(F,V,H),ee.return=F,F=ee)}return p(F);case Fc:e:{for(be=H.key;V!==null;){if(V.key===be)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){i(F,V.sibling),V=h(V,H.children||[]),V.return=F,F=V;break e}else{i(F,V);break}else t(F,V);V=V.sibling}V=qy(H,F.mode,ee),V.return=F,F=V}return p(F);case _a:return be=H._init,ne(F,V,be(H._payload),ee)}if(Zh(H))return X(F,V,H,ee);if(Lh(H))return G(F,V,H,ee);fp(F,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,V!==null&&V.tag===6?(i(F,V.sibling),V=h(V,H),V.return=F,F=V):(i(F,V),V=Wy(H,F.mode,ee),V.return=F,F=V),p(F)):i(F,V)}return ne}var uu=Nk(!0),jk=Nk(!1),dm=Oa(null),fm=null,Wc=null,b0=null;function w0(){b0=Wc=fm=null}function S0(e){var t=dm.current;Nn(dm),e._currentValue=t}function Q_(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function ru(e,t){fm=e,b0=Wc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Li=!0),e.firstContext=null)}function xs(e){var t=e._currentValue;if(b0!==e)if(e={context:e,memoizedValue:t,next:null},Wc===null){if(fm===null)throw Error(Xe(308));Wc=e,fm.dependencies={lanes:0,firstContext:e}}else Wc=Wc.next=e;return t}var bl=null;function k0(e){bl===null?bl=[e]:bl.push(e)}function Vk(e,t,i,a){var h=t.interleaved;return h===null?(i.next=i,k0(t)):(i.next=h.next,h.next=i),t.interleaved=i,Io(e,a)}function Io(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var va=!1;function T0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function To(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,pn&2){var h=a.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),a.pending=t,Io(e,i)}return h=a.interleaved,h===null?(t.next=t,k0(a)):(t.next=h.next,h.next=t),a.interleaved=t,Io(e,i)}function Np(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,u0(e,i)}}function a1(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var h=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var p={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};g===null?h=g=p:g=g.next=p,i=i.next}while(i!==null);g===null?h=g=t:g=g.next=t}else h=g=t;i={baseState:a.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function pm(e,t,i,a){var h=e.updateQueue;va=!1;var g=h.firstBaseUpdate,p=h.lastBaseUpdate,c=h.shared.pending;if(c!==null){h.shared.pending=null;var S=c,E=S.next;S.next=null,p===null?g=E:p.next=E,p=S;var P=e.alternate;P!==null&&(P=P.updateQueue,c=P.lastBaseUpdate,c!==p&&(c===null?P.firstBaseUpdate=E:c.next=E,P.lastBaseUpdate=S))}if(g!==null){var T=h.baseState;p=0,P=E=S=null,c=g;do{var A=c.lane,$=c.eventTime;if((a&A)===A){P!==null&&(P=P.next={eventTime:$,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var X=e,G=c;switch(A=t,$=i,G.tag){case 1:if(X=G.payload,typeof X=="function"){T=X.call($,T,A);break e}T=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=G.payload,A=typeof X=="function"?X.call($,T,A):X,A==null)break e;T=Qn({},T,A);break e;case 2:va=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,A=h.effects,A===null?h.effects=[c]:A.push(c))}else $={eventTime:$,lane:A,tag:c.tag,payload:c.payload,callback:c.callback,next:null},P===null?(E=P=$,S=T):P=P.next=$,p|=A;if(c=c.next,c===null){if(c=h.shared.pending,c===null)break;A=c,c=A.next,A.next=null,h.lastBaseUpdate=A,h.shared.pending=null}}while(!0);if(P===null&&(S=T),h.baseState=S,h.firstBaseUpdate=E,h.lastBaseUpdate=P,t=h.shared.interleaved,t!==null){h=t;do p|=h.lane,h=h.next;while(h!==t)}else g===null&&(h.shared.lanes=0);Ml|=p,e.lanes=p,e.memoizedState=T}}function l1(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],h=a.callback;if(h!==null){if(a.callback=null,a=i,typeof h!="function")throw Error(Xe(191,h));h.call(a)}}}var Gd={},Qs=Oa(Gd),Cd=Oa(Gd),Ed=Oa(Gd);function wl(e){if(e===Gd)throw Error(Xe(174));return e}function C0(e,t){switch(Ln(Ed,t),Ln(Cd,e),Ln(Qs,Gd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:z_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=z_(t,e)}Nn(Qs),Ln(Qs,t)}function hu(){Nn(Qs),Nn(Cd),Nn(Ed)}function $k(e){wl(Ed.current);var t=wl(Qs.current),i=z_(t,e.type);t!==i&&(Ln(Cd,e),Ln(Qs,i))}function E0(e){Cd.current===e&&(Nn(Qs),Nn(Cd))}var Xn=Oa(0);function mm(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jy=[];function P0(){for(var e=0;e<jy.length;e++)jy[e]._workInProgressVersionPrimary=null;jy.length=0}var jp=Do.ReactCurrentDispatcher,Vy=Do.ReactCurrentBatchConfig,Al=0,Jn=null,Cr=null,Fr=null,gm=!1,sd=!1,Pd=0,WD=0;function ri(){throw Error(Xe(321))}function I0(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Fs(e[i],t[i]))return!1;return!0}function A0(e,t,i,a,h,g){if(Al=g,Jn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jp.current=e===null||e.memoizedState===null?KD:YD,e=i(a,h),sd){g=0;do{if(sd=!1,Pd=0,25<=g)throw Error(Xe(301));g+=1,Fr=Cr=null,t.updateQueue=null,jp.current=JD,e=i(a,h)}while(sd)}if(jp.current=ym,t=Cr!==null&&Cr.next!==null,Al=0,Fr=Cr=Jn=null,gm=!1,t)throw Error(Xe(300));return e}function M0(){var e=Pd!==0;return Pd=0,e}function Xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Jn.memoizedState=Fr=e:Fr=Fr.next=e,Fr}function bs(){if(Cr===null){var e=Jn.alternate;e=e!==null?e.memoizedState:null}else e=Cr.next;var t=Fr===null?Jn.memoizedState:Fr.next;if(t!==null)Fr=t,Cr=e;else{if(e===null)throw Error(Xe(310));Cr=e,e={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Fr===null?Jn.memoizedState=Fr=e:Fr=Fr.next=e}return Fr}function Id(e,t){return typeof t=="function"?t(e):t}function Uy(e){var t=bs(),i=t.queue;if(i===null)throw Error(Xe(311));i.lastRenderedReducer=e;var a=Cr,h=a.baseQueue,g=i.pending;if(g!==null){if(h!==null){var p=h.next;h.next=g.next,g.next=p}a.baseQueue=h=g,i.pending=null}if(h!==null){g=h.next,a=a.baseState;var c=p=null,S=null,E=g;do{var P=E.lane;if((Al&P)===P)S!==null&&(S=S.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),a=E.hasEagerState?E.eagerState:e(a,E.action);else{var T={lane:P,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};S===null?(c=S=T,p=a):S=S.next=T,Jn.lanes|=P,Ml|=P}E=E.next}while(E!==null&&E!==g);S===null?p=a:S.next=c,Fs(a,t.memoizedState)||(Li=!0),t.memoizedState=a,t.baseState=p,t.baseQueue=S,i.lastRenderedState=a}if(e=i.interleaved,e!==null){h=e;do g=h.lane,Jn.lanes|=g,Ml|=g,h=h.next;while(h!==e)}else h===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function $y(e){var t=bs(),i=t.queue;if(i===null)throw Error(Xe(311));i.lastRenderedReducer=e;var a=i.dispatch,h=i.pending,g=t.memoizedState;if(h!==null){i.pending=null;var p=h=h.next;do g=e(g,p.action),p=p.next;while(p!==h);Fs(g,t.memoizedState)||(Li=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),i.lastRenderedState=g}return[g,a]}function Hk(){}function Gk(e,t){var i=Jn,a=bs(),h=t(),g=!Fs(a.memoizedState,h);if(g&&(a.memoizedState=h,Li=!0),a=a.queue,D0(Zk.bind(null,i,a,e),[e]),a.getSnapshot!==t||g||Fr!==null&&Fr.memoizedState.tag&1){if(i.flags|=2048,Ad(9,qk.bind(null,i,a,h,t),void 0,null),Or===null)throw Error(Xe(349));Al&30||Wk(i,t,h)}return h}function Wk(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Jn.updateQueue,t===null?(t={lastEffect:null,stores:null},Jn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function qk(e,t,i,a){t.value=i,t.getSnapshot=a,Xk(t)&&Kk(e)}function Zk(e,t,i){return i(function(){Xk(t)&&Kk(e)})}function Xk(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Fs(e,i)}catch{return!0}}function Kk(e){var t=Io(e,1);t!==null&&Ls(t,e,1,-1)}function c1(e){var t=Xs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:e},t.queue=e,e=e.dispatch=XD.bind(null,Jn,e),[t.memoizedState,e]}function Ad(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Jn.updateQueue,t===null?(t={lastEffect:null,stores:null},Jn.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function Yk(){return bs().memoizedState}function Vp(e,t,i,a){var h=Xs();Jn.flags|=e,h.memoizedState=Ad(1|t,i,void 0,a===void 0?null:a)}function jm(e,t,i,a){var h=bs();a=a===void 0?null:a;var g=void 0;if(Cr!==null){var p=Cr.memoizedState;if(g=p.destroy,a!==null&&I0(a,p.deps)){h.memoizedState=Ad(t,i,g,a);return}}Jn.flags|=e,h.memoizedState=Ad(1|t,i,g,a)}function u1(e,t){return Vp(8390656,8,e,t)}function D0(e,t){return jm(2048,8,e,t)}function Jk(e,t){return jm(4,2,e,t)}function Qk(e,t){return jm(4,4,e,t)}function eT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tT(e,t,i){return i=i!=null?i.concat([e]):null,jm(4,4,eT.bind(null,t,e),i)}function z0(){}function nT(e,t){var i=bs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&I0(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function rT(e,t){var i=bs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&I0(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function iT(e,t,i){return Al&21?(Fs(i,t)||(i=ck(),Jn.lanes|=i,Ml|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Li=!0),e.memoizedState=i)}function qD(e,t){var i=Cn;Cn=i!==0&&4>i?i:4,e(!0);var a=Vy.transition;Vy.transition={};try{e(!1),t()}finally{Cn=i,Vy.transition=a}}function sT(){return bs().memoizedState}function ZD(e,t,i){var a=Ma(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},oT(e))aT(t,i);else if(i=Vk(e,t,i,a),i!==null){var h=xi();Ls(i,e,a,h),lT(i,t,a)}}function XD(e,t,i){var a=Ma(e),h={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(oT(e))aT(t,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var p=t.lastRenderedState,c=g(p,i);if(h.hasEagerState=!0,h.eagerState=c,Fs(c,p)){var S=t.interleaved;S===null?(h.next=h,k0(t)):(h.next=S.next,S.next=h),t.interleaved=h;return}}catch{}finally{}i=Vk(e,t,h,a),i!==null&&(h=xi(),Ls(i,e,a,h),lT(i,t,a))}}function oT(e){var t=e.alternate;return e===Jn||t!==null&&t===Jn}function aT(e,t){sd=gm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function lT(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,u0(e,i)}}var ym={readContext:xs,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},KD={readContext:xs,useCallback:function(e,t){return Xs().memoizedState=[e,t===void 0?null:t],e},useContext:xs,useEffect:u1,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Vp(4194308,4,eT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Vp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vp(4,2,e,t)},useMemo:function(e,t){var i=Xs();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=Xs();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=ZD.bind(null,Jn,e),[a.memoizedState,e]},useRef:function(e){var t=Xs();return e={current:e},t.memoizedState=e},useState:c1,useDebugValue:z0,useDeferredValue:function(e){return Xs().memoizedState=e},useTransition:function(){var e=c1(!1),t=e[0];return e=qD.bind(null,e[1]),Xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Jn,h=Xs();if(Hn){if(i===void 0)throw Error(Xe(407));i=i()}else{if(i=t(),Or===null)throw Error(Xe(349));Al&30||Wk(a,t,i)}h.memoizedState=i;var g={value:i,getSnapshot:t};return h.queue=g,u1(Zk.bind(null,a,g,e),[e]),a.flags|=2048,Ad(9,qk.bind(null,a,g,i,t),void 0,null),i},useId:function(){var e=Xs(),t=Or.identifierPrefix;if(Hn){var i=ko,a=So;i=(a&~(1<<32-Rs(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Pd++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=WD++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},YD={readContext:xs,useCallback:nT,useContext:xs,useEffect:D0,useImperativeHandle:tT,useInsertionEffect:Jk,useLayoutEffect:Qk,useMemo:rT,useReducer:Uy,useRef:Yk,useState:function(){return Uy(Id)},useDebugValue:z0,useDeferredValue:function(e){var t=bs();return iT(t,Cr.memoizedState,e)},useTransition:function(){var e=Uy(Id)[0],t=bs().memoizedState;return[e,t]},useMutableSource:Hk,useSyncExternalStore:Gk,useId:sT,unstable_isNewReconciler:!1},JD={readContext:xs,useCallback:nT,useContext:xs,useEffect:D0,useImperativeHandle:tT,useInsertionEffect:Jk,useLayoutEffect:Qk,useMemo:rT,useReducer:$y,useRef:Yk,useState:function(){return $y(Id)},useDebugValue:z0,useDeferredValue:function(e){var t=bs();return Cr===null?t.memoizedState=e:iT(t,Cr.memoizedState,e)},useTransition:function(){var e=$y(Id)[0],t=bs().memoizedState;return[e,t]},useMutableSource:Hk,useSyncExternalStore:Gk,useId:sT,unstable_isNewReconciler:!1};function As(e,t){if(e&&e.defaultProps){t=Qn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function ev(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Qn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Vm={isMounted:function(e){return(e=e._reactInternals)?Bl(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=xi(),h=Ma(e),g=To(a,h);g.payload=t,i!=null&&(g.callback=i),t=Ia(e,g,h),t!==null&&(Ls(t,e,h,a),Np(t,e,h))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=xi(),h=Ma(e),g=To(a,h);g.tag=1,g.payload=t,i!=null&&(g.callback=i),t=Ia(e,g,h),t!==null&&(Ls(t,e,h,a),Np(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=xi(),a=Ma(e),h=To(i,a);h.tag=2,t!=null&&(h.callback=t),t=Ia(e,h,a),t!==null&&(Ls(t,e,a,i),Np(t,e,a))}};function h1(e,t,i,a,h,g,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,g,p):t.prototype&&t.prototype.isPureReactComponent?!wd(i,a)||!wd(h,g):!0}function cT(e,t,i){var a=!1,h=Ra,g=t.contextType;return typeof g=="object"&&g!==null?g=xs(g):(h=Ni(t)?Pl:ai.current,a=t.contextTypes,g=(a=a!=null)?lu(e,h):Ra),t=new t(i,g),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vm,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=g),t}function d1(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&Vm.enqueueReplaceState(t,t.state,null)}function tv(e,t,i,a){var h=e.stateNode;h.props=i,h.state=e.memoizedState,h.refs={},T0(e);var g=t.contextType;typeof g=="object"&&g!==null?h.context=xs(g):(g=Ni(t)?Pl:ai.current,h.context=lu(e,g)),h.state=e.memoizedState,g=t.getDerivedStateFromProps,typeof g=="function"&&(ev(e,t,g,i),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&Vm.enqueueReplaceState(h,h.state,null),pm(e,i,h,a),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function du(e,t){try{var i="",a=t;do i+=CM(a),a=a.return;while(a);var h=i}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:t,stack:h,digest:null}}function Hy(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function nv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var QD=typeof WeakMap=="function"?WeakMap:Map;function uT(e,t,i){i=To(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){vm||(vm=!0,dv=a),nv(e,t)},i}function hT(e,t,i){i=To(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var h=t.value;i.payload=function(){return a(h)},i.callback=function(){nv(e,t)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(i.callback=function(){nv(e,t),typeof a!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),i}function f1(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new QD;var h=new Set;a.set(t,h)}else h=a.get(t),h===void 0&&(h=new Set,a.set(t,h));h.has(i)||(h.add(i),e=fz.bind(null,e,t,i),t.then(e,e))}function p1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function m1(e,t,i,a,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=To(-1,1),t.tag=2,Ia(i,t,1))),i.lanes|=1),e)}var ez=Do.ReactCurrentOwner,Li=!1;function yi(e,t,i,a){t.child=e===null?jk(t,null,i,a):uu(t,e.child,i,a)}function g1(e,t,i,a,h){i=i.render;var g=t.ref;return ru(t,h),a=A0(e,t,i,a,g,h),i=M0(),e!==null&&!Li?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Ao(e,t,h)):(Hn&&i&&_0(t),t.flags|=1,yi(e,t,a,h),t.child)}function y1(e,t,i,a,h){if(e===null){var g=i.type;return typeof g=="function"&&!V0(g)&&g.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=g,dT(e,t,g,a,h)):(e=Gp(i.type,null,a,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!(e.lanes&h)){var p=g.memoizedProps;if(i=i.compare,i=i!==null?i:wd,i(p,a)&&e.ref===t.ref)return Ao(e,t,h)}return t.flags|=1,e=Da(g,a),e.ref=t.ref,e.return=t,t.child=e}function dT(e,t,i,a,h){if(e!==null){var g=e.memoizedProps;if(wd(g,a)&&e.ref===t.ref)if(Li=!1,t.pendingProps=a=g,(e.lanes&h)!==0)e.flags&131072&&(Li=!0);else return t.lanes=e.lanes,Ao(e,t,h)}return rv(e,t,i,a,h)}function fT(e,t,i){var a=t.pendingProps,h=a.children,g=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ln(Zc,es),es|=i;else{if(!(i&1073741824))return e=g!==null?g.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ln(Zc,es),es|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=g!==null?g.baseLanes:i,Ln(Zc,es),es|=a}else g!==null?(a=g.baseLanes|i,t.memoizedState=null):a=i,Ln(Zc,es),es|=a;return yi(e,t,h,i),t.child}function pT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function rv(e,t,i,a,h){var g=Ni(i)?Pl:ai.current;return g=lu(t,g),ru(t,h),i=A0(e,t,i,a,g,h),a=M0(),e!==null&&!Li?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Ao(e,t,h)):(Hn&&a&&_0(t),t.flags|=1,yi(e,t,i,h),t.child)}function _1(e,t,i,a,h){if(Ni(i)){var g=!0;cm(t)}else g=!1;if(ru(t,h),t.stateNode===null)Up(e,t),cT(t,i,a),tv(t,i,a,h),a=!0;else if(e===null){var p=t.stateNode,c=t.memoizedProps;p.props=c;var S=p.context,E=i.contextType;typeof E=="object"&&E!==null?E=xs(E):(E=Ni(i)?Pl:ai.current,E=lu(t,E));var P=i.getDerivedStateFromProps,T=typeof P=="function"||typeof p.getSnapshotBeforeUpdate=="function";T||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(c!==a||S!==E)&&d1(t,p,a,E),va=!1;var A=t.memoizedState;p.state=A,pm(t,a,p,h),S=t.memoizedState,c!==a||A!==S||Oi.current||va?(typeof P=="function"&&(ev(t,i,P,a),S=t.memoizedState),(c=va||h1(t,i,c,a,A,S,E))?(T||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=S),p.props=a,p.state=S,p.context=E,a=c):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{p=t.stateNode,Uk(e,t),c=t.memoizedProps,E=t.type===t.elementType?c:As(t.type,c),p.props=E,T=t.pendingProps,A=p.context,S=i.contextType,typeof S=="object"&&S!==null?S=xs(S):(S=Ni(i)?Pl:ai.current,S=lu(t,S));var $=i.getDerivedStateFromProps;(P=typeof $=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(c!==T||A!==S)&&d1(t,p,a,S),va=!1,A=t.memoizedState,p.state=A,pm(t,a,p,h);var X=t.memoizedState;c!==T||A!==X||Oi.current||va?(typeof $=="function"&&(ev(t,i,$,a),X=t.memoizedState),(E=va||h1(t,i,E,a,A,X,S)||!1)?(P||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(a,X,S),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(a,X,S)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=X),p.props=a,p.state=X,p.context=S,a=E):(typeof p.componentDidUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),a=!1)}return iv(e,t,i,a,g,h)}function iv(e,t,i,a,h,g){pT(e,t);var p=(t.flags&128)!==0;if(!a&&!p)return h&&r1(t,i,!1),Ao(e,t,g);a=t.stateNode,ez.current=t;var c=p&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&p?(t.child=uu(t,e.child,null,g),t.child=uu(t,null,c,g)):yi(e,t,c,g),t.memoizedState=a.state,h&&r1(t,i,!0),t.child}function mT(e){var t=e.stateNode;t.pendingContext?n1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&n1(e,t.context,!1),C0(e,t.containerInfo)}function v1(e,t,i,a,h){return cu(),x0(h),t.flags|=256,yi(e,t,i,a),t.child}var sv={dehydrated:null,treeContext:null,retryLane:0};function ov(e){return{baseLanes:e,cachePool:null,transitions:null}}function gT(e,t,i){var a=t.pendingProps,h=Xn.current,g=!1,p=(t.flags&128)!==0,c;if((c=p)||(c=e!==null&&e.memoizedState===null?!1:(h&2)!==0),c?(g=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Ln(Xn,h&1),e===null)return J_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=a.children,e=a.fallback,g?(a=t.mode,g=t.child,p={mode:"hidden",children:p},!(a&1)&&g!==null?(g.childLanes=0,g.pendingProps=p):g=Hm(p,a,0,null),e=Cl(e,a,i,null),g.return=t,e.return=t,g.sibling=e,t.child=g,t.child.memoizedState=ov(i),t.memoizedState=sv,e):R0(t,p));if(h=e.memoizedState,h!==null&&(c=h.dehydrated,c!==null))return tz(e,t,p,a,c,h,i);if(g){g=a.fallback,p=t.mode,h=e.child,c=h.sibling;var S={mode:"hidden",children:a.children};return!(p&1)&&t.child!==h?(a=t.child,a.childLanes=0,a.pendingProps=S,t.deletions=null):(a=Da(h,S),a.subtreeFlags=h.subtreeFlags&14680064),c!==null?g=Da(c,g):(g=Cl(g,p,i,null),g.flags|=2),g.return=t,a.return=t,a.sibling=g,t.child=a,a=g,g=t.child,p=e.child.memoizedState,p=p===null?ov(i):{baseLanes:p.baseLanes|i,cachePool:null,transitions:p.transitions},g.memoizedState=p,g.childLanes=e.childLanes&~i,t.memoizedState=sv,a}return g=e.child,e=g.sibling,a=Da(g,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function R0(e,t){return t=Hm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pp(e,t,i,a){return a!==null&&x0(a),uu(t,e.child,null,i),e=R0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tz(e,t,i,a,h,g,p){if(i)return t.flags&256?(t.flags&=-257,a=Hy(Error(Xe(422))),pp(e,t,p,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(g=a.fallback,h=t.mode,a=Hm({mode:"visible",children:a.children},h,0,null),g=Cl(g,h,p,null),g.flags|=2,a.return=t,g.return=t,a.sibling=g,t.child=a,t.mode&1&&uu(t,e.child,null,p),t.child.memoizedState=ov(p),t.memoizedState=sv,g);if(!(t.mode&1))return pp(e,t,p,null);if(h.data==="$!"){if(a=h.nextSibling&&h.nextSibling.dataset,a)var c=a.dgst;return a=c,g=Error(Xe(419)),a=Hy(g,a,void 0),pp(e,t,p,a)}if(c=(p&e.childLanes)!==0,Li||c){if(a=Or,a!==null){switch(p&-p){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(a.suspendedLanes|p)?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,Io(e,h),Ls(a,e,h,-1))}return j0(),a=Hy(Error(Xe(421))),pp(e,t,p,a)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=pz.bind(null,e),h._reactRetry=t,null):(e=g.treeContext,ts=Pa(h.nextSibling),ns=t,Hn=!0,Ds=null,e!==null&&(ps[ms++]=So,ps[ms++]=ko,ps[ms++]=Il,So=e.id,ko=e.overflow,Il=t),t=R0(t,a.children),t.flags|=4096,t)}function x1(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Q_(e.return,t,i)}function Gy(e,t,i,a,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:h}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=a,g.tail=i,g.tailMode=h)}function yT(e,t,i){var a=t.pendingProps,h=a.revealOrder,g=a.tail;if(yi(e,t,a.children,i),a=Xn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&x1(e,i,t);else if(e.tag===19)x1(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ln(Xn,a),!(t.mode&1))t.memoizedState=null;else switch(h){case"forwards":for(i=t.child,h=null;i!==null;)e=i.alternate,e!==null&&mm(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=t.child,t.child=null):(h=i.sibling,i.sibling=null),Gy(t,!1,h,i,g);break;case"backwards":for(i=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&mm(e)===null){t.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}Gy(t,!0,i,null,g);break;case"together":Gy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Up(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ao(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ml|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Xe(153));if(t.child!==null){for(e=t.child,i=Da(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Da(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function nz(e,t,i){switch(t.tag){case 3:mT(t),cu();break;case 5:$k(t);break;case 1:Ni(t.type)&&cm(t);break;case 4:C0(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,h=t.memoizedProps.value;Ln(dm,a._currentValue),a._currentValue=h;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Ln(Xn,Xn.current&1),t.flags|=128,null):i&t.child.childLanes?gT(e,t,i):(Ln(Xn,Xn.current&1),e=Ao(e,t,i),e!==null?e.sibling:null);Ln(Xn,Xn.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return yT(e,t,i);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ln(Xn,Xn.current),a)break;return null;case 22:case 23:return t.lanes=0,fT(e,t,i)}return Ao(e,t,i)}var _T,av,vT,xT;_T=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};av=function(){};vT=function(e,t,i,a){var h=e.memoizedProps;if(h!==a){e=t.stateNode,wl(Qs.current);var g=null;switch(i){case"input":h=I_(e,h),a=I_(e,a),g=[];break;case"select":h=Qn({},h,{value:void 0}),a=Qn({},a,{value:void 0}),g=[];break;case"textarea":h=D_(e,h),a=D_(e,a),g=[];break;default:typeof h.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=am)}R_(i,a);var p;i=null;for(E in h)if(!a.hasOwnProperty(E)&&h.hasOwnProperty(E)&&h[E]!=null)if(E==="style"){var c=h[E];for(p in c)c.hasOwnProperty(p)&&(i||(i={}),i[p]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(md.hasOwnProperty(E)?g||(g=[]):(g=g||[]).push(E,null));for(E in a){var S=a[E];if(c=h!=null?h[E]:void 0,a.hasOwnProperty(E)&&S!==c&&(S!=null||c!=null))if(E==="style")if(c){for(p in c)!c.hasOwnProperty(p)||S&&S.hasOwnProperty(p)||(i||(i={}),i[p]="");for(p in S)S.hasOwnProperty(p)&&c[p]!==S[p]&&(i||(i={}),i[p]=S[p])}else i||(g||(g=[]),g.push(E,i)),i=S;else E==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,c=c?c.__html:void 0,S!=null&&c!==S&&(g=g||[]).push(E,S)):E==="children"?typeof S!="string"&&typeof S!="number"||(g=g||[]).push(E,""+S):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(md.hasOwnProperty(E)?(S!=null&&E==="onScroll"&&On("scroll",e),g||c===S||(g=[])):(g=g||[]).push(E,S))}i&&(g=g||[]).push("style",i);var E=g;(t.updateQueue=E)&&(t.flags|=4)}};xT=function(e,t,i,a){i!==a&&(t.flags|=4)};function Vh(e,t){if(!Hn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ii(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,a|=h.subtreeFlags&14680064,a|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,a|=h.subtreeFlags,a|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function rz(e,t,i){var a=t.pendingProps;switch(v0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(t),null;case 1:return Ni(t.type)&&lm(),ii(t),null;case 3:return a=t.stateNode,hu(),Nn(Oi),Nn(ai),P0(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(dp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ds!==null&&(mv(Ds),Ds=null))),av(e,t),ii(t),null;case 5:E0(t);var h=wl(Ed.current);if(i=t.type,e!==null&&t.stateNode!=null)vT(e,t,i,a,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Xe(166));return ii(t),null}if(e=wl(Qs.current),dp(t)){a=t.stateNode,i=t.type;var g=t.memoizedProps;switch(a[Ks]=t,a[Td]=g,e=(t.mode&1)!==0,i){case"dialog":On("cancel",a),On("close",a);break;case"iframe":case"object":case"embed":On("load",a);break;case"video":case"audio":for(h=0;h<Kh.length;h++)On(Kh[h],a);break;case"source":On("error",a);break;case"img":case"image":case"link":On("error",a),On("load",a);break;case"details":On("toggle",a);break;case"input":Iw(a,g),On("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!g.multiple},On("invalid",a);break;case"textarea":Mw(a,g),On("invalid",a)}R_(i,g),h=null;for(var p in g)if(g.hasOwnProperty(p)){var c=g[p];p==="children"?typeof c=="string"?a.textContent!==c&&(g.suppressHydrationWarning!==!0&&hp(a.textContent,c,e),h=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(g.suppressHydrationWarning!==!0&&hp(a.textContent,c,e),h=["children",""+c]):md.hasOwnProperty(p)&&c!=null&&p==="onScroll"&&On("scroll",a)}switch(i){case"input":rp(a),Aw(a,g,!0);break;case"textarea":rp(a),Dw(a);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(a.onclick=am)}a=h,t.updateQueue=a,a!==null&&(t.flags|=4)}else{p=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ZS(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=p.createElement(i,{is:a.is}):(e=p.createElement(i),i==="select"&&(p=e,a.multiple?p.multiple=!0:a.size&&(p.size=a.size))):e=p.createElementNS(e,i),e[Ks]=t,e[Td]=a,_T(e,t,!1,!1),t.stateNode=e;e:{switch(p=L_(i,a),i){case"dialog":On("cancel",e),On("close",e),h=a;break;case"iframe":case"object":case"embed":On("load",e),h=a;break;case"video":case"audio":for(h=0;h<Kh.length;h++)On(Kh[h],e);h=a;break;case"source":On("error",e),h=a;break;case"img":case"image":case"link":On("error",e),On("load",e),h=a;break;case"details":On("toggle",e),h=a;break;case"input":Iw(e,a),h=I_(e,a),On("invalid",e);break;case"option":h=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},h=Qn({},a,{value:void 0}),On("invalid",e);break;case"textarea":Mw(e,a),h=D_(e,a),On("invalid",e);break;default:h=a}R_(i,h),c=h;for(g in c)if(c.hasOwnProperty(g)){var S=c[g];g==="style"?YS(e,S):g==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&XS(e,S)):g==="children"?typeof S=="string"?(i!=="textarea"||S!=="")&&gd(e,S):typeof S=="number"&&gd(e,""+S):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(md.hasOwnProperty(g)?S!=null&&g==="onScroll"&&On("scroll",e):S!=null&&i0(e,g,S,p))}switch(i){case"input":rp(e),Aw(e,a,!1);break;case"textarea":rp(e),Dw(e);break;case"option":a.value!=null&&e.setAttribute("value",""+za(a.value));break;case"select":e.multiple=!!a.multiple,g=a.value,g!=null?Qc(e,!!a.multiple,g,!1):a.defaultValue!=null&&Qc(e,!!a.multiple,a.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=am)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ii(t),null;case 6:if(e&&t.stateNode!=null)xT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Xe(166));if(i=wl(Ed.current),wl(Qs.current),dp(t)){if(a=t.stateNode,i=t.memoizedProps,a[Ks]=t,(g=a.nodeValue!==i)&&(e=ns,e!==null))switch(e.tag){case 3:hp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hp(a.nodeValue,i,(e.mode&1)!==0)}g&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Ks]=t,t.stateNode=a}return ii(t),null;case 13:if(Nn(Xn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Hn&&ts!==null&&t.mode&1&&!(t.flags&128))Ok(),cu(),t.flags|=98560,g=!1;else if(g=dp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!g)throw Error(Xe(318));if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(Xe(317));g[Ks]=t}else cu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ii(t),g=!1}else Ds!==null&&(mv(Ds),Ds=null),g=!0;if(!g)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Xn.current&1?Er===0&&(Er=3):j0())),t.updateQueue!==null&&(t.flags|=4),ii(t),null);case 4:return hu(),av(e,t),e===null&&Sd(t.stateNode.containerInfo),ii(t),null;case 10:return S0(t.type._context),ii(t),null;case 17:return Ni(t.type)&&lm(),ii(t),null;case 19:if(Nn(Xn),g=t.memoizedState,g===null)return ii(t),null;if(a=(t.flags&128)!==0,p=g.rendering,p===null)if(a)Vh(g,!1);else{if(Er!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=mm(e),p!==null){for(t.flags|=128,Vh(g,!1),a=p.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)g=i,e=a,g.flags&=14680066,p=g.alternate,p===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=p.childLanes,g.lanes=p.lanes,g.child=p.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=p.memoizedProps,g.memoizedState=p.memoizedState,g.updateQueue=p.updateQueue,g.type=p.type,e=p.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ln(Xn,Xn.current&1|2),t.child}e=e.sibling}g.tail!==null&&cr()>fu&&(t.flags|=128,a=!0,Vh(g,!1),t.lanes=4194304)}else{if(!a)if(e=mm(p),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Vh(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!Hn)return ii(t),null}else 2*cr()-g.renderingStartTime>fu&&i!==1073741824&&(t.flags|=128,a=!0,Vh(g,!1),t.lanes=4194304);g.isBackwards?(p.sibling=t.child,t.child=p):(i=g.last,i!==null?i.sibling=p:t.child=p,g.last=p)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=cr(),t.sibling=null,i=Xn.current,Ln(Xn,a?i&1|2:i&1),t):(ii(t),null);case 22:case 23:return N0(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?es&1073741824&&(ii(t),t.subtreeFlags&6&&(t.flags|=8192)):ii(t),null;case 24:return null;case 25:return null}throw Error(Xe(156,t.tag))}function iz(e,t){switch(v0(t),t.tag){case 1:return Ni(t.type)&&lm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hu(),Nn(Oi),Nn(ai),P0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return E0(t),null;case 13:if(Nn(Xn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Xe(340));cu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Nn(Xn),null;case 4:return hu(),null;case 10:return S0(t.type._context),null;case 22:case 23:return N0(),null;case 24:return null;default:return null}}var mp=!1,si=!1,sz=typeof WeakSet=="function"?WeakSet:Set,kt=null;function qc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){or(e,t,a)}else i.current=null}function lv(e,t,i){try{i()}catch(a){or(e,t,a)}}var b1=!1;function oz(e,t){if(G_=im,e=Tk(),y0(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var h=a.anchorOffset,g=a.focusNode;a=a.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var p=0,c=-1,S=-1,E=0,P=0,T=e,A=null;t:for(;;){for(var $;T!==i||h!==0&&T.nodeType!==3||(c=p+h),T!==g||a!==0&&T.nodeType!==3||(S=p+a),T.nodeType===3&&(p+=T.nodeValue.length),($=T.firstChild)!==null;)A=T,T=$;for(;;){if(T===e)break t;if(A===i&&++E===h&&(c=p),A===g&&++P===a&&(S=p),($=T.nextSibling)!==null)break;T=A,A=T.parentNode}T=$}i=c===-1||S===-1?null:{start:c,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(W_={focusedElem:e,selectionRange:i},im=!1,kt=t;kt!==null;)if(t=kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,kt=e;else for(;kt!==null;){t=kt;try{var X=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var G=X.memoizedProps,ne=X.memoizedState,F=t.stateNode,V=F.getSnapshotBeforeUpdate(t.elementType===t.type?G:As(t.type,G),ne);F.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(ee){or(t,t.return,ee)}if(e=t.sibling,e!==null){e.return=t.return,kt=e;break}kt=t.return}return X=b1,b1=!1,X}function od(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&e)===e){var g=h.destroy;h.destroy=void 0,g!==void 0&&lv(t,i,g)}h=h.next}while(h!==a)}}function Um(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function cv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function bT(e){var t=e.alternate;t!==null&&(e.alternate=null,bT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ks],delete t[Td],delete t[X_],delete t[UD],delete t[$D])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wT(e){return e.tag===5||e.tag===3||e.tag===4}function w1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=am));else if(a!==4&&(e=e.child,e!==null))for(uv(e,t,i),e=e.sibling;e!==null;)uv(e,t,i),e=e.sibling}function hv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(hv(e,t,i),e=e.sibling;e!==null;)hv(e,t,i),e=e.sibling}var Hr=null,Ms=!1;function pa(e,t,i){for(i=i.child;i!==null;)ST(e,t,i),i=i.sibling}function ST(e,t,i){if(Js&&typeof Js.onCommitFiberUnmount=="function")try{Js.onCommitFiberUnmount(Rm,i)}catch{}switch(i.tag){case 5:si||qc(i,t);case 6:var a=Hr,h=Ms;Hr=null,pa(e,t,i),Hr=a,Ms=h,Hr!==null&&(Ms?(e=Hr,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Hr.removeChild(i.stateNode));break;case 18:Hr!==null&&(Ms?(e=Hr,i=i.stateNode,e.nodeType===8?Oy(e.parentNode,i):e.nodeType===1&&Oy(e,i),xd(e)):Oy(Hr,i.stateNode));break;case 4:a=Hr,h=Ms,Hr=i.stateNode.containerInfo,Ms=!0,pa(e,t,i),Hr=a,Ms=h;break;case 0:case 11:case 14:case 15:if(!si&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){h=a=a.next;do{var g=h,p=g.destroy;g=g.tag,p!==void 0&&(g&2||g&4)&&lv(i,t,p),h=h.next}while(h!==a)}pa(e,t,i);break;case 1:if(!si&&(qc(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(c){or(i,t,c)}pa(e,t,i);break;case 21:pa(e,t,i);break;case 22:i.mode&1?(si=(a=si)||i.memoizedState!==null,pa(e,t,i),si=a):pa(e,t,i);break;default:pa(e,t,i)}}function S1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new sz),t.forEach(function(a){var h=mz.bind(null,e,a);i.has(a)||(i.add(a),a.then(h,h))})}}function Es(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var h=i[a];try{var g=e,p=t,c=p;e:for(;c!==null;){switch(c.tag){case 5:Hr=c.stateNode,Ms=!1;break e;case 3:Hr=c.stateNode.containerInfo,Ms=!0;break e;case 4:Hr=c.stateNode.containerInfo,Ms=!0;break e}c=c.return}if(Hr===null)throw Error(Xe(160));ST(g,p,h),Hr=null,Ms=!1;var S=h.alternate;S!==null&&(S.return=null),h.return=null}catch(E){or(h,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kT(t,e),t=t.sibling}function kT(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Es(t,e),qs(e),a&4){try{od(3,e,e.return),Um(3,e)}catch(G){or(e,e.return,G)}try{od(5,e,e.return)}catch(G){or(e,e.return,G)}}break;case 1:Es(t,e),qs(e),a&512&&i!==null&&qc(i,i.return);break;case 5:if(Es(t,e),qs(e),a&512&&i!==null&&qc(i,i.return),e.flags&32){var h=e.stateNode;try{gd(h,"")}catch(G){or(e,e.return,G)}}if(a&4&&(h=e.stateNode,h!=null)){var g=e.memoizedProps,p=i!==null?i.memoizedProps:g,c=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{c==="input"&&g.type==="radio"&&g.name!=null&&WS(h,g),L_(c,p);var E=L_(c,g);for(p=0;p<S.length;p+=2){var P=S[p],T=S[p+1];P==="style"?YS(h,T):P==="dangerouslySetInnerHTML"?XS(h,T):P==="children"?gd(h,T):i0(h,P,T,E)}switch(c){case"input":A_(h,g);break;case"textarea":qS(h,g);break;case"select":var A=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var $=g.value;$!=null?Qc(h,!!g.multiple,$,!1):A!==!!g.multiple&&(g.defaultValue!=null?Qc(h,!!g.multiple,g.defaultValue,!0):Qc(h,!!g.multiple,g.multiple?[]:"",!1))}h[Td]=g}catch(G){or(e,e.return,G)}}break;case 6:if(Es(t,e),qs(e),a&4){if(e.stateNode===null)throw Error(Xe(162));h=e.stateNode,g=e.memoizedProps;try{h.nodeValue=g}catch(G){or(e,e.return,G)}}break;case 3:if(Es(t,e),qs(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{xd(t.containerInfo)}catch(G){or(e,e.return,G)}break;case 4:Es(t,e),qs(e);break;case 13:Es(t,e),qs(e),h=e.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(F0=cr())),a&4&&S1(e);break;case 22:if(P=i!==null&&i.memoizedState!==null,e.mode&1?(si=(E=si)||P,Es(t,e),si=E):Es(t,e),qs(e),a&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!P&&e.mode&1)for(kt=e,P=e.child;P!==null;){for(T=kt=P;kt!==null;){switch(A=kt,$=A.child,A.tag){case 0:case 11:case 14:case 15:od(4,A,A.return);break;case 1:qc(A,A.return);var X=A.stateNode;if(typeof X.componentWillUnmount=="function"){a=A,i=A.return;try{t=a,X.props=t.memoizedProps,X.state=t.memoizedState,X.componentWillUnmount()}catch(G){or(a,i,G)}}break;case 5:qc(A,A.return);break;case 22:if(A.memoizedState!==null){T1(T);continue}}$!==null?($.return=A,kt=$):T1(T)}P=P.sibling}e:for(P=null,T=e;;){if(T.tag===5){if(P===null){P=T;try{h=T.stateNode,E?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(c=T.stateNode,S=T.memoizedProps.style,p=S!=null&&S.hasOwnProperty("display")?S.display:null,c.style.display=KS("display",p))}catch(G){or(e,e.return,G)}}}else if(T.tag===6){if(P===null)try{T.stateNode.nodeValue=E?"":T.memoizedProps}catch(G){or(e,e.return,G)}}else if((T.tag!==22&&T.tag!==23||T.memoizedState===null||T===e)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===e)break e;for(;T.sibling===null;){if(T.return===null||T.return===e)break e;P===T&&(P=null),T=T.return}P===T&&(P=null),T.sibling.return=T.return,T=T.sibling}}break;case 19:Es(t,e),qs(e),a&4&&S1(e);break;case 21:break;default:Es(t,e),qs(e)}}function qs(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(wT(i)){var a=i;break e}i=i.return}throw Error(Xe(160))}switch(a.tag){case 5:var h=a.stateNode;a.flags&32&&(gd(h,""),a.flags&=-33);var g=w1(e);hv(e,g,h);break;case 3:case 4:var p=a.stateNode.containerInfo,c=w1(e);uv(e,c,p);break;default:throw Error(Xe(161))}}catch(S){or(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function az(e,t,i){kt=e,TT(e)}function TT(e,t,i){for(var a=(e.mode&1)!==0;kt!==null;){var h=kt,g=h.child;if(h.tag===22&&a){var p=h.memoizedState!==null||mp;if(!p){var c=h.alternate,S=c!==null&&c.memoizedState!==null||si;c=mp;var E=si;if(mp=p,(si=S)&&!E)for(kt=h;kt!==null;)p=kt,S=p.child,p.tag===22&&p.memoizedState!==null?C1(h):S!==null?(S.return=p,kt=S):C1(h);for(;g!==null;)kt=g,TT(g),g=g.sibling;kt=h,mp=c,si=E}k1(e)}else h.subtreeFlags&8772&&g!==null?(g.return=h,kt=g):k1(e)}}function k1(e){for(;kt!==null;){var t=kt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:si||Um(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!si)if(i===null)a.componentDidMount();else{var h=t.elementType===t.type?i.memoizedProps:As(t.type,i.memoizedProps);a.componentDidUpdate(h,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var g=t.updateQueue;g!==null&&l1(t,g,a);break;case 3:var p=t.updateQueue;if(p!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}l1(t,p,i)}break;case 5:var c=t.stateNode;if(i===null&&t.flags&4){i=c;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&i.focus();break;case"img":S.src&&(i.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var P=E.memoizedState;if(P!==null){var T=P.dehydrated;T!==null&&xd(T)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}si||t.flags&512&&cv(t)}catch(A){or(t,t.return,A)}}if(t===e){kt=null;break}if(i=t.sibling,i!==null){i.return=t.return,kt=i;break}kt=t.return}}function T1(e){for(;kt!==null;){var t=kt;if(t===e){kt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,kt=i;break}kt=t.return}}function C1(e){for(;kt!==null;){var t=kt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Um(4,t)}catch(S){or(t,i,S)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var h=t.return;try{a.componentDidMount()}catch(S){or(t,h,S)}}var g=t.return;try{cv(t)}catch(S){or(t,g,S)}break;case 5:var p=t.return;try{cv(t)}catch(S){or(t,p,S)}}}catch(S){or(t,t.return,S)}if(t===e){kt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,kt=c;break}kt=t.return}}var lz=Math.ceil,_m=Do.ReactCurrentDispatcher,L0=Do.ReactCurrentOwner,_s=Do.ReactCurrentBatchConfig,pn=0,Or=null,_r=null,Wr=0,es=0,Zc=Oa(0),Er=0,Md=null,Ml=0,$m=0,B0=0,ad=null,Ri=null,F0=0,fu=1/0,bo=null,vm=!1,dv=null,Aa=null,gp=!1,Sa=null,xm=0,ld=0,fv=null,$p=-1,Hp=0;function xi(){return pn&6?cr():$p!==-1?$p:$p=cr()}function Ma(e){return e.mode&1?pn&2&&Wr!==0?Wr&-Wr:GD.transition!==null?(Hp===0&&(Hp=ck()),Hp):(e=Cn,e!==0||(e=window.event,e=e===void 0?16:gk(e.type)),e):1}function Ls(e,t,i,a){if(50<ld)throw ld=0,fv=null,Error(Xe(185));Ud(e,i,a),(!(pn&2)||e!==Or)&&(e===Or&&(!(pn&2)&&($m|=i),Er===4&&ba(e,Wr)),ji(e,a),i===1&&pn===0&&!(t.mode&1)&&(fu=cr()+500,Nm&&Na()))}function ji(e,t){var i=e.callbackNode;GM(e,t);var a=rm(e,e===Or?Wr:0);if(a===0)i!==null&&Lw(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Lw(i),t===1)e.tag===0?HD(E1.bind(null,e)):Lk(E1.bind(null,e)),jD(function(){!(pn&6)&&Na()}),i=null;else{switch(uk(a)){case 1:i=c0;break;case 4:i=ak;break;case 16:i=nm;break;case 536870912:i=lk;break;default:i=nm}i=zT(i,CT.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function CT(e,t){if($p=-1,Hp=0,pn&6)throw Error(Xe(327));var i=e.callbackNode;if(iu()&&e.callbackNode!==i)return null;var a=rm(e,e===Or?Wr:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=bm(e,a);else{t=a;var h=pn;pn|=2;var g=PT();(Or!==e||Wr!==t)&&(bo=null,fu=cr()+500,Tl(e,t));do try{hz();break}catch(c){ET(e,c)}while(!0);w0(),_m.current=g,pn=h,_r!==null?t=0:(Or=null,Wr=0,t=Er)}if(t!==0){if(t===2&&(h=j_(e),h!==0&&(a=h,t=pv(e,h))),t===1)throw i=Md,Tl(e,0),ba(e,a),ji(e,cr()),i;if(t===6)ba(e,a);else{if(h=e.current.alternate,!(a&30)&&!cz(h)&&(t=bm(e,a),t===2&&(g=j_(e),g!==0&&(a=g,t=pv(e,g))),t===1))throw i=Md,Tl(e,0),ba(e,a),ji(e,cr()),i;switch(e.finishedWork=h,e.finishedLanes=a,t){case 0:case 1:throw Error(Xe(345));case 2:_l(e,Ri,bo);break;case 3:if(ba(e,a),(a&130023424)===a&&(t=F0+500-cr(),10<t)){if(rm(e,0)!==0)break;if(h=e.suspendedLanes,(h&a)!==a){xi(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Z_(_l.bind(null,e,Ri,bo),t);break}_l(e,Ri,bo);break;case 4:if(ba(e,a),(a&4194240)===a)break;for(t=e.eventTimes,h=-1;0<a;){var p=31-Rs(a);g=1<<p,p=t[p],p>h&&(h=p),a&=~g}if(a=h,a=cr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lz(a/1960))-a,10<a){e.timeoutHandle=Z_(_l.bind(null,e,Ri,bo),a);break}_l(e,Ri,bo);break;case 5:_l(e,Ri,bo);break;default:throw Error(Xe(329))}}}return ji(e,cr()),e.callbackNode===i?CT.bind(null,e):null}function pv(e,t){var i=ad;return e.current.memoizedState.isDehydrated&&(Tl(e,t).flags|=256),e=bm(e,t),e!==2&&(t=Ri,Ri=i,t!==null&&mv(t)),e}function mv(e){Ri===null?Ri=e:Ri.push.apply(Ri,e)}function cz(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var h=i[a],g=h.getSnapshot;h=h.value;try{if(!Fs(g(),h))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ba(e,t){for(t&=~B0,t&=~$m,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Rs(t),a=1<<i;e[i]=-1,t&=~a}}function E1(e){if(pn&6)throw Error(Xe(327));iu();var t=rm(e,0);if(!(t&1))return ji(e,cr()),null;var i=bm(e,t);if(e.tag!==0&&i===2){var a=j_(e);a!==0&&(t=a,i=pv(e,a))}if(i===1)throw i=Md,Tl(e,0),ba(e,t),ji(e,cr()),i;if(i===6)throw Error(Xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,Ri,bo),ji(e,cr()),null}function O0(e,t){var i=pn;pn|=1;try{return e(t)}finally{pn=i,pn===0&&(fu=cr()+500,Nm&&Na())}}function Dl(e){Sa!==null&&Sa.tag===0&&!(pn&6)&&iu();var t=pn;pn|=1;var i=_s.transition,a=Cn;try{if(_s.transition=null,Cn=1,e)return e()}finally{Cn=a,_s.transition=i,pn=t,!(pn&6)&&Na()}}function N0(){es=Zc.current,Nn(Zc)}function Tl(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,ND(i)),_r!==null)for(i=_r.return;i!==null;){var a=i;switch(v0(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&lm();break;case 3:hu(),Nn(Oi),Nn(ai),P0();break;case 5:E0(a);break;case 4:hu();break;case 13:Nn(Xn);break;case 19:Nn(Xn);break;case 10:S0(a.type._context);break;case 22:case 23:N0()}i=i.return}if(Or=e,_r=e=Da(e.current,null),Wr=es=t,Er=0,Md=null,B0=$m=Ml=0,Ri=ad=null,bl!==null){for(t=0;t<bl.length;t++)if(i=bl[t],a=i.interleaved,a!==null){i.interleaved=null;var h=a.next,g=i.pending;if(g!==null){var p=g.next;g.next=h,a.next=p}i.pending=a}bl=null}return e}function ET(e,t){do{var i=_r;try{if(w0(),jp.current=ym,gm){for(var a=Jn.memoizedState;a!==null;){var h=a.queue;h!==null&&(h.pending=null),a=a.next}gm=!1}if(Al=0,Fr=Cr=Jn=null,sd=!1,Pd=0,L0.current=null,i===null||i.return===null){Er=1,Md=t,_r=null;break}e:{var g=e,p=i.return,c=i,S=t;if(t=Wr,c.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var E=S,P=c,T=P.tag;if(!(P.mode&1)&&(T===0||T===11||T===15)){var A=P.alternate;A?(P.updateQueue=A.updateQueue,P.memoizedState=A.memoizedState,P.lanes=A.lanes):(P.updateQueue=null,P.memoizedState=null)}var $=p1(p);if($!==null){$.flags&=-257,m1($,p,c,g,t),$.mode&1&&f1(g,E,t),t=$,S=E;var X=t.updateQueue;if(X===null){var G=new Set;G.add(S),t.updateQueue=G}else X.add(S);break e}else{if(!(t&1)){f1(g,E,t),j0();break e}S=Error(Xe(426))}}else if(Hn&&c.mode&1){var ne=p1(p);if(ne!==null){!(ne.flags&65536)&&(ne.flags|=256),m1(ne,p,c,g,t),x0(du(S,c));break e}}g=S=du(S,c),Er!==4&&(Er=2),ad===null?ad=[g]:ad.push(g),g=p;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t;var F=uT(g,S,t);a1(g,F);break e;case 1:c=S;var V=g.type,H=g.stateNode;if(!(g.flags&128)&&(typeof V.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Aa===null||!Aa.has(H)))){g.flags|=65536,t&=-t,g.lanes|=t;var ee=hT(g,c,t);a1(g,ee);break e}}g=g.return}while(g!==null)}AT(i)}catch(ye){t=ye,_r===i&&i!==null&&(_r=i=i.return);continue}break}while(!0)}function PT(){var e=_m.current;return _m.current=ym,e===null?ym:e}function j0(){(Er===0||Er===3||Er===2)&&(Er=4),Or===null||!(Ml&268435455)&&!($m&268435455)||ba(Or,Wr)}function bm(e,t){var i=pn;pn|=2;var a=PT();(Or!==e||Wr!==t)&&(bo=null,Tl(e,t));do try{uz();break}catch(h){ET(e,h)}while(!0);if(w0(),pn=i,_m.current=a,_r!==null)throw Error(Xe(261));return Or=null,Wr=0,Er}function uz(){for(;_r!==null;)IT(_r)}function hz(){for(;_r!==null&&!BM();)IT(_r)}function IT(e){var t=DT(e.alternate,e,es);e.memoizedProps=e.pendingProps,t===null?AT(e):_r=t,L0.current=null}function AT(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=iz(i,t),i!==null){i.flags&=32767,_r=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Er=6,_r=null;return}}else if(i=rz(i,t,es),i!==null){_r=i;return}if(t=t.sibling,t!==null){_r=t;return}_r=t=e}while(t!==null);Er===0&&(Er=5)}function _l(e,t,i){var a=Cn,h=_s.transition;try{_s.transition=null,Cn=1,dz(e,t,i,a)}finally{_s.transition=h,Cn=a}return null}function dz(e,t,i,a){do iu();while(Sa!==null);if(pn&6)throw Error(Xe(327));i=e.finishedWork;var h=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Xe(177));e.callbackNode=null,e.callbackPriority=0;var g=i.lanes|i.childLanes;if(WM(e,g),e===Or&&(_r=Or=null,Wr=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||gp||(gp=!0,zT(nm,function(){return iu(),null})),g=(i.flags&15990)!==0,i.subtreeFlags&15990||g){g=_s.transition,_s.transition=null;var p=Cn;Cn=1;var c=pn;pn|=4,L0.current=null,oz(e,i),kT(i,e),DD(W_),im=!!G_,W_=G_=null,e.current=i,az(i),FM(),pn=c,Cn=p,_s.transition=g}else e.current=i;if(gp&&(gp=!1,Sa=e,xm=h),g=e.pendingLanes,g===0&&(Aa=null),jM(i.stateNode),ji(e,cr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)h=t[i],a(h.value,{componentStack:h.stack,digest:h.digest});if(vm)throw vm=!1,e=dv,dv=null,e;return xm&1&&e.tag!==0&&iu(),g=e.pendingLanes,g&1?e===fv?ld++:(ld=0,fv=e):ld=0,Na(),null}function iu(){if(Sa!==null){var e=uk(xm),t=_s.transition,i=Cn;try{if(_s.transition=null,Cn=16>e?16:e,Sa===null)var a=!1;else{if(e=Sa,Sa=null,xm=0,pn&6)throw Error(Xe(331));var h=pn;for(pn|=4,kt=e.current;kt!==null;){var g=kt,p=g.child;if(kt.flags&16){var c=g.deletions;if(c!==null){for(var S=0;S<c.length;S++){var E=c[S];for(kt=E;kt!==null;){var P=kt;switch(P.tag){case 0:case 11:case 15:od(8,P,g)}var T=P.child;if(T!==null)T.return=P,kt=T;else for(;kt!==null;){P=kt;var A=P.sibling,$=P.return;if(bT(P),P===E){kt=null;break}if(A!==null){A.return=$,kt=A;break}kt=$}}}var X=g.alternate;if(X!==null){var G=X.child;if(G!==null){X.child=null;do{var ne=G.sibling;G.sibling=null,G=ne}while(G!==null)}}kt=g}}if(g.subtreeFlags&2064&&p!==null)p.return=g,kt=p;else e:for(;kt!==null;){if(g=kt,g.flags&2048)switch(g.tag){case 0:case 11:case 15:od(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,kt=F;break e}kt=g.return}}var V=e.current;for(kt=V;kt!==null;){p=kt;var H=p.child;if(p.subtreeFlags&2064&&H!==null)H.return=p,kt=H;else e:for(p=V;kt!==null;){if(c=kt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Um(9,c)}}catch(ye){or(c,c.return,ye)}if(c===p){kt=null;break e}var ee=c.sibling;if(ee!==null){ee.return=c.return,kt=ee;break e}kt=c.return}}if(pn=h,Na(),Js&&typeof Js.onPostCommitFiberRoot=="function")try{Js.onPostCommitFiberRoot(Rm,e)}catch{}a=!0}return a}finally{Cn=i,_s.transition=t}}return!1}function P1(e,t,i){t=du(i,t),t=uT(e,t,1),e=Ia(e,t,1),t=xi(),e!==null&&(Ud(e,1,t),ji(e,t))}function or(e,t,i){if(e.tag===3)P1(e,e,i);else for(;t!==null;){if(t.tag===3){P1(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Aa===null||!Aa.has(a))){e=du(i,e),e=hT(t,e,1),t=Ia(t,e,1),e=xi(),t!==null&&(Ud(t,1,e),ji(t,e));break}}t=t.return}}function fz(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=xi(),e.pingedLanes|=e.suspendedLanes&i,Or===e&&(Wr&i)===i&&(Er===4||Er===3&&(Wr&130023424)===Wr&&500>cr()-F0?Tl(e,0):B0|=i),ji(e,t)}function MT(e,t){t===0&&(e.mode&1?(t=op,op<<=1,!(op&130023424)&&(op=4194304)):t=1);var i=xi();e=Io(e,t),e!==null&&(Ud(e,t,i),ji(e,i))}function pz(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),MT(e,i)}function mz(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Xe(314))}a!==null&&a.delete(t),MT(e,i)}var DT;DT=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Oi.current)Li=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Li=!1,nz(e,t,i);Li=!!(e.flags&131072)}else Li=!1,Hn&&t.flags&1048576&&Bk(t,hm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Up(e,t),e=t.pendingProps;var h=lu(t,ai.current);ru(t,i),h=A0(null,t,a,e,h,i);var g=M0();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(a)?(g=!0,cm(t)):g=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,T0(t),h.updater=Vm,t.stateNode=h,h._reactInternals=t,tv(t,a,e,i),t=iv(null,t,a,!0,g,i)):(t.tag=0,Hn&&g&&_0(t),yi(null,t,h,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Up(e,t),e=t.pendingProps,h=a._init,a=h(a._payload),t.type=a,h=t.tag=yz(a),e=As(a,e),h){case 0:t=rv(null,t,a,e,i);break e;case 1:t=_1(null,t,a,e,i);break e;case 11:t=g1(null,t,a,e,i);break e;case 14:t=y1(null,t,a,As(a.type,e),i);break e}throw Error(Xe(306,a,""))}return t;case 0:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:As(a,h),rv(e,t,a,h,i);case 1:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:As(a,h),_1(e,t,a,h,i);case 3:e:{if(mT(t),e===null)throw Error(Xe(387));a=t.pendingProps,g=t.memoizedState,h=g.element,Uk(e,t),pm(t,a,null,i);var p=t.memoizedState;if(a=p.element,g.isDehydrated)if(g={element:a,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){h=du(Error(Xe(423)),t),t=v1(e,t,a,i,h);break e}else if(a!==h){h=du(Error(Xe(424)),t),t=v1(e,t,a,i,h);break e}else for(ts=Pa(t.stateNode.containerInfo.firstChild),ns=t,Hn=!0,Ds=null,i=jk(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(cu(),a===h){t=Ao(e,t,i);break e}yi(e,t,a,i)}t=t.child}return t;case 5:return $k(t),e===null&&J_(t),a=t.type,h=t.pendingProps,g=e!==null?e.memoizedProps:null,p=h.children,q_(a,h)?p=null:g!==null&&q_(a,g)&&(t.flags|=32),pT(e,t),yi(e,t,p,i),t.child;case 6:return e===null&&J_(t),null;case 13:return gT(e,t,i);case 4:return C0(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=uu(t,null,a,i):yi(e,t,a,i),t.child;case 11:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:As(a,h),g1(e,t,a,h,i);case 7:return yi(e,t,t.pendingProps,i),t.child;case 8:return yi(e,t,t.pendingProps.children,i),t.child;case 12:return yi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,h=t.pendingProps,g=t.memoizedProps,p=h.value,Ln(dm,a._currentValue),a._currentValue=p,g!==null)if(Fs(g.value,p)){if(g.children===h.children&&!Oi.current){t=Ao(e,t,i);break e}}else for(g=t.child,g!==null&&(g.return=t);g!==null;){var c=g.dependencies;if(c!==null){p=g.child;for(var S=c.firstContext;S!==null;){if(S.context===a){if(g.tag===1){S=To(-1,i&-i),S.tag=2;var E=g.updateQueue;if(E!==null){E=E.shared;var P=E.pending;P===null?S.next=S:(S.next=P.next,P.next=S),E.pending=S}}g.lanes|=i,S=g.alternate,S!==null&&(S.lanes|=i),Q_(g.return,i,t),c.lanes|=i;break}S=S.next}}else if(g.tag===10)p=g.type===t.type?null:g.child;else if(g.tag===18){if(p=g.return,p===null)throw Error(Xe(341));p.lanes|=i,c=p.alternate,c!==null&&(c.lanes|=i),Q_(p,i,t),p=g.sibling}else p=g.child;if(p!==null)p.return=g;else for(p=g;p!==null;){if(p===t){p=null;break}if(g=p.sibling,g!==null){g.return=p.return,p=g;break}p=p.return}g=p}yi(e,t,h.children,i),t=t.child}return t;case 9:return h=t.type,a=t.pendingProps.children,ru(t,i),h=xs(h),a=a(h),t.flags|=1,yi(e,t,a,i),t.child;case 14:return a=t.type,h=As(a,t.pendingProps),h=As(a.type,h),y1(e,t,a,h,i);case 15:return dT(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:As(a,h),Up(e,t),t.tag=1,Ni(a)?(e=!0,cm(t)):e=!1,ru(t,i),cT(t,a,h),tv(t,a,h,i),iv(null,t,a,!0,e,i);case 19:return yT(e,t,i);case 22:return fT(e,t,i)}throw Error(Xe(156,t.tag))};function zT(e,t){return ok(e,t)}function gz(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(e,t,i,a){return new gz(e,t,i,a)}function V0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yz(e){if(typeof e=="function")return V0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===o0)return 11;if(e===a0)return 14}return 2}function Da(e,t){var i=e.alternate;return i===null?(i=gs(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Gp(e,t,i,a,h,g){var p=2;if(a=e,typeof e=="function")V0(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case Oc:return Cl(i.children,h,g,t);case s0:p=8,h|=8;break;case T_:return e=gs(12,i,t,h|2),e.elementType=T_,e.lanes=g,e;case C_:return e=gs(13,i,t,h),e.elementType=C_,e.lanes=g,e;case E_:return e=gs(19,i,t,h),e.elementType=E_,e.lanes=g,e;case $S:return Hm(i,h,g,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case VS:p=10;break e;case US:p=9;break e;case o0:p=11;break e;case a0:p=14;break e;case _a:p=16,a=null;break e}throw Error(Xe(130,e==null?e:typeof e,""))}return t=gs(p,i,t,h),t.elementType=e,t.type=a,t.lanes=g,t}function Cl(e,t,i,a){return e=gs(7,e,a,t),e.lanes=i,e}function Hm(e,t,i,a){return e=gs(22,e,a,t),e.elementType=$S,e.lanes=i,e.stateNode={isHidden:!1},e}function Wy(e,t,i){return e=gs(6,e,null,t),e.lanes=i,e}function qy(e,t,i){return t=gs(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _z(e,t,i,a,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ey(0),this.expirationTimes=Ey(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ey(0),this.identifierPrefix=a,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function U0(e,t,i,a,h,g,p,c,S){return e=new _z(e,t,i,c,S),t===1?(t=1,g===!0&&(t|=8)):t=0,g=gs(3,null,null,t),e.current=g,g.stateNode=e,g.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},T0(g),e}function vz(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function RT(e){if(!e)return Ra;e=e._reactInternals;e:{if(Bl(e)!==e||e.tag!==1)throw Error(Xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Xe(171))}if(e.tag===1){var i=e.type;if(Ni(i))return Rk(e,i,t)}return t}function LT(e,t,i,a,h,g,p,c,S){return e=U0(i,a,!0,e,h,g,p,c,S),e.context=RT(null),i=e.current,a=xi(),h=Ma(i),g=To(a,h),g.callback=t??null,Ia(i,g,h),e.current.lanes=h,Ud(e,h,a),ji(e,a),e}function Gm(e,t,i,a){var h=t.current,g=xi(),p=Ma(h);return i=RT(i),t.context===null?t.context=i:t.pendingContext=i,t=To(g,p),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Ia(h,t,p),e!==null&&(Ls(e,h,p,g),Np(e,h,p)),p}function wm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function I1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function $0(e,t){I1(e,t),(e=e.alternate)&&I1(e,t)}function xz(){return null}var BT=typeof reportError=="function"?reportError:function(e){console.error(e)};function H0(e){this._internalRoot=e}Wm.prototype.render=H0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Xe(409));Gm(e,t,null,null)};Wm.prototype.unmount=H0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dl(function(){Gm(null,e,null,null)}),t[Po]=null}};function Wm(e){this._internalRoot=e}Wm.prototype.unstable_scheduleHydration=function(e){if(e){var t=fk();e={blockedOn:null,target:e,priority:t};for(var i=0;i<xa.length&&t!==0&&t<xa[i].priority;i++);xa.splice(i,0,e),i===0&&mk(e)}};function G0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function A1(){}function bz(e,t,i,a,h){if(h){if(typeof a=="function"){var g=a;a=function(){var E=wm(p);g.call(E)}}var p=LT(t,a,e,0,null,!1,!1,"",A1);return e._reactRootContainer=p,e[Po]=p.current,Sd(e.nodeType===8?e.parentNode:e),Dl(),p}for(;h=e.lastChild;)e.removeChild(h);if(typeof a=="function"){var c=a;a=function(){var E=wm(S);c.call(E)}}var S=U0(e,0,!1,null,null,!1,!1,"",A1);return e._reactRootContainer=S,e[Po]=S.current,Sd(e.nodeType===8?e.parentNode:e),Dl(function(){Gm(t,S,i,a)}),S}function Zm(e,t,i,a,h){var g=i._reactRootContainer;if(g){var p=g;if(typeof h=="function"){var c=h;h=function(){var S=wm(p);c.call(S)}}Gm(t,p,e,h)}else p=bz(i,t,e,h,a);return wm(p)}hk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Xh(t.pendingLanes);i!==0&&(u0(t,i|1),ji(t,cr()),!(pn&6)&&(fu=cr()+500,Na()))}break;case 13:Dl(function(){var a=Io(e,1);if(a!==null){var h=xi();Ls(a,e,1,h)}}),$0(e,1)}};h0=function(e){if(e.tag===13){var t=Io(e,134217728);if(t!==null){var i=xi();Ls(t,e,134217728,i)}$0(e,134217728)}};dk=function(e){if(e.tag===13){var t=Ma(e),i=Io(e,t);if(i!==null){var a=xi();Ls(i,e,t,a)}$0(e,t)}};fk=function(){return Cn};pk=function(e,t){var i=Cn;try{return Cn=e,t()}finally{Cn=i}};F_=function(e,t,i){switch(t){case"input":if(A_(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var h=Om(a);if(!h)throw Error(Xe(90));GS(a),A_(a,h)}}}break;case"textarea":qS(e,i);break;case"select":t=i.value,t!=null&&Qc(e,!!i.multiple,t,!1)}};ek=O0;tk=Dl;var wz={usingClientEntryPoint:!1,Events:[Hd,Uc,Om,JS,QS,O0]},Uh={findFiberByHostInstance:xl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sz={bundleType:Uh.bundleType,version:Uh.version,rendererPackageName:Uh.rendererPackageName,rendererConfig:Uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Do.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ik(e),e===null?null:e.stateNode},findFiberByHostInstance:Uh.findFiberByHostInstance||xz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yp.isDisabled&&yp.supportsFiber)try{Rm=yp.inject(Sz),Js=yp}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wz;is.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G0(t))throw Error(Xe(200));return vz(e,t,null,i)};is.createRoot=function(e,t){if(!G0(e))throw Error(Xe(299));var i=!1,a="",h=BT;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=U0(e,1,!1,null,null,i,!1,a,h),e[Po]=t.current,Sd(e.nodeType===8?e.parentNode:e),new H0(t)};is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Xe(188)):(e=Object.keys(e).join(","),Error(Xe(268,e)));return e=ik(t),e=e===null?null:e.stateNode,e};is.flushSync=function(e){return Dl(e)};is.hydrate=function(e,t,i){if(!qm(t))throw Error(Xe(200));return Zm(null,e,t,!0,i)};is.hydrateRoot=function(e,t,i){if(!G0(e))throw Error(Xe(405));var a=i!=null&&i.hydratedSources||null,h=!1,g="",p=BT;if(i!=null&&(i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),t=LT(t,null,e,1,i??null,h,!1,g,p),e[Po]=t.current,Sd(e),a)for(e=0;e<a.length;e++)i=a[e],h=i._getVersion,h=h(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,h]:t.mutableSourceEagerHydrationData.push(i,h);return new Wm(t)};is.render=function(e,t,i){if(!qm(t))throw Error(Xe(200));return Zm(null,e,t,!1,i)};is.unmountComponentAtNode=function(e){if(!qm(e))throw Error(Xe(40));return e._reactRootContainer?(Dl(function(){Zm(null,null,e,!1,function(){e._reactRootContainer=null,e[Po]=null})}),!0):!1};is.unstable_batchedUpdates=O0;is.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!qm(i))throw Error(Xe(200));if(e==null||e._reactInternals===void 0)throw Error(Xe(38));return Zm(e,t,i,!1,a)};is.version="18.3.1-next-f1338f8080-20240426";function FT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FT)}catch(e){console.error(e)}}FT(),FS.exports=is;var W0=FS.exports;const OT=Yv(W0);var NT,M1=W0;NT=M1.createRoot,M1.hydrateRoot;const q0=K.createContext({});function Z0(e){const t=K.useRef(null);return t.current===null&&(t.current=e()),t.current}const X0=typeof window<"u",jT=X0?K.useLayoutEffect:K.useEffect,Xm=K.createContext(null);function K0(e,t){e.indexOf(t)===-1&&e.push(t)}function Y0(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}const to=(e,t,i)=>i>t?t:i<e?e:i;let J0=()=>{};const Mo={},VT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function UT(e){return typeof e=="object"&&e!==null}const $T=e=>/^0[^.\s]+$/u.test(e);function Q0(e){let t;return()=>(t===void 0&&(t=e()),t)}const vs=e=>e,kz=(e,t)=>i=>t(e(i)),Wd=(...e)=>e.reduce(kz),Dd=(e,t,i)=>{const a=t-e;return a===0?1:(i-e)/a};class ex{constructor(){this.subscriptions=[]}add(t){return K0(this.subscriptions,t),()=>Y0(this.subscriptions,t)}notify(t,i,a){const h=this.subscriptions.length;if(h)if(h===1)this.subscriptions[0](t,i,a);else for(let g=0;g<h;g++){const p=this.subscriptions[g];p&&p(t,i,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Co=e=>e*1e3,ys=e=>e/1e3;function HT(e,t){return t?e*(1e3/t):0}const GT=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,Tz=1e-7,Cz=12;function Ez(e,t,i,a,h){let g,p,c=0;do p=t+(i-t)/2,g=GT(p,a,h)-e,g>0?i=p:t=p;while(Math.abs(g)>Tz&&++c<Cz);return p}function qd(e,t,i,a){if(e===t&&i===a)return vs;const h=g=>Ez(g,0,1,e,i);return g=>g===0||g===1?g:GT(h(g),t,a)}const WT=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qT=e=>t=>1-e(1-t),ZT=qd(.33,1.53,.69,.99),tx=qT(ZT),XT=WT(tx),KT=e=>(e*=2)<1?.5*tx(e):.5*(2-Math.pow(2,-10*(e-1))),nx=e=>1-Math.sin(Math.acos(e)),YT=qT(nx),JT=WT(nx),Pz=qd(.42,0,1,1),Iz=qd(0,0,.58,1),QT=qd(.42,0,.58,1),Az=e=>Array.isArray(e)&&typeof e[0]!="number",eC=e=>Array.isArray(e)&&typeof e[0]=="number",Mz={linear:vs,easeIn:Pz,easeInOut:QT,easeOut:Iz,circIn:nx,circInOut:JT,circOut:YT,backIn:tx,backInOut:XT,backOut:ZT,anticipate:KT},Dz=e=>typeof e=="string",D1=e=>{if(eC(e)){J0(e.length===4);const[t,i,a,h]=e;return qd(t,i,a,h)}else if(Dz(e))return Mz[e];return e},_p=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function zz(e,t){let i=new Set,a=new Set,h=!1,g=!1;const p=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function S(P){p.has(P)&&(E.schedule(P),e()),P(c)}const E={schedule:(P,T=!1,A=!1)=>{const X=A&&h?i:a;return T&&p.add(P),X.has(P)||X.add(P),P},cancel:P=>{a.delete(P),p.delete(P)},process:P=>{if(c=P,h){g=!0;return}h=!0,[i,a]=[a,i],i.forEach(S),i.clear(),h=!1,g&&(g=!1,E.process(P))}};return E}const Rz=40;function tC(e,t){let i=!1,a=!0;const h={delta:0,timestamp:0,isProcessing:!1},g=()=>i=!0,p=_p.reduce((H,ee)=>(H[ee]=zz(g),H),{}),{setup:c,read:S,resolveKeyframes:E,preUpdate:P,update:T,preRender:A,render:$,postRender:X}=p,G=()=>{const H=Mo.useManualTiming?h.timestamp:performance.now();i=!1,Mo.useManualTiming||(h.delta=a?1e3/60:Math.max(Math.min(H-h.timestamp,Rz),1)),h.timestamp=H,h.isProcessing=!0,c.process(h),S.process(h),E.process(h),P.process(h),T.process(h),A.process(h),$.process(h),X.process(h),h.isProcessing=!1,i&&t&&(a=!1,e(G))},ne=()=>{i=!0,a=!0,h.isProcessing||e(G)};return{schedule:_p.reduce((H,ee)=>{const ye=p[ee];return H[ee]=(be,fe=!1,le=!1)=>(i||ne(),ye.schedule(be,fe,le)),H},{}),cancel:H=>{for(let ee=0;ee<_p.length;ee++)p[_p[ee]].cancel(H)},state:h,steps:p}}const{schedule:jn,cancel:La,state:Gr,steps:Zy}=tC(typeof requestAnimationFrame<"u"?requestAnimationFrame:vs,!0);let Wp;function Lz(){Wp=void 0}const _i={now:()=>(Wp===void 0&&_i.set(Gr.isProcessing||Mo.useManualTiming?Gr.timestamp:performance.now()),Wp),set:e=>{Wp=e,queueMicrotask(Lz)}},nC=e=>t=>typeof t=="string"&&t.startsWith(e),rC=nC("--"),Bz=nC("var(--"),rx=e=>Bz(e)?Fz.test(e.split("/*")[0].trim()):!1,Fz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function z1(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const bu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},zd={...bu,transform:e=>to(0,1,e)},vp={...bu,default:1},cd=e=>Math.round(e*1e5)/1e5,ix=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Oz(e){return e==null}const Nz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sx=(e,t)=>i=>!!(typeof i=="string"&&Nz.test(i)&&i.startsWith(e)||t&&!Oz(i)&&Object.prototype.hasOwnProperty.call(i,t)),iC=(e,t,i)=>a=>{if(typeof a!="string")return a;const[h,g,p,c]=a.match(ix);return{[e]:parseFloat(h),[t]:parseFloat(g),[i]:parseFloat(p),alpha:c!==void 0?parseFloat(c):1}},jz=e=>to(0,255,e),Xy={...bu,transform:e=>Math.round(jz(e))},Sl={test:sx("rgb","red"),parse:iC("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:a=1})=>"rgba("+Xy.transform(e)+", "+Xy.transform(t)+", "+Xy.transform(i)+", "+cd(zd.transform(a))+")"};function Vz(e){let t="",i="",a="",h="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),a=e.substring(5,7),h=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),a=e.substring(3,4),h=e.substring(4,5),t+=t,i+=i,a+=a,h+=h),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(a,16),alpha:h?parseInt(h,16)/255:1}}const gv={test:sx("#"),parse:Vz,transform:Sl.transform},Zd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ga=Zd("deg"),eo=Zd("%"),wt=Zd("px"),Uz=Zd("vh"),$z=Zd("vw"),R1={...eo,parse:e=>eo.parse(e)/100,transform:e=>eo.transform(e*100)},Xc={test:sx("hsl","hue"),parse:iC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:a=1})=>"hsla("+Math.round(e)+", "+eo.transform(cd(t))+", "+eo.transform(cd(i))+", "+cd(zd.transform(a))+")"},yr={test:e=>Sl.test(e)||gv.test(e)||Xc.test(e),parse:e=>Sl.test(e)?Sl.parse(e):Xc.test(e)?Xc.parse(e):gv.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Sl.transform(e):Xc.transform(e),getAnimatableNone:e=>{const t=yr.parse(e);return t.alpha=0,yr.transform(t)}},Hz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Gz(e){var t,i;return isNaN(e)&&typeof e=="string"&&(((t=e.match(ix))==null?void 0:t.length)||0)+(((i=e.match(Hz))==null?void 0:i.length)||0)>0}const sC="number",oC="color",Wz="var",qz="var(",L1="${}",Zz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rd(e){const t=e.toString(),i=[],a={color:[],number:[],var:[]},h=[];let g=0;const c=t.replace(Zz,S=>(yr.test(S)?(a.color.push(g),h.push(oC),i.push(yr.parse(S))):S.startsWith(qz)?(a.var.push(g),h.push(Wz),i.push(S)):(a.number.push(g),h.push(sC),i.push(parseFloat(S))),++g,L1)).split(L1);return{values:i,split:c,indexes:a,types:h}}function aC(e){return Rd(e).values}function lC(e){const{split:t,types:i}=Rd(e),a=t.length;return h=>{let g="";for(let p=0;p<a;p++)if(g+=t[p],h[p]!==void 0){const c=i[p];c===sC?g+=cd(h[p]):c===oC?g+=yr.transform(h[p]):g+=h[p]}return g}}const Xz=e=>typeof e=="number"?0:yr.test(e)?yr.getAnimatableNone(e):e;function Kz(e){const t=aC(e);return lC(e)(t.map(Xz))}const Ba={test:Gz,parse:aC,createTransformer:lC,getAnimatableNone:Kz};function Ky(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function Yz({hue:e,saturation:t,lightness:i,alpha:a}){e/=360,t/=100,i/=100;let h=0,g=0,p=0;if(!t)h=g=p=i;else{const c=i<.5?i*(1+t):i+t-i*t,S=2*i-c;h=Ky(S,c,e+1/3),g=Ky(S,c,e),p=Ky(S,c,e-1/3)}return{red:Math.round(h*255),green:Math.round(g*255),blue:Math.round(p*255),alpha:a}}function Sm(e,t){return i=>i>0?t:e}const Kn=(e,t,i)=>e+(t-e)*i,Yy=(e,t,i)=>{const a=e*e,h=i*(t*t-a)+a;return h<0?0:Math.sqrt(h)},Jz=[gv,Sl,Xc],Qz=e=>Jz.find(t=>t.test(e));function B1(e){const t=Qz(e);if(!t)return!1;let i=t.parse(e);return t===Xc&&(i=Yz(i)),i}const F1=(e,t)=>{const i=B1(e),a=B1(t);if(!i||!a)return Sm(e,t);const h={...i};return g=>(h.red=Yy(i.red,a.red,g),h.green=Yy(i.green,a.green,g),h.blue=Yy(i.blue,a.blue,g),h.alpha=Kn(i.alpha,a.alpha,g),Sl.transform(h))},yv=new Set(["none","hidden"]);function eR(e,t){return yv.has(e)?i=>i<=0?e:t:i=>i>=1?t:e}function tR(e,t){return i=>Kn(e,t,i)}function ox(e){return typeof e=="number"?tR:typeof e=="string"?rx(e)?Sm:yr.test(e)?F1:iR:Array.isArray(e)?cC:typeof e=="object"?yr.test(e)?F1:nR:Sm}function cC(e,t){const i=[...e],a=i.length,h=e.map((g,p)=>ox(g)(g,t[p]));return g=>{for(let p=0;p<a;p++)i[p]=h[p](g);return i}}function nR(e,t){const i={...e,...t},a={};for(const h in i)e[h]!==void 0&&t[h]!==void 0&&(a[h]=ox(e[h])(e[h],t[h]));return h=>{for(const g in a)i[g]=a[g](h);return i}}function rR(e,t){const i=[],a={color:0,var:0,number:0};for(let h=0;h<t.values.length;h++){const g=t.types[h],p=e.indexes[g][a[g]],c=e.values[p]??0;i[h]=c,a[g]++}return i}const iR=(e,t)=>{const i=Ba.createTransformer(t),a=Rd(e),h=Rd(t);return a.indexes.var.length===h.indexes.var.length&&a.indexes.color.length===h.indexes.color.length&&a.indexes.number.length>=h.indexes.number.length?yv.has(e)&&!h.values.length||yv.has(t)&&!a.values.length?eR(e,t):Wd(cC(rR(a,h),h.values),i):Sm(e,t)};function uC(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?Kn(e,t,i):ox(e)(e,t)}const sR=e=>{const t=({timestamp:i})=>e(i);return{start:(i=!0)=>jn.update(t,i),stop:()=>La(t),now:()=>Gr.isProcessing?Gr.timestamp:_i.now()}},hC=(e,t,i=10)=>{let a="";const h=Math.max(Math.round(t/i),2);for(let g=0;g<h;g++)a+=Math.round(e(g/(h-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},km=2e4;function ax(e){let t=0;const i=50;let a=e.next(t);for(;!a.done&&t<km;)t+=i,a=e.next(t);return t>=km?1/0:t}function oR(e,t=100,i){const a=i({...e,keyframes:[0,t]}),h=Math.min(ax(a),km);return{type:"keyframes",ease:g=>a.next(h*g).value/t,duration:ys(h)}}const aR=5;function dC(e,t,i){const a=Math.max(t-aR,0);return HT(i-e(a),t-a)}const sr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Jy=.001;function lR({duration:e=sr.duration,bounce:t=sr.bounce,velocity:i=sr.velocity,mass:a=sr.mass}){let h,g,p=1-t;p=to(sr.minDamping,sr.maxDamping,p),e=to(sr.minDuration,sr.maxDuration,ys(e)),p<1?(h=E=>{const P=E*p,T=P*e,A=P-i,$=_v(E,p),X=Math.exp(-T);return Jy-A/$*X},g=E=>{const T=E*p*e,A=T*i+i,$=Math.pow(p,2)*Math.pow(E,2)*e,X=Math.exp(-T),G=_v(Math.pow(E,2),p);return(-h(E)+Jy>0?-1:1)*((A-$)*X)/G}):(h=E=>{const P=Math.exp(-E*e),T=(E-i)*e+1;return-Jy+P*T},g=E=>{const P=Math.exp(-E*e),T=(i-E)*(e*e);return P*T});const c=5/e,S=uR(h,g,c);if(e=Co(e),isNaN(S))return{stiffness:sr.stiffness,damping:sr.damping,duration:e};{const E=Math.pow(S,2)*a;return{stiffness:E,damping:p*2*Math.sqrt(a*E),duration:e}}}const cR=12;function uR(e,t,i){let a=i;for(let h=1;h<cR;h++)a=a-e(a)/t(a);return a}function _v(e,t){return e*Math.sqrt(1-t*t)}const hR=["duration","bounce"],dR=["stiffness","damping","mass"];function O1(e,t){return t.some(i=>e[i]!==void 0)}function fR(e){let t={velocity:sr.velocity,stiffness:sr.stiffness,damping:sr.damping,mass:sr.mass,isResolvedFromDuration:!1,...e};if(!O1(e,dR)&&O1(e,hR))if(e.visualDuration){const i=e.visualDuration,a=2*Math.PI/(i*1.2),h=a*a,g=2*to(.05,1,1-(e.bounce||0))*Math.sqrt(h);t={...t,mass:sr.mass,stiffness:h,damping:g}}else{const i=lR(e);t={...t,...i,mass:sr.mass},t.isResolvedFromDuration=!0}return t}function Tm(e=sr.visualDuration,t=sr.bounce){const i=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:a,restDelta:h}=i;const g=i.keyframes[0],p=i.keyframes[i.keyframes.length-1],c={done:!1,value:g},{stiffness:S,damping:E,mass:P,duration:T,velocity:A,isResolvedFromDuration:$}=fR({...i,velocity:-ys(i.velocity||0)}),X=A||0,G=E/(2*Math.sqrt(S*P)),ne=p-g,F=ys(Math.sqrt(S/P)),V=Math.abs(ne)<5;a||(a=V?sr.restSpeed.granular:sr.restSpeed.default),h||(h=V?sr.restDelta.granular:sr.restDelta.default);let H;if(G<1){const ye=_v(F,G);H=be=>{const fe=Math.exp(-G*F*be);return p-fe*((X+G*F*ne)/ye*Math.sin(ye*be)+ne*Math.cos(ye*be))}}else if(G===1)H=ye=>p-Math.exp(-F*ye)*(ne+(X+F*ne)*ye);else{const ye=F*Math.sqrt(G*G-1);H=be=>{const fe=Math.exp(-G*F*be),le=Math.min(ye*be,300);return p-fe*((X+G*F*ne)*Math.sinh(le)+ye*ne*Math.cosh(le))/ye}}const ee={calculatedDuration:$&&T||null,next:ye=>{const be=H(ye);if($)c.done=ye>=T;else{let fe=ye===0?X:0;G<1&&(fe=ye===0?Co(X):dC(H,ye,be));const le=Math.abs(fe)<=a,we=Math.abs(p-be)<=h;c.done=le&&we}return c.value=c.done?p:be,c},toString:()=>{const ye=Math.min(ax(ee),km),be=hC(fe=>ee.next(ye*fe).value,ye,30);return ye+"ms "+be},toTransition:()=>{}};return ee}Tm.applyToOptions=e=>{const t=oR(e,100,Tm);return e.ease=t.ease,e.duration=Co(t.duration),e.type="keyframes",e};function vv({keyframes:e,velocity:t=0,power:i=.8,timeConstant:a=325,bounceDamping:h=10,bounceStiffness:g=500,modifyTarget:p,min:c,max:S,restDelta:E=.5,restSpeed:P}){const T=e[0],A={done:!1,value:T},$=le=>c!==void 0&&le<c||S!==void 0&&le>S,X=le=>c===void 0?S:S===void 0||Math.abs(c-le)<Math.abs(S-le)?c:S;let G=i*t;const ne=T+G,F=p===void 0?ne:p(ne);F!==ne&&(G=F-T);const V=le=>-G*Math.exp(-le/a),H=le=>F+V(le),ee=le=>{const we=V(le),Le=H(le);A.done=Math.abs(we)<=E,A.value=A.done?F:Le};let ye,be;const fe=le=>{$(A.value)&&(ye=le,be=Tm({keyframes:[A.value,X(A.value)],velocity:dC(H,le,A.value),damping:h,stiffness:g,restDelta:E,restSpeed:P}))};return fe(0),{calculatedDuration:null,next:le=>{let we=!1;return!be&&ye===void 0&&(we=!0,ee(le),fe(le)),ye!==void 0&&le>=ye?be.next(le-ye):(!we&&ee(le),A)}}}function pR(e,t,i){const a=[],h=i||Mo.mix||uC,g=e.length-1;for(let p=0;p<g;p++){let c=h(e[p],e[p+1]);if(t){const S=Array.isArray(t)?t[p]||vs:t;c=Wd(S,c)}a.push(c)}return a}function mR(e,t,{clamp:i=!0,ease:a,mixer:h}={}){const g=e.length;if(J0(g===t.length),g===1)return()=>t[0];if(g===2&&t[0]===t[1])return()=>t[1];const p=e[0]===e[1];e[0]>e[g-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=pR(t,a,h),S=c.length,E=P=>{if(p&&P<e[0])return t[0];let T=0;if(S>1)for(;T<e.length-2&&!(P<e[T+1]);T++);const A=Dd(e[T],e[T+1],P);return c[T](A)};return i?P=>E(to(e[0],e[g-1],P)):E}function gR(e,t){const i=e[e.length-1];for(let a=1;a<=t;a++){const h=Dd(0,t,a);e.push(Kn(i,1,h))}}function yR(e){const t=[0];return gR(t,e.length-1),t}function _R(e,t){return e.map(i=>i*t)}function vR(e,t){return e.map(()=>t||QT).splice(0,e.length-1)}function ud({duration:e=300,keyframes:t,times:i,ease:a="easeInOut"}){const h=Az(a)?a.map(D1):D1(a),g={done:!1,value:t[0]},p=_R(i&&i.length===t.length?i:yR(t),e),c=mR(p,t,{ease:Array.isArray(h)?h:vR(t,h)});return{calculatedDuration:e,next:S=>(g.value=c(S),g.done=S>=e,g)}}const xR=e=>e!==null;function lx(e,{repeat:t,repeatType:i="loop"},a,h=1){const g=e.filter(xR),c=h<0||t&&i!=="loop"&&t%2===1?0:g.length-1;return!c||a===void 0?g[c]:a}const bR={decay:vv,inertia:vv,tween:ud,keyframes:ud,spring:Tm};function fC(e){typeof e.type=="string"&&(e.type=bR[e.type])}class cx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,i){return this.finished.then(t,i)}}const wR=e=>e/100;class ux extends cx{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,h;const{motionValue:i}=this.options;i&&i.updatedAt!==_i.now()&&this.tick(_i.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(h=(a=this.options).onStop)==null||h.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;fC(t);const{type:i=ud,repeat:a=0,repeatDelay:h=0,repeatType:g,velocity:p=0}=t;let{keyframes:c}=t;const S=i||ud;S!==ud&&typeof c[0]!="number"&&(this.mixKeyframes=Wd(wR,uC(c[0],c[1])),c=[0,100]);const E=S({...t,keyframes:c});g==="mirror"&&(this.mirroredGenerator=S({...t,keyframes:[...c].reverse(),velocity:-p})),E.calculatedDuration===null&&(E.calculatedDuration=ax(E));const{calculatedDuration:P}=E;this.calculatedDuration=P,this.resolvedDuration=P+h,this.totalDuration=this.resolvedDuration*(a+1)-h,this.generator=E}updateTime(t){const i=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(t,i=!1){const{generator:a,totalDuration:h,mixKeyframes:g,mirroredGenerator:p,resolvedDuration:c,calculatedDuration:S}=this;if(this.startTime===null)return a.next(0);const{delay:E=0,keyframes:P,repeat:T,repeatType:A,repeatDelay:$,type:X,onUpdate:G,finalKeyframe:ne}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-h/this.speed,this.startTime)),i?this.currentTime=t:this.updateTime(t);const F=this.currentTime-E*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?F<0:F>h;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let H=this.currentTime,ee=a;if(T){const le=Math.min(this.currentTime,h)/c;let we=Math.floor(le),Le=le%1;!Le&&le>=1&&(Le=1),Le===1&&we--,we=Math.min(we,T+1),!!(we%2)&&(A==="reverse"?(Le=1-Le,$&&(Le-=$/c)):A==="mirror"&&(ee=p)),H=to(0,1,Le)*c}const ye=V?{done:!1,value:P[0]}:ee.next(H);g&&(ye.value=g(ye.value));let{done:be}=ye;!V&&S!==null&&(be=this.playbackSpeed>=0?this.currentTime>=h:this.currentTime<=0);const fe=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&be);return fe&&X!==vv&&(ye.value=lx(P,this.options,ne,this.speed)),G&&G(ye.value),fe&&this.finish(),ye}then(t,i){return this.finished.then(t,i)}get duration(){return ys(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ys(t)}get time(){return ys(this.currentTime)}set time(t){var i;t=Co(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(i=this.driver)==null||i.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(_i.now());const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=ys(this.currentTime))}play(){var h,g;if(this.isStopped)return;const{driver:t=sR,startTime:i}=this.options;this.driver||(this.driver=t(p=>this.tick(p))),(g=(h=this.options).onPlay)==null||g.call(h);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=i??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_i.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,i;this.notifyFinished(),this.teardown(),this.state="finished",(i=(t=this.options).onComplete)==null||i.call(t)}cancel(){var t,i;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(i=(t=this.options).onCancel)==null||i.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var i;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(i=this.driver)==null||i.stop(),t.observe(this)}}function SR(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const kl=e=>e*180/Math.PI,xv=e=>{const t=kl(Math.atan2(e[1],e[0]));return bv(t)},kR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:xv,rotateZ:xv,skewX:e=>kl(Math.atan(e[1])),skewY:e=>kl(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},bv=e=>(e=e%360,e<0&&(e+=360),e),N1=xv,j1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),V1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),TR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:j1,scaleY:V1,scale:e=>(j1(e)+V1(e))/2,rotateX:e=>bv(kl(Math.atan2(e[6],e[5]))),rotateY:e=>bv(kl(Math.atan2(-e[2],e[0]))),rotateZ:N1,rotate:N1,skewX:e=>kl(Math.atan(e[4])),skewY:e=>kl(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function wv(e){return e.includes("scale")?1:0}function Sv(e,t){if(!e||e==="none")return wv(t);const i=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,h;if(i)a=TR,h=i;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=kR,h=c}if(!h)return wv(t);const g=a[t],p=h[1].split(",").map(ER);return typeof g=="function"?g(p):p[g]}const CR=(e,t)=>{const{transform:i="none"}=getComputedStyle(e);return Sv(i,t)};function ER(e){return parseFloat(e.trim())}const wu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Su=new Set(wu),U1=e=>e===bu||e===wt,PR=new Set(["x","y","z"]),IR=wu.filter(e=>!PR.has(e));function AR(e){const t=[];return IR.forEach(i=>{const a=e.getValue(i);a!==void 0&&(t.push([i,a.get()]),a.set(i.startsWith("scale")?1:0))}),t}const ka={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Sv(t,"x"),y:(e,{transform:t})=>Sv(t,"y")};ka.translateX=ka.x;ka.translateY=ka.y;const El=new Set;let kv=!1,Tv=!1,Cv=!1;function pC(){if(Tv){const e=Array.from(El).filter(a=>a.needsMeasurement),t=new Set(e.map(a=>a.element)),i=new Map;t.forEach(a=>{const h=AR(a);h.length&&(i.set(a,h),a.render())}),e.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const h=i.get(a);h&&h.forEach(([g,p])=>{var c;(c=a.getValue(g))==null||c.set(p)})}),e.forEach(a=>a.measureEndState()),e.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Tv=!1,kv=!1,El.forEach(e=>e.complete(Cv)),El.clear()}function mC(){El.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Tv=!0)})}function MR(){Cv=!0,mC(),pC(),Cv=!1}class hx{constructor(t,i,a,h,g,p=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=a,this.motionValue=h,this.element=g,this.isAsync=p}scheduleResolve(){this.state="scheduled",this.isAsync?(El.add(this),kv||(kv=!0,jn.read(mC),jn.resolveKeyframes(pC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:a,motionValue:h}=this;if(t[0]===null){const g=h==null?void 0:h.get(),p=t[t.length-1];if(g!==void 0)t[0]=g;else if(a&&i){const c=a.readValue(i,p);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=p),h&&g===void 0&&h.set(t[0])}SR(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),El.delete(this)}cancel(){this.state==="scheduled"&&(El.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const DR=e=>e.startsWith("--");function zR(e,t,i){DR(t)?e.style.setProperty(t,i):e.style[t]=i}const RR=Q0(()=>window.ScrollTimeline!==void 0),LR={};function BR(e,t){const i=Q0(e);return()=>LR[t]??i()}const gC=BR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yh=([e,t,i,a])=>`cubic-bezier(${e}, ${t}, ${i}, ${a})`,$1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yh([0,.65,.55,1]),circOut:Yh([.55,0,1,.45]),backIn:Yh([.31,.01,.66,-.59]),backOut:Yh([.33,1.53,.69,.99])};function yC(e,t){if(e)return typeof e=="function"?gC()?hC(e,t):"ease-out":eC(e)?Yh(e):Array.isArray(e)?e.map(i=>yC(i,t)||$1.easeOut):$1[e]}function FR(e,t,i,{delay:a=0,duration:h=300,repeat:g=0,repeatType:p="loop",ease:c="easeOut",times:S}={},E=void 0){const P={[t]:i};S&&(P.offset=S);const T=yC(c,h);Array.isArray(T)&&(P.easing=T);const A={delay:a,duration:h,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:g+1,direction:p==="reverse"?"alternate":"normal"};return E&&(A.pseudoElement=E),e.animate(P,A)}function _C(e){return typeof e=="function"&&"applyToOptions"in e}function OR({type:e,...t}){return _C(e)&&gC()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class NR extends cx{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:i,name:a,keyframes:h,pseudoElement:g,allowFlatten:p=!1,finalKeyframe:c,onComplete:S}=t;this.isPseudoElement=!!g,this.allowFlatten=p,this.options=t,J0(typeof t.type!="string");const E=OR(t);this.animation=FR(i,a,h,E,g),E.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!g){const P=lx(h,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(P):zR(i,a,P),this.animation.cancel()}S==null||S(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,i;(i=(t=this.animation).finish)==null||i.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,i;this.isPseudoElement||(i=(t=this.animation).commitStyles)==null||i.call(t)}get duration(){var i,a;const t=((a=(i=this.animation.effect)==null?void 0:i.getComputedTiming)==null?void 0:a.call(i).duration)||0;return ys(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ys(t)}get time(){return ys(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Co(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:i}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&RR()?(this.animation.timeline=t,vs):i(this)}}const vC={anticipate:KT,backInOut:XT,circInOut:JT};function jR(e){return e in vC}function VR(e){typeof e.ease=="string"&&jR(e.ease)&&(e.ease=vC[e.ease])}const Qy=10;class UR extends NR{constructor(t){VR(t),fC(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:i,onUpdate:a,onComplete:h,element:g,...p}=this.options;if(!i)return;if(t!==void 0){i.set(t);return}const c=new ux({...p,autoplay:!1}),S=Math.max(Qy,_i.now()-this.startTime),E=to(0,Qy,S-Qy);i.setWithVelocity(c.sample(Math.max(0,S-E)).value,c.sample(S).value,E),c.stop()}}const H1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ba.test(e)||e==="0")&&!e.startsWith("url("));function $R(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function HR(e,t,i,a){const h=e[0];if(h===null)return!1;if(t==="display"||t==="visibility")return!0;const g=e[e.length-1],p=H1(h,t),c=H1(g,t);return!p||!c?!1:$R(e)||(i==="spring"||_C(i))&&a}function Ev(e){e.duration=0,e.type="keyframes"}const GR=new Set(["opacity","clipPath","filter","transform"]),WR=Q0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function qR(e){var P;const{motionValue:t,name:i,repeatDelay:a,repeatType:h,damping:g,type:p}=e;if(!(((P=t==null?void 0:t.owner)==null?void 0:P.current)instanceof HTMLElement))return!1;const{onUpdate:S,transformTemplate:E}=t.owner.getProps();return WR()&&i&&GR.has(i)&&(i!=="transform"||!E)&&!S&&!a&&h!=="mirror"&&g!==0&&p!=="inertia"}const ZR=40;class XR extends cx{constructor({autoplay:t=!0,delay:i=0,type:a="keyframes",repeat:h=0,repeatDelay:g=0,repeatType:p="loop",keyframes:c,name:S,motionValue:E,element:P,...T}){var X;super(),this.stop=()=>{var G,ne;this._animation&&(this._animation.stop(),(G=this.stopTimeline)==null||G.call(this)),(ne=this.keyframeResolver)==null||ne.cancel()},this.createdAt=_i.now();const A={autoplay:t,delay:i,type:a,repeat:h,repeatDelay:g,repeatType:p,name:S,motionValue:E,element:P,...T},$=(P==null?void 0:P.KeyframeResolver)||hx;this.keyframeResolver=new $(c,(G,ne,F)=>this.onKeyframesResolved(G,ne,A,!F),S,E,P),(X=this.keyframeResolver)==null||X.scheduleResolve()}onKeyframesResolved(t,i,a,h){this.keyframeResolver=void 0;const{name:g,type:p,velocity:c,delay:S,isHandoff:E,onUpdate:P}=a;this.resolvedAt=_i.now(),HR(t,g,p,c)||((Mo.instantAnimations||!S)&&(P==null||P(lx(t,a,i))),t[0]=t[t.length-1],Ev(a),a.repeat=0);const A={startTime:h?this.resolvedAt?this.resolvedAt-this.createdAt>ZR?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...a,keyframes:t},$=!E&&qR(A)?new UR({...A,element:A.motionValue.owner.current}):new ux(A);$.finished.then(()=>this.notifyFinished()).catch(vs),this.pendingTimeline&&(this.stopTimeline=$.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=$}get finished(){return this._animation?this.animation.finished:this._finished}then(t,i){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),MR()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const KR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function YR(e){const t=KR.exec(e);if(!t)return[,];const[,i,a,h]=t;return[`--${i??a}`,h]}function xC(e,t,i=1){const[a,h]=YR(e);if(!a)return;const g=window.getComputedStyle(t).getPropertyValue(a);if(g){const p=g.trim();return VT(p)?parseFloat(p):p}return rx(h)?xC(h,t,i+1):h}function dx(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const bC=new Set(["width","height","top","left","right","bottom",...wu]),JR={test:e=>e==="auto",parse:e=>e},wC=e=>t=>t.test(e),SC=[bu,wt,eo,ga,$z,Uz,JR],G1=e=>SC.find(wC(e));function QR(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||$T(e):!0}const eL=new Set(["brightness","contrast","saturate","opacity"]);function tL(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[a]=i.match(ix)||[];if(!a)return e;const h=i.replace(a,"");let g=eL.has(t)?1:0;return a!==i&&(g*=100),t+"("+g+h+")"}const nL=/\b([a-z-]*)\(.*?\)/gu,Pv={...Ba,getAnimatableNone:e=>{const t=e.match(nL);return t?t.map(tL).join(" "):e}},W1={...bu,transform:Math.round},rL={rotate:ga,rotateX:ga,rotateY:ga,rotateZ:ga,scale:vp,scaleX:vp,scaleY:vp,scaleZ:vp,skew:ga,skewX:ga,skewY:ga,distance:wt,translateX:wt,translateY:wt,translateZ:wt,x:wt,y:wt,z:wt,perspective:wt,transformPerspective:wt,opacity:zd,originX:R1,originY:R1,originZ:wt},fx={borderWidth:wt,borderTopWidth:wt,borderRightWidth:wt,borderBottomWidth:wt,borderLeftWidth:wt,borderRadius:wt,radius:wt,borderTopLeftRadius:wt,borderTopRightRadius:wt,borderBottomRightRadius:wt,borderBottomLeftRadius:wt,width:wt,maxWidth:wt,height:wt,maxHeight:wt,top:wt,right:wt,bottom:wt,left:wt,inset:wt,insetBlock:wt,insetBlockStart:wt,insetBlockEnd:wt,insetInline:wt,insetInlineStart:wt,insetInlineEnd:wt,padding:wt,paddingTop:wt,paddingRight:wt,paddingBottom:wt,paddingLeft:wt,paddingBlock:wt,paddingBlockStart:wt,paddingBlockEnd:wt,paddingInline:wt,paddingInlineStart:wt,paddingInlineEnd:wt,margin:wt,marginTop:wt,marginRight:wt,marginBottom:wt,marginLeft:wt,marginBlock:wt,marginBlockStart:wt,marginBlockEnd:wt,marginInline:wt,marginInlineStart:wt,marginInlineEnd:wt,backgroundPositionX:wt,backgroundPositionY:wt,...rL,zIndex:W1,fillOpacity:zd,strokeOpacity:zd,numOctaves:W1},iL={...fx,color:yr,backgroundColor:yr,outlineColor:yr,fill:yr,stroke:yr,borderColor:yr,borderTopColor:yr,borderRightColor:yr,borderBottomColor:yr,borderLeftColor:yr,filter:Pv,WebkitFilter:Pv},kC=e=>iL[e];function TC(e,t){let i=kC(e);return i!==Pv&&(i=Ba),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const sL=new Set(["auto","none","0"]);function oL(e,t,i){let a=0,h;for(;a<e.length&&!h;){const g=e[a];typeof g=="string"&&!sL.has(g)&&Rd(g).values.length&&(h=e[a]),a++}if(h&&i)for(const g of t)e[g]=TC(i,h)}class aL extends hx{constructor(t,i,a,h,g){super(t,i,a,h,g,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:a}=this;if(!i||!i.current)return;super.readKeyframes();for(let P=0;P<t.length;P++){let T=t[P];if(typeof T=="string"&&(T=T.trim(),rx(T))){const A=xC(T,i.current);A!==void 0&&(t[P]=A),P===t.length-1&&(this.finalKeyframe=T)}}if(this.resolveNoneKeyframes(),!bC.has(a)||t.length!==2)return;const[h,g]=t,p=G1(h),c=G1(g),S=z1(h),E=z1(g);if(S!==E&&ka[a]){this.needsMeasurement=!0;return}if(p!==c)if(U1(p)&&U1(c))for(let P=0;P<t.length;P++){const T=t[P];typeof T=="string"&&(t[P]=parseFloat(T))}else ka[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,a=[];for(let h=0;h<t.length;h++)(t[h]===null||QR(t[h]))&&a.push(h);a.length&&oL(t,a,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ka[a](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const h=i[i.length-1];h!==void 0&&t.getValue(a,h).jump(h,!1)}measureEndState(){var c;const{element:t,name:i,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const h=t.getValue(i);h&&h.jump(this.measuredOrigin,!1);const g=a.length-1,p=a[g];a[g]=ka[i](t.measureViewportBox(),window.getComputedStyle(t.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([S,E])=>{t.getValue(S).set(E)}),this.resolveNoneKeyframes()}}function lL(e,t,i){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let a=document;const h=(i==null?void 0:i[e])??a.querySelectorAll(e);return h?Array.from(h):[]}return Array.from(e)}const CC=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function EC(e){return UT(e)&&"offsetHeight"in e}const q1=30,cL=e=>!isNaN(parseFloat(e));class uL{constructor(t,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{var g;const h=_i.now();if(this.updatedAt!==h&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((g=this.events.change)==null||g.notify(this.current),this.dependents))for(const p of this.dependents)p.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=_i.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=cL(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new ex);const a=this.events[t].add(i);return t==="change"?()=>{a(),jn.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,i,a){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=_i.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>q1)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,q1);return HT(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,i;(t=this.dependents)==null||t.clear(),(i=this.events.destroy)==null||i.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pu(e,t){return new uL(e,t)}const{schedule:px}=tC(queueMicrotask,!1),Is={x:!1,y:!1};function PC(){return Is.x||Is.y}function hL(e){return e==="x"||e==="y"?Is[e]?null:(Is[e]=!0,()=>{Is[e]=!1}):Is.x||Is.y?null:(Is.x=Is.y=!0,()=>{Is.x=Is.y=!1})}function IC(e,t){const i=lL(e),a=new AbortController,h={passive:!0,...t,signal:a.signal};return[i,h,()=>a.abort()]}function Z1(e){return!(e.pointerType==="touch"||PC())}function dL(e,t,i={}){const[a,h,g]=IC(e,i),p=c=>{if(!Z1(c))return;const{target:S}=c,E=t(S,c);if(typeof E!="function"||!S)return;const P=T=>{Z1(T)&&(E(T),S.removeEventListener("pointerleave",P))};S.addEventListener("pointerleave",P,h)};return a.forEach(c=>{c.addEventListener("pointerenter",p,h)}),g}const AC=(e,t)=>t?e===t?!0:AC(e,t.parentElement):!1,mx=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,fL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function MC(e){return fL.has(e.tagName)||e.isContentEditable===!0}const qp=new WeakSet;function X1(e){return t=>{t.key==="Enter"&&e(t)}}function e_(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const pL=(e,t)=>{const i=e.currentTarget;if(!i)return;const a=X1(()=>{if(qp.has(i))return;e_(i,"down");const h=X1(()=>{e_(i,"up")}),g=()=>e_(i,"cancel");i.addEventListener("keyup",h,t),i.addEventListener("blur",g,t)});i.addEventListener("keydown",a,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",a),t)};function K1(e){return mx(e)&&!PC()}function mL(e,t,i={}){const[a,h,g]=IC(e,i),p=c=>{const S=c.currentTarget;if(!K1(c))return;qp.add(S);const E=t(S,c),P=($,X)=>{window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",A),qp.has(S)&&qp.delete(S),K1($)&&typeof E=="function"&&E($,{success:X})},T=$=>{P($,S===window||S===document||i.useGlobalTarget||AC(S,$.target))},A=$=>{P($,!1)};window.addEventListener("pointerup",T,h),window.addEventListener("pointercancel",A,h)};return a.forEach(c=>{(i.useGlobalTarget?window:c).addEventListener("pointerdown",p,h),EC(c)&&(c.addEventListener("focus",E=>pL(E,h)),!MC(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),g}function DC(e){return UT(e)&&"ownerSVGElement"in e}function gL(e){return DC(e)&&e.tagName==="svg"}const oi=e=>!!(e&&e.getVelocity),yL=[...SC,yr,Ba],_L=e=>yL.find(wC(e)),gx=K.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Y1(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function vL(...e){return t=>{let i=!1;const a=e.map(h=>{const g=Y1(h,t);return!i&&typeof g=="function"&&(i=!0),g});if(i)return()=>{for(let h=0;h<a.length;h++){const g=a[h];typeof g=="function"?g():Y1(e[h],null)}}}}function xL(...e){return K.useCallback(vL(...e),e)}class bL extends K.Component{getSnapshotBeforeUpdate(t){const i=this.props.childRef.current;if(i&&t.isPresent&&!this.props.isPresent){const a=i.offsetParent,h=EC(a)&&a.offsetWidth||0,g=this.props.sizeRef.current;g.height=i.offsetHeight||0,g.width=i.offsetWidth||0,g.top=i.offsetTop,g.left=i.offsetLeft,g.right=h-g.width-g.left}return null}componentDidUpdate(){}render(){return this.props.children}}function wL({children:e,isPresent:t,anchorX:i,root:a}){var P;const h=K.useId(),g=K.useRef(null),p=K.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=K.useContext(gx),S=((P=e.props)==null?void 0:P.ref)??(e==null?void 0:e.ref),E=xL(g,S);return K.useInsertionEffect(()=>{const{width:T,height:A,top:$,left:X,right:G}=p.current;if(t||!g.current||!T||!A)return;const ne=i==="left"?`left: ${X}`:`right: ${G}`;g.current.dataset.motionPopId=h;const F=document.createElement("style");c&&(F.nonce=c);const V=a??document.head;return V.appendChild(F),F.sheet&&F.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${T}px !important;
            height: ${A}px !important;
            ${ne}px !important;
            top: ${$}px !important;
          }
        `),()=>{V.contains(F)&&V.removeChild(F)}},[t]),re.jsx(bL,{isPresent:t,childRef:g,sizeRef:p,children:K.cloneElement(e,{ref:E})})}const SL=({children:e,initial:t,isPresent:i,onExitComplete:a,custom:h,presenceAffectsLayout:g,mode:p,anchorX:c,root:S})=>{const E=Z0(kL),P=K.useId();let T=!0,A=K.useMemo(()=>(T=!1,{id:P,initial:t,isPresent:i,custom:h,onExitComplete:$=>{E.set($,!0);for(const X of E.values())if(!X)return;a&&a()},register:$=>(E.set($,!1),()=>E.delete($))}),[i,E,a]);return g&&T&&(A={...A}),K.useMemo(()=>{E.forEach(($,X)=>E.set(X,!1))},[i]),K.useEffect(()=>{!i&&!E.size&&a&&a()},[i]),p==="popLayout"&&(e=re.jsx(wL,{isPresent:i,anchorX:c,root:S,children:e})),re.jsx(Xm.Provider,{value:A,children:e})};function kL(){return new Map}function zC(e=!0){const t=K.useContext(Xm);if(t===null)return[!0,null];const{isPresent:i,onExitComplete:a,register:h}=t,g=K.useId();K.useEffect(()=>{if(e)return h(g)},[e]);const p=K.useCallback(()=>e&&a&&a(g),[g,a,e]);return!i&&a?[!1,p]:[!0]}const xp=e=>e.key||"";function J1(e){const t=[];return K.Children.forEach(e,i=>{K.isValidElement(i)&&t.push(i)}),t}const mu=({children:e,custom:t,initial:i=!0,onExitComplete:a,presenceAffectsLayout:h=!0,mode:g="sync",propagate:p=!1,anchorX:c="left",root:S})=>{const[E,P]=zC(p),T=K.useMemo(()=>J1(e),[e]),A=p&&!E?[]:T.map(xp),$=K.useRef(!0),X=K.useRef(T),G=Z0(()=>new Map),ne=K.useRef(new Set),[F,V]=K.useState(T),[H,ee]=K.useState(T);jT(()=>{$.current=!1,X.current=T;for(let fe=0;fe<H.length;fe++){const le=xp(H[fe]);A.includes(le)?(G.delete(le),ne.current.delete(le)):G.get(le)!==!0&&G.set(le,!1)}},[H,A.length,A.join("-")]);const ye=[];if(T!==F){let fe=[...T];for(let le=0;le<H.length;le++){const we=H[le],Le=xp(we);A.includes(Le)||(fe.splice(le,0,we),ye.push(we))}return g==="wait"&&ye.length&&(fe=ye),ee(J1(fe)),V(T),null}const{forceRender:be}=K.useContext(q0);return re.jsx(re.Fragment,{children:H.map(fe=>{const le=xp(fe),we=p&&!E?!1:T===H||A.includes(le),Le=()=>{if(ne.current.has(le))return;if(ne.current.add(le),G.has(le))G.set(le,!0);else return;let ze=!0;G.forEach(Ne=>{Ne||(ze=!1)}),ze&&(be==null||be(),ee(X.current),p&&(P==null||P()),a&&a())};return re.jsx(SL,{isPresent:we,initial:!$.current||i?void 0:!1,custom:t,presenceAffectsLayout:h,mode:g,root:S,onExitComplete:we?void 0:Le,anchorX:c,children:fe},le)})})},RC=K.createContext({strict:!1}),Q1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gu={};for(const e in Q1)gu[e]={isEnabled:t=>Q1[e].some(i=>!!t[i])};function TL(e){for(const t in e)gu[t]={...gu[t],...e[t]}}const CL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cm(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||CL.has(e)}let LC=e=>!Cm(e);function EL(e){typeof e=="function"&&(LC=t=>t.startsWith("on")?!Cm(t):e(t))}try{EL(require("@emotion/is-prop-valid").default)}catch{}function PL(e,t,i){const a={};for(const h in e)h==="values"&&typeof e.values=="object"||(LC(h)||i===!0&&Cm(h)||!t&&!Cm(h)||e.draggable&&h.startsWith("onDrag"))&&(a[h]=e[h]);return a}const Km=K.createContext({});function Ym(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ld(e){return typeof e=="string"||Array.isArray(e)}const yx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_x=["initial",...yx];function Jm(e){return Ym(e.animate)||_x.some(t=>Ld(e[t]))}function BC(e){return!!(Jm(e)||e.variants)}function IL(e,t){if(Jm(e)){const{initial:i,animate:a}=e;return{initial:i===!1||Ld(i)?i:void 0,animate:Ld(a)?a:void 0}}return e.inherit!==!1?t:{}}function AL(e){const{initial:t,animate:i}=IL(e,K.useContext(Km));return K.useMemo(()=>({initial:t,animate:i}),[e2(t),e2(i)])}function e2(e){return Array.isArray(e)?e.join(" "):e}function t2(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const $h={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(wt.test(e))e=parseFloat(e);else return e;const i=t2(e,t.target.x),a=t2(e,t.target.y);return`${i}% ${a}%`}},ML={correct:(e,{treeScale:t,projectionDelta:i})=>{const a=e,h=Ba.parse(e);if(h.length>5)return a;const g=Ba.createTransformer(e),p=typeof h[0]!="number"?1:0,c=i.x.scale*t.x,S=i.y.scale*t.y;h[0+p]/=c,h[1+p]/=S;const E=Kn(c,S,.5);return typeof h[2+p]=="number"&&(h[2+p]/=E),typeof h[3+p]=="number"&&(h[3+p]/=E),g(h)}},Iv={borderRadius:{...$h,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$h,borderTopRightRadius:$h,borderBottomLeftRadius:$h,borderBottomRightRadius:$h,boxShadow:ML};function FC(e,{layout:t,layoutId:i}){return Su.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!Iv[e]||e==="opacity")}const DL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zL=wu.length;function RL(e,t,i){let a="",h=!0;for(let g=0;g<zL;g++){const p=wu[g],c=e[p];if(c===void 0)continue;let S=!0;if(typeof c=="number"?S=c===(p.startsWith("scale")?1:0):S=parseFloat(c)===0,!S||i){const E=CC(c,fx[p]);if(!S){h=!1;const P=DL[p]||p;a+=`${P}(${E}) `}i&&(t[p]=E)}}return a=a.trim(),i?a=i(t,h?"":a):h&&(a="none"),a}function vx(e,t,i){const{style:a,vars:h,transformOrigin:g}=e;let p=!1,c=!1;for(const S in t){const E=t[S];if(Su.has(S)){p=!0;continue}else if(rC(S)){h[S]=E;continue}else{const P=CC(E,fx[S]);S.startsWith("origin")?(c=!0,g[S]=P):a[S]=P}}if(t.transform||(p||i?a.transform=RL(t,e.transform,i):a.transform&&(a.transform="none")),c){const{originX:S="50%",originY:E="50%",originZ:P=0}=g;a.transformOrigin=`${S} ${E} ${P}`}}const xx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function OC(e,t,i){for(const a in t)!oi(t[a])&&!FC(a,i)&&(e[a]=t[a])}function LL({transformTemplate:e},t){return K.useMemo(()=>{const i=xx();return vx(i,t,e),Object.assign({},i.vars,i.style)},[t])}function BL(e,t){const i=e.style||{},a={};return OC(a,i,e),Object.assign(a,LL(e,t)),a}function FL(e,t){const i={},a=BL(e,t);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=a,i}const OL={offset:"stroke-dashoffset",array:"stroke-dasharray"},NL={offset:"strokeDashoffset",array:"strokeDasharray"};function jL(e,t,i=1,a=0,h=!0){e.pathLength=1;const g=h?OL:NL;e[g.offset]=wt.transform(-a);const p=wt.transform(t),c=wt.transform(i);e[g.array]=`${p} ${c}`}const VL=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function NC(e,{attrX:t,attrY:i,attrScale:a,pathLength:h,pathSpacing:g=1,pathOffset:p=0,...c},S,E,P){if(vx(e,c,E),S){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:T,style:A}=e;T.transform&&(A.transform=T.transform,delete T.transform),(A.transform||T.transformOrigin)&&(A.transformOrigin=T.transformOrigin??"50% 50%",delete T.transformOrigin),A.transform&&(A.transformBox=(P==null?void 0:P.transformBox)??"fill-box",delete T.transformBox);for(const $ of VL)T[$]!==void 0&&(A[$]=T[$],delete T[$]);t!==void 0&&(T.x=t),i!==void 0&&(T.y=i),a!==void 0&&(T.scale=a),h!==void 0&&jL(T,h,g,p,!1)}const jC=()=>({...xx(),attrs:{}}),VC=e=>typeof e=="string"&&e.toLowerCase()==="svg";function UL(e,t,i,a){const h=K.useMemo(()=>{const g=jC();return NC(g,t,VC(a),e.transformTemplate,e.style),{...g.attrs,style:{...g.style}}},[t]);if(e.style){const g={};OC(g,e.style,e),h.style={...g,...h.style}}return h}const $L=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bx(e){return typeof e!="string"||e.includes("-")?!1:!!($L.indexOf(e)>-1||/[A-Z]/u.test(e))}function HL(e,t,i,{latestValues:a},h,g=!1,p){const S=(p??bx(e)?UL:FL)(t,a,h,e),E=PL(t,typeof e=="string",g),P=e!==K.Fragment?{...E,...S,ref:i}:{},{children:T}=t,A=K.useMemo(()=>oi(T)?T.get():T,[T]);return K.createElement(e,{...P,children:A})}function n2(e){const t=[{},{}];return e==null||e.values.forEach((i,a)=>{t[0][a]=i.get(),t[1][a]=i.getVelocity()}),t}function wx(e,t,i,a){if(typeof t=="function"){const[h,g]=n2(a);t=t(i!==void 0?i:e.custom,h,g)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[h,g]=n2(a);t=t(i!==void 0?i:e.custom,h,g)}return t}function Zp(e){return oi(e)?e.get():e}function GL({scrapeMotionValuesFromProps:e,createRenderState:t},i,a,h){return{latestValues:WL(i,a,h,e),renderState:t()}}function WL(e,t,i,a){const h={},g=a(e,{});for(const A in g)h[A]=Zp(g[A]);let{initial:p,animate:c}=e;const S=Jm(e),E=BC(e);t&&E&&!S&&e.inherit!==!1&&(p===void 0&&(p=t.initial),c===void 0&&(c=t.animate));let P=i?i.initial===!1:!1;P=P||p===!1;const T=P?c:p;if(T&&typeof T!="boolean"&&!Ym(T)){const A=Array.isArray(T)?T:[T];for(let $=0;$<A.length;$++){const X=wx(e,A[$]);if(X){const{transitionEnd:G,transition:ne,...F}=X;for(const V in F){let H=F[V];if(Array.isArray(H)){const ee=P?H.length-1:0;H=H[ee]}H!==null&&(h[V]=H)}for(const V in G)h[V]=G[V]}}}return h}const UC=e=>(t,i)=>{const a=K.useContext(Km),h=K.useContext(Xm),g=()=>GL(e,t,a,h);return i?g():Z0(g)};function Sx(e,t,i){var g;const{style:a}=e,h={};for(const p in a)(oi(a[p])||t.style&&oi(t.style[p])||FC(p,e)||((g=i==null?void 0:i.getValue(p))==null?void 0:g.liveStyle)!==void 0)&&(h[p]=a[p]);return h}const qL=UC({scrapeMotionValuesFromProps:Sx,createRenderState:xx});function $C(e,t,i){const a=Sx(e,t,i);for(const h in e)if(oi(e[h])||oi(t[h])){const g=wu.indexOf(h)!==-1?"attr"+h.charAt(0).toUpperCase()+h.substring(1):h;a[g]=e[h]}return a}const ZL=UC({scrapeMotionValuesFromProps:$C,createRenderState:jC}),XL=Symbol.for("motionComponentSymbol");function KL(e,t,i){const a=K.useRef(i);K.useInsertionEffect(()=>{a.current=i});const h=K.useRef(null);return K.useCallback(g=>{var c;g&&((c=e.onMount)==null||c.call(e,g)),t&&(g?t.mount(g):t.unmount());const p=a.current;if(typeof p=="function")if(g){const S=p(g);typeof S=="function"&&(h.current=S)}else h.current?(h.current(),h.current=null):p(g);else p&&(p.current=g)},[t])}const kx=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),YL="framerAppearId",HC="data-"+kx(YL),GC=K.createContext({});function Jh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function JL(e,t,i,a,h,g){var ne,F;const{visualElement:p}=K.useContext(Km),c=K.useContext(RC),S=K.useContext(Xm),E=K.useContext(gx).reducedMotion,P=K.useRef(null);a=a||c.renderer,!P.current&&a&&(P.current=a(e,{visualState:t,parent:p,props:i,presenceContext:S,blockInitialAnimation:S?S.initial===!1:!1,reducedMotionConfig:E,isSVG:g}));const T=P.current,A=K.useContext(GC);T&&!T.projection&&h&&(T.type==="html"||T.type==="svg")&&QL(P.current,i,h,A);const $=K.useRef(!1);K.useInsertionEffect(()=>{T&&$.current&&T.update(i,S)});const X=i[HC],G=K.useRef(!!X&&!((ne=window.MotionHandoffIsComplete)!=null&&ne.call(window,X))&&((F=window.MotionHasOptimisedAnimation)==null?void 0:F.call(window,X)));return jT(()=>{T&&($.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),T.scheduleRenderMicrotask(),G.current&&T.animationState&&T.animationState.animateChanges())}),K.useEffect(()=>{T&&(!G.current&&T.animationState&&T.animationState.animateChanges(),G.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,X)}),G.current=!1),T.enteringChildren=void 0)}),T}function QL(e,t,i,a){const{layoutId:h,layout:g,drag:p,dragConstraints:c,layoutScroll:S,layoutRoot:E,layoutCrossfade:P}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:WC(e.parent)),e.projection.setOptions({layoutId:h,layout:g,alwaysMeasureLayout:!!p||c&&Jh(c),visualElement:e,animationType:typeof g=="string"?g:"both",initialPromotionConfig:a,crossfade:P,layoutScroll:S,layoutRoot:E})}function WC(e){if(e)return e.options.allowProjection!==!1?e.projection:WC(e.parent)}function t_(e,{forwardMotionProps:t=!1,type:i}={},a,h){a&&TL(a);const g=i?i==="svg":bx(e),p=g?ZL:qL;function c(E,P){let T;const A={...K.useContext(gx),...E,layoutId:e3(E)},{isStatic:$}=A,X=AL(E),G=p(E,$);if(!$&&X0){t3();const ne=n3(A);T=ne.MeasureLayout,X.visualElement=JL(e,G,A,h,ne.ProjectionNode,g)}return re.jsxs(Km.Provider,{value:X,children:[T&&X.visualElement?re.jsx(T,{visualElement:X.visualElement,...A}):null,HL(e,E,KL(G,X.visualElement,P),G,$,t,g)]})}c.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const S=K.forwardRef(c);return S[XL]=e,S}function e3({layoutId:e}){const t=K.useContext(q0).id;return t&&e!==void 0?t+"-"+e:e}function t3(e,t){K.useContext(RC).strict}function n3(e){const{drag:t,layout:i}=gu;if(!t&&!i)return{};const a={...t,...i};return{MeasureLayout:t!=null&&t.isEnabled(e)||i!=null&&i.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function r3(e,t){if(typeof Proxy>"u")return t_;const i=new Map,a=(g,p)=>t_(g,p,e,t),h=(g,p)=>a(g,p);return new Proxy(h,{get:(g,p)=>p==="create"?a:(i.has(p)||i.set(p,t_(p,void 0,e,t)),i.get(p))})}function qC({top:e,left:t,right:i,bottom:a}){return{x:{min:t,max:i},y:{min:e,max:a}}}function i3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function s3(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:a.y,right:a.x}}function n_(e){return e===void 0||e===1}function Av({scale:e,scaleX:t,scaleY:i}){return!n_(e)||!n_(t)||!n_(i)}function vl(e){return Av(e)||ZC(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ZC(e){return r2(e.x)||r2(e.y)}function r2(e){return e&&e!=="0%"}function Em(e,t,i){const a=e-i,h=t*a;return i+h}function i2(e,t,i,a,h){return h!==void 0&&(e=Em(e,h,a)),Em(e,i,a)+t}function Mv(e,t=0,i=1,a,h){e.min=i2(e.min,t,i,a,h),e.max=i2(e.max,t,i,a,h)}function XC(e,{x:t,y:i}){Mv(e.x,t.translate,t.scale,t.originPoint),Mv(e.y,i.translate,i.scale,i.originPoint)}const s2=.999999999999,o2=1.0000000000001;function o3(e,t,i,a=!1){const h=i.length;if(!h)return;t.x=t.y=1;let g,p;for(let c=0;c<h;c++){g=i[c],p=g.projectionDelta;const{visualElement:S}=g.options;S&&S.props.style&&S.props.style.display==="contents"||(a&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Yc(e,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),p&&(t.x*=p.x.scale,t.y*=p.y.scale,XC(e,p)),a&&vl(g.latestValues)&&Yc(e,g.latestValues))}t.x<o2&&t.x>s2&&(t.x=1),t.y<o2&&t.y>s2&&(t.y=1)}function Kc(e,t){e.min=e.min+t,e.max=e.max+t}function a2(e,t,i,a,h=.5){const g=Kn(e.min,e.max,h);Mv(e,t,i,g,a)}function Yc(e,t){a2(e.x,t.x,t.scaleX,t.scale,t.originX),a2(e.y,t.y,t.scaleY,t.scale,t.originY)}function KC(e,t){return qC(s3(e.getBoundingClientRect(),t))}function a3(e,t,i){const a=KC(e,i),{scroll:h}=t;return h&&(Kc(a.x,h.offset.x),Kc(a.y,h.offset.y)),a}const l2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jc=()=>({x:l2(),y:l2()}),c2=()=>({min:0,max:0}),kr=()=>({x:c2(),y:c2()}),Dv={current:null},YC={current:!1};function l3(){if(YC.current=!0,!!X0)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Dv.current=e.matches;e.addEventListener("change",t),t()}else Dv.current=!1}const c3=new WeakMap;function u3(e,t,i){for(const a in t){const h=t[a],g=i[a];if(oi(h))e.addValue(a,h);else if(oi(g))e.addValue(a,pu(h,{owner:e}));else if(g!==h)if(e.hasValue(a)){const p=e.getValue(a);p.liveStyle===!0?p.jump(h):p.hasAnimated||p.set(h)}else{const p=e.getStaticValue(a);e.addValue(a,pu(p!==void 0?p:h,{owner:e}))}}for(const a in i)t[a]===void 0&&e.removeValue(a);return t}const u2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class h3{scrapeMotionValuesFromProps(t,i,a){return{}}constructor({parent:t,props:i,presenceContext:a,reducedMotionConfig:h,blockInitialAnimation:g,visualState:p},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=_i.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,jn.render(this.render,!1,!0))};const{latestValues:S,renderState:E}=p;this.latestValues=S,this.baseTarget={...S},this.initialValues=i.initial?{...S}:{},this.renderState=E,this.parent=t,this.props=i,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=h,this.options=c,this.blockInitialAnimation=!!g,this.isControllingVariants=Jm(i),this.isVariantNode=BC(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:P,...T}=this.scrapeMotionValuesFromProps(i,{},this);for(const A in T){const $=T[A];S[A]!==void 0&&oi($)&&$.set(S[A])}}mount(t){var i;this.current=t,c3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,h)=>this.bindToMotionValue(h,a)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(YC.current||l3(),this.shouldReduceMotion=Dv.current),(i=this.parent)==null||i.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),La(this.notifyUpdate),La(this.render),this.valueSubscriptions.forEach(i=>i()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const i in this.events)this.events[i].clear();for(const i in this.features){const a=this.features[i];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,i){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=Su.has(t);a&&this.onBindTransform&&this.onBindTransform();const h=i.on("change",p=>{this.latestValues[t]=p,this.props.onUpdate&&jn.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let g;window.MotionCheckAppearSync&&(g=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{h(),g&&g(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in gu){const i=gu[t];if(!i)continue;const{isEnabled:a,Feature:h}=i;if(!this.features[t]&&h&&a(this.props)&&(this.features[t]=new h(this)),this.features[t]){const g=this.features[t];g.isMounted?g.update():(g.mount(),g.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let a=0;a<u2.length;a++){const h=u2[a];this.propEventSubscriptions[h]&&(this.propEventSubscriptions[h](),delete this.propEventSubscriptions[h]);const g="on"+h,p=t[g];p&&(this.propEventSubscriptions[h]=this.on(h,p))}this.prevMotionValues=u3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const a=this.values.get(t);i!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&i!==void 0&&(a=pu(i===null?void 0:i,{owner:this}),this.addValue(t,a)),a}readValue(t,i){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(VT(a)||$T(a))?a=parseFloat(a):!_L(a)&&Ba.test(i)&&(a=TC(t,i)),this.setBaseTarget(t,oi(a)?a.get():a)),oi(a)?a.get():a}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var g;const{initial:i}=this.props;let a;if(typeof i=="string"||typeof i=="object"){const p=wx(this.props,i,(g=this.presenceContext)==null?void 0:g.custom);p&&(a=p[t])}if(i&&a!==void 0)return a;const h=this.getBaseTargetFromProps(this.props,t);return h!==void 0&&!oi(h)?h:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new ex),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}scheduleRenderMicrotask(){px.render(this.render)}}class JC extends h3{constructor(){super(...arguments),this.KeyframeResolver=aL}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:a}){delete i[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;oi(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function QC(e,{style:t,vars:i},a,h){const g=e.style;let p;for(p in t)g[p]=t[p];h==null||h.applyProjectionStyles(g,a);for(p in i)g.setProperty(p,i[p])}function d3(e){return window.getComputedStyle(e)}class f3 extends JC{constructor(){super(...arguments),this.type="html",this.renderInstance=QC}readValueFromInstance(t,i){var a;if(Su.has(i))return(a=this.projection)!=null&&a.isProjecting?wv(i):CR(t,i);{const h=d3(t),g=(rC(i)?h.getPropertyValue(i):h[i])||0;return typeof g=="string"?g.trim():g}}measureInstanceViewportBox(t,{transformPagePoint:i}){return KC(t,i)}build(t,i,a){vx(t,i,a.transformTemplate)}scrapeMotionValuesFromProps(t,i,a){return Sx(t,i,a)}}const eE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function p3(e,t,i,a){QC(e,t,void 0,a);for(const h in t.attrs)e.setAttribute(eE.has(h)?h:kx(h),t.attrs[h])}class m3 extends JC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=kr}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(Su.has(i)){const a=kC(i);return a&&a.default||0}return i=eE.has(i)?i:kx(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,a){return $C(t,i,a)}build(t,i,a){NC(t,i,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,i,a,h){p3(t,i,a,h)}mount(t){this.isSVGTag=VC(t.tagName),super.mount(t)}}const g3=(e,t)=>t.isSVG??bx(e)?new m3(t):new f3(t,{allowProjection:e!==K.Fragment});function su(e,t,i){const a=e.getProps();return wx(a,t,i!==void 0?i:a.custom,e)}const zv=e=>Array.isArray(e);function y3(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,pu(i))}function _3(e){return zv(e)?e[e.length-1]||0:e}function v3(e,t){const i=su(e,t);let{transitionEnd:a={},transition:h={},...g}=i||{};g={...g,...a};for(const p in g){const c=_3(g[p]);y3(e,p,c)}}function x3(e){return!!(oi(e)&&e.add)}function Rv(e,t){const i=e.getValue("willChange");if(x3(i))return i.add(t);if(!i&&Mo.WillChange){const a=new Mo.WillChange("auto");e.addValue("willChange",a),a.add(t)}}function tE(e){return e.props[HC]}const b3=e=>e!==null;function w3(e,{repeat:t,repeatType:i="loop"},a){const h=e.filter(b3),g=t&&i!=="loop"&&t%2===1?0:h.length-1;return h[g]}const S3={type:"spring",stiffness:500,damping:25,restSpeed:10},k3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),T3={type:"keyframes",duration:.8},C3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},E3=(e,{keyframes:t})=>t.length>2?T3:Su.has(e)?e.startsWith("scale")?k3(t[1]):S3:C3;function P3({when:e,delay:t,delayChildren:i,staggerChildren:a,staggerDirection:h,repeat:g,repeatType:p,repeatDelay:c,from:S,elapsed:E,...P}){return!!Object.keys(P).length}const Tx=(e,t,i,a={},h,g)=>p=>{const c=dx(a,e)||{},S=c.delay||a.delay||0;let{elapsed:E=0}=a;E=E-Co(S);const P={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-E,onUpdate:A=>{t.set(A),c.onUpdate&&c.onUpdate(A)},onComplete:()=>{p(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:g?void 0:h};P3(c)||Object.assign(P,E3(e,P)),P.duration&&(P.duration=Co(P.duration)),P.repeatDelay&&(P.repeatDelay=Co(P.repeatDelay)),P.from!==void 0&&(P.keyframes[0]=P.from);let T=!1;if((P.type===!1||P.duration===0&&!P.repeatDelay)&&(Ev(P),P.delay===0&&(T=!0)),(Mo.instantAnimations||Mo.skipAnimations)&&(T=!0,Ev(P),P.delay=0),P.allowFlatten=!c.type&&!c.ease,T&&!g&&t.get()!==void 0){const A=w3(P.keyframes,c);if(A!==void 0){jn.update(()=>{P.onUpdate(A),P.onComplete()});return}}return c.isSync?new ux(P):new XR(P)};function I3({protectedKeys:e,needsAnimating:t},i){const a=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,a}function nE(e,t,{delay:i=0,transitionOverride:a,type:h}={}){let{transition:g=e.getDefaultTransition(),transitionEnd:p,...c}=t;a&&(g=a);const S=[],E=h&&e.animationState&&e.animationState.getState()[h];for(const P in c){const T=e.getValue(P,e.latestValues[P]??null),A=c[P];if(A===void 0||E&&I3(E,P))continue;const $={delay:i,...dx(g||{},P)},X=T.get();if(X!==void 0&&!T.isAnimating&&!Array.isArray(A)&&A===X&&!$.velocity)continue;let G=!1;if(window.MotionHandoffAnimation){const F=tE(e);if(F){const V=window.MotionHandoffAnimation(F,P,jn);V!==null&&($.startTime=V,G=!0)}}Rv(e,P),T.start(Tx(P,T,A,e.shouldReduceMotion&&bC.has(P)?{type:!1}:$,e,G));const ne=T.animation;ne&&S.push(ne)}return p&&Promise.all(S).then(()=>{jn.update(()=>{p&&v3(e,p)})}),S}function rE(e,t,i,a=0,h=1){const g=Array.from(e).sort((E,P)=>E.sortNodePosition(P)).indexOf(t),p=e.size,c=(p-1)*a;return typeof i=="function"?i(g,p):h===1?g*a:c-g*a}function Lv(e,t,i={}){var S;const a=su(e,t,i.type==="exit"?(S=e.presenceContext)==null?void 0:S.custom:void 0);let{transition:h=e.getDefaultTransition()||{}}=a||{};i.transitionOverride&&(h=i.transitionOverride);const g=a?()=>Promise.all(nE(e,a,i)):()=>Promise.resolve(),p=e.variantChildren&&e.variantChildren.size?(E=0)=>{const{delayChildren:P=0,staggerChildren:T,staggerDirection:A}=h;return A3(e,t,E,P,T,A,i)}:()=>Promise.resolve(),{when:c}=h;if(c){const[E,P]=c==="beforeChildren"?[g,p]:[p,g];return E().then(()=>P())}else return Promise.all([g(),p(i.delay)])}function A3(e,t,i=0,a=0,h=0,g=1,p){const c=[];for(const S of e.variantChildren)S.notify("AnimationStart",t),c.push(Lv(S,t,{...p,delay:i+(typeof a=="function"?0:a)+rE(e.variantChildren,S,a,h,g)}).then(()=>S.notify("AnimationComplete",t)));return Promise.all(c)}function M3(e,t,i={}){e.notify("AnimationStart",t);let a;if(Array.isArray(t)){const h=t.map(g=>Lv(e,g,i));a=Promise.all(h)}else if(typeof t=="string")a=Lv(e,t,i);else{const h=typeof t=="function"?su(e,t,i.custom):t;a=Promise.all(nE(e,h,i))}return a.then(()=>{e.notify("AnimationComplete",t)})}function iE(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let a=0;a<i;a++)if(t[a]!==e[a])return!1;return!0}const D3=_x.length;function sE(e){if(!e)return;if(!e.isControllingVariants){const i=e.parent?sE(e.parent)||{}:{};return e.props.initial!==void 0&&(i.initial=e.props.initial),i}const t={};for(let i=0;i<D3;i++){const a=_x[i],h=e.props[a];(Ld(h)||h===!1)&&(t[a]=h)}return t}const z3=[...yx].reverse(),R3=yx.length;function L3(e){return t=>Promise.all(t.map(({animation:i,options:a})=>M3(e,i,a)))}function B3(e){let t=L3(e),i=h2(),a=!0;const h=S=>(E,P)=>{var A;const T=su(e,P,S==="exit"?(A=e.presenceContext)==null?void 0:A.custom:void 0);if(T){const{transition:$,transitionEnd:X,...G}=T;E={...E,...G,...X}}return E};function g(S){t=S(e)}function p(S){const{props:E}=e,P=sE(e.parent)||{},T=[],A=new Set;let $={},X=1/0;for(let ne=0;ne<R3;ne++){const F=z3[ne],V=i[F],H=E[F]!==void 0?E[F]:P[F],ee=Ld(H),ye=F===S?V.isActive:null;ye===!1&&(X=ne);let be=H===P[F]&&H!==E[F]&&ee;if(be&&a&&e.manuallyAnimateOnMount&&(be=!1),V.protectedKeys={...$},!V.isActive&&ye===null||!H&&!V.prevProp||Ym(H)||typeof H=="boolean")continue;const fe=F3(V.prevProp,H);let le=fe||F===S&&V.isActive&&!be&&ee||ne>X&&ee,we=!1;const Le=Array.isArray(H)?H:[H];let ze=Le.reduce(h(F),{});ye===!1&&(ze={});const{prevResolvedValues:Ne={}}=V,De={...Ne,...ze},Ke=je=>{le=!0,A.has(je)&&(we=!0,A.delete(je)),V.needsAnimating[je]=!0;const Te=e.getValue(je);Te&&(Te.liveStyle=!1)};for(const je in De){const Te=ze[je],$e=Ne[je];if($.hasOwnProperty(je))continue;let qe=!1;zv(Te)&&zv($e)?qe=!iE(Te,$e):qe=Te!==$e,qe?Te!=null?Ke(je):A.add(je):Te!==void 0&&A.has(je)?Ke(je):V.protectedKeys[je]=!0}V.prevProp=H,V.prevResolvedValues=ze,V.isActive&&($={...$,...ze}),a&&e.blockInitialAnimation&&(le=!1);const nt=be&&fe;le&&(!nt||we)&&T.push(...Le.map(je=>{const Te={type:F};if(typeof je=="string"&&a&&!nt&&e.manuallyAnimateOnMount&&e.parent){const{parent:$e}=e,qe=su($e,je);if($e.enteringChildren&&qe){const{delayChildren:yt}=qe.transition||{};Te.delay=rE($e.enteringChildren,e,yt)}}return{animation:je,options:Te}}))}if(A.size){const ne={};if(typeof E.initial!="boolean"){const F=su(e,Array.isArray(E.initial)?E.initial[0]:E.initial);F&&F.transition&&(ne.transition=F.transition)}A.forEach(F=>{const V=e.getBaseTarget(F),H=e.getValue(F);H&&(H.liveStyle=!0),ne[F]=V??null}),T.push({animation:ne})}let G=!!T.length;return a&&(E.initial===!1||E.initial===E.animate)&&!e.manuallyAnimateOnMount&&(G=!1),a=!1,G?t(T):Promise.resolve()}function c(S,E){var T;if(i[S].isActive===E)return Promise.resolve();(T=e.variantChildren)==null||T.forEach(A=>{var $;return($=A.animationState)==null?void 0:$.setActive(S,E)}),i[S].isActive=E;const P=p(S);for(const A in i)i[A].protectedKeys={};return P}return{animateChanges:p,setActive:c,setAnimateFunction:g,getState:()=>i,reset:()=>{i=h2()}}}function F3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!iE(t,e):!1}function pl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function h2(){return{animate:pl(!0),whileInView:pl(),whileHover:pl(),whileTap:pl(),whileDrag:pl(),whileFocus:pl(),exit:pl()}}class ja{constructor(t){this.isMounted=!1,this.node=t}update(){}}class O3 extends ja{constructor(t){super(t),t.animationState||(t.animationState=B3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ym(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let N3=0;class j3 extends ja{constructor(){super(...arguments),this.id=N3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const h=this.node.animationState.setActive("exit",!t);i&&!t&&h.then(()=>{i(this.id)})}mount(){const{register:t,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const V3={animation:{Feature:O3},exit:{Feature:j3}};function Bd(e,t,i,a={passive:!0}){return e.addEventListener(t,i,a),()=>e.removeEventListener(t,i)}function Xd(e){return{point:{x:e.pageX,y:e.pageY}}}const U3=e=>t=>mx(t)&&e(t,Xd(t));function hd(e,t,i,a){return Bd(e,t,U3(i),a)}const oE=1e-4,$3=1-oE,H3=1+oE,aE=.01,G3=0-aE,W3=0+aE;function vi(e){return e.max-e.min}function q3(e,t,i){return Math.abs(e-t)<=i}function d2(e,t,i,a=.5){e.origin=a,e.originPoint=Kn(t.min,t.max,e.origin),e.scale=vi(i)/vi(t),e.translate=Kn(i.min,i.max,e.origin)-e.originPoint,(e.scale>=$3&&e.scale<=H3||isNaN(e.scale))&&(e.scale=1),(e.translate>=G3&&e.translate<=W3||isNaN(e.translate))&&(e.translate=0)}function dd(e,t,i,a){d2(e.x,t.x,i.x,a?a.originX:void 0),d2(e.y,t.y,i.y,a?a.originY:void 0)}function f2(e,t,i){e.min=i.min+t.min,e.max=e.min+vi(t)}function Z3(e,t,i){f2(e.x,t.x,i.x),f2(e.y,t.y,i.y)}function p2(e,t,i){e.min=t.min-i.min,e.max=e.min+vi(t)}function Pm(e,t,i){p2(e.x,t.x,i.x),p2(e.y,t.y,i.y)}function ds(e){return[e("x"),e("y")]}const lE=({current:e})=>e?e.ownerDocument.defaultView:null,m2=(e,t)=>Math.abs(e-t);function X3(e,t){const i=m2(e.x,t.x),a=m2(e.y,t.y);return Math.sqrt(i**2+a**2)}const g2=new Set(["auto","scroll"]);class cE{constructor(t,i,{transformPagePoint:a,contextWindow:h=window,dragSnapToOrigin:g=!1,distanceThreshold:p=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=$=>{this.handleScroll($.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const $=i_(this.lastMoveEventInfo,this.history),X=this.startEvent!==null,G=X3($.offset,{x:0,y:0})>=this.distanceThreshold;if(!X&&!G)return;const{point:ne}=$,{timestamp:F}=Gr;this.history.push({...ne,timestamp:F});const{onStart:V,onMove:H}=this.handlers;X||(V&&V(this.lastMoveEvent,$),this.startEvent=this.lastMoveEvent),H&&H(this.lastMoveEvent,$)},this.handlePointerMove=($,X)=>{this.lastMoveEvent=$,this.lastMoveEventInfo=r_(X,this.transformPagePoint),jn.update(this.updatePoint,!0)},this.handlePointerUp=($,X)=>{this.end();const{onEnd:G,onSessionEnd:ne,resumeAnimation:F}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&F&&F(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=i_($.type==="pointercancel"?this.lastMoveEventInfo:r_(X,this.transformPagePoint),this.history);this.startEvent&&G&&G($,V),ne&&ne($,V)},!mx(t))return;this.dragSnapToOrigin=g,this.handlers=i,this.transformPagePoint=a,this.distanceThreshold=p,this.contextWindow=h||window;const S=Xd(t),E=r_(S,this.transformPagePoint),{point:P}=E,{timestamp:T}=Gr;this.history=[{...P,timestamp:T}];const{onSessionStart:A}=i;A&&A(t,i_(E,this.history)),this.removeListeners=Wd(hd(this.contextWindow,"pointermove",this.handlePointerMove),hd(this.contextWindow,"pointerup",this.handlePointerUp),hd(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(t){let i=t.parentElement;for(;i;){const a=getComputedStyle(i);(g2.has(a.overflowX)||g2.has(a.overflowY))&&this.scrollPositions.set(i,{x:i.scrollLeft,y:i.scrollTop}),i=i.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const i=this.scrollPositions.get(t);if(!i)return;const a=t===window,h=a?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},g={x:h.x-i.x,y:h.y-i.y};g.x===0&&g.y===0||(a?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=g.x,this.lastMoveEventInfo.point.y+=g.y):this.history.length>0&&(this.history[0].x-=g.x,this.history[0].y-=g.y),this.scrollPositions.set(t,h),jn.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),La(this.updatePoint)}}function r_(e,t){return t?{point:t(e.point)}:e}function y2(e,t){return{x:e.x-t.x,y:e.y-t.y}}function i_({point:e},t){return{point:e,delta:y2(e,uE(t)),offset:y2(e,K3(t)),velocity:Y3(t,.1)}}function K3(e){return e[0]}function uE(e){return e[e.length-1]}function Y3(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,a=null;const h=uE(e);for(;i>=0&&(a=e[i],!(h.timestamp-a.timestamp>Co(t)));)i--;if(!a)return{x:0,y:0};const g=ys(h.timestamp-a.timestamp);if(g===0)return{x:0,y:0};const p={x:(h.x-a.x)/g,y:(h.y-a.y)/g};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function J3(e,{min:t,max:i},a){return t!==void 0&&e<t?e=a?Kn(t,e,a.min):Math.max(e,t):i!==void 0&&e>i&&(e=a?Kn(i,e,a.max):Math.min(e,i)),e}function _2(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function Q3(e,{top:t,left:i,bottom:a,right:h}){return{x:_2(e.x,i,h),y:_2(e.y,t,a)}}function v2(e,t){let i=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,a]=[a,i]),{min:i,max:a}}function e5(e,t){return{x:v2(e.x,t.x),y:v2(e.y,t.y)}}function t5(e,t){let i=.5;const a=vi(e),h=vi(t);return h>a?i=Dd(t.min,t.max-a,e.min):a>h&&(i=Dd(e.min,e.max-h,t.min)),to(0,1,i)}function n5(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const Bv=.35;function r5(e=Bv){return e===!1?e=0:e===!0&&(e=Bv),{x:x2(e,"left","right"),y:x2(e,"top","bottom")}}function x2(e,t,i){return{min:b2(e,t),max:b2(e,i)}}function b2(e,t){return typeof e=="number"?e:e[t]||0}const i5=new WeakMap;class s5{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:i=!1,distanceThreshold:a}={}){const{presenceContext:h}=this.visualElement;if(h&&h.isPresent===!1)return;const g=T=>{i?(this.stopAnimation(),this.snapToCursor(Xd(T).point)):this.pauseAnimation()},p=(T,A)=>{this.stopAnimation();const{drag:$,dragPropagation:X,onDragStart:G}=this.getProps();if($&&!X&&(this.openDragLock&&this.openDragLock(),this.openDragLock=hL($),!this.openDragLock))return;this.latestPointerEvent=T,this.latestPanInfo=A,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ds(F=>{let V=this.getAxisMotionValue(F).get()||0;if(eo.test(V)){const{projection:H}=this.visualElement;if(H&&H.layout){const ee=H.layout.layoutBox[F];ee&&(V=vi(ee)*(parseFloat(V)/100))}}this.originPoint[F]=V}),G&&jn.postRender(()=>G(T,A)),Rv(this.visualElement,"transform");const{animationState:ne}=this.visualElement;ne&&ne.setActive("whileDrag",!0)},c=(T,A)=>{this.latestPointerEvent=T,this.latestPanInfo=A;const{dragPropagation:$,dragDirectionLock:X,onDirectionLock:G,onDrag:ne}=this.getProps();if(!$&&!this.openDragLock)return;const{offset:F}=A;if(X&&this.currentDirection===null){this.currentDirection=o5(F),this.currentDirection!==null&&G&&G(this.currentDirection);return}this.updateAxis("x",A.point,F),this.updateAxis("y",A.point,F),this.visualElement.render(),ne&&ne(T,A)},S=(T,A)=>{this.latestPointerEvent=T,this.latestPanInfo=A,this.stop(T,A),this.latestPointerEvent=null,this.latestPanInfo=null},E=()=>ds(T=>{var A;return this.getAnimationState(T)==="paused"&&((A=this.getAxisMotionValue(T).animation)==null?void 0:A.play())}),{dragSnapToOrigin:P}=this.getProps();this.panSession=new cE(t,{onSessionStart:g,onStart:p,onMove:c,onSessionEnd:S,resumeAnimation:E},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:P,distanceThreshold:a,contextWindow:lE(this.visualElement),element:this.visualElement.current})}stop(t,i){const a=t||this.latestPointerEvent,h=i||this.latestPanInfo,g=this.isDragging;if(this.cancel(),!g||!h||!a)return;const{velocity:p}=h;this.startAnimation(p);const{onDragEnd:c}=this.getProps();c&&jn.postRender(()=>c(a,h))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(t,i,a){const{drag:h}=this.getProps();if(!a||!bp(t,h,this.currentDirection))return;const g=this.getAxisMotionValue(t);let p=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(p=J3(p,this.constraints[t],this.elastic[t])),g.set(p)}resolveConstraints(){var g;const{dragConstraints:t,dragElastic:i}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(g=this.visualElement.projection)==null?void 0:g.layout,h=this.constraints;t&&Jh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=Q3(a.layoutBox,t):this.constraints=!1,this.elastic=r5(i),h!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ds(p=>{this.constraints!==!1&&this.getAxisMotionValue(p)&&(this.constraints[p]=n5(a.layoutBox[p],this.constraints[p]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!Jh(t))return!1;const a=t.current,{projection:h}=this.visualElement;if(!h||!h.layout)return!1;const g=a3(a,h.root,this.visualElement.getTransformPagePoint());let p=e5(h.layout.layoutBox,g);if(i){const c=i(i3(p));this.hasMutatedConstraints=!!c,c&&(p=qC(c))}return p}startAnimation(t){const{drag:i,dragMomentum:a,dragElastic:h,dragTransition:g,dragSnapToOrigin:p,onDragTransitionEnd:c}=this.getProps(),S=this.constraints||{},E=ds(P=>{if(!bp(P,i,this.currentDirection))return;let T=S&&S[P]||{};p&&(T={min:0,max:0});const A=h?200:1e6,$=h?40:1e7,X={type:"inertia",velocity:a?t[P]:0,bounceStiffness:A,bounceDamping:$,timeConstant:750,restDelta:1,restSpeed:10,...g,...T};return this.startAxisValueAnimation(P,X)});return Promise.all(E).then(c)}startAxisValueAnimation(t,i){const a=this.getAxisMotionValue(t);return Rv(this.visualElement,t),a.start(Tx(t,a,0,i,this.visualElement,!1))}stopAnimation(){ds(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ds(t=>{var i;return(i=this.getAxisMotionValue(t).animation)==null?void 0:i.pause()})}getAnimationState(t){var i;return(i=this.getAxisMotionValue(t).animation)==null?void 0:i.state}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),h=a[i];return h||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){ds(i=>{const{drag:a}=this.getProps();if(!bp(i,a,this.currentDirection))return;const{projection:h}=this.visualElement,g=this.getAxisMotionValue(i);if(h&&h.layout){const{min:p,max:c}=h.layout.layoutBox[i],S=g.get()||0;g.set(t[i]-Kn(p,c,.5)+S)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:a}=this.visualElement;if(!Jh(i)||!a||!this.constraints)return;this.stopAnimation();const h={x:0,y:0};ds(p=>{const c=this.getAxisMotionValue(p);if(c&&this.constraints!==!1){const S=c.get();h[p]=t5({min:S,max:S},this.constraints[p])}});const{transformTemplate:g}=this.visualElement.getProps();this.visualElement.current.style.transform=g?g({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),ds(p=>{if(!bp(p,t,null))return;const c=this.getAxisMotionValue(p),{min:S,max:E}=this.constraints[p];c.set(Kn(S,E,h[p]))})}addListeners(){if(!this.visualElement.current)return;i5.set(this.visualElement,this);const t=this.visualElement.current,i=hd(t,"pointerdown",S=>{const{drag:E,dragListener:P=!0}=this.getProps();E&&P&&!MC(S.target)&&this.start(S)}),a=()=>{const{dragConstraints:S}=this.getProps();Jh(S)&&S.current&&(this.constraints=this.resolveRefConstraints())},{projection:h}=this.visualElement,g=h.addEventListener("measure",a);h&&!h.layout&&(h.root&&h.root.updateScroll(),h.updateLayout()),jn.read(a);const p=Bd(window,"resize",()=>this.scalePositionWithinConstraints()),c=h.addEventListener("didUpdate",({delta:S,hasLayoutChanged:E})=>{this.isDragging&&E&&(ds(P=>{const T=this.getAxisMotionValue(P);T&&(this.originPoint[P]+=S[P].translate,T.set(T.get()+S[P].translate))}),this.visualElement.render())});return()=>{p(),i(),g(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:a=!1,dragPropagation:h=!1,dragConstraints:g=!1,dragElastic:p=Bv,dragMomentum:c=!0}=t;return{...t,drag:i,dragDirectionLock:a,dragPropagation:h,dragConstraints:g,dragElastic:p,dragMomentum:c}}}function bp(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function o5(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class a5 extends ja{constructor(t){super(t),this.removeGroupControls=vs,this.removeListeners=vs,this.controls=new s5(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vs}update(){const{dragControls:t}=this.node.getProps(),{dragControls:i}=this.node.prevProps||{};t!==i&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const w2=e=>(t,i)=>{e&&jn.postRender(()=>e(t,i))};class l5 extends ja{constructor(){super(...arguments),this.removePointerDownListener=vs}onPointerDown(t){this.session=new cE(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lE(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:a,onPanEnd:h}=this.node.getProps();return{onSessionStart:w2(t),onStart:w2(i),onMove:a,onEnd:(g,p)=>{delete this.session,h&&jn.postRender(()=>h(g,p))}}}mount(){this.removePointerDownListener=hd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let s_=!1;class c5 extends K.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:a,layoutId:h}=this.props,{projection:g}=t;g&&(i.group&&i.group.add(g),a&&a.register&&h&&a.register(g),s_&&g.root.didUpdate(),g.addEventListener("animationComplete",()=>{this.safeToRemove()}),g.setOptions({...g.options,onExitComplete:()=>this.safeToRemove()})),Xp.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:a,drag:h,isPresent:g}=this.props,{projection:p}=a;return p&&(p.isPresent=g,s_=!0,h||t.layoutDependency!==i||i===void 0||t.isPresent!==g?p.willUpdate():this.safeToRemove(),t.isPresent!==g&&(g?p.promote():p.relegate()||jn.postRender(()=>{const c=p.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),px.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:a}=this.props,{projection:h}=t;s_=!0,h&&(h.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(h),a&&a.deregister&&a.deregister(h))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function hE(e){const[t,i]=zC(),a=K.useContext(q0);return re.jsx(c5,{...e,layoutGroup:a,switchLayoutGroup:K.useContext(GC),isPresent:t,safeToRemove:i})}function u5(e,t,i){const a=oi(e)?e:pu(e);return a.start(Tx("",a,t,i)),a.animation}const h5=(e,t)=>e.depth-t.depth;class d5{constructor(){this.children=[],this.isDirty=!1}add(t){K0(this.children,t),this.isDirty=!0}remove(t){Y0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(h5),this.isDirty=!1,this.children.forEach(t)}}function f5(e,t){const i=_i.now(),a=({timestamp:h})=>{const g=h-i;g>=t&&(La(a),e(g-t))};return jn.setup(a,!0),()=>La(a)}const dE=["TopLeft","TopRight","BottomLeft","BottomRight"],p5=dE.length,S2=e=>typeof e=="string"?parseFloat(e):e,k2=e=>typeof e=="number"||wt.test(e);function m5(e,t,i,a,h,g){h?(e.opacity=Kn(0,i.opacity??1,g5(a)),e.opacityExit=Kn(t.opacity??1,0,y5(a))):g&&(e.opacity=Kn(t.opacity??1,i.opacity??1,a));for(let p=0;p<p5;p++){const c=`border${dE[p]}Radius`;let S=T2(t,c),E=T2(i,c);if(S===void 0&&E===void 0)continue;S||(S=0),E||(E=0),S===0||E===0||k2(S)===k2(E)?(e[c]=Math.max(Kn(S2(S),S2(E),a),0),(eo.test(E)||eo.test(S))&&(e[c]+="%")):e[c]=E}(t.rotate||i.rotate)&&(e.rotate=Kn(t.rotate||0,i.rotate||0,a))}function T2(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const g5=fE(0,.5,YT),y5=fE(.5,.95,vs);function fE(e,t,i){return a=>a<e?0:a>t?1:i(Dd(e,t,a))}function C2(e,t){e.min=t.min,e.max=t.max}function Ps(e,t){C2(e.x,t.x),C2(e.y,t.y)}function E2(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function P2(e,t,i,a,h){return e-=t,e=Em(e,1/i,a),h!==void 0&&(e=Em(e,1/h,a)),e}function _5(e,t=0,i=1,a=.5,h,g=e,p=e){if(eo.test(t)&&(t=parseFloat(t),t=Kn(p.min,p.max,t/100)-p.min),typeof t!="number")return;let c=Kn(g.min,g.max,a);e===g&&(c-=t),e.min=P2(e.min,t,i,c,h),e.max=P2(e.max,t,i,c,h)}function I2(e,t,[i,a,h],g,p){_5(e,t[i],t[a],t[h],t.scale,g,p)}const v5=["x","scaleX","originX"],x5=["y","scaleY","originY"];function A2(e,t,i,a){I2(e.x,t,v5,i?i.x:void 0,a?a.x:void 0),I2(e.y,t,x5,i?i.y:void 0,a?a.y:void 0)}function M2(e){return e.translate===0&&e.scale===1}function pE(e){return M2(e.x)&&M2(e.y)}function D2(e,t){return e.min===t.min&&e.max===t.max}function b5(e,t){return D2(e.x,t.x)&&D2(e.y,t.y)}function z2(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function mE(e,t){return z2(e.x,t.x)&&z2(e.y,t.y)}function R2(e){return vi(e.x)/vi(e.y)}function L2(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class w5{constructor(){this.members=[]}add(t){K0(this.members,t),t.scheduleRender()}remove(t){if(Y0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(h=>t===h);if(i===0)return!1;let a;for(let h=i;h>=0;h--){const g=this.members[h];if(g.isPresent!==!1){a=g;break}}return a?(this.promote(a),!0):!1}promote(t,i){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,i&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:h}=t.options;h===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:a}=t;i.onExitComplete&&i.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function S5(e,t,i){let a="";const h=e.x.translate/t.x,g=e.y.translate/t.y,p=(i==null?void 0:i.z)||0;if((h||g||p)&&(a=`translate3d(${h}px, ${g}px, ${p}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:E,rotate:P,rotateX:T,rotateY:A,skewX:$,skewY:X}=i;E&&(a=`perspective(${E}px) ${a}`),P&&(a+=`rotate(${P}deg) `),T&&(a+=`rotateX(${T}deg) `),A&&(a+=`rotateY(${A}deg) `),$&&(a+=`skewX(${$}deg) `),X&&(a+=`skewY(${X}deg) `)}const c=e.x.scale*t.x,S=e.y.scale*t.y;return(c!==1||S!==1)&&(a+=`scale(${c}, ${S})`),a||"none"}const o_=["","X","Y","Z"],k5=1e3;let T5=0;function a_(e,t,i,a){const{latestValues:h}=t;h[e]&&(i[e]=h[e],t.setStaticValue(e,0),a&&(a[e]=0))}function gE(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=tE(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:h,layoutId:g}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",jn,!(h||g))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&gE(a)}function yE({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:a,resetTransform:h}){return class{constructor(p={},c=t==null?void 0:t()){this.id=T5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(P5),this.nodes.forEach(D5),this.nodes.forEach(z5),this.nodes.forEach(I5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let S=0;S<this.path.length;S++)this.path[S].shouldResetTransform=!0;this.root===this&&(this.nodes=new d5)}addEventListener(p,c){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new ex),this.eventHandlers.get(p).add(c)}notifyListeners(p,...c){const S=this.eventHandlers.get(p);S&&S.notify(...c)}hasListeners(p){return this.eventHandlers.has(p)}mount(p){if(this.instance)return;this.isSVG=DC(p)&&!gL(p),this.instance=p;const{layoutId:c,layout:S,visualElement:E}=this.options;if(E&&!E.current&&E.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(S||c)&&(this.isLayoutDirty=!0),e){let P,T=0;const A=()=>this.root.updateBlockedByResize=!1;jn.read(()=>{T=window.innerWidth}),e(p,()=>{const $=window.innerWidth;$!==T&&(T=$,this.root.updateBlockedByResize=!0,P&&P(),P=f5(A,250),Xp.hasAnimatedSinceResize&&(Xp.hasAnimatedSinceResize=!1,this.nodes.forEach(O2)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&E&&(c||S)&&this.addEventListener("didUpdate",({delta:P,hasLayoutChanged:T,hasRelativeLayoutChanged:A,layout:$})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const X=this.options.transition||E.getDefaultTransition()||O5,{onLayoutAnimationStart:G,onLayoutAnimationComplete:ne}=E.getProps(),F=!this.targetLayout||!mE(this.targetLayout,$),V=!T&&A;if(this.options.layoutRoot||this.resumeFrom||V||T&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const H={...dx(X,"layout"),onPlay:G,onComplete:ne};(E.shouldReduceMotion||this.options.layoutRoot)&&(H.delay=0,H.type=!1),this.startAnimation(H),this.setAnimationOrigin(P,V)}else T||O2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=$})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),La(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(R5),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let P=0;P<this.path.length;P++){const T=this.path[P];T.shouldResetTransform=!0,T.updateScroll("snapshot"),T.options.layoutRoot&&T.willUpdate(!1)}const{layoutId:c,layout:S}=this.options;if(c===void 0&&!S)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(B2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(F2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(M5),this.nodes.forEach(C5),this.nodes.forEach(E5)):this.nodes.forEach(F2),this.clearAllSnapshots();const c=_i.now();Gr.delta=to(0,1e3/60,c-Gr.timestamp),Gr.timestamp=c,Gr.isProcessing=!0,Zy.update.process(Gr),Zy.preRender.process(Gr),Zy.render.process(Gr),Gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,px.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(A5),this.sharedNodes.forEach(L5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vi(this.snapshot.measuredBox.x)&&!vi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let S=0;S<this.path.length;S++)this.path[S].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=kr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(c=!1),c&&this.instance){const S=a(this.instance);this.scroll={animationId:this.root.animationId,phase:p,isRoot:S,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:S}}}resetTransform(){if(!h)return;const p=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!pE(this.projectionDelta),S=this.getTransformTemplate(),E=S?S(this.latestValues,""):void 0,P=E!==this.prevTransformTemplateValue;p&&this.instance&&(c||vl(this.latestValues)||P)&&(h(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const c=this.measurePageBox();let S=this.removeElementScroll(c);return p&&(S=this.removeTransform(S)),N5(S),{animationId:this.root.animationId,measuredBox:c,layoutBox:S,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:p}=this.options;if(!p)return kr();const c=p.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(j5))){const{scroll:P}=this.root;P&&(Kc(c.x,P.offset.x),Kc(c.y,P.offset.y))}return c}removeElementScroll(p){var S;const c=kr();if(Ps(c,p),(S=this.scroll)!=null&&S.wasRoot)return c;for(let E=0;E<this.path.length;E++){const P=this.path[E],{scroll:T,options:A}=P;P!==this.root&&T&&A.layoutScroll&&(T.wasRoot&&Ps(c,p),Kc(c.x,T.offset.x),Kc(c.y,T.offset.y))}return c}applyTransform(p,c=!1){const S=kr();Ps(S,p);for(let E=0;E<this.path.length;E++){const P=this.path[E];!c&&P.options.layoutScroll&&P.scroll&&P!==P.root&&Yc(S,{x:-P.scroll.offset.x,y:-P.scroll.offset.y}),vl(P.latestValues)&&Yc(S,P.latestValues)}return vl(this.latestValues)&&Yc(S,this.latestValues),S}removeTransform(p){const c=kr();Ps(c,p);for(let S=0;S<this.path.length;S++){const E=this.path[S];if(!E.instance||!vl(E.latestValues))continue;Av(E.latestValues)&&E.updateSnapshot();const P=kr(),T=E.measurePageBox();Ps(P,T),A2(c,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,P)}return vl(this.latestValues)&&A2(c,this.latestValues),c}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){var $;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const S=!!this.resumingFrom||this!==c;if(!(p||S&&this.isSharedProjectionDirty||this.isProjectionDirty||($=this.parent)!=null&&$.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:P,layoutId:T}=this.options;if(!this.layout||!(P||T))return;this.resolvedRelativeTargetAt=Gr.timestamp;const A=this.getClosestProjectingParent();A&&this.linkedParentVersion!==A.layoutVersion&&!A.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(A&&A.layout?this.createRelativeTarget(A,this.layout.layoutBox,A.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=kr(),this.targetWithTransforms=kr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Z3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ps(this.target,this.layout.layoutBox),XC(this.target,this.targetDelta)):Ps(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?this.createRelativeTarget(A,this.target,A.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Av(this.parent.latestValues)||ZC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(p,c,S){this.relativeParent=p,this.linkedParentVersion=p.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kr(),this.relativeTargetOrigin=kr(),Pm(this.relativeTargetOrigin,c,S),Ps(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var X;const p=this.getLead(),c=!!this.resumingFrom||this!==p;let S=!0;if((this.isProjectionDirty||(X=this.parent)!=null&&X.isProjectionDirty)&&(S=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(S=!1),this.resolvedRelativeTargetAt===Gr.timestamp&&(S=!1),S)return;const{layout:E,layoutId:P}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||P))return;Ps(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,A=this.treeScale.y;o3(this.layoutCorrected,this.treeScale,this.path,c),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=kr());const{target:$}=p;if(!$){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(E2(this.prevProjectionDelta.x,this.projectionDelta.x),E2(this.prevProjectionDelta.y,this.projectionDelta.y)),dd(this.projectionDelta,this.layoutCorrected,$,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==A||!L2(this.projectionDelta.x,this.prevProjectionDelta.x)||!L2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",$))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),p){const S=this.getStack();S&&S.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jc(),this.projectionDelta=Jc(),this.projectionDeltaWithTransform=Jc()}setAnimationOrigin(p,c=!1){const S=this.snapshot,E=S?S.latestValues:{},P={...this.latestValues},T=Jc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const A=kr(),$=S?S.source:void 0,X=this.layout?this.layout.source:void 0,G=$!==X,ne=this.getStack(),F=!ne||ne.members.length<=1,V=!!(G&&!F&&this.options.crossfade===!0&&!this.path.some(F5));this.animationProgress=0;let H;this.mixTargetDelta=ee=>{const ye=ee/1e3;N2(T.x,p.x,ye),N2(T.y,p.y,ye),this.setTargetDelta(T),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pm(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),B5(this.relativeTarget,this.relativeTargetOrigin,A,ye),H&&b5(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=kr()),Ps(H,this.relativeTarget)),G&&(this.animationValues=P,m5(P,E,this.latestValues,ye,V,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ye},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){var c,S,E;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(E=(S=this.resumingFrom)==null?void 0:S.currentAnimation)==null||E.stop(),this.pendingAnimation&&(La(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jn.update(()=>{Xp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pu(0)),this.currentAnimation=u5(this.motionValue,[0,1e3],{...p,velocity:0,isSync:!0,onUpdate:P=>{this.mixTargetDelta(P),p.onUpdate&&p.onUpdate(P)},onStop:()=>{},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(k5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:c,target:S,layout:E,latestValues:P}=p;if(!(!c||!S||!E)){if(this!==p&&this.layout&&E&&_E(this.options.animationType,this.layout.layoutBox,E.layoutBox)){S=this.target||kr();const T=vi(this.layout.layoutBox.x);S.x.min=p.target.x.min,S.x.max=S.x.min+T;const A=vi(this.layout.layoutBox.y);S.y.min=p.target.y.min,S.y.max=S.y.min+A}Ps(c,S),Yc(c,P),dd(this.projectionDeltaWithTransform,this.layoutCorrected,c,P)}}registerSharedNode(p,c){this.sharedNodes.has(p)||this.sharedNodes.set(p,new w5),this.sharedNodes.get(p).add(c);const E=c.options.initialPromotionConfig;c.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(c):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){var c;const{layoutId:p}=this.options;return p?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:p}=this.options;return p?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:c,preserveFollowOpacity:S}={}){const E=this.getStack();E&&E.promote(this,S),p&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetSkewAndRotation(){const{visualElement:p}=this.options;if(!p)return;let c=!1;const{latestValues:S}=p;if((S.z||S.rotate||S.rotateX||S.rotateY||S.rotateZ||S.skewX||S.skewY)&&(c=!0),!c)return;const E={};S.z&&a_("z",p,E,this.animationValues);for(let P=0;P<o_.length;P++)a_(`rotate${o_[P]}`,p,E,this.animationValues),a_(`skew${o_[P]}`,p,E,this.animationValues);p.render();for(const P in E)p.setStaticValue(P,E[P]),this.animationValues&&(this.animationValues[P]=E[P]);p.scheduleRender()}applyProjectionStyles(p,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){p.visibility="hidden";return}const S=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,p.visibility="",p.opacity="",p.pointerEvents=Zp(c==null?void 0:c.pointerEvents)||"",p.transform=S?S(this.latestValues,""):"none";return}const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Zp(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!vl(this.latestValues)&&(p.transform=S?S({},""):"none",this.hasProjected=!1);return}p.visibility="";const P=E.animationValues||E.latestValues;this.applyTransformsToTarget();let T=S5(this.projectionDeltaWithTransform,this.treeScale,P);S&&(T=S(P,T)),p.transform=T;const{x:A,y:$}=this.projectionDelta;p.transformOrigin=`${A.origin*100}% ${$.origin*100}% 0`,E.animationValues?p.opacity=E===this?P.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:P.opacityExit:p.opacity=E===this?P.opacity!==void 0?P.opacity:"":P.opacityExit!==void 0?P.opacityExit:0;for(const X in Iv){if(P[X]===void 0)continue;const{correct:G,applyTo:ne,isCSSVariable:F}=Iv[X],V=T==="none"?P[X]:G(P[X],E);if(ne){const H=ne.length;for(let ee=0;ee<H;ee++)p[ne[ee]]=V}else F?this.options.visualElement.renderState.vars[X]=V:p[X]=V}this.options.layoutId&&(p.pointerEvents=E===this?Zp(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>{var c;return(c=p.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(B2),this.root.sharedNodes.clear()}}}function C5(e){e.updateLayout()}function E5(e){var i;const t=((i=e.resumeFrom)==null?void 0:i.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:h}=e.layout,{animationType:g}=e.options,p=t.source!==e.layout.source;g==="size"?ds(T=>{const A=p?t.measuredBox[T]:t.layoutBox[T],$=vi(A);A.min=a[T].min,A.max=A.min+$}):_E(g,t.layoutBox,a)&&ds(T=>{const A=p?t.measuredBox[T]:t.layoutBox[T],$=vi(a[T]);A.max=A.min+$,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[T].max=e.relativeTarget[T].min+$)});const c=Jc();dd(c,a,t.layoutBox);const S=Jc();p?dd(S,e.applyTransform(h,!0),t.measuredBox):dd(S,a,t.layoutBox);const E=!pE(c);let P=!1;if(!e.resumeFrom){const T=e.getClosestProjectingParent();if(T&&!T.resumeFrom){const{snapshot:A,layout:$}=T;if(A&&$){const X=kr();Pm(X,t.layoutBox,A.layoutBox);const G=kr();Pm(G,a,$.layoutBox),mE(X,G)||(P=!0),T.options.layoutRoot&&(e.relativeTarget=G,e.relativeTargetOrigin=X,e.relativeParent=T)}}}e.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:S,layoutDelta:c,hasLayoutChanged:E,hasRelativeLayoutChanged:P})}else if(e.isLead()){const{onExitComplete:a}=e.options;a&&a()}e.options.transition=void 0}function P5(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function I5(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function A5(e){e.clearSnapshot()}function B2(e){e.clearMeasurements()}function F2(e){e.isLayoutDirty=!1}function M5(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function O2(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function D5(e){e.resolveTargetDelta()}function z5(e){e.calcProjection()}function R5(e){e.resetSkewAndRotation()}function L5(e){e.removeLeadSnapshot()}function N2(e,t,i){e.translate=Kn(t.translate,0,i),e.scale=Kn(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function j2(e,t,i,a){e.min=Kn(t.min,i.min,a),e.max=Kn(t.max,i.max,a)}function B5(e,t,i,a){j2(e.x,t.x,i.x,a),j2(e.y,t.y,i.y,a)}function F5(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const O5={duration:.45,ease:[.4,0,.1,1]},V2=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),U2=V2("applewebkit/")&&!V2("chrome/")?Math.round:vs;function $2(e){e.min=U2(e.min),e.max=U2(e.max)}function N5(e){$2(e.x),$2(e.y)}function _E(e,t,i){return e==="position"||e==="preserve-aspect"&&!q3(R2(t),R2(i),.2)}function j5(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const V5=yE({attachResizeListener:(e,t)=>Bd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),l_={current:void 0},vE=yE({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!l_.current){const e=new V5({});e.mount(window),e.setOptions({layoutScroll:!0}),l_.current=e}return l_.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),U5={pan:{Feature:l5},drag:{Feature:a5,ProjectionNode:vE,MeasureLayout:hE}};function H2(e,t,i){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",i==="Start");const h="onHover"+i,g=a[h];g&&jn.postRender(()=>g(t,Xd(t)))}class $5 extends ja{mount(){const{current:t}=this.node;t&&(this.unmount=dL(t,(i,a)=>(H2(this.node,a,"Start"),h=>H2(this.node,h,"End"))))}unmount(){}}class H5 extends ja{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wd(Bd(this.node.current,"focus",()=>this.onFocus()),Bd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function G2(e,t,i){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap",i==="Start");const h="onTap"+(i==="End"?"":i),g=a[h];g&&jn.postRender(()=>g(t,Xd(t)))}class G5 extends ja{mount(){const{current:t}=this.node;t&&(this.unmount=mL(t,(i,a)=>(G2(this.node,a,"Start"),(h,{success:g})=>G2(this.node,h,g?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fv=new WeakMap,c_=new WeakMap,W5=e=>{const t=Fv.get(e.target);t&&t(e)},q5=e=>{e.forEach(W5)};function Z5({root:e,...t}){const i=e||document;c_.has(i)||c_.set(i,{});const a=c_.get(i),h=JSON.stringify(t);return a[h]||(a[h]=new IntersectionObserver(q5,{root:e,...t})),a[h]}function X5(e,t,i){const a=Z5(t);return Fv.set(e,i),a.observe(e),()=>{Fv.delete(e),a.unobserve(e)}}const K5={some:0,all:1};class Y5 extends ja{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:a,amount:h="some",once:g}=t,p={root:i?i.current:void 0,rootMargin:a,threshold:typeof h=="number"?h:K5[h]},c=S=>{const{isIntersecting:E}=S;if(this.isInView===E||(this.isInView=E,g&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:P,onViewportLeave:T}=this.node.getProps(),A=E?P:T;A&&A(S)};return X5(this.node.current,p,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(J5(t,i))&&this.startObserver()}unmount(){}}function J5({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const Q5={inView:{Feature:Y5},tap:{Feature:G5},focus:{Feature:H5},hover:{Feature:$5}},eB={layout:{ProjectionNode:vE,MeasureLayout:hE}},tB={...V3,...Q5,...U5,...eB},Bi=r3(tB,g3);function wp(e){if(!e)return 2025;e=e.toString().toLowerCase();const t=e.match(/(\d{4})/);return t?parseInt(t[0]):e.includes("late 19th")?1890:e.includes("mid 19th")?1850:e.includes("early 19th")?1810:e.includes("19th century")?1850:e.includes("early 20th")?1910:e.includes("mid 20th")?1950:e.includes("late 20th")?1990:e.includes("20th century")?1950:2025}function fs(e){return e.categories&&Array.isArray(e.categories)?e.categories:e.category?[e.category]:[]}function nB(e){if(!e)return e;if(e.startsWith("/"))return"/kalaghoda/"+e.substring(1);if(e.indexOf("upload.wikimedia.org")===-1||e.indexOf("/thumb/")!==-1)return e;try{const t=e.split("/"),i=t.indexOf("commons");if(i!==-1){const a=t[t.length-1];return t.splice(i+1,0,"thumb"),t.push("800px-"+a),t.join("/")}}catch{console.warn("Failed to optimize wiki image:",e)}return e}const mr={initialZoom:16.5,startCenter:[72.8322,18.927],style:"https://api.maptiler.com/maps/019b6fe6-78c4-7dcb-b6eb-fed1b18171df/style.json?key=f0f0aibL2C05fTzSrqHq",colors:{"Art Deco":"#2a9d8f",Victorian:"#e76f51",Modern:"#00cec9","Indo-Saracenic":"#b33939",Neoclassical:"#8e44ad","Public Space":"#27ae60",Lettering:"#e84393","Ghost Site":"#95a5a6","Street Furniture":"#57606f","Living Heritage":"#f39c12","Street Sign":"#3742fa",Vernacular:"#d35400","Urban Texture":"#8d6e63"},icons:{"Art Deco":"fa-building",Victorian:"fa-landmark",Modern:"fa-square","Indo-Saracenic":"fa-gopuram",Neoclassical:"fa-columns","Public Space":"fa-tree",Lettering:"fa-font","Ghost Site":"fa-ghost","Street Furniture":"fa-road","Living Heritage":"fa-users","Street Sign":"fa-sign-hanging",Vernacular:"fa-home","Urban Texture":"fa-cubes"}},fd=[{id:"wellington",category:"Neoclassical",title:"Wellington Fountain",image:"https://upload.wikimedia.org/wikipedia/commons/0/0b/Wellington_fountain_with_the_MH_Police_HQ_in_background%2C_Mumbai.jpg",description:"Built to commemorate the Duke of Wellingtons visits to Bombay. It is the only fountain in the city built in the Neoclassical style.",year:"1865",architect:"Gen. Barr / Sir George Gilbert Scott",builder:"Public Subscription",location:{center:[72.832344,18.925439]}},{id:"ins-vikrant",category:"Street Furniture",title:"INS Vikrant Memorial",image:"./images/ins-vikrant.jpg",description:"A detailed scale model of India's first aircraft carrier, INS Vikrant (R11), installed at Regal Circle as a tribute to the Indian Navy.",year:"2022",architect:"Indian Navy",builder:"Public Installation",location:{center:[72.832673,18.9258]}},{id:"vbgandhi-sign",category:"Street Sign",title:"V.B. Gandhi Marg Sign",image:"./images/vb-gandhi-marg.jpg",description:"A classic blue enamel hanging street sign marking the entrance to V.B. Gandhi Marg (formerly Forbes Street).",year:"1990",architect:"BMC",builder:"Municipal Corp",location:{center:[72.831972,18.92825]}},{id:"forbes-sign",category:"Street Sign",title:"Forbes Street Sign",image:"./images/forbes-street.jpg",description:'A rare bilingual street sign bearing the colonial name "Forbes Street" (now V.B. Gandhi Marg).',year:"Unknown",architect:"BMC",builder:"Municipal Corp",location:{center:[72.832056,18.92825]}},{id:"regal",category:"Art Deco",title:"Regal Cinema",image:"./images/regal.jpg",description:"One of the earliest Art Deco cinemas in India.",year:"1933",architect:"Charles Stevens",builder:"Framji Sidhwa",location:{center:[72.83245,18.92455]}},{id:"police-hq",category:"Victorian",title:"Police Headquarters",image:"https://upload.wikimedia.org/wikipedia/commons/0/0e/Maharashtra_Police_Headquarters.jpg",description:"Formerly the Royal Alfred Sailors Home. A masterpiece of Gothic architecture.",year:"1876",architect:"F.W. Stevens",builder:"Govt. of Bombay",location:{center:[72.83334037487425,18.92524244911638]}},{id:"majestic",category:"Indo-Saracenic",title:"Majestic Aamdar Niwas",image:"https://upload.wikimedia.org/wikipedia/commons/c/cb/Majestic_MLA_Hostel_Mumbai_by_Dr._Raju_Kasambe_DSCN0428_(28).jpg",description:"Formerly the Majestic Hotel. An Indo-Saracenic gem now used as a hostel for legislators.",year:"1909",architect:"W.A. Chambers",builder:"Private",location:{center:[72.8318474719337,18.9246768777787]}},{id:"mercantile",category:"Indo-Saracenic",title:"Indian Mercantile Mansion",image:"https://upload.wikimedia.org/wikipedia/commons/4/48/Indian_Mercantile_Mansion%2C_Colaba%2C_Mumbai_as_seen_from_Madame_Cama_Road.jpg",description:"Also known as Waterloo Mansions. A grand residential building with Gothic arches.",year:"1900",architect:"Unknown",builder:"Private",location:{center:[72.83188959451451,18.924916574206417]}},{id:"science",category:"Indo-Saracenic",title:"Institute of Science",image:"https://upload.wikimedia.org/wikipedia/commons/b/bb/Entrance_of_the_Institute_of_Science%2C_Fort%2C_Mumbai.jpg",description:"A majestic Indo-Saracenic building built using yellow Kharodi basalt.",year:"1920",architect:"George Wittet",builder:"Govt. of Bombay",location:{center:[72.83025908124948,18.926175121968605]}},{id:"ngma",category:"Indo-Saracenic",title:"NGMA (Cowasji Jehangir Hall)",image:"https://upload.wikimedia.org/wikipedia/commons/6/6c/Sir_Cowasji_Jehangir_Hall_Front.jpg",description:"Originally the Cowasji Jehangir Public Hall, now the National Gallery of Modern Art.",year:"1911",architect:"George Wittet",builder:"Sir Cowasji Jehangir",location:{center:[72.83156173339212,18.925786832066194]}},{id:"museum",category:"Indo-Saracenic",title:"CSMVS Museum",image:"./images/csmvs.jpg",description:"Indo Saracenic landmark constructed using grey Kurla basalt. Formerly the Prince of Wales Museum.",year:"1914",architect:"George Wittet",builder:"Govt. of Bombay",location:{center:[72.83222,18.92666]}},{id:"buddha-sculpture",category:"Street Furniture",title:"The Buddhas Within",image:"./images/buddha-head.jpg",description:"A monumental copper sculpture by Satish Gupta. The serene head reveals a hollow cave-like interior housing a sleeping Buddha and 1,500 miniature figures.",year:"2016",architect:"Satish Gupta",builder:"CSMVS/Private",location:{center:[72.831722,18.926611]}},{id:"cama",categories:["Indo-Saracenic","Lettering"],title:"K.R. Cama Oriental Institute",images:["https://upload.wikimedia.org/wikipedia/commons/b/b8/The_K.R._Cama_Oriental_Institute_in_Fort%2C_Mumbai.jpg","./images/camal.jpg"],description:"A premier institute for Indology and Persian studies, inaugurated in 1916. The building features elegant Indo-Saracenic arches and a distinctive stone-carved nameplate above the entrance.",year:"1916",architect:"Unknown",builder:"Sukhadwala Family",location:{center:[72.833709,18.927298]}},{id:"lions-gate",category:"Victorian",title:"Lions Gate",image:"https://upload.wikimedia.org/wikipedia/commons/5/5d/Naval_Dockyard_Mumbai.jpg",description:"The main entrance to the Naval Dockyard, guarded by two stone lions.",year:"1890",architect:"Royal Navy",builder:"Bombay Dockyard",location:{center:[72.83421608761844,18.926268371527307]}},{id:"dockyard-vane",category:"Urban Texture",title:"Naval Weather Vane",image:"./images/dockyard-weather-vane.png",description:"A classic rooster weather vane perched atop a red-domed cupola within the Naval Dockyard complex, a functional and decorative maritime detail.",year:"Unknown",architect:"Royal Navy",builder:"Bombay Dockyard",location:{center:[72.833861,18.927833]}},{id:"vikrant-sculpture",category:"Street Furniture",title:"INS Vikrant Sculpture",image:"./images/naval-artifact.jpg",description:"A modern sculpture created from the metal scraps of the dismantled INS Vikrant (1961), serving as a memorial to Indias first aircraft carrier.",year:"2016",architect:"Arzan Khambatta",builder:"Indian Navy",location:{center:[72.83355,18.92666]}},{id:"bnhs",category:"Lettering",title:"BNHS (Hornbill House)",image:"https://upload.wikimedia.org/wikipedia/commons/7/73/BNHS_Office_by_Raju_KasambeDSCN7078_(7)_05.jpg",description:"Headquarters of the Bombay Natural History Society.",year:"1965",architect:"Unknown",builder:"BNHS",location:{center:[72.8332718521053,18.92623514458551]}},{id:"standrews",category:"Neoclassical",title:"St. Andrews Cathedral",image:"https://upload.wikimedia.org/wikipedia/commons/8/81/A_heritage_structure_of_early_19th_century.jpg",description:"A Scottish Presbyterian church with a classic steeple.",year:"1819",architect:"Thomas Dadford",builder:"Scottish Community",location:{center:[72.83370123061556,18.92693820553702]}},{id:"elphinstone",category:"Victorian",title:"Elphinstone College",image:"./images/elphinstone.jpg",description:"Victorian Gothic Revival building with pointed arches.",year:"1871",architect:"James Trubshawe",builder:"Sir Cowasji Jehangir",location:{center:[72.83083411935105,18.92497448499293]}},{id:"rhythm",categories:["Ghost Site","Lettering"],title:"Rhythm House",images:["https://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Rhythm_House_(14427838921).jpg/1024px-Rhythm_House_(14427838921).jpg","./images/rhythm-house-lettering.jpg"],description:"Formerly the city's premier music store. The iconic Art Deco typography was synonymous with Mumbai's music culture for decades.",year:"1940s",architect:"Unknown",builder:"Mehmood Curmally",location:{center:[72.832123,18.928066]}},{id:"jehangir",category:"Modern",title:"Jehangir Art Gallery",image:"./images/jehangir.jpg",description:"Modernist concrete structure with a distinctive cantilevered entrance.",year:"1952",architect:"G. M. Bhuta",builder:"Sir Cowasji Jehangir",location:{center:[72.83185,18.92745]}},{id:"ador",categories:["Art Deco","Lettering"],title:"Ador House",images:["./images/ador-house-building.jpg","./images/ador-house-lettering.jpg"],description:'A mid-20th century structure blending commercial utility with Art Deco, featuring a stone facade and bracketed wooden eaves. The "ADOR HOUSE" lettering is rendered in clean, sans-serif metal relief above the entrance arcade.',year:"1940",architect:"Unknown",builder:"JB Advani Group",location:{center:[72.833167,18.927]}},{id:"mmb",category:"Modern",title:"Max Mueller Bhavan",image:"./images/placeholder.jpg",description:"The Goethe-Institut hub for Indo-German cultural exchange.",year:"1970",architect:"N/A",builder:"Goethe Institut",location:{center:[72.8325,18.92725]}},{id:"pavement",category:"Living Heritage",title:"The Pavement Gallery",image:"./images/pavement-gallery.jpg",description:"An informal exhibition space where aspiring artists display their work.",year:"2025",architect:"The People",builder:"Informal Usage",location:{center:[72.8315,18.927028]}},{id:"sassoon",category:"Victorian",title:"David Sassoon Library",image:"./images/sassoon.jpg",description:"Victorian Gothic architecture defined by pointed arches and a tranquil garden.",year:"1870",architect:"Campbell & Gosling",builder:"Scott McClelland",location:{center:[72.83116,18.92772]}},{id:"bhogilal",category:"Victorian",title:"Bhogilal Hargovindas",image:"./images/bhogilal-lettering.jpg",description:'A heritage commercial building on K. Dubash Marg featuring colonial stonework, clear signage, and an ornate wrought iron entrance grille with the monogram "FSP".',year:"1890",architect:"Unknown",builder:"Merchant Family",location:{center:[72.8319,18.9276]}},{id:"statue",category:"Street Furniture",title:"Kala Ghoda Statue",image:"./images/placeholder.jpg",description:"Bronze statue installed to mark the historic site.",year:"2017",architect:"Commissioned artwork",builder:"Kala Ghoda Association",location:{center:[72.8318,18.9278]}},{id:"ropewalk-paving",category:"Urban Texture",title:"Rope Walk Lane Paving",image:"./images/ropewalk-paving.jpg",description:"New basalt stone paving installed in 2025, transforming Rope Walk Lane into a dedicated pedestrian path on weekends.",year:"2025",architect:"Unknown",builder:"BMC",location:{center:[72.832306,18.928583]}},{id:"heritage-paving",category:"Urban Texture",title:"Historic Basalt Paving",image:"./images/stone-paving.jpg",description:"Remnants of the original heavy rectangular basalt stone paving that once lined many of the Fort precinct's streets, providing a durable surface for carriages and trams.",year:"Unknown",architect:"City Engineers",builder:"Public Works",location:{center:[72.832333,18.928806]}},{id:"synagogue",categories:["Victorian","Lettering"],title:"Keneseth Eliyahoo",images:["./images/synagogue.jpg","./images/synagogue-lettering.jpg"],description:'Victorian era synagogue with a distinctive blue facade. The Hebrew inscription above the entrance reads: "This is the gate of the Lord; the righteous shall enter through it" (Psalm 118:20).',year:"1884",architect:"Gostling & Morris",builder:"Jacob Elias Sassoon",location:{center:[72.83257,18.92811]}},{id:"numbered-sign",category:"Lettering",title:"52-54-56 Signage",image:"./images/numbered-sign.jpg",description:'A distinctive metal building number sign "52-54-56" mounted against a backdrop of contemporary street art featuring a stylized bird.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832556,18.928222]}},{id:"homji-street",category:"Street Sign",title:"Homji Street Sign",image:"./images/homji-street-sign.jpg",description:"Weathered bilingual street sign in English and Hindi, mounted on stone steps. A classic example of Mumbai's historic street signage.",year:"Unknown",architect:"BMC",builder:"BMC",location:{center:[72.835056,18.932722]}},{id:"rk-laxman",category:"Street Furniture",title:"R.K. Laxman's Common Man Sculpture",image:"./images/rk-laxman-sculpture.jpg",description:`Bronze sculpture depicting cartoonist R.K. Laxman's iconic "Common Man" character facing a bull, installed as a tribute to the legendary artist and his satirical commentary on Indian society.`,year:"2014",architect:"Ram V. Sutar",builder:"Kala Ghoda Association",location:{center:[72.834194,18.931778]}},{id:"oricon",category:"Modern",title:"Oricon House",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Mumbai_Skyline_at_Night.jpg/800px-Mumbai_Skyline_at_Night.jpg",description:"A mid-century modern commercial high-rise.",year:"1960",architect:"Unknown",builder:"Oricon Enterprises",location:{center:[72.8322,18.9279]}},{id:"civil-court",category:"Victorian",title:"Old Secretariat (City Court)",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Mumbai_City_Civil_and_Sessions_Court_as_seen_from_Oval_Maidan.jpg/1280px-Mumbai_City_Civil_and_Sessions_Court_as_seen_from_Oval_Maidan.jpg",description:"One of the earliest Venetian Gothic buildings in the city.",year:"1874",architect:"Col. H. St. Clair Wilkins",builder:"Public Works Dept",location:{center:[72.8302,18.9275]}},{id:"university",category:"Victorian",title:"University of Mumbai",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/University_of_Mumbai_Fort_Campus.jpg/800px-University_of_Mumbai_Fort_Campus.jpg",description:"The Fort campus features Venetian Gothic architecture including the Convocation Hall.",year:"1874",architect:"Sir Gilbert Scott",builder:"Cowasji Jehangir",location:{center:[72.8305,18.9284]}},{id:"university-facade",category:"Victorian",title:"University Library Turret",image:"./images/university-turret.jpg",description:"A close-up view of the Venetian Gothic stonework on the University Library. Designed by Sir George Gilbert Scott, the structure uses local Kurla basalt and Malad stone.",year:"1878",architect:"Sir Gilbert Scott",builder:"Premchand Roychand",location:{center:[72.831194,18.928833]}},{id:"jehangir-building",categories:["Victorian","Lettering"],title:"Jehangir Building",images:["./images/jehangir-building.jpg","./images/jehangir-lettering.jpg"],description:'A handsome stone facade building on Mahatma Gandhi Road featuring arched windows and decorative iron balconies. The name "JEHANGIR BUILDING" is rendered in bold relief lettering across the facade.',year:"1890",architect:"Unknown",builder:"Private",location:{center:[72.83125,18.928833]}},{id:"rajabai",category:"Victorian",title:"Rajabai Clock Tower",image:"./images/rajabai.jpg",description:"Modeled on Big Ben, this 85m tower dominates the skyline.",year:"1878",architect:"Sir Gilbert Scott",builder:"Premchand Roychand",location:{center:[72.8302,18.9288]}},{id:"new-india",category:"Art Deco",title:"New India Assurance Building",image:"./images/new-india-assurance.jpg",description:'A monumental Art Deco structure designed by Master, Sathe & Bhuta. The facade features colossal relief sculptures by N.G. Pansare representing "Protection" and "Prosperity".',year:"1937",architect:"Master, Sathe & Bhuta",builder:"Sir Dorabji Tata",location:{center:[72.831167,18.930111]}},{id:"oval",category:"Public Space",title:"Oval Maidan",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Oval_Maidan%2C_Mumbai.jpg/1024px-Oval_Maidan%2C_Mumbai.jpg",description:"A Grade I heritage open precinct.",year:"1860",architect:"N/A",builder:"City Planner",location:{center:[72.8295,18.928]}},{id:"army",categories:["Victorian","Lettering"],title:"Army and Navy Building",images:["./images/army-navy.jpg","./images/army-lettering.jpg"],description:'Late nineteenth century Neo-Classical/Victorian commercial building. The iconic "ARMY & NAVY BUILDING" serif lettering is rendered in silver against the dark stone facade.',year:"1890",architect:"Frederick William Stevens",builder:"British Military",location:{center:[72.8313,18.9282]}},{id:"esplanade",category:"Victorian",title:"Esplanade Mansion",image:"./images/esplanade.jpg",description:"Formerly Watson's Hotel. Cast iron framed building.",year:"1865",architect:"Rowland Mason Ordish",builder:"British Engineers",location:{center:[72.8316,18.9283]}},{id:"lumiere",category:"Ghost Site",title:"Lumire Film Screening",image:"https://upload.wikimedia.org/wikipedia/commons/2/25/Watson%27s_Hotel_1880s.jpg",description:"On July 7, 1896, the Lumire Brothers showcased the first-ever motion pictures in India here at the former Watsons Hotel.",year:"1896",architect:"N/A",builder:"Marius Sestier",location:{center:[72.83165,18.92835]}},{id:"sassoon-bldg",category:"Lettering",title:"Sassoon Building No. 3",image:"./images/sassoon-bldg.jpg",description:"Classic hand-painted building signage located at 27 Burjorji Bharucha Marg. Currently houses the Government of Maharashtra Gazetteers Department.",year:"Unknown",architect:"Unknown",builder:"David Sassoon & Co.",location:{center:[72.831778,18.928638]}},{id:"gazetteer-sign",category:"Lettering",title:"Gazetteer Dept Sign",image:"./images/gazetteer-sign.jpg",description:'A weathered black and white wooden signboard for the "Gazetteers Department of Govt. of Maharashtra", located at the entrance of the historic Sassoon Building.',year:"Unknown",architect:"Govt of Maharashtra",builder:"PWD",location:{center:[72.831795,18.928655]}},{id:"best-sign",category:"Street Sign",title:"BEST Sub-Station Sign",image:"./images/best-sign.jpg",description:"A standard red enamel sign marking the local electrical sub-station for B. Bharucha Marg (formerly Dean Lane).",year:"Unknown",architect:"BEST Undertaking",builder:"Municipal Corp",location:{center:[72.831833,18.928611]}},{id:"heritage-corner",category:"Vernacular",title:"Heritage Corner Facade",image:"./images/bombay-shirt-co.jpg",description:"A striking corner building with a weathered grey facade, recurrent arched windows, and wooden shutters. A classic example of the precinct's unpolished heritage texture.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832306,18.928583]}},{id:"vardhan-chowk",category:"Street Sign",title:"Shri. Kishorchandra M. Vardhan Chowk",image:"./images/vardhan-chowk.jpg",description:'A municipal street sign designating the junction as "Shri. Kishorchandra M. Vardhan Chowk", honoring a local figure.',year:"Unknown",architect:"BMC",builder:"Municipal Corp",location:{center:[72.832972,18.928361]}},{id:"alkesh-mody",category:"Street Sign",title:"Alkesh Dinesh Mody Marg",image:"./images/alkesh-mody.jpg",description:"A prominent street sign named after the dynamic stockbroker Alkesh Dinesh Mody. The street was historically a key business lane in the Fort area.",year:"1994",architect:"BMC",builder:"Municipal Corp",location:{center:[72.834139,18.929611]}},{id:"techno-heritage",category:"Vernacular",title:"Techno Heritage",image:"./images/techno-heritage.jpg",description:"A distinctively geometric building with Art Deco influences, featuring symmetrical bays, louvred shutters, and patterned balcony railings. Originally a residential structure adapted for commercial use.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832167,18.929778]}},{id:"cercle-litteraire",category:"Ghost Site",title:"Cercle Littraire (Jatia Chambers)",image:"./images/jatia-chambers.jpg",description:'Housed the French library "Cercle Littraire" on the third floor, opened in 1886 by Sir Dinshaw Petit. A cultural landmark for over a century, it closed around 2022/23.',year:"1886",architect:"Unknown",builder:"Sir Dinshaw Petit",location:{center:[72.832194,18.928278]}},{id:"botawala-sign",category:"Lettering",title:"Botawala Building Sign",image:"./images/botawala-bldg.jpg",description:"Old hand-painted wooden signage for 71/73 Botawala Building.",year:"Unknown",architect:"Unknown",builder:"HIMS Botawala Charities Trust",location:{center:[72.834194,18.929556]}},{id:"rural-relief",category:"Urban Texture",title:"Stone Relief of Rural Life",image:"./images/rural-relief-pillar.jpg",description:"A detailed stone relief carving on a building pillar depicting stylized figures engaged in rural agricultural tasks.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.831417,18.930917]}},{id:"wayside",category:"Ghost Site",title:"Wayside Inn",image:"./images/wayside.jpg",description:"Now the Khyber restaurant. Famous quaint tea room.",year:"1920",architect:"N/A",builder:"Historic Site",location:{center:[72.8317,18.9286]}},{id:"kgc",category:"Living Heritage",title:"Kala Ghoda Caf",image:"./images/kgcafe.png",description:"A modern institution in a heritage shell, known for its sustainable architecture.",year:"2009",architect:"N/A",builder:"Private",location:{center:[72.8327318856248,18.92716499313838]}},{id:"horse-mural",category:"Living Heritage",title:"Street Art Mural",image:"./images/horse-mural.jpg",description:'A contemporary street art mural featuring a galloping horse and the word "HEAL", painted on a compound wall.',year:"Unknown",architect:"Unknown",builder:"Street Artist",location:{center:[72.833083,18.927639]}},{id:"commerce-house",category:"Lettering",title:"Commerce House Gate",image:"./images/commerce-house.jpg",description:"Art Deco style lettering integrated directly into the wrought iron gate design.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832833,18.928472]}},{id:"british-engg",category:"Lettering",title:"British Engineering Co.",image:"./images/british-engg.jpg",description:`Faded signage for "British Engineering Co.", distributors for Bharat Bijlee, NGEF, and other industrial giants. A reminder of the area's engineering trading roots.`,year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833917,18.928472]}},{id:"sibambai-mural",category:"Living Heritage",title:"Si Bambai Mural",image:"./images/sibambai-mural.jpg",description:"A large mural on the facade of Si Bambai, a visual and performance art space supporting independent and emerging artists.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833944,18.9285]}},{id:"great-western",category:"Neoclassical",title:"Great Western Building",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Great_Western_Building%2C_Mumbai.jpg/640px-Great_Western_Building%2C_Mumbai.jpg",description:"Originally the Admiralty House (1770s).",year:"1770",architect:"Unknown",builder:"British Admiralty",location:{center:[72.8329,18.9285]}},{id:"new-era",category:"Lettering",title:"New Era Engineering Co.",image:"./images/new-era.jpg",description:"A specialized engineering supply store established in 1981, known for its distinctive red block lettering signage featuring heritage industrial logos.",year:"1981",architect:"N/A",builder:"New Era Engineering Co.",location:{center:[72.83262,18.9289]}},{id:"sheraton-co",category:"Lettering",title:"Sheraton & Co.",image:"./images/sheraton-co.jpg",description:'Faded vintage signage for "Sheraton & Co. - The Accepted Name for Quality Furniture Fittings". A relic of the old made-to-order furniture trade.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832667,18.928833]}},{id:"modern-machines",category:"Lettering",title:"Modern Machines (India)",image:"./images/modern-machines.jpg",description:"Hand-painted commercial signage at 129 Nagindas Master Road, featuring detailed technical illustrations of industrial lathe machines, drills, and presses.",year:"Unknown",architect:"N/A",builder:"Private",location:{center:[72.83271,18.92876]}},{id:"jaydeep-engg",category:"Lettering",title:"Jaydeep Engg. Co.",image:"./images/jaydeep-engg.jpg",description:"Hand-painted industrial signage featuring detailed technical illustrations of pumps, motors, and generators, reflecting the engineering trade history of the street.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832528,18.929056]}},{id:"other-horse",category:"Street Furniture",title:'The "Other" Black Horse',image:"./images/black-horse-small.jpg",description:'A lesser-known, smaller black horse statue located in a garden patch near the British Engineering Company buildings. Distinct from the famous "Spirit of Kala Ghoda" in the main precinct.',year:"Unknown",architect:"Unknown",builder:"Private Installation",location:{center:[72.833944,18.928361]}},{id:"bandukwala",category:"Vernacular",title:"Bandukwala Building",image:"./images/bandukwala.jpg",description:'A handsome heritage building featuring arched windows with decorative keystones and intricate pilasters, now housing legal chambers. Home to the "CS Legal" offices.',year:"Unknown",architect:"Unknown",builder:"Bandukwala Family",location:{center:[72.833583,18.928917]}},{id:"sewing-mural",category:"Living Heritage",title:"Sewing Machine Mural",image:"./images/sewing-mural.jpg",description:"A whimsical large-scale mural by artist Shashi, depicting a vintage sewing machine intertwining with nature (#stitchinglivestogether). Located above a fashion boutique.",year:"Unknown",architect:"Shashi",builder:"Private",location:{center:[72.833861,18.928972]}},{id:"ice-cream-mural",category:"Living Heritage",title:"Ice Cream Mural",image:"./images/ice-cream-mural.jpg",description:"A vibrant, retro-styled street art mural featuring a pin-up figure and colorful ice cream motifs, located near Valliyan. A popular backdrop that adds to the artistic pulse of the Kala Ghoda precinct.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832389,18.92825]}},{id:"artisans-mural",category:"Living Heritage",title:"Artisans Gallery Facade",image:"./images/artisans-mural.jpg",description:"A striking monochromatic mural with yellow accents covering the facade of Artisans Gallery. The artwork celebrates craftsmanship, depicting hands engaged in pottery, painting, and other traditional arts.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.83242,18.92828]}},{id:"jatin-malik-mural",category:"Living Heritage",title:"Spirit of Kala Ghoda Mural",image:"./images/jatin-malik-mural.jpg",description:'A vibrant mural on the yellow facade of the Jatin Malik store, featuring a stylized, colorful horse in motiona direct artistic homage to the "Kala Ghoda" (Black Horse) identity of the precinct.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832139,18.928278]}},{id:"sopara-mural",category:"Living Heritage",title:"Ancient Trade Route Mural",image:"./images/sopara-mural.jpg",description:'A detailed vertical tile mural titled "Berenike - Anchored in Ancient Trade - Sopara", illustrating the historic maritime connection between Egypt (Berenike) and the ancient port of Sopara near Mumbai.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.8338,18.927283]}},{id:"mehta-house",category:"Lettering",title:"Mehta House Signage",image:"./images/mehta-house.jpg",description:"Features striking 3D shadow-effect lettering typical of the mid-20th century commercial art style.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833833,18.929194]}},{id:"east-west",category:"Lettering",title:"East & West Building",image:"./images/east-west.jpg",description:"Heritage stone inscription on the facade of the East & West Insurance Building.",year:"Unknown",architect:"Unknown",builder:"East & West Insurance Co.",location:{center:[72.833583,18.929972]}},{id:"ring-co",categories:["Lettering","Ghost Site"],title:"Ghost Signage (Ring Co.)",image:"./images/ring-co.jpg",description:'A fragmented sign reading "...RING CO." visible above the Bhaveshwar Copy Center, hinting at a former industrial or engineering tenant.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.8339,18.9303]}},{id:"vernacular-facade",category:"Vernacular",title:"Late 19th Century Vernacular Facade",image:"./images/wooden-facade.jpg",description:"A rare partially-preserved example of the vernacular architectural style once common in Fort. Features intricate wooden jali balconies and corbelled brackets.",year:"Unknown",architect:"Unknown",builder:"Local Craftsmen",location:{center:[72.8325,18.929194]}},{id:"wooden-terraces",category:"Vernacular",title:"Vernacular Wooden Terraces",image:"./images/wooden-terraces.jpg",description:"A striking multi-story wooden facade featuring deep cantilevered balconies, decorative railings, and support brackets, housing the Kalamkari Design Studio.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.834,18.931278]}},{id:"ornate-window",category:"Urban Texture",title:"Ornate Window Grille",image:"./images/ornate-window.jpg",description:"A beautifully preserved window featuring complex geometric metal or wood work, representing the residential architectural fabric of the precinct.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833111,18.928417]}},{id:"marine-diesel",category:"Lettering",title:"Marine Diesel Signage",image:"./images/marine-diesel.jpg",description:'Comprehensive hand-painted trade signage for "Marine Diesel Engines & Spares" at Kirti Building, listing heritage mechanical brands like Lister, Ruston, and Kirloskar.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833194,18.928417]}},{id:"gujerat-mill",category:"Lettering",title:"The Gujerat Mill Store",image:"./images/gujerat-mill.jpg",description:'Distinctive mid-century corporate signage featuring a stylized "G" logo and metal lettering on a textured plaster facade.',year:"Unknown",architect:"N/A",builder:"Private",location:{center:[72.833139,18.928389]}},{id:"rampart-chowky",category:"Victorian",title:"Rampart Beat Chowky",image:"./images/rampart-chowky.jpg",description:"A small stone police outpost with heritage architectural details, including a cornice and stone brackets, guarding the entrance to Rampart Row.",year:"Unknown",architect:"Public Works Dept",builder:"Govt. of Bombay",location:{center:[72.832361,18.9275]}},{id:"allahabad-bank",category:"Neoclassical",title:"Allahabad Bank Building",image:"./images/allahabad-bank.jpg",description:"A grand Neo-Classical banking hall (now Indian Bank) featuring a prominent corner entrance, Corinthian pilasters, and heavy stone detailing.",year:"Unknown",architect:"Unknown",builder:"Allahabad Bank",location:{center:[72.834,18.93125]}},{id:"sbi-fort",category:"Neoclassical",title:"SBI Main Branch (Fort)",image:"./images/sbi-fort-branch.jpg",description:"A massive colonial-era banking structure with colossal Ionic columns and a pedimented entrance, originally the Imperial Bank of India.",year:"1924",architect:"Unknown",builder:"Imperial Bank",location:{center:[72.834,18.931306]}},{id:"sbi-roman",category:"Lettering",title:"MCMXXIV Date Plaque",image:"./images/sbi-mcmxxiv.jpg",description:"The Roman numeral MCMXXIV (1924) carved in bold relief gold-painted serif lettering on the stone entablature, marking the buildings completion year.",year:"1924",architect:"Unknown",builder:"Imperial Bank",location:{center:[72.834028,18.931333]}},{id:"a-doshi",categories:["Lettering"],title:"A. Doshi & Co.",images:["./images/a-doshi-sign.jpg"],description:'Classic commercial signage with bold relief lettering, accompanied by a diamond-shaped plaque reading "ESTD 1940".',year:"1940",architect:"Unknown",builder:"Private",location:{center:[72.83375,18.931333]}},{id:"ewart-house",categories:["Lettering","Ghost Site"],title:"Ewart House Lettering",image:"./images/ewart-house.jpg",description:`Carved "EWART HOUSE" lettering on the stone facade above the Central Bank of India. A subtle reminder of the building's identity.`,year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833083,18.931361]}},{id:"bruce-street",categories:["Street Sign","Ghost Site"],title:"Old Bruce Street Sign",images:["./images/bruce-street-sign.jpg"],description:'A rare painted sign for "10, BRUCE STREET" (now Homi Modi Street) preserved on a building facade, a tangible reminder of the areas colonial nomenclature.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833556,18.931417]}},{id:"bse",category:"Modern",title:"Bombay Stock Exchange",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/BSE_-_Bombay_Stock_Exchange_Building.jpg/960px-BSE_-_Bombay_Stock_Exchange_Building.jpg",description:"The Phiroze Jeejeebhoy Towers.",year:"1980",architect:"Chandrakant Patel",builder:"BSE",location:{center:[72.8336,18.9297]}},{id:"dalal-sign-black",category:"Street Sign",title:"Dalal Street Sign (Black)",image:"./images/dalal-street-black.jpg",description:"A classic black cast-iron street sign marking Dalal Street, the financial heart of Mumbai.",year:"Unknown",architect:"BMC",builder:"Municipal Corp",location:{center:[72.833722,18.929722]}},{id:"darda-statue",category:"Street Furniture",title:"Jawaharlal Darda Statue",image:"./images/jawaharlal-darda.jpg",description:'A bronze bust honoring the freedom fighter and journalist Jawaharlal Darda, affectionately known as "Babuji".',year:"Unknown",architect:"Unknown",builder:"Public",location:{center:[72.833778,18.929889]}},{id:"carved-balconies",category:"Vernacular",title:"Ornate Stone Facade",image:"./images/carved-balconies.jpg",description:"A fine example of vernacular architecture featuring intricate stone jaali (lattice) work, heavy masonry brackets, and projecting balconies, characteristic of the mixed-use buildings in old Fort.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833778,18.929972]}},{id:"stone-arches",category:"Vernacular",title:"Stone Arched Facade",image:"./images/islamic-stone-arches.jpg",description:"Distinctive vernacular building featuring scalloped (cusped) stone arches and geometric perforated stone railings.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833833,18.93025]}},{id:"dalal-sign-blue",category:"Street Sign",title:"Dalal Street Sign (Blue)",image:"./images/dalal-street-blue.jpg",description:"A vintage blue enamel street sign for Dalal Street, likely an earlier municipal design.",year:"Unknown",architect:"BMC",builder:"Municipal Corp",location:{center:[72.83375,18.92975]}},{id:"flora",category:"Street Furniture",title:"Flora Fountain",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Mumbai_03-2016_72_Flora_Fountain.jpg/960px-Mumbai_03-2016_72_Flora_Fountain.jpg",description:"An ornamental fountain at Hutatma Chowk.",year:"1864",architect:"R. Norman Shaw",builder:"Agri-Horticultural Soc",location:{center:[72.8317,18.9323]}},{id:"hutatma",category:"Public Space",title:"Hutatma Smarak (Martyrs Memorial)",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Hutatma_Chowk%2C_Mumbai_-_panoramio_(2).jpg/1280px-Hutatma_Chowk%2C_Mumbai_-_panoramio_(2).jpg",description:"A memorial with a bronze statue of a laborer and a farmer, honoring the 106 martyrs of the Samyukta Maharashtra Samiti who died for the creation of the state.",year:"1961",architect:"Harish Talim",builder:"Govt. of Maharashtra",location:{center:[72.8316,18.93245]}},{id:"tram-tracks",category:"Ghost Site",title:"Tram Tracks",image:"./images/tram-tracks.jpg",description:"The tram tracks, hidden for more than six decades, were discovered during excavation in 2018. Mumbai's tram service began in 1874 and stopped in 1964. While horses were used to pull the trams earlier, they were replaced by electric engines in 1907. The network functioned from Colaba to Pydhonie via Crawford Market. The original tracks have been preserved at their original position.",year:"1874",architect:"BEC",builder:"Bombay Tramway Co.",location:{center:[72.831667,18.932583]}},{id:"central-bank",categories:["Neoclassical","Lettering"],title:"Central Bank of India",images:["./images/central-bank.jpg","./images/central-bank-lettering.jpg"],description:'A grand heritage building established in 1911 as one of the first truly Indian owned banks. The facade features prominent "CENTRAL BANK BUILDING" carved lettering curving around the corner.',year:"1911",architect:"Unknown",builder:"Sir Sorabji Pochkhanawala",location:{center:[72.83175,18.931722]}},{id:"bombay-house",categories:["Neoclassical","Lettering"],title:"Bombay House",images:["./images/bombay-house.jpg","./images/bombay-house-lettering.jpg"],description:'The global headquarters of the Tata Group since 1924. This colonial-era stone building is renowned for its understated elegance and the "BOMBAY HOUSE" gold lettering above the entrance arcade.',year:"1924",architect:"George Wittet",builder:"Tata Group",location:{center:[72.83268,18.931847]}},{id:"fire-hydrant",category:"Street Furniture",title:"British Fire Hydrant",image:"./images/british-fire-hydrant.jpg",description:"A rare cast-iron fire hydrant from the British colonial era, painted bright red. These sturdy relics of civic infrastructure are disappearing but occasionally found on Forts sidewalks.",year:"Unknown",architect:"Unknown",builder:"Municipal Corp",location:{center:[72.832944,18.9315]}},{id:"siddharth-college",category:"Victorian",title:"Siddharth College (Anand Bhavan)",image:"./images/siddharth-college.jpg",description:"A Grade II heritage structure (formerly Albert Building), acquired by Dr. B.R. Ambedkar in 1951 to house the first college of the People's Education Society.",year:"1900",architect:"Unknown",builder:"People's Education Society",location:{center:[72.832389,18.933889]}},{id:"davar-building",category:"Lettering",title:"Davar Building Lettering",image:"./images/davar-building.jpg",description:"Carved stone lettering above an arched entrance passage, exemplifying the bold typography of early 20th century commercial buildings in the Fort area.",year:"1900",architect:"Unknown",builder:"Private",location:{center:[72.831694,18.932222]}},{id:"sunder-woodwork",category:"Lettering",title:"Sunder Woodwork Signage",image:"./images/sunder-woodwork.jpg",description:'Art Deco style signage reading "WOOD SUNDER WORK" with dimensional lettering and a distinctive red outline, located above an arched stone entrance.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.831667,18.93225]}},{id:"cip-building",category:"Neoclassical",title:"ICP Fort Heritage (CIP Building)",image:"./images/cip-building.jpg",description:'A grand heritage building on Nagindas Master Road, originally constructed in 1913. The facade features a prominent pediment with the year "1913" carved in relief, along with decorative cornices and Corinthian-style pilasters. It currently houses the flagship store of fashion designer Sabyasachi.',year:"1913",architect:"Unknown",builder:"Private",location:{center:[72.833428,18.932456]}},{id:"standard-building",category:"Neoclassical",title:"Standard Building",image:"./images/standard-building.jpg",description:"Designed by F.W. Stevens and completed by his son Charles Stevens. A prime example of the Neo-Classical style on D.N. Road, featuring buff-coloured basalt and intricate carvings.",year:"1902",architect:"F.W. Stevens / Charles Stevens",builder:"Standard Life Assurance",location:{center:[72.8321,18.9339]}},{id:"un-pursram",category:"Living Heritage",title:"U.N. Pursram",image:"./images/un-pursram.jpg",description:"A historic department store housed within the Standard Building arcade, serving Mumbai since the mid-20th century.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832556,18.934111]}},{id:"un-pursram-lettering",category:"Lettering",title:"U.N. Pursram Signage",image:"./images/un-pursram.jpg",description:"The distinctive oval signage of U.N. Pursram, a classic example of commercial typography on D.N. Road.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.83258,18.93414]}},{id:"thomas-cook",category:"Neoclassical",title:"Thomas Cook Building",image:"./images/thomas-cook-building.jpg",description:"A distinguished Grade II-A heritage structure featuring Classical elements like Corinthian columns and arched windows. Originally the Indian headquarters for Eastman Kodak.",year:"1900",architect:"Unknown",builder:"Eastman Kodak",location:{center:[72.832611,18.934167]}},{id:"jn-petit",category:"Victorian",title:"J.N. Petit Institute",image:"./images/jn-petit.jpg",description:"A magnificent Neo-Gothic library and reading room built in 1898. Its facade features polychromatic stone, stained glass, and pointed arches. Recipient of a UNESCO Heritage Award.",year:"1898",architect:"Merwanjee Bana",builder:"Petit Family",location:{center:[72.832639,18.934194]}},{id:"fort-gate",category:"Victorian",title:"Fort Gate Remnant",image:"./images/fort-gate-remnant.jpg",description:"A surviving basalt stone archway, likely a remnant from the original Fort walls demolished in the 1860s. Now integrated into the urban fabric near DN Road.",year:"1860",architect:"British Military Engineers",builder:"Public Works",location:{center:[72.832361,18.933667]}},{id:"booksellers",category:"Living Heritage",title:"Secondhand Book Sellers",image:"./images/books.jpg",description:"The lineage of street book vendors near Flora Fountain.",year:"1950",architect:"N/A",builder:"Vendor Collective",location:{center:[72.8315,18.9325]}},{id:"rbi-rupee",category:"Street Furniture",title:"RBI Rupee Installation",image:"./images/rbi-rupee.jpg",description:"A large golden installation of the Indian Rupee symbol () accompanied by coin motifs, located outside the Reserve Bank of India.",year:"2010",architect:"RBI",builder:"RBI",location:{center:[72.83709,18.932943]}},{id:"rbi-building",categories:["Modern","Street Furniture"],title:"Reserve Bank of India (Main Building)",images:["./images/rbi-building.jpg","./images/rbi-tiger.jpg"],description:"The headquarters of India's central bank. Completed in 1939, the building is a transition between Art Deco and Modernism. A prominent golden statue of the RBI tiger under a palm tree (based on the East India Company's Mohur) stands at the entrance.",year:"1939",architect:"J.A. Ritchie",builder:"Shapoorji Pallonji",location:{center:[72.83685,18.93285]}},{id:"mumbai-mint",category:"Neoclassical",title:"India Government Mint",image:"./images/mumbai-mint.jpg",description:"Established in 1829, the Mumbai Mint is one of the oldest in India. The building is a fine example of Neoclassical architecture, featuring a grand basalt stone facade.",year:"1829",architect:"Major John Hawkins",builder:"British Government",location:{center:[72.836556,18.933361]}},{id:"bhagatsingh-road-sign",category:"Street Sign",title:"Shahid Bhagat Singh Road Sign",image:"./images/bhagatsingh-road-sign.jpg",description:"A classic blue municipal street sign marking Shahid Bhagat Singh Road (formerly Colaba Causeway). The decorative ironwork scroll on the post is a characteristic feature of Mumbai's heritage street signage.",year:"Unknown",architect:"BMC",builder:"Municipal Corp",location:{center:[72.836139,18.932889]}},{id:"fire-hydrant-sbs",category:"Street Furniture",title:"British Fire Hydrant",image:"./images/hydrant-sbs.jpg",description:"A weathered cast-iron fire hydrant from the British colonial era, located along Shahid Bhagat Singh Road. These hexagonal pillars remain as silent sentinels of the city's 19th-century water infrastructure.",year:"1890",architect:"Unknown",builder:"Municipal Corp",location:{center:[72.835806,18.932583]}},{id:"fire-hydrant-dn",category:"Street Furniture",title:"British Fire Hydrant",image:"./images/hydrant-dn-road.jpg",description:"A tall, cylindrical cast-iron fire hydrant with a rounded cap, located within the heritage arcade on Dadabhai Naoroji Road. This red-oxide painted relic is part of Mumbai's historic fire-fighting infrastructure.",year:"1890",architect:"Unknown",builder:"Municipal Corp",location:{center:[72.834306,18.93225]}},{id:"standard-monograms",category:"Lettering",title:"Heritage Monograms",images:["./images/monogram-hb.jpg","./images/monogram-mb.jpg"],description:'Intricate monograms carved into the stone balconies of the Standard Building on D.N. Road. These stylized "HB" and "MB" initials are a testament to the craftsmanship and personal branding of the early 20th-century architects and builders.',year:"1902",architect:"F.W. Stevens",builder:"Standard Life Assurance",location:{center:[72.834417,18.932056]}},{id:"gungadass-piyav",categories:["Street Furniture","Lettering"],title:"Gungadass Vizbhoocundass Piyav",images:["./images/gungadass-piyav.jpg","./images/gungadass-plaque-1841.jpg","./images/gungadass-plaque-1873.jpg"],description:"A historic water fountain (piyav) decorated with red jaali work. The inscriptions in multiple scripts (English, Gujarati, Marathi, Urdu) commemorate its erection in 1841 by Gungadass Vizbhoocundass and a subsequent addition in 1873 by his widow, Bai Manchooverbai.",year:"1841",architect:"Unknown",builder:"Gungadass Vizbhoocundass",location:{center:[72.834389,18.932028]}},{id:"ryrie-building",categories:["Neoclassical","Lettering"],title:"Ryrie's Building (Galeries Lafayette)",images:["./images/ryrie-building.jpg","./images/ryrie-monogram.jpg"],description:`A grand heritage building on D.N. Road, recently restored to house Galeries Lafayette. The stone facade features intricate Neoclassical details, including the original "RY" monogram carved into the masonry, signifying its history as the Ryrie's building.`,year:"1900",architect:"Unknown",builder:"Ryrie & Co.",location:{center:[72.834693,18.930883]}},{id:"sbi-directory",category:"Lettering",title:"State Bank Building Directory",image:"./images/crawford-bayley-board.jpg",description:"A classic black directory board located at the entrance of the State Bank Building (formerly State Bank of India Commercial Branch). It features the names of historic tenants like Crawford Bayley & Co. and The Oriental Fire & General Insurance, rendered in crisp white lettering.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.834972,18.931083]}},{id:"keystone-heads",category:"Urban Texture",title:"Keystone Sculptures",image:"./images/keystone-heads.jpg",description:"Intricate sculpted heads (mascarons) adorning the keystones of the arches on this heritage faade. These bearded faces, possibly depicting European or mythological figures, watch over the street from above the shopfronts (currently Bademiya).",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.835194,18.931444]}},{id:"oriental-building",category:"Victorian",title:"Oriental Building",image:"./images/oriental-building.jpg",description:`A magnificent Venetian Gothic structure completed in 1885. Its facade is a masterpiece of stone carving, featuring prominent arches, decorative balconies, and the signature "mascaron" heads on its keystones. Originally built for the Oriental Life Assurance Company, it is now an iconic part of the Fort district's architectural fabric.`,year:"1885",architect:"Frederick William Stevens",builder:"Oriental Life Assurance",location:{center:[72.835194,18.931444]}},{id:"bmc-plaque-horniman",category:"Street Sign",title:"BMC Garden Plaque",image:"./images/bmc-plaque-horniman.jpg",description:"The official colorful seal of the Brihanmumbai Municipal Corporation (BMC) mounted on the historic iron railings of Horniman Circle Garden. The seal features iconic Mumbai landmarks like the Gateway of India and a factory, representing the citys heritage and industry.",year:"Unknown",architect:"BMC",builder:"Municipal Corp",location:{center:[72.835556,18.932167]}},{id:"asiatic-society",category:"Neoclassical",title:"Asiatic Society of Mumbai (Town Hall)",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/The_Asiatic_Society_of_Mumbai_in_May_2025.jpg/1024px-The_Asiatic_Society_of_Mumbai_in_May_2025.jpg",description:"Completed in 1833, the Town Hall is one of the most magnificent Neoclassical buildings in Mumbai. Inspired by Greek and Roman architecture, it features a grand portico with eight Doric columns and a famous flight of steps that serves as a popular public space.",year:"1833",architect:"Colonel Thomas Cowper",builder:"Government of Bombay",location:{center:[72.836155,18.931813]}},{id:"horniman-garden",category:"Public Space",title:"Horniman Circle Garden",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/10/Mumbai%2C_giardini_di_horniman_circle%2C_03.jpg/1024px-Mumbai%2C_giardini_di_horniman_circle%2C_03.jpg",description:"A historic park at the center of Horniman Circle, originally known as Elphinstone Circle. Laid out in 1872, the garden is a rare example of circular urban planning in Mumbai, surrounded by palm trees and grand Victorian buildings. It remains a tranquil green lung in the heart of the business district.",year:"1872",architect:"Unknown",builder:"Govt. of Bombay",location:{center:[72.835007,18.931907]}},{id:"bharat-insurance",categories:["Neoclassical","Lettering"],title:"Bharat Insurance Building",images:["./images/bharat-insurance.jpg","./images/bharat-insurance-lettering.jpg"],description:'A stately Neoclassical building on Horniman Circle. The facade features a graceful curve, recurring arched windows with decorative "mascaron" keystone heads, and prominent raised lettering for the "BHARAT INSURANCE BUILDING". It currently houses the flagship Hermes store, blending historic grandeur with modern luxury.',year:"Unknown",architect:"Unknown",builder:"Bharat Insurance Co.",location:{center:[72.835815,18.933329]}},{id:"hc-dinshaw-building",categories:["Neoclassical","Lettering"],title:"Sir H.C. Dinshaw Building",images:["./images/hc-dinshaw-building.jpg","./images/hc-dinshaw-lettering.jpg"],description:`A grand heritage building on Horniman Circle, part of the precinct's iconic curved architecture. The facade is adorned with intricate stone carvings, including "mascaron" heads on the window keystones. Notable gold-engraved lettering above the entrance and within the archways bears the name "SIR H. C. DINSHAW BUILDING".`,year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.835373,18.932915]}},{id:"mumbai-samachar",categories:["Victorian","Lettering","Living Heritage"],title:"Mumbai Samachar Building",images:["./images/mumbai-samachar.jpg","./images/mumbai-samachar-lettering.jpg"],description:"The home of Asia's oldest continuously published newspaper (est. 1822). This striking red-brick building is a landmark of Mumbai's journalism history. The facade is a fine example of Victorian commercial architecture, featuring multilingual signage and elegant arched windows.",year:"1822",architect:"Unknown",builder:"Cama Family",location:{center:[72.834456,18.93282]}},{id:"elphinstone-building",categories:["Victorian","Lettering"],title:"Elphinstone Building",images:["./images/elphinstone-building.jpg","./images/elphinstone-lettering.jpg"],description:'A stately Victorian Gothic building with prominent arched windows and intricate stone ornamentation. The facade features the "ELPHINSTONE BUILDING" nameplate carved into the masonry. Today, it stands as a prime example of the 19th-century commercial grandness of the Fort district, housing modern retail like Starbucks.',year:"1870",architect:"James Trubshawe",builder:"Unknown",location:{center:[72.834229,18.933358]}},{id:"brady-house",categories:["Neoclassical","Lettering"],title:"Brady House",images:["./images/brady-house.jpg","./images/brady-house-lettering.jpg"],description:`An elegant heritage building featuring a distinctive shield-shaped pediment with the "BRADY HOUSE" nameplate. The structure displays refined architectural detailing with arched windows and a symmetrical facade, characteristic of early 20th-century commercial buildings in Mumbai's business district.`,year:"Unknown",architect:"Unknown",builder:"W.H. Brady & Co.",location:{center:[72.833778,18.932474]}},{id:"pardiwala-sign",categories:["Lettering","Ghost Site"],title:"Pardiwala Paper Mart Sign",image:"./images/pardiwala-paper.jpg",description:`A weathered wooden sign with bold relief lettering for "PARDIWALA PAPER MART", hanging under a stone Gothic arch. A classic example of Mumbai's historic commercial signage and a "ghost site" of a former paper trading business.`,year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.834335,18.932354]}},{id:"1923-lettering",category:"Lettering",title:"1923 Lettering",image:"./images/lettering-north-fort.jpg",description:'Carved stone lettering displaying the year "1923" adorned with decorative floral motifs.',year:"1923",architect:"Unknown",builder:"Private",location:{center:[72.833889,18.935944]}},{id:"readymoney-mansion",categories:["Vernacular","Lettering"],title:"Readymoney Mansion",images:["./images/readymoney-mansion-building.jpg","./images/readymoney-mansion-lettering.jpg"],description:'A striking heritage building featuring a stone facade and intricate wooden balconies. The name "READYMONEY MANSION" is carved in bold relief above the entrance.',year:"Unknown",architect:"Unknown",builder:"Readymoney Family",location:{center:[72.830534,18.931944]}},{id:"churchgate-house",categories:["Lettering","Victorian"],title:"Churchgate House Lettering",image:"./images/churchgate-house-lettering.jpg",description:'Classic serif lettering for "CHURCHGATE HOUSE" mounted on the stone facade of a heritage building, now housing a modern bank branch.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832911,18.932546]}},{id:"elite-shopping-centre",category:"Lettering",title:"Elite Shopping Centre Signage",image:"./images/elite-shopping-centre-lettering.jpg",description:'A vibrant arched blue sign for the "ELITE SHOPPING CENTRE" marking a busy commercial passage on Nariman Road.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.832917,18.93225]}},{id:"rustom-building",categories:["Lettering","Victorian"],title:"Rustom Building Lettering",image:"./images/rustom-building-lettering.jpg",description:`Bold relief lettering for "RUSTOM BUILDING" set against a stone facade. The building features decorative iron balconies and classic stone detailing, characteristic of the district's commercial heritage.`,year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833245,18.932614]}},{id:"st-thomas-cathedral",categories:["Victorian","Lettering"],title:"St. Thomas Cathedral",images:["./images/st-thomas-building.jpg","./images/st-thomas-lettering.jpg"],description:"The first Anglican church in Mumbai, consecrated in 1718. A landmark of colonial architecture, it gave its name to the nearby Churchgate station. The cathedral features a blend of Gothic and Neoclassical styles with a distinctive white tower.",year:"1718",architect:"Unknown",builder:"East India Company",location:{center:[72.833599,18.932995]}},{id:"fish-relief-wall",category:"Urban Texture",title:"Fish & Star Reliefs",image:"./images/fish-relief-wall.jpg",description:"A unique vernacular detail featuring red-painted relief sculptures of stars and two fish meeting head-to-head on the gable wall of a building in the Fort precinct.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.8335,18.932972]}},{id:"heritage-balconies-fort",category:"Vernacular",title:"Heritage Balconies",image:"./images/heritage-balconies-fort.jpg",description:"A striking example of early 20th-century residential architecture in Fort, featuring ornate wrought-iron balconies, a Greek-key pattern frieze, and classic stone facing.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.833389,18.932889]}},{id:"fire-hydrant-mcgb",category:"Street Furniture",title:"MCGB Fire Hydrant",image:"./images/fire-hydrant-mcgb.jpg",description:`A classic cylindrical cast-iron fire hydrant with the inscription "MCGB" (Municipal Corporation of Greater Bombay) and "IS 908", reflecting the city's municipal infrastructure history.`,year:"Unknown",architect:"Unknown",builder:"Municipal Corp",location:{center:[72.833333,18.932694]}},{id:"yazdani-bakery",categories:["Living Heritage","Lettering","Vernacular"],title:"Yazdani Restaurant & Bakery",images:["./images/yazdani-bakery-facade.jpg","./images/yazdani-bakery-sign.jpg","./images/yazdani-la-boulangerie.jpg"],description:"An iconic Iranian bakery and restaurant established in 1953, housed in a charming colonial-era structure with a distinctive red-trim gabled roof. Famous for its ginger biscuits, brun maska, and wood-fired ovens.",year:"1953",architect:"Unknown",builder:"Zend Meherwan Abadan",location:{center:[72.833699,18.933451]}},{id:"french-bank-building",categories:["Lettering","Ghost Site"],title:"French Bank Building Signage",image:"./images/french-bank-building.jpg",description:`Prominent sans-serif lettering for the "FRENCH BANK BUILDING" above the entrance. To the right, a faint "BNP" ghost sign is visible on the facade, a relic of the building's former life as the Mumbai headquarters for the French bank BNP Paribas.`,year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.835043,18.933314]}},{id:"gool-mansion",category:"Lettering",title:"Gool Mansion Lettering",image:"./images/gool-mansion-lettering.jpg",description:'Art Deco style gold lettering on a red granite plaque marking "GOOL MANSION", integrated into the facade of this heritage residential building on Nariman Road.',year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.835087,18.934023]}},{id:"fluted-facade-plant",categories:["Neoclassical","Urban Texture"],title:"Fluted Heritage Facade",image:"./images/baroda-facade-plant.jpg",description:"A grand heritage facade featuring monumental fluted pilasters. A young Ficus tree has taken root in the decorative iron balcony, a common sight where nature reclaims the masonry joints of the Fort precinct.",year:"Unknown",architect:"Unknown",builder:"Private",location:{center:[72.83525,18.933417]}},{id:"hydrant",category:"Street Furniture",title:"British Fire Hydrant",image:"./images/hydrant.jpg",description:"A hexagonal cast-iron fire hydrant, a sturdy relic of the colonial municipal water infrastructure.",year:"1895",architect:"BMC",builder:"Foundry Cast",location:{center:[72.831917,18.928139]}},{id:"kerbstones",category:"Urban Texture",title:"Kurla Basalt Kerbstones",image:"./images/kurla-basalt.jpg",description:"Original massive blocks of grey Kurla basalt lining the pavement.",year:"1880",architect:"City Engineers",builder:"Public Works",location:{center:[72.832,18.9275]}}];function xE(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(i=xE(e[t]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function bE(){for(var e,t,i=0,a="",h=arguments.length;i<h;i++)(e=arguments[i])&&(t=xE(e))&&(a&&(a+=" "),a+=t);return a}const rB=(e,t)=>{const i=new Array(e.length+t.length);for(let a=0;a<e.length;a++)i[a]=e[a];for(let a=0;a<t.length;a++)i[e.length+a]=t[a];return i},iB=(e,t)=>({classGroupId:e,validator:t}),wE=(e=new Map,t=null,i)=>({nextPart:e,validators:t,classGroupId:i}),Im="-",W2=[],sB="arbitrary..",oB=e=>{const t=lB(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:p=>{if(p.startsWith("[")&&p.endsWith("]"))return aB(p);const c=p.split(Im),S=c[0]===""&&c.length>1?1:0;return SE(c,S,t)},getConflictingClassGroupIds:(p,c)=>{if(c){const S=a[p],E=i[p];return S?E?rB(E,S):S:E||W2}return i[p]||W2}}},SE=(e,t,i)=>{if(e.length-t===0)return i.classGroupId;const h=e[t],g=i.nextPart.get(h);if(g){const E=SE(e,t+1,g);if(E)return E}const p=i.validators;if(p===null)return;const c=t===0?e.join(Im):e.slice(t).join(Im),S=p.length;for(let E=0;E<S;E++){const P=p[E];if(P.validator(c))return P.classGroupId}},aB=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),i=t.indexOf(":"),a=t.slice(0,i);return a?sB+a:void 0})(),lB=e=>{const{theme:t,classGroups:i}=e;return cB(i,t)},cB=(e,t)=>{const i=wE();for(const a in e){const h=e[a];Cx(h,i,a,t)}return i},Cx=(e,t,i,a)=>{const h=e.length;for(let g=0;g<h;g++){const p=e[g];uB(p,t,i,a)}},uB=(e,t,i,a)=>{if(typeof e=="string"){hB(e,t,i);return}if(typeof e=="function"){dB(e,t,i,a);return}fB(e,t,i,a)},hB=(e,t,i)=>{const a=e===""?t:kE(t,e);a.classGroupId=i},dB=(e,t,i,a)=>{if(pB(e)){Cx(e(a),t,i,a);return}t.validators===null&&(t.validators=[]),t.validators.push(iB(i,e))},fB=(e,t,i,a)=>{const h=Object.entries(e),g=h.length;for(let p=0;p<g;p++){const[c,S]=h[p];Cx(S,kE(t,c),i,a)}},kE=(e,t)=>{let i=e;const a=t.split(Im),h=a.length;for(let g=0;g<h;g++){const p=a[g];let c=i.nextPart.get(p);c||(c=wE(),i.nextPart.set(p,c)),i=c}return i},pB=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,mB=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=Object.create(null),a=Object.create(null);const h=(g,p)=>{i[g]=p,t++,t>e&&(t=0,a=i,i=Object.create(null))};return{get(g){let p=i[g];if(p!==void 0)return p;if((p=a[g])!==void 0)return h(g,p),p},set(g,p){g in i?i[g]=p:h(g,p)}}},Ov="!",q2=":",gB=[],Z2=(e,t,i,a,h)=>({modifiers:e,hasImportantModifier:t,baseClassName:i,maybePostfixModifierPosition:a,isExternal:h}),yB=e=>{const{prefix:t,experimentalParseClassName:i}=e;let a=h=>{const g=[];let p=0,c=0,S=0,E;const P=h.length;for(let G=0;G<P;G++){const ne=h[G];if(p===0&&c===0){if(ne===q2){g.push(h.slice(S,G)),S=G+1;continue}if(ne==="/"){E=G;continue}}ne==="["?p++:ne==="]"?p--:ne==="("?c++:ne===")"&&c--}const T=g.length===0?h:h.slice(S);let A=T,$=!1;T.endsWith(Ov)?(A=T.slice(0,-1),$=!0):T.startsWith(Ov)&&(A=T.slice(1),$=!0);const X=E&&E>S?E-S:void 0;return Z2(g,$,A,X)};if(t){const h=t+q2,g=a;a=p=>p.startsWith(h)?g(p.slice(h.length)):Z2(gB,!1,p,void 0,!0)}if(i){const h=a;a=g=>i({className:g,parseClassName:h})}return a},_B=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((i,a)=>{t.set(i,1e6+a)}),i=>{const a=[];let h=[];for(let g=0;g<i.length;g++){const p=i[g],c=p[0]==="[",S=t.has(p);c||S?(h.length>0&&(h.sort(),a.push(...h),h=[]),a.push(p)):h.push(p)}return h.length>0&&(h.sort(),a.push(...h)),a}},vB=e=>({cache:mB(e.cacheSize),parseClassName:yB(e),sortModifiers:_B(e),...oB(e)}),xB=/\s+/,bB=(e,t)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:h,sortModifiers:g}=t,p=[],c=e.trim().split(xB);let S="";for(let E=c.length-1;E>=0;E-=1){const P=c[E],{isExternal:T,modifiers:A,hasImportantModifier:$,baseClassName:X,maybePostfixModifierPosition:G}=i(P);if(T){S=P+(S.length>0?" "+S:S);continue}let ne=!!G,F=a(ne?X.substring(0,G):X);if(!F){if(!ne){S=P+(S.length>0?" "+S:S);continue}if(F=a(X),!F){S=P+(S.length>0?" "+S:S);continue}ne=!1}const V=A.length===0?"":A.length===1?A[0]:g(A).join(":"),H=$?V+Ov:V,ee=H+F;if(p.indexOf(ee)>-1)continue;p.push(ee);const ye=h(F,ne);for(let be=0;be<ye.length;++be){const fe=ye[be];p.push(H+fe)}S=P+(S.length>0?" "+S:S)}return S},wB=(...e)=>{let t=0,i,a,h="";for(;t<e.length;)(i=e[t++])&&(a=TE(i))&&(h&&(h+=" "),h+=a);return h},TE=e=>{if(typeof e=="string")return e;let t,i="";for(let a=0;a<e.length;a++)e[a]&&(t=TE(e[a]))&&(i&&(i+=" "),i+=t);return i},SB=(e,...t)=>{let i,a,h,g;const p=S=>{const E=t.reduce((P,T)=>T(P),e());return i=vB(E),a=i.cache.get,h=i.cache.set,g=c,c(S)},c=S=>{const E=a(S);if(E)return E;const P=bB(S,i);return h(S,P),P};return g=p,(...S)=>g(wB(...S))},kB=[],Sr=e=>{const t=i=>i[e]||kB;return t.isThemeGetter=!0,t},CE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,EE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,TB=/^\d+\/\d+$/,CB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,EB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,IB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dc=e=>TB.test(e),tn=e=>!!e&&!Number.isNaN(Number(e)),ma=e=>!!e&&Number.isInteger(Number(e)),u_=e=>e.endsWith("%")&&tn(e.slice(0,-1)),xo=e=>CB.test(e),MB=()=>!0,DB=e=>EB.test(e)&&!PB.test(e),PE=()=>!1,zB=e=>IB.test(e),RB=e=>AB.test(e),LB=e=>!Tt(e)&&!Ct(e),BB=e=>ku(e,ME,PE),Tt=e=>CE.test(e),ml=e=>ku(e,DE,DB),h_=e=>ku(e,VB,tn),X2=e=>ku(e,IE,PE),FB=e=>ku(e,AE,RB),Sp=e=>ku(e,zE,zB),Ct=e=>EE.test(e),Hh=e=>Tu(e,DE),OB=e=>Tu(e,UB),K2=e=>Tu(e,IE),NB=e=>Tu(e,ME),jB=e=>Tu(e,AE),kp=e=>Tu(e,zE,!0),ku=(e,t,i)=>{const a=CE.exec(e);return a?a[1]?t(a[1]):i(a[2]):!1},Tu=(e,t,i=!1)=>{const a=EE.exec(e);return a?a[1]?t(a[1]):i:!1},IE=e=>e==="position"||e==="percentage",AE=e=>e==="image"||e==="url",ME=e=>e==="length"||e==="size"||e==="bg-size",DE=e=>e==="length",VB=e=>e==="number",UB=e=>e==="family-name",zE=e=>e==="shadow",$B=()=>{const e=Sr("color"),t=Sr("font"),i=Sr("text"),a=Sr("font-weight"),h=Sr("tracking"),g=Sr("leading"),p=Sr("breakpoint"),c=Sr("container"),S=Sr("spacing"),E=Sr("radius"),P=Sr("shadow"),T=Sr("inset-shadow"),A=Sr("text-shadow"),$=Sr("drop-shadow"),X=Sr("blur"),G=Sr("perspective"),ne=Sr("aspect"),F=Sr("ease"),V=Sr("animate"),H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ye=()=>[...ee(),Ct,Tt],be=()=>["auto","hidden","clip","visible","scroll"],fe=()=>["auto","contain","none"],le=()=>[Ct,Tt,S],we=()=>[Dc,"full","auto",...le()],Le=()=>[ma,"none","subgrid",Ct,Tt],ze=()=>["auto",{span:["full",ma,Ct,Tt]},ma,Ct,Tt],Ne=()=>[ma,"auto",Ct,Tt],De=()=>["auto","min","max","fr",Ct,Tt],Ke=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],nt=()=>["start","end","center","stretch","center-safe","end-safe"],Ze=()=>["auto",...le()],je=()=>[Dc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...le()],Te=()=>[e,Ct,Tt],$e=()=>[...ee(),K2,X2,{position:[Ct,Tt]}],qe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],yt=()=>["auto","cover","contain",NB,BB,{size:[Ct,Tt]}],Dt=()=>[u_,Hh,ml],at=()=>["","none","full",E,Ct,Tt],ft=()=>["",tn,Hh,ml],Rt=()=>["solid","dashed","dotted","double"],qt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],St=()=>[tn,u_,K2,X2],Et=()=>["","none",X,Ct,Tt],cn=()=>["none",tn,Ct,Tt],on=()=>["none",tn,Ct,Tt],Ut=()=>[tn,Ct,Tt],it=()=>[Dc,"full",...le()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xo],breakpoint:[xo],color:[MB],container:[xo],"drop-shadow":[xo],ease:["in","out","in-out"],font:[LB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xo],shadow:[xo],spacing:["px",tn],text:[xo],"text-shadow":[xo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Dc,Tt,Ct,ne]}],container:["container"],columns:[{columns:[tn,Tt,Ct,c]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ye()}],overflow:[{overflow:be()}],"overflow-x":[{"overflow-x":be()}],"overflow-y":[{"overflow-y":be()}],overscroll:[{overscroll:fe()}],"overscroll-x":[{"overscroll-x":fe()}],"overscroll-y":[{"overscroll-y":fe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:we()}],"inset-x":[{"inset-x":we()}],"inset-y":[{"inset-y":we()}],start:[{start:we()}],end:[{end:we()}],top:[{top:we()}],right:[{right:we()}],bottom:[{bottom:we()}],left:[{left:we()}],visibility:["visible","invisible","collapse"],z:[{z:[ma,"auto",Ct,Tt]}],basis:[{basis:[Dc,"full","auto",c,...le()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tn,Dc,"auto","initial","none",Tt]}],grow:[{grow:["",tn,Ct,Tt]}],shrink:[{shrink:["",tn,Ct,Tt]}],order:[{order:[ma,"first","last","none",Ct,Tt]}],"grid-cols":[{"grid-cols":Le()}],"col-start-end":[{col:ze()}],"col-start":[{"col-start":Ne()}],"col-end":[{"col-end":Ne()}],"grid-rows":[{"grid-rows":Le()}],"row-start-end":[{row:ze()}],"row-start":[{"row-start":Ne()}],"row-end":[{"row-end":Ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":De()}],"auto-rows":[{"auto-rows":De()}],gap:[{gap:le()}],"gap-x":[{"gap-x":le()}],"gap-y":[{"gap-y":le()}],"justify-content":[{justify:[...Ke(),"normal"]}],"justify-items":[{"justify-items":[...nt(),"normal"]}],"justify-self":[{"justify-self":["auto",...nt()]}],"align-content":[{content:["normal",...Ke()]}],"align-items":[{items:[...nt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...nt(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ke()}],"place-items":[{"place-items":[...nt(),"baseline"]}],"place-self":[{"place-self":["auto",...nt()]}],p:[{p:le()}],px:[{px:le()}],py:[{py:le()}],ps:[{ps:le()}],pe:[{pe:le()}],pt:[{pt:le()}],pr:[{pr:le()}],pb:[{pb:le()}],pl:[{pl:le()}],m:[{m:Ze()}],mx:[{mx:Ze()}],my:[{my:Ze()}],ms:[{ms:Ze()}],me:[{me:Ze()}],mt:[{mt:Ze()}],mr:[{mr:Ze()}],mb:[{mb:Ze()}],ml:[{ml:Ze()}],"space-x":[{"space-x":le()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":le()}],"space-y-reverse":["space-y-reverse"],size:[{size:je()}],w:[{w:[c,"screen",...je()]}],"min-w":[{"min-w":[c,"screen","none",...je()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[p]},...je()]}],h:[{h:["screen","lh",...je()]}],"min-h":[{"min-h":["screen","lh","none",...je()]}],"max-h":[{"max-h":["screen","lh",...je()]}],"font-size":[{text:["base",i,Hh,ml]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Ct,h_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",u_,Tt]}],"font-family":[{font:[OB,Tt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[h,Ct,Tt]}],"line-clamp":[{"line-clamp":[tn,"none",Ct,h_]}],leading:[{leading:[g,...le()]}],"list-image":[{"list-image":["none",Ct,Tt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ct,Tt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Te()}],"text-color":[{text:Te()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Rt(),"wavy"]}],"text-decoration-thickness":[{decoration:[tn,"from-font","auto",Ct,ml]}],"text-decoration-color":[{decoration:Te()}],"underline-offset":[{"underline-offset":[tn,"auto",Ct,Tt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:le()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ct,Tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ct,Tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:$e()}],"bg-repeat":[{bg:qe()}],"bg-size":[{bg:yt()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ma,Ct,Tt],radial:["",Ct,Tt],conic:[ma,Ct,Tt]},jB,FB]}],"bg-color":[{bg:Te()}],"gradient-from-pos":[{from:Dt()}],"gradient-via-pos":[{via:Dt()}],"gradient-to-pos":[{to:Dt()}],"gradient-from":[{from:Te()}],"gradient-via":[{via:Te()}],"gradient-to":[{to:Te()}],rounded:[{rounded:at()}],"rounded-s":[{"rounded-s":at()}],"rounded-e":[{"rounded-e":at()}],"rounded-t":[{"rounded-t":at()}],"rounded-r":[{"rounded-r":at()}],"rounded-b":[{"rounded-b":at()}],"rounded-l":[{"rounded-l":at()}],"rounded-ss":[{"rounded-ss":at()}],"rounded-se":[{"rounded-se":at()}],"rounded-ee":[{"rounded-ee":at()}],"rounded-es":[{"rounded-es":at()}],"rounded-tl":[{"rounded-tl":at()}],"rounded-tr":[{"rounded-tr":at()}],"rounded-br":[{"rounded-br":at()}],"rounded-bl":[{"rounded-bl":at()}],"border-w":[{border:ft()}],"border-w-x":[{"border-x":ft()}],"border-w-y":[{"border-y":ft()}],"border-w-s":[{"border-s":ft()}],"border-w-e":[{"border-e":ft()}],"border-w-t":[{"border-t":ft()}],"border-w-r":[{"border-r":ft()}],"border-w-b":[{"border-b":ft()}],"border-w-l":[{"border-l":ft()}],"divide-x":[{"divide-x":ft()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ft()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Rt(),"hidden","none"]}],"divide-style":[{divide:[...Rt(),"hidden","none"]}],"border-color":[{border:Te()}],"border-color-x":[{"border-x":Te()}],"border-color-y":[{"border-y":Te()}],"border-color-s":[{"border-s":Te()}],"border-color-e":[{"border-e":Te()}],"border-color-t":[{"border-t":Te()}],"border-color-r":[{"border-r":Te()}],"border-color-b":[{"border-b":Te()}],"border-color-l":[{"border-l":Te()}],"divide-color":[{divide:Te()}],"outline-style":[{outline:[...Rt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tn,Ct,Tt]}],"outline-w":[{outline:["",tn,Hh,ml]}],"outline-color":[{outline:Te()}],shadow:[{shadow:["","none",P,kp,Sp]}],"shadow-color":[{shadow:Te()}],"inset-shadow":[{"inset-shadow":["none",T,kp,Sp]}],"inset-shadow-color":[{"inset-shadow":Te()}],"ring-w":[{ring:ft()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Te()}],"ring-offset-w":[{"ring-offset":[tn,ml]}],"ring-offset-color":[{"ring-offset":Te()}],"inset-ring-w":[{"inset-ring":ft()}],"inset-ring-color":[{"inset-ring":Te()}],"text-shadow":[{"text-shadow":["none",A,kp,Sp]}],"text-shadow-color":[{"text-shadow":Te()}],opacity:[{opacity:[tn,Ct,Tt]}],"mix-blend":[{"mix-blend":[...qt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":qt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tn]}],"mask-image-linear-from-pos":[{"mask-linear-from":St()}],"mask-image-linear-to-pos":[{"mask-linear-to":St()}],"mask-image-linear-from-color":[{"mask-linear-from":Te()}],"mask-image-linear-to-color":[{"mask-linear-to":Te()}],"mask-image-t-from-pos":[{"mask-t-from":St()}],"mask-image-t-to-pos":[{"mask-t-to":St()}],"mask-image-t-from-color":[{"mask-t-from":Te()}],"mask-image-t-to-color":[{"mask-t-to":Te()}],"mask-image-r-from-pos":[{"mask-r-from":St()}],"mask-image-r-to-pos":[{"mask-r-to":St()}],"mask-image-r-from-color":[{"mask-r-from":Te()}],"mask-image-r-to-color":[{"mask-r-to":Te()}],"mask-image-b-from-pos":[{"mask-b-from":St()}],"mask-image-b-to-pos":[{"mask-b-to":St()}],"mask-image-b-from-color":[{"mask-b-from":Te()}],"mask-image-b-to-color":[{"mask-b-to":Te()}],"mask-image-l-from-pos":[{"mask-l-from":St()}],"mask-image-l-to-pos":[{"mask-l-to":St()}],"mask-image-l-from-color":[{"mask-l-from":Te()}],"mask-image-l-to-color":[{"mask-l-to":Te()}],"mask-image-x-from-pos":[{"mask-x-from":St()}],"mask-image-x-to-pos":[{"mask-x-to":St()}],"mask-image-x-from-color":[{"mask-x-from":Te()}],"mask-image-x-to-color":[{"mask-x-to":Te()}],"mask-image-y-from-pos":[{"mask-y-from":St()}],"mask-image-y-to-pos":[{"mask-y-to":St()}],"mask-image-y-from-color":[{"mask-y-from":Te()}],"mask-image-y-to-color":[{"mask-y-to":Te()}],"mask-image-radial":[{"mask-radial":[Ct,Tt]}],"mask-image-radial-from-pos":[{"mask-radial-from":St()}],"mask-image-radial-to-pos":[{"mask-radial-to":St()}],"mask-image-radial-from-color":[{"mask-radial-from":Te()}],"mask-image-radial-to-color":[{"mask-radial-to":Te()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ee()}],"mask-image-conic-pos":[{"mask-conic":[tn]}],"mask-image-conic-from-pos":[{"mask-conic-from":St()}],"mask-image-conic-to-pos":[{"mask-conic-to":St()}],"mask-image-conic-from-color":[{"mask-conic-from":Te()}],"mask-image-conic-to-color":[{"mask-conic-to":Te()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:$e()}],"mask-repeat":[{mask:qe()}],"mask-size":[{mask:yt()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ct,Tt]}],filter:[{filter:["","none",Ct,Tt]}],blur:[{blur:Et()}],brightness:[{brightness:[tn,Ct,Tt]}],contrast:[{contrast:[tn,Ct,Tt]}],"drop-shadow":[{"drop-shadow":["","none",$,kp,Sp]}],"drop-shadow-color":[{"drop-shadow":Te()}],grayscale:[{grayscale:["",tn,Ct,Tt]}],"hue-rotate":[{"hue-rotate":[tn,Ct,Tt]}],invert:[{invert:["",tn,Ct,Tt]}],saturate:[{saturate:[tn,Ct,Tt]}],sepia:[{sepia:["",tn,Ct,Tt]}],"backdrop-filter":[{"backdrop-filter":["","none",Ct,Tt]}],"backdrop-blur":[{"backdrop-blur":Et()}],"backdrop-brightness":[{"backdrop-brightness":[tn,Ct,Tt]}],"backdrop-contrast":[{"backdrop-contrast":[tn,Ct,Tt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tn,Ct,Tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tn,Ct,Tt]}],"backdrop-invert":[{"backdrop-invert":["",tn,Ct,Tt]}],"backdrop-opacity":[{"backdrop-opacity":[tn,Ct,Tt]}],"backdrop-saturate":[{"backdrop-saturate":[tn,Ct,Tt]}],"backdrop-sepia":[{"backdrop-sepia":["",tn,Ct,Tt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":le()}],"border-spacing-x":[{"border-spacing-x":le()}],"border-spacing-y":[{"border-spacing-y":le()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ct,Tt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tn,"initial",Ct,Tt]}],ease:[{ease:["linear","initial",F,Ct,Tt]}],delay:[{delay:[tn,Ct,Tt]}],animate:[{animate:["none",V,Ct,Tt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[G,Ct,Tt]}],"perspective-origin":[{"perspective-origin":ye()}],rotate:[{rotate:cn()}],"rotate-x":[{"rotate-x":cn()}],"rotate-y":[{"rotate-y":cn()}],"rotate-z":[{"rotate-z":cn()}],scale:[{scale:on()}],"scale-x":[{"scale-x":on()}],"scale-y":[{"scale-y":on()}],"scale-z":[{"scale-z":on()}],"scale-3d":["scale-3d"],skew:[{skew:Ut()}],"skew-x":[{"skew-x":Ut()}],"skew-y":[{"skew-y":Ut()}],transform:[{transform:[Ct,Tt,"","none","gpu","cpu"]}],"transform-origin":[{origin:ye()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:it()}],"translate-x":[{"translate-x":it()}],"translate-y":[{"translate-y":it()}],"translate-z":[{"translate-z":it()}],"translate-none":["translate-none"],accent:[{accent:Te()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Te()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ct,Tt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":le()}],"scroll-mx":[{"scroll-mx":le()}],"scroll-my":[{"scroll-my":le()}],"scroll-ms":[{"scroll-ms":le()}],"scroll-me":[{"scroll-me":le()}],"scroll-mt":[{"scroll-mt":le()}],"scroll-mr":[{"scroll-mr":le()}],"scroll-mb":[{"scroll-mb":le()}],"scroll-ml":[{"scroll-ml":le()}],"scroll-p":[{"scroll-p":le()}],"scroll-px":[{"scroll-px":le()}],"scroll-py":[{"scroll-py":le()}],"scroll-ps":[{"scroll-ps":le()}],"scroll-pe":[{"scroll-pe":le()}],"scroll-pt":[{"scroll-pt":le()}],"scroll-pr":[{"scroll-pr":le()}],"scroll-pb":[{"scroll-pb":le()}],"scroll-pl":[{"scroll-pl":le()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ct,Tt]}],fill:[{fill:["none",...Te()]}],"stroke-w":[{stroke:[tn,Hh,ml,h_]}],stroke:[{stroke:["none",...Te()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},HB=SB($B);function fn(...e){return HB(bE(e))}const Qm=K.forwardRef(({className:e,...t},i)=>re.jsx("div",{ref:i,className:fn("rounded-xl border border-border bg-card text-card-foreground shadow",e),...t}));Qm.displayName="Card";const RE=K.forwardRef(({className:e,...t},i)=>re.jsx("div",{ref:i,className:fn("flex flex-col space-y-1.5 p-6",e),...t}));RE.displayName="CardHeader";const LE=K.forwardRef(({className:e,...t},i)=>re.jsx("h3",{ref:i,className:fn("font-semibold leading-none tracking-tight",e),...t}));LE.displayName="CardTitle";const GB=K.forwardRef(({className:e,...t},i)=>re.jsx("p",{ref:i,className:fn("text-sm text-neutral-500",e),...t}));GB.displayName="CardDescription";const eg=K.forwardRef(({className:e,...t},i)=>re.jsx("div",{ref:i,className:fn("p-6 pt-0",e),...t}));eg.displayName="CardContent";const WB=K.forwardRef(({className:e,...t},i)=>re.jsx("div",{ref:i,className:fn("flex items-center p-6 pt-0",e),...t}));WB.displayName="CardFooter";const Y2=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,J2=bE,BE=(e,t)=>i=>{var a;if((t==null?void 0:t.variants)==null)return J2(e,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:h,defaultVariants:g}=t,p=Object.keys(h).map(E=>{const P=i==null?void 0:i[E],T=g==null?void 0:g[E];if(P===null)return null;const A=Y2(P)||Y2(T);return h[E][A]}),c=i&&Object.entries(i).reduce((E,P)=>{let[T,A]=P;return A===void 0||(E[T]=A),E},{}),S=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((E,P)=>{let{class:T,className:A,...$}=P;return Object.entries($).every(X=>{let[G,ne]=X;return Array.isArray(ne)?ne.includes({...g,...c}[G]):{...g,...c}[G]===ne})?[...E,T,A]:E},[]);return J2(e,p,S,i==null?void 0:i.class,i==null?void 0:i.className)},FE=BE("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-neutral-950 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-neutral-900 text-neutral-50 shadow hover:bg-neutral-900/90",destructive:"bg-red-500 text-neutral-50 shadow-sm hover:bg-red-500/90",outline:"border border-neutral-200 bg-white shadow-sm hover:bg-neutral-100 hover:text-neutral-900",secondary:"bg-neutral-100 text-neutral-900 shadow-sm hover:bg-neutral-100/80",ghost:"hover:bg-neutral-100 hover:text-neutral-900",link:"text-neutral-900 underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),zs=K.forwardRef(({className:e,variant:t,size:i,...a},h)=>re.jsx("button",{className:fn(FE({variant:t,size:i,className:e})),ref:h,...a}));zs.displayName="Button";const qB=BE("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-neutral-950 focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Kp({className:e,variant:t,...i}){return re.jsx("div",{className:fn(qB({variant:t}),e),...i})}function Fi(e,t,{checkForDefaultPrevented:i=!0}={}){return function(h){if(e==null||e(h),i===!1||!h.defaultPrevented)return t==null?void 0:t(h)}}function Q2(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function OE(...e){return t=>{let i=!1;const a=e.map(h=>{const g=Q2(h,t);return!i&&typeof g=="function"&&(i=!0),g});if(i)return()=>{for(let h=0;h<a.length;h++){const g=a[h];typeof g=="function"?g():Q2(e[h],null)}}}}function bi(...e){return K.useCallback(OE(...e),e)}function ZB(e,t){const i=K.createContext(t),a=g=>{const{children:p,...c}=g,S=K.useMemo(()=>c,Object.values(c));return re.jsx(i.Provider,{value:S,children:p})};a.displayName=e+"Provider";function h(g){const p=K.useContext(i);if(p)return p;if(t!==void 0)return t;throw new Error(`\`${g}\` must be used within \`${e}\``)}return[a,h]}function Ex(e,t=[]){let i=[];function a(g,p){const c=K.createContext(p),S=i.length;i=[...i,p];const E=T=>{var F;const{scope:A,children:$,...X}=T,G=((F=A==null?void 0:A[e])==null?void 0:F[S])||c,ne=K.useMemo(()=>X,Object.values(X));return re.jsx(G.Provider,{value:ne,children:$})};E.displayName=g+"Provider";function P(T,A){var G;const $=((G=A==null?void 0:A[e])==null?void 0:G[S])||c,X=K.useContext($);if(X)return X;if(p!==void 0)return p;throw new Error(`\`${T}\` must be used within \`${g}\``)}return[E,P]}const h=()=>{const g=i.map(p=>K.createContext(p));return function(c){const S=(c==null?void 0:c[e])||g;return K.useMemo(()=>({[`__scope${e}`]:{...c,[e]:S}}),[c,S])}};return h.scopeName=e,[a,XB(h,...t)]}function XB(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const a=e.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(g){const p=a.reduce((c,{useScope:S,scopeName:E})=>{const T=S(g)[`__scope${E}`];return{...c,...T}},{});return K.useMemo(()=>({[`__scope${t.scopeName}`]:p}),[p])}};return i.scopeName=t.scopeName,i}var yu=globalThis!=null&&globalThis.document?K.useLayoutEffect:()=>{},KB=LS[" useId ".trim().toString()]||(()=>{}),YB=0;function d_(e){const[t,i]=K.useState(KB());return yu(()=>{i(a=>a??String(YB++))},[e]),e||(t?`radix-${t}`:"")}var JB=LS[" useInsertionEffect ".trim().toString()]||yu;function NE({prop:e,defaultProp:t,onChange:i=()=>{},caller:a}){const[h,g,p]=QB({defaultProp:t,onChange:i}),c=e!==void 0,S=c?e:h;{const P=K.useRef(e!==void 0);K.useEffect(()=>{const T=P.current;T!==c&&console.warn(`${a} is changing from ${T?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),P.current=c},[c,a])}const E=K.useCallback(P=>{var T;if(c){const A=eF(P)?P(e):P;A!==e&&((T=p.current)==null||T.call(p,A))}else g(P)},[c,e,g,p]);return[S,E]}function QB({defaultProp:e,onChange:t}){const[i,a]=K.useState(e),h=K.useRef(i),g=K.useRef(t);return JB(()=>{g.current=t},[t]),K.useEffect(()=>{var p;h.current!==i&&((p=g.current)==null||p.call(g,i),h.current=i)},[i,h]),[i,a,g]}function eF(e){return typeof e=="function"}function Am(e){const t=tF(e),i=K.forwardRef((a,h)=>{const{children:g,...p}=a,c=K.Children.toArray(g),S=c.find(rF);if(S){const E=S.props.children,P=c.map(T=>T===S?K.Children.count(E)>1?K.Children.only(null):K.isValidElement(E)?E.props.children:null:T);return re.jsx(t,{...p,ref:h,children:K.isValidElement(E)?K.cloneElement(E,void 0,P):null})}return re.jsx(t,{...p,ref:h,children:g})});return i.displayName=`${e}.Slot`,i}function tF(e){const t=K.forwardRef((i,a)=>{const{children:h,...g}=i;if(K.isValidElement(h)){const p=sF(h),c=iF(g,h.props);return h.type!==K.Fragment&&(c.ref=a?OE(a,p):p),K.cloneElement(h,c)}return K.Children.count(h)>1?K.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var nF=Symbol("radix.slottable");function rF(e){return K.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===nF}function iF(e,t){const i={...t};for(const a in t){const h=e[a],g=t[a];/^on[A-Z]/.test(a)?h&&g?i[a]=(...c)=>{const S=g(...c);return h(...c),S}:h&&(i[a]=h):a==="style"?i[a]={...h,...g}:a==="className"&&(i[a]=[h,g].filter(Boolean).join(" "))}return{...e,...i}}function sF(e){var a,h;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(h=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:h.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var oF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vi=oF.reduce((e,t)=>{const i=Am(`Primitive.${t}`),a=K.forwardRef((h,g)=>{const{asChild:p,...c}=h,S=p?i:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),re.jsx(S,{...c,ref:g})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function aF(e,t){e&&W0.flushSync(()=>e.dispatchEvent(t))}function Fd(e){const t=K.useRef(e);return K.useEffect(()=>{t.current=e}),K.useMemo(()=>(...i)=>{var a;return(a=t.current)==null?void 0:a.call(t,...i)},[])}function lF(e,t=globalThis==null?void 0:globalThis.document){const i=Fd(e);K.useEffect(()=>{const a=h=>{h.key==="Escape"&&i(h)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[i,t])}var cF="DismissableLayer",Nv="dismissableLayer.update",uF="dismissableLayer.pointerDownOutside",hF="dismissableLayer.focusOutside",eS,jE=K.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),VE=K.forwardRef((e,t)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:h,onFocusOutside:g,onInteractOutside:p,onDismiss:c,...S}=e,E=K.useContext(jE),[P,T]=K.useState(null),A=(P==null?void 0:P.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,$]=K.useState({}),X=bi(t,fe=>T(fe)),G=Array.from(E.layers),[ne]=[...E.layersWithOutsidePointerEventsDisabled].slice(-1),F=G.indexOf(ne),V=P?G.indexOf(P):-1,H=E.layersWithOutsidePointerEventsDisabled.size>0,ee=V>=F,ye=pF(fe=>{const le=fe.target,we=[...E.branches].some(Le=>Le.contains(le));!ee||we||(h==null||h(fe),p==null||p(fe),fe.defaultPrevented||c==null||c())},A),be=mF(fe=>{const le=fe.target;[...E.branches].some(Le=>Le.contains(le))||(g==null||g(fe),p==null||p(fe),fe.defaultPrevented||c==null||c())},A);return lF(fe=>{V===E.layers.size-1&&(a==null||a(fe),!fe.defaultPrevented&&c&&(fe.preventDefault(),c()))},A),K.useEffect(()=>{if(P)return i&&(E.layersWithOutsidePointerEventsDisabled.size===0&&(eS=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),E.layersWithOutsidePointerEventsDisabled.add(P)),E.layers.add(P),tS(),()=>{i&&E.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=eS)}},[P,A,i,E]),K.useEffect(()=>()=>{P&&(E.layers.delete(P),E.layersWithOutsidePointerEventsDisabled.delete(P),tS())},[P,E]),K.useEffect(()=>{const fe=()=>$({});return document.addEventListener(Nv,fe),()=>document.removeEventListener(Nv,fe)},[]),re.jsx(Vi.div,{...S,ref:X,style:{pointerEvents:H?ee?"auto":"none":void 0,...e.style},onFocusCapture:Fi(e.onFocusCapture,be.onFocusCapture),onBlurCapture:Fi(e.onBlurCapture,be.onBlurCapture),onPointerDownCapture:Fi(e.onPointerDownCapture,ye.onPointerDownCapture)})});VE.displayName=cF;var dF="DismissableLayerBranch",fF=K.forwardRef((e,t)=>{const i=K.useContext(jE),a=K.useRef(null),h=bi(t,a);return K.useEffect(()=>{const g=a.current;if(g)return i.branches.add(g),()=>{i.branches.delete(g)}},[i.branches]),re.jsx(Vi.div,{...e,ref:h})});fF.displayName=dF;function pF(e,t=globalThis==null?void 0:globalThis.document){const i=Fd(e),a=K.useRef(!1),h=K.useRef(()=>{});return K.useEffect(()=>{const g=c=>{if(c.target&&!a.current){let S=function(){UE(uF,i,E,{discrete:!0})};const E={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",h.current),h.current=S,t.addEventListener("click",h.current,{once:!0})):S()}else t.removeEventListener("click",h.current);a.current=!1},p=window.setTimeout(()=>{t.addEventListener("pointerdown",g)},0);return()=>{window.clearTimeout(p),t.removeEventListener("pointerdown",g),t.removeEventListener("click",h.current)}},[t,i]),{onPointerDownCapture:()=>a.current=!0}}function mF(e,t=globalThis==null?void 0:globalThis.document){const i=Fd(e),a=K.useRef(!1);return K.useEffect(()=>{const h=g=>{g.target&&!a.current&&UE(hF,i,{originalEvent:g},{discrete:!1})};return t.addEventListener("focusin",h),()=>t.removeEventListener("focusin",h)},[t,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function tS(){const e=new CustomEvent(Nv);document.dispatchEvent(e)}function UE(e,t,i,{discrete:a}){const h=i.originalEvent.target,g=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});t&&h.addEventListener(e,t,{once:!0}),a?aF(h,g):h.dispatchEvent(g)}var f_="focusScope.autoFocusOnMount",p_="focusScope.autoFocusOnUnmount",nS={bubbles:!1,cancelable:!0},gF="FocusScope",$E=K.forwardRef((e,t)=>{const{loop:i=!1,trapped:a=!1,onMountAutoFocus:h,onUnmountAutoFocus:g,...p}=e,[c,S]=K.useState(null),E=Fd(h),P=Fd(g),T=K.useRef(null),A=bi(t,G=>S(G)),$=K.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;K.useEffect(()=>{if(a){let G=function(H){if($.paused||!c)return;const ee=H.target;c.contains(ee)?T.current=ee:ya(T.current,{select:!0})},ne=function(H){if($.paused||!c)return;const ee=H.relatedTarget;ee!==null&&(c.contains(ee)||ya(T.current,{select:!0}))},F=function(H){if(document.activeElement===document.body)for(const ye of H)ye.removedNodes.length>0&&ya(c)};document.addEventListener("focusin",G),document.addEventListener("focusout",ne);const V=new MutationObserver(F);return c&&V.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",G),document.removeEventListener("focusout",ne),V.disconnect()}}},[a,c,$.paused]),K.useEffect(()=>{if(c){iS.add($);const G=document.activeElement;if(!c.contains(G)){const F=new CustomEvent(f_,nS);c.addEventListener(f_,E),c.dispatchEvent(F),F.defaultPrevented||(yF(wF(HE(c)),{select:!0}),document.activeElement===G&&ya(c))}return()=>{c.removeEventListener(f_,E),setTimeout(()=>{const F=new CustomEvent(p_,nS);c.addEventListener(p_,P),c.dispatchEvent(F),F.defaultPrevented||ya(G??document.body,{select:!0}),c.removeEventListener(p_,P),iS.remove($)},0)}}},[c,E,P,$]);const X=K.useCallback(G=>{if(!i&&!a||$.paused)return;const ne=G.key==="Tab"&&!G.altKey&&!G.ctrlKey&&!G.metaKey,F=document.activeElement;if(ne&&F){const V=G.currentTarget,[H,ee]=_F(V);H&&ee?!G.shiftKey&&F===ee?(G.preventDefault(),i&&ya(H,{select:!0})):G.shiftKey&&F===H&&(G.preventDefault(),i&&ya(ee,{select:!0})):F===V&&G.preventDefault()}},[i,a,$.paused]);return re.jsx(Vi.div,{tabIndex:-1,...p,ref:A,onKeyDown:X})});$E.displayName=gF;function yF(e,{select:t=!1}={}){const i=document.activeElement;for(const a of e)if(ya(a,{select:t}),document.activeElement!==i)return}function _F(e){const t=HE(e),i=rS(t,e),a=rS(t.reverse(),e);return[i,a]}function HE(e){const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const h=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||h?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t}function rS(e,t){for(const i of e)if(!vF(i,{upTo:t}))return i}function vF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function xF(e){return e instanceof HTMLInputElement&&"select"in e}function ya(e,{select:t=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&xF(e)&&t&&e.select()}}var iS=bF();function bF(){let e=[];return{add(t){const i=e[0];t!==i&&(i==null||i.pause()),e=sS(e,t),e.unshift(t)},remove(t){var i;e=sS(e,t),(i=e[0])==null||i.resume()}}}function sS(e,t){const i=[...e],a=i.indexOf(t);return a!==-1&&i.splice(a,1),i}function wF(e){return e.filter(t=>t.tagName!=="A")}var SF="Portal",GE=K.forwardRef((e,t)=>{var c;const{container:i,...a}=e,[h,g]=K.useState(!1);yu(()=>g(!0),[]);const p=i||h&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return p?OT.createPortal(re.jsx(Vi.div,{...a,ref:t}),p):null});GE.displayName=SF;function kF(e,t){return K.useReducer((i,a)=>t[i][a]??i,e)}var tg=e=>{const{present:t,children:i}=e,a=TF(t),h=typeof i=="function"?i({present:a.isPresent}):K.Children.only(i),g=bi(a.ref,CF(h));return typeof i=="function"||a.isPresent?K.cloneElement(h,{ref:g}):null};tg.displayName="Presence";function TF(e){const[t,i]=K.useState(),a=K.useRef(null),h=K.useRef(e),g=K.useRef("none"),p=e?"mounted":"unmounted",[c,S]=kF(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return K.useEffect(()=>{const E=Tp(a.current);g.current=c==="mounted"?E:"none"},[c]),yu(()=>{const E=a.current,P=h.current;if(P!==e){const A=g.current,$=Tp(E);e?S("MOUNT"):$==="none"||(E==null?void 0:E.display)==="none"?S("UNMOUNT"):S(P&&A!==$?"ANIMATION_OUT":"UNMOUNT"),h.current=e}},[e,S]),yu(()=>{if(t){let E;const P=t.ownerDocument.defaultView??window,T=$=>{const G=Tp(a.current).includes(CSS.escape($.animationName));if($.target===t&&G&&(S("ANIMATION_END"),!h.current)){const ne=t.style.animationFillMode;t.style.animationFillMode="forwards",E=P.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=ne)})}},A=$=>{$.target===t&&(g.current=Tp(a.current))};return t.addEventListener("animationstart",A),t.addEventListener("animationcancel",T),t.addEventListener("animationend",T),()=>{P.clearTimeout(E),t.removeEventListener("animationstart",A),t.removeEventListener("animationcancel",T),t.removeEventListener("animationend",T)}}else S("ANIMATION_END")},[t,S]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:K.useCallback(E=>{a.current=E?getComputedStyle(E):null,i(E)},[])}}function Tp(e){return(e==null?void 0:e.animationName)||"none"}function CF(e){var a,h;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(h=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:h.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var m_=0;function EF(){K.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??oS()),document.body.insertAdjacentElement("beforeend",e[1]??oS()),m_++,()=>{m_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),m_--}},[])}function oS(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ys=function(){return Ys=Object.assign||function(t){for(var i,a=1,h=arguments.length;a<h;a++){i=arguments[a];for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(t[g]=i[g])}return t},Ys.apply(this,arguments)};function WE(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,a=Object.getOwnPropertySymbols(e);h<a.length;h++)t.indexOf(a[h])<0&&Object.prototype.propertyIsEnumerable.call(e,a[h])&&(i[a[h]]=e[a[h]]);return i}function PF(e,t,i){if(i||arguments.length===2)for(var a=0,h=t.length,g;a<h;a++)(g||!(a in t))&&(g||(g=Array.prototype.slice.call(t,0,a)),g[a]=t[a]);return e.concat(g||Array.prototype.slice.call(t))}var Yp="right-scroll-bar-position",Jp="width-before-scroll-bar",IF="with-scroll-bars-hidden",AF="--removed-body-scroll-bar-size";function g_(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function MF(e,t){var i=K.useState(function(){return{value:e,callback:t,facade:{get current(){return i.value},set current(a){var h=i.value;h!==a&&(i.value=a,i.callback(a,h))}}}})[0];return i.callback=t,i.facade}var DF=typeof window<"u"?K.useLayoutEffect:K.useEffect,aS=new WeakMap;function zF(e,t){var i=MF(null,function(a){return e.forEach(function(h){return g_(h,a)})});return DF(function(){var a=aS.get(i);if(a){var h=new Set(a),g=new Set(e),p=i.current;h.forEach(function(c){g.has(c)||g_(c,null)}),g.forEach(function(c){h.has(c)||g_(c,p)})}aS.set(i,e)},[e]),i}function RF(e){return e}function LF(e,t){t===void 0&&(t=RF);var i=[],a=!1,h={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(g){var p=t(g,a);return i.push(p),function(){i=i.filter(function(c){return c!==p})}},assignSyncMedium:function(g){for(a=!0;i.length;){var p=i;i=[],p.forEach(g)}i={push:function(c){return g(c)},filter:function(){return i}}},assignMedium:function(g){a=!0;var p=[];if(i.length){var c=i;i=[],c.forEach(g),p=i}var S=function(){var P=p;p=[],P.forEach(g)},E=function(){return Promise.resolve().then(S)};E(),i={push:function(P){p.push(P),E()},filter:function(P){return p=p.filter(P),i}}}};return h}function BF(e){e===void 0&&(e={});var t=LF(null);return t.options=Ys({async:!0,ssr:!1},e),t}var qE=function(e){var t=e.sideCar,i=WE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return K.createElement(a,Ys({},i))};qE.isSideCarExport=!0;function FF(e,t){return e.useMedium(t),qE}var ZE=BF(),y_=function(){},ng=K.forwardRef(function(e,t){var i=K.useRef(null),a=K.useState({onScrollCapture:y_,onWheelCapture:y_,onTouchMoveCapture:y_}),h=a[0],g=a[1],p=e.forwardProps,c=e.children,S=e.className,E=e.removeScrollBar,P=e.enabled,T=e.shards,A=e.sideCar,$=e.noRelative,X=e.noIsolation,G=e.inert,ne=e.allowPinchZoom,F=e.as,V=F===void 0?"div":F,H=e.gapMode,ee=WE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ye=A,be=zF([i,t]),fe=Ys(Ys({},ee),h);return K.createElement(K.Fragment,null,P&&K.createElement(ye,{sideCar:ZE,removeScrollBar:E,shards:T,noRelative:$,noIsolation:X,inert:G,setCallbacks:g,allowPinchZoom:!!ne,lockRef:i,gapMode:H}),p?K.cloneElement(K.Children.only(c),Ys(Ys({},fe),{ref:be})):K.createElement(V,Ys({},fe,{className:S,ref:be}),c))});ng.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ng.classNames={fullWidth:Jp,zeroRight:Yp};var OF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function NF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=OF();return t&&e.setAttribute("nonce",t),e}function jF(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function VF(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var UF=function(){var e=0,t=null;return{add:function(i){e==0&&(t=NF())&&(jF(t,i),VF(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$F=function(){var e=UF();return function(t,i){K.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&i])}},XE=function(){var e=$F(),t=function(i){var a=i.styles,h=i.dynamic;return e(a,h),null};return t},HF={left:0,top:0,right:0,gap:0},__=function(e){return parseInt(e||"",10)||0},GF=function(e){var t=window.getComputedStyle(document.body),i=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],h=t[e==="padding"?"paddingRight":"marginRight"];return[__(i),__(a),__(h)]},WF=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return HF;var t=GF(e),i=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-i+t[2]-t[0])}},qF=XE(),ou="data-scroll-locked",ZF=function(e,t,i,a){var h=e.left,g=e.top,p=e.right,c=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(IF,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(c,"px ").concat(a,`;
  }
  body[`).concat(ou,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),i==="margin"&&`
    padding-left: `.concat(h,`px;
    padding-top: `).concat(g,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(a,`;
    `),i==="padding"&&"padding-right: ".concat(c,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yp,` {
    right: `).concat(c,"px ").concat(a,`;
  }
  
  .`).concat(Jp,` {
    margin-right: `).concat(c,"px ").concat(a,`;
  }
  
  .`).concat(Yp," .").concat(Yp,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Jp," .").concat(Jp,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(ou,`] {
    `).concat(AF,": ").concat(c,`px;
  }
`)},lS=function(){var e=parseInt(document.body.getAttribute(ou)||"0",10);return isFinite(e)?e:0},XF=function(){K.useEffect(function(){return document.body.setAttribute(ou,(lS()+1).toString()),function(){var e=lS()-1;e<=0?document.body.removeAttribute(ou):document.body.setAttribute(ou,e.toString())}},[])},KF=function(e){var t=e.noRelative,i=e.noImportant,a=e.gapMode,h=a===void 0?"margin":a;XF();var g=K.useMemo(function(){return WF(h)},[h]);return K.createElement(qF,{styles:ZF(g,!t,h,i?"":"!important")})},jv=!1;if(typeof window<"u")try{var Cp=Object.defineProperty({},"passive",{get:function(){return jv=!0,!0}});window.addEventListener("test",Cp,Cp),window.removeEventListener("test",Cp,Cp)}catch{jv=!1}var zc=jv?{passive:!1}:!1,YF=function(e){return e.tagName==="TEXTAREA"},KE=function(e,t){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[t]!=="hidden"&&!(i.overflowY===i.overflowX&&!YF(e)&&i[t]==="visible")},JF=function(e){return KE(e,"overflowY")},QF=function(e){return KE(e,"overflowX")},cS=function(e,t){var i=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var h=YE(e,a);if(h){var g=JE(e,a),p=g[1],c=g[2];if(p>c)return!0}a=a.parentNode}while(a&&a!==i.body);return!1},e4=function(e){var t=e.scrollTop,i=e.scrollHeight,a=e.clientHeight;return[t,i,a]},t4=function(e){var t=e.scrollLeft,i=e.scrollWidth,a=e.clientWidth;return[t,i,a]},YE=function(e,t){return e==="v"?JF(t):QF(t)},JE=function(e,t){return e==="v"?e4(t):t4(t)},n4=function(e,t){return e==="h"&&t==="rtl"?-1:1},r4=function(e,t,i,a,h){var g=n4(e,window.getComputedStyle(t).direction),p=g*a,c=i.target,S=t.contains(c),E=!1,P=p>0,T=0,A=0;do{if(!c)break;var $=JE(e,c),X=$[0],G=$[1],ne=$[2],F=G-ne-g*X;(X||F)&&YE(e,c)&&(T+=F,A+=X);var V=c.parentNode;c=V&&V.nodeType===Node.DOCUMENT_FRAGMENT_NODE?V.host:V}while(!S&&c!==document.body||S&&(t.contains(c)||t===c));return(P&&Math.abs(T)<1||!P&&Math.abs(A)<1)&&(E=!0),E},Ep=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},uS=function(e){return[e.deltaX,e.deltaY]},hS=function(e){return e&&"current"in e?e.current:e},i4=function(e,t){return e[0]===t[0]&&e[1]===t[1]},s4=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},o4=0,Rc=[];function a4(e){var t=K.useRef([]),i=K.useRef([0,0]),a=K.useRef(),h=K.useState(o4++)[0],g=K.useState(XE)[0],p=K.useRef(e);K.useEffect(function(){p.current=e},[e]),K.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(h));var G=PF([e.lockRef.current],(e.shards||[]).map(hS),!0).filter(Boolean);return G.forEach(function(ne){return ne.classList.add("allow-interactivity-".concat(h))}),function(){document.body.classList.remove("block-interactivity-".concat(h)),G.forEach(function(ne){return ne.classList.remove("allow-interactivity-".concat(h))})}}},[e.inert,e.lockRef.current,e.shards]);var c=K.useCallback(function(G,ne){if("touches"in G&&G.touches.length===2||G.type==="wheel"&&G.ctrlKey)return!p.current.allowPinchZoom;var F=Ep(G),V=i.current,H="deltaX"in G?G.deltaX:V[0]-F[0],ee="deltaY"in G?G.deltaY:V[1]-F[1],ye,be=G.target,fe=Math.abs(H)>Math.abs(ee)?"h":"v";if("touches"in G&&fe==="h"&&be.type==="range")return!1;var le=window.getSelection(),we=le&&le.anchorNode,Le=we?we===be||we.contains(be):!1;if(Le)return!1;var ze=cS(fe,be);if(!ze)return!0;if(ze?ye=fe:(ye=fe==="v"?"h":"v",ze=cS(fe,be)),!ze)return!1;if(!a.current&&"changedTouches"in G&&(H||ee)&&(a.current=ye),!ye)return!0;var Ne=a.current||ye;return r4(Ne,ne,G,Ne==="h"?H:ee)},[]),S=K.useCallback(function(G){var ne=G;if(!(!Rc.length||Rc[Rc.length-1]!==g)){var F="deltaY"in ne?uS(ne):Ep(ne),V=t.current.filter(function(ye){return ye.name===ne.type&&(ye.target===ne.target||ne.target===ye.shadowParent)&&i4(ye.delta,F)})[0];if(V&&V.should){ne.cancelable&&ne.preventDefault();return}if(!V){var H=(p.current.shards||[]).map(hS).filter(Boolean).filter(function(ye){return ye.contains(ne.target)}),ee=H.length>0?c(ne,H[0]):!p.current.noIsolation;ee&&ne.cancelable&&ne.preventDefault()}}},[]),E=K.useCallback(function(G,ne,F,V){var H={name:G,delta:ne,target:F,should:V,shadowParent:l4(F)};t.current.push(H),setTimeout(function(){t.current=t.current.filter(function(ee){return ee!==H})},1)},[]),P=K.useCallback(function(G){i.current=Ep(G),a.current=void 0},[]),T=K.useCallback(function(G){E(G.type,uS(G),G.target,c(G,e.lockRef.current))},[]),A=K.useCallback(function(G){E(G.type,Ep(G),G.target,c(G,e.lockRef.current))},[]);K.useEffect(function(){return Rc.push(g),e.setCallbacks({onScrollCapture:T,onWheelCapture:T,onTouchMoveCapture:A}),document.addEventListener("wheel",S,zc),document.addEventListener("touchmove",S,zc),document.addEventListener("touchstart",P,zc),function(){Rc=Rc.filter(function(G){return G!==g}),document.removeEventListener("wheel",S,zc),document.removeEventListener("touchmove",S,zc),document.removeEventListener("touchstart",P,zc)}},[]);var $=e.removeScrollBar,X=e.inert;return K.createElement(K.Fragment,null,X?K.createElement(g,{styles:s4(h)}):null,$?K.createElement(KF,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function l4(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const c4=FF(ZE,a4);var QE=K.forwardRef(function(e,t){return K.createElement(ng,Ys({},e,{ref:t,sideCar:c4}))});QE.classNames=ng.classNames;var u4=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Lc=new WeakMap,Pp=new WeakMap,Ip={},v_=0,eP=function(e){return e&&(e.host||eP(e.parentNode))},h4=function(e,t){return t.map(function(i){if(e.contains(i))return i;var a=eP(i);return a&&e.contains(a)?a:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},d4=function(e,t,i,a){var h=h4(t,Array.isArray(e)?e:[e]);Ip[i]||(Ip[i]=new WeakMap);var g=Ip[i],p=[],c=new Set,S=new Set(h),E=function(T){!T||c.has(T)||(c.add(T),E(T.parentNode))};h.forEach(E);var P=function(T){!T||S.has(T)||Array.prototype.forEach.call(T.children,function(A){if(c.has(A))P(A);else try{var $=A.getAttribute(a),X=$!==null&&$!=="false",G=(Lc.get(A)||0)+1,ne=(g.get(A)||0)+1;Lc.set(A,G),g.set(A,ne),p.push(A),G===1&&X&&Pp.set(A,!0),ne===1&&A.setAttribute(i,"true"),X||A.setAttribute(a,"true")}catch(F){console.error("aria-hidden: cannot operate on ",A,F)}})};return P(t),c.clear(),v_++,function(){p.forEach(function(T){var A=Lc.get(T)-1,$=g.get(T)-1;Lc.set(T,A),g.set(T,$),A||(Pp.has(T)||T.removeAttribute(a),Pp.delete(T)),$||T.removeAttribute(i)}),v_--,v_||(Lc=new WeakMap,Lc=new WeakMap,Pp=new WeakMap,Ip={})}},f4=function(e,t,i){i===void 0&&(i="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),h=u4(e);return h?(a.push.apply(a,Array.from(h.querySelectorAll("[aria-live], script"))),d4(a,h,i,"aria-hidden")):function(){return null}},rg="Dialog",[tP]=Ex(rg),[p4,Os]=tP(rg),nP=e=>{const{__scopeDialog:t,children:i,open:a,defaultOpen:h,onOpenChange:g,modal:p=!0}=e,c=K.useRef(null),S=K.useRef(null),[E,P]=NE({prop:a,defaultProp:h??!1,onChange:g,caller:rg});return re.jsx(p4,{scope:t,triggerRef:c,contentRef:S,contentId:d_(),titleId:d_(),descriptionId:d_(),open:E,onOpenChange:P,onOpenToggle:K.useCallback(()=>P(T=>!T),[P]),modal:p,children:i})};nP.displayName=rg;var rP="DialogTrigger",m4=K.forwardRef((e,t)=>{const{__scopeDialog:i,...a}=e,h=Os(rP,i),g=bi(t,h.triggerRef);return re.jsx(Vi.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":Ax(h.open),...a,ref:g,onClick:Fi(e.onClick,h.onOpenToggle)})});m4.displayName=rP;var Px="DialogPortal",[g4,iP]=tP(Px,{forceMount:void 0}),sP=e=>{const{__scopeDialog:t,forceMount:i,children:a,container:h}=e,g=Os(Px,t);return re.jsx(g4,{scope:t,forceMount:i,children:K.Children.map(a,p=>re.jsx(tg,{present:i||g.open,children:re.jsx(GE,{asChild:!0,container:h,children:p})}))})};sP.displayName=Px;var Mm="DialogOverlay",oP=K.forwardRef((e,t)=>{const i=iP(Mm,e.__scopeDialog),{forceMount:a=i.forceMount,...h}=e,g=Os(Mm,e.__scopeDialog);return g.modal?re.jsx(tg,{present:a||g.open,children:re.jsx(_4,{...h,ref:t})}):null});oP.displayName=Mm;var y4=Am("DialogOverlay.RemoveScroll"),_4=K.forwardRef((e,t)=>{const{__scopeDialog:i,...a}=e,h=Os(Mm,i);return re.jsx(QE,{as:y4,allowPinchZoom:!0,shards:[h.contentRef],children:re.jsx(Vi.div,{"data-state":Ax(h.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),zl="DialogContent",aP=K.forwardRef((e,t)=>{const i=iP(zl,e.__scopeDialog),{forceMount:a=i.forceMount,...h}=e,g=Os(zl,e.__scopeDialog);return re.jsx(tg,{present:a||g.open,children:g.modal?re.jsx(v4,{...h,ref:t}):re.jsx(x4,{...h,ref:t})})});aP.displayName=zl;var v4=K.forwardRef((e,t)=>{const i=Os(zl,e.__scopeDialog),a=K.useRef(null),h=bi(t,i.contentRef,a);return K.useEffect(()=>{const g=a.current;if(g)return f4(g)},[]),re.jsx(lP,{...e,ref:h,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fi(e.onCloseAutoFocus,g=>{var p;g.preventDefault(),(p=i.triggerRef.current)==null||p.focus()}),onPointerDownOutside:Fi(e.onPointerDownOutside,g=>{const p=g.detail.originalEvent,c=p.button===0&&p.ctrlKey===!0;(p.button===2||c)&&g.preventDefault()}),onFocusOutside:Fi(e.onFocusOutside,g=>g.preventDefault())})}),x4=K.forwardRef((e,t)=>{const i=Os(zl,e.__scopeDialog),a=K.useRef(!1),h=K.useRef(!1);return re.jsx(lP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{var p,c;(p=e.onCloseAutoFocus)==null||p.call(e,g),g.defaultPrevented||(a.current||(c=i.triggerRef.current)==null||c.focus(),g.preventDefault()),a.current=!1,h.current=!1},onInteractOutside:g=>{var S,E;(S=e.onInteractOutside)==null||S.call(e,g),g.defaultPrevented||(a.current=!0,g.detail.originalEvent.type==="pointerdown"&&(h.current=!0));const p=g.target;((E=i.triggerRef.current)==null?void 0:E.contains(p))&&g.preventDefault(),g.detail.originalEvent.type==="focusin"&&h.current&&g.preventDefault()}})}),lP=K.forwardRef((e,t)=>{const{__scopeDialog:i,trapFocus:a,onOpenAutoFocus:h,onCloseAutoFocus:g,...p}=e,c=Os(zl,i),S=K.useRef(null),E=bi(t,S);return EF(),re.jsxs(re.Fragment,{children:[re.jsx($E,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:h,onUnmountAutoFocus:g,children:re.jsx(VE,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Ax(c.open),...p,ref:E,onDismiss:()=>c.onOpenChange(!1)})}),re.jsxs(re.Fragment,{children:[re.jsx(w4,{titleId:c.titleId}),re.jsx(k4,{contentRef:S,descriptionId:c.descriptionId})]})]})}),Ix="DialogTitle",cP=K.forwardRef((e,t)=>{const{__scopeDialog:i,...a}=e,h=Os(Ix,i);return re.jsx(Vi.h2,{id:h.titleId,...a,ref:t})});cP.displayName=Ix;var uP="DialogDescription",hP=K.forwardRef((e,t)=>{const{__scopeDialog:i,...a}=e,h=Os(uP,i);return re.jsx(Vi.p,{id:h.descriptionId,...a,ref:t})});hP.displayName=uP;var dP="DialogClose",b4=K.forwardRef((e,t)=>{const{__scopeDialog:i,...a}=e,h=Os(dP,i);return re.jsx(Vi.button,{type:"button",...a,ref:t,onClick:Fi(e.onClick,()=>h.onOpenChange(!1))})});b4.displayName=dP;function Ax(e){return e?"open":"closed"}var fP="DialogTitleWarning",[S8,pP]=ZB(fP,{contentName:zl,titleName:Ix,docsSlug:"dialog"}),w4=({titleId:e})=>{const t=pP(fP),i=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return K.useEffect(()=>{e&&(document.getElementById(e)||console.error(i))},[i,e]),null},S4="DialogDescriptionWarning",k4=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pP(S4).contentName}}.`;return K.useEffect(()=>{var g;const h=(g=e.current)==null?void 0:g.getAttribute("aria-describedby");t&&h&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},T4=nP,C4=sP,E4=oP,P4=aP,I4=cP,A4=hP;function M4(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}const mP=Me.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Kd=()=>{const e=Me.useContext(mP);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};M4(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function D4(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function z4(){return Mx(/^Mac/)}function R4(){return Mx(/^iPhone/)}function dS(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function L4(){return Mx(/^iPad/)||z4()&&navigator.maxTouchPoints>1}function gP(){return R4()||L4()}function Mx(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const B4=24,F4=typeof window<"u"?K.useLayoutEffect:K.useEffect;function fS(...e){return(...t)=>{for(let i of e)typeof i=="function"&&i(...t)}}const x_=typeof document<"u"&&window.visualViewport;function pS(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function yP(e){for(pS(e)&&(e=e.parentElement);e&&!pS(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const O4=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Ap=0,b_;function N4(e={}){let{isDisabled:t}=e;F4(()=>{if(!t)return Ap++,Ap===1&&gP()&&(b_=j4()),()=>{Ap--,Ap===0&&(b_==null||b_())}},[t])}function j4(){let e,t=0,i=T=>{e=yP(T.target),!(e===document.documentElement&&e===document.body)&&(t=T.changedTouches[0].pageY)},a=T=>{if(!e||e===document.documentElement||e===document.body){T.preventDefault();return}let A=T.changedTouches[0].pageY,$=e.scrollTop,X=e.scrollHeight-e.clientHeight;X!==0&&(($<=0&&A>t||$>=X&&A<t)&&T.preventDefault(),t=A)},h=T=>{let A=T.target;Vv(A)&&A!==document.activeElement&&(T.preventDefault(),A.style.transform="translateY(-2000px)",A.focus(),requestAnimationFrame(()=>{A.style.transform=""}))},g=T=>{let A=T.target;Vv(A)&&(A.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{A.style.transform="",x_&&(x_.height<window.innerHeight?requestAnimationFrame(()=>{mS(A)}):x_.addEventListener("resize",()=>mS(A),{once:!0}))}))},p=()=>{window.scrollTo(0,0)},c=window.pageXOffset,S=window.pageYOffset,E=fS(V4(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let P=fS(Gh(document,"touchstart",i,{passive:!1,capture:!0}),Gh(document,"touchmove",a,{passive:!1,capture:!0}),Gh(document,"touchend",h,{passive:!1,capture:!0}),Gh(document,"focus",g,!0),Gh(window,"scroll",p));return()=>{E(),P(),window.scrollTo(c,S)}}function V4(e,t,i){let a=e.style[t];return e.style[t]=i,()=>{e.style[t]=a}}function Gh(e,t,i,a){return e.addEventListener(t,i,a),()=>{e.removeEventListener(t,i,a)}}function mS(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let i=yP(e);if(i!==document.documentElement&&i!==document.body&&i!==e){let a=i.getBoundingClientRect().top,h=e.getBoundingClientRect().top,g=e.getBoundingClientRect().bottom;const p=i.getBoundingClientRect().bottom+B4;g>p&&(i.scrollTop+=h-a)}e=i.parentElement}}function Vv(e){return e instanceof HTMLInputElement&&!O4.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function U4(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function $4(...e){return t=>e.forEach(i=>U4(i,t))}function _P(...e){return K.useCallback($4(...e),e)}const vP=new WeakMap;function Tr(e,t,i=!1){if(!e||!(e instanceof HTMLElement))return;let a={};Object.entries(t).forEach(([h,g])=>{if(h.startsWith("--")){e.style.setProperty(h,g);return}a[h]=e.style[h],e.style[h]=g}),!i&&vP.set(e,a)}function H4(e,t){if(!e||!(e instanceof HTMLElement))return;let i=vP.get(e);i&&(e.style[t]=i[t])}const gr=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Mp(e,t){if(!e)return null;const i=window.getComputedStyle(e),a=i.transform||i.webkitTransform||i.mozTransform;let h=a.match(/^matrix3d\((.+)\)$/);return h?parseFloat(h[1].split(", ")[gr(t)?13:12]):(h=a.match(/^matrix\((.+)\)$/),h?parseFloat(h[1].split(", ")[gr(t)?5:4]):null)}function G4(e){return 8*(Math.log(e+1)-2)}function w_(e,t){if(!e)return()=>{};const i=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=i}}function W4(...e){return(...t)=>{for(const i of e)typeof i=="function"&&i(...t)}}const Zn={DURATION:.5,EASE:[.32,.72,0,1]},xP=.4,q4=.25,Z4=100,bP=8,gl=16,Uv=26,S_="vaul-dragging";function wP(e){const t=Me.useRef(e);return Me.useEffect(()=>{t.current=e}),Me.useMemo(()=>(...i)=>t.current==null?void 0:t.current.call(t,...i),[])}function X4({defaultProp:e,onChange:t}){const i=Me.useState(e),[a]=i,h=Me.useRef(a),g=wP(t);return Me.useEffect(()=>{h.current!==a&&(g(a),h.current=a)},[a,h,g]),i}function SP({prop:e,defaultProp:t,onChange:i=()=>{}}){const[a,h]=X4({defaultProp:t,onChange:i}),g=e!==void 0,p=g?e:a,c=wP(i),S=Me.useCallback(E=>{if(g){const T=typeof E=="function"?E(e):E;T!==e&&c(T)}else h(E)},[g,e,h,c]);return[p,S]}function K4({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:i,drawerRef:a,overlayRef:h,fadeFromIndex:g,onSnapPointChange:p,direction:c="bottom",container:S,snapToSequentialPoint:E}){const[P,T]=SP({prop:e,defaultProp:i==null?void 0:i[0],onChange:t}),[A,$]=Me.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);Me.useEffect(()=>{function fe(){$({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe)},[]);const X=Me.useMemo(()=>P===(i==null?void 0:i[i.length-1])||null,[i,P]),G=Me.useMemo(()=>{var fe;return(fe=i==null?void 0:i.findIndex(le=>le===P))!=null?fe:null},[i,P]),ne=i&&i.length>0&&(g||g===0)&&!Number.isNaN(g)&&i[g]===P||!i,F=Me.useMemo(()=>{const fe=S?{width:S.getBoundingClientRect().width,height:S.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var le;return(le=i==null?void 0:i.map(we=>{const Le=typeof we=="string";let ze=0;if(Le&&(ze=parseInt(we,10)),gr(c)){const De=Le?ze:A?we*fe.height:0;return A?c==="bottom"?fe.height-De:-fe.height+De:De}const Ne=Le?ze:A?we*fe.width:0;return A?c==="right"?fe.width-Ne:-fe.width+Ne:Ne}))!=null?le:[]},[i,A,S]),V=Me.useMemo(()=>G!==null?F==null?void 0:F[G]:null,[F,G]),H=Me.useCallback(fe=>{var le;const we=(le=F==null?void 0:F.findIndex(Le=>Le===fe))!=null?le:null;p(we),Tr(a.current,{transition:`transform ${Zn.DURATION}s cubic-bezier(${Zn.EASE.join(",")})`,transform:gr(c)?`translate3d(0, ${fe}px, 0)`:`translate3d(${fe}px, 0, 0)`}),F&&we!==F.length-1&&g!==void 0&&we!==g&&we<g?Tr(h.current,{transition:`opacity ${Zn.DURATION}s cubic-bezier(${Zn.EASE.join(",")})`,opacity:"0"}):Tr(h.current,{transition:`opacity ${Zn.DURATION}s cubic-bezier(${Zn.EASE.join(",")})`,opacity:"1"}),T(i==null?void 0:i[Math.max(we,0)])},[a.current,i,F,g,h,T]);Me.useEffect(()=>{if(P||e){var fe;const le=(fe=i==null?void 0:i.findIndex(we=>we===e||we===P))!=null?fe:-1;F&&le!==-1&&typeof F[le]=="number"&&H(F[le])}},[P,e,i,F,H]);function ee({draggedDistance:fe,closeDrawer:le,velocity:we,dismissible:Le}){if(g===void 0)return;const ze=c==="bottom"||c==="right"?(V??0)-fe:(V??0)+fe,Ne=G===g-1,De=G===0,Ke=fe>0;if(Ne&&Tr(h.current,{transition:`opacity ${Zn.DURATION}s cubic-bezier(${Zn.EASE.join(",")})`}),!E&&we>2&&!Ke){Le?le():H(F[0]);return}if(!E&&we>2&&Ke&&F&&i){H(F[i.length-1]);return}const nt=F==null?void 0:F.reduce((je,Te)=>typeof je!="number"||typeof Te!="number"?je:Math.abs(Te-ze)<Math.abs(je-ze)?Te:je),Ze=gr(c)?window.innerHeight:window.innerWidth;if(we>xP&&Math.abs(fe)<Ze*.4){const je=Ke?1:-1;if(je>0&&X&&i){H(F[i.length-1]);return}if(De&&je<0&&Le&&le(),G===null)return;H(F[G+je]);return}H(nt)}function ye({draggedDistance:fe}){if(V===null)return;const le=c==="bottom"||c==="right"?V-fe:V+fe;(c==="bottom"||c==="right")&&le<F[F.length-1]||(c==="top"||c==="left")&&le>F[F.length-1]||Tr(a.current,{transform:gr(c)?`translate3d(0, ${le}px, 0)`:`translate3d(${le}px, 0, 0)`})}function be(fe,le){if(!i||typeof G!="number"||!F||g===void 0)return null;const we=G===g-1;if(G>=g&&le)return 0;if(we&&!le)return 1;if(!ne&&!we)return null;const ze=we?G+1:G-1,Ne=we?F[ze]-F[ze-1]:F[ze+1]-F[ze],De=fe/Math.abs(Ne);return we?1-De:De}return{isLastSnapPoint:X,activeSnapPoint:P,shouldFade:ne,getPercentageDragged:be,setActiveSnapPoint:T,activeSnapPointIndex:G,onRelease:ee,onDrag:ye,snapPointsOffset:F}}const Y4=()=>()=>{};function J4(){const{direction:e,isOpen:t,shouldScaleBackground:i,setBackgroundColorOnScale:a,noBodyStyles:h}=Kd(),g=Me.useRef(null),p=K.useMemo(()=>document.body.style.backgroundColor,[]);function c(){return(window.innerWidth-Uv)/window.innerWidth}Me.useEffect(()=>{if(t&&i){g.current&&clearTimeout(g.current);const S=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!S)return;W4(a&&!h?w_(document.body,{background:"black"}):Y4,w_(S,{transformOrigin:gr(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${Zn.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Zn.EASE.join(",")})`}));const E=w_(S,{borderRadius:`${bP}px`,overflow:"hidden",...gr(e)?{transform:`scale(${c()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${c()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{E(),g.current=window.setTimeout(()=>{p?document.body.style.background=p:document.body.style.removeProperty("background")},Zn.DURATION*1e3)}}},[t,i,p])}let Wh=null;function Q4({isOpen:e,modal:t,nested:i,hasBeenOpened:a,preventScrollRestoration:h,noBodyStyles:g}){const[p,c]=Me.useState(()=>typeof window<"u"?window.location.href:""),S=Me.useRef(0),E=Me.useCallback(()=>{if(dS()&&Wh===null&&e&&!g){Wh={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:T,innerHeight:A}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-S.current}px`,left:`${-T}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const $=A-window.innerHeight;$&&S.current>=A&&(document.body.style.top=`${-(S.current+$)}px`)}),300)}},[e]),P=Me.useCallback(()=>{if(dS()&&Wh!==null&&!g){const T=-parseInt(document.body.style.top,10),A=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Wh),window.requestAnimationFrame(()=>{if(h&&p!==window.location.href){c(window.location.href);return}window.scrollTo(A,T)}),Wh=null}},[p]);return Me.useEffect(()=>{function T(){S.current=window.scrollY}return T(),window.addEventListener("scroll",T),()=>{window.removeEventListener("scroll",T)}},[]),Me.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||P()}},[t,P]),Me.useEffect(()=>{i||!a||(e?(!window.matchMedia("(display-mode: standalone)").matches&&E(),t||window.setTimeout(()=>{P()},500)):P())},[e,a,p,t,i,E,P]),{restorePositionSetting:P}}function eO({open:e,onOpenChange:t,children:i,onDrag:a,onRelease:h,snapPoints:g,shouldScaleBackground:p=!1,setBackgroundColorOnScale:c=!0,closeThreshold:S=q4,scrollLockTimeout:E=Z4,dismissible:P=!0,handleOnly:T=!1,fadeFromIndex:A=g&&g.length-1,activeSnapPoint:$,setActiveSnapPoint:X,fixed:G,modal:ne=!0,onClose:F,nested:V,noBodyStyles:H=!1,direction:ee="bottom",defaultOpen:ye=!1,disablePreventScroll:be=!0,snapToSequentialPoint:fe=!1,preventScrollRestoration:le=!1,repositionInputs:we=!0,onAnimationEnd:Le,container:ze,autoFocus:Ne=!1}){var De,Ke;const[nt=!1,Ze]=SP({defaultProp:ye,prop:e,onChange:pt=>{t==null||t(pt),!pt&&!V&&ki(),setTimeout(()=>{Le==null||Le(pt)},Zn.DURATION*1e3),pt&&!ne&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),pt||(document.body.style.pointerEvents="auto")}}),[je,Te]=Me.useState(!1),[$e,qe]=Me.useState(!1),[yt,Dt]=Me.useState(!1),at=Me.useRef(null),ft=Me.useRef(null),Rt=Me.useRef(null),qt=Me.useRef(null),St=Me.useRef(null),Et=Me.useRef(!1),cn=Me.useRef(null),on=Me.useRef(0),Ut=Me.useRef(!1),it=Me.useRef(!ye),Zt=Me.useRef(0),ht=Me.useRef(null),wn=Me.useRef(((De=ht.current)==null?void 0:De.getBoundingClientRect().height)||0),Pe=Me.useRef(((Ke=ht.current)==null?void 0:Ke.getBoundingClientRect().width)||0),Sn=Me.useRef(0),ur=Me.useCallback(pt=>{g&&pt===En.length-1&&(ft.current=new Date)},[]),{activeSnapPoint:Lt,activeSnapPointIndex:Xt,setActiveSnapPoint:Pr,onRelease:xn,snapPointsOffset:En,onDrag:li,shouldFade:er,getPercentageDragged:Zr}=K4({snapPoints:g,activeSnapPointProp:$,setActiveSnapPointProp:X,drawerRef:ht,fadeFromIndex:A,overlayRef:at,onSnapPointChange:ur,direction:ee,container:ze,snapToSequentialPoint:fe});N4({isDisabled:!nt||$e||!ne||yt||!je||!we||!be});const{restorePositionSetting:ki}=Q4({isOpen:nt,modal:ne,nested:V??!1,hasBeenOpened:je,preventScrollRestoration:le,noBodyStyles:H});function Ue(){return(window.innerWidth-Uv)/window.innerWidth}function tr(pt){var Ht,Kt;!P&&!g||ht.current&&!ht.current.contains(pt.target)||(wn.current=((Ht=ht.current)==null?void 0:Ht.getBoundingClientRect().height)||0,Pe.current=((Kt=ht.current)==null?void 0:Kt.getBoundingClientRect().width)||0,qe(!0),Rt.current=new Date,gP()&&window.addEventListener("touchend",()=>Et.current=!1,{once:!0}),pt.target.setPointerCapture(pt.pointerId),on.current=gr(ee)?pt.pageY:pt.pageX)}function hn(pt,Ht){var Kt;let jt=pt;const ie=(Kt=window.getSelection())==null?void 0:Kt.toString(),O=ht.current?Mp(ht.current,ee):null,j=new Date;if(jt.tagName==="SELECT"||jt.hasAttribute("data-vaul-no-drag")||jt.closest("[data-vaul-no-drag]"))return!1;if(ee==="right"||ee==="left")return!0;if(ft.current&&j.getTime()-ft.current.getTime()<500)return!1;if(O!==null&&(ee==="bottom"?O>0:O<0))return!0;if(ie&&ie.length>0)return!1;if(St.current&&j.getTime()-St.current.getTime()<E&&O===0||Ht)return St.current=j,!1;for(;jt;){if(jt.scrollHeight>jt.clientHeight){if(jt.scrollTop!==0)return St.current=new Date,!1;if(jt.getAttribute("role")==="dialog")return!0}jt=jt.parentNode}return!0}function ar(pt){if(ht.current&&$e){const Ht=ee==="bottom"||ee==="right"?1:-1,Kt=(on.current-(gr(ee)?pt.pageY:pt.pageX))*Ht,jt=Kt>0,ie=g&&!P&&!jt;if(ie&&Xt===0)return;const O=Math.abs(Kt),j=document.querySelector("[data-vaul-drawer-wrapper]"),Z=ee==="bottom"||ee==="top"?wn.current:Pe.current;let te=O/Z;const pe=Zr(O,jt);if(pe!==null&&(te=pe),ie&&te>=1||!Et.current&&!hn(pt.target,jt))return;if(ht.current.classList.add(S_),Et.current=!0,Tr(ht.current,{transition:"none"}),Tr(at.current,{transition:"none"}),g&&li({draggedDistance:Kt}),jt&&!g){const ve=G4(Kt),he=Math.min(ve*-1,0)*Ht;Tr(ht.current,{transform:gr(ee)?`translate3d(0, ${he}px, 0)`:`translate3d(${he}px, 0, 0)`});return}const me=1-te;if((er||A&&Xt===A-1)&&(a==null||a(pt,te),Tr(at.current,{opacity:`${me}`,transition:"none"},!0)),j&&at.current&&p){const ve=Math.min(Ue()+te*(1-Ue()),1),he=8-te*8,Ie=Math.max(0,14-te*14);Tr(j,{borderRadius:`${he}px`,transform:gr(ee)?`scale(${ve}) translate3d(0, ${Ie}px, 0)`:`scale(${ve}) translate3d(${Ie}px, 0, 0)`,transition:"none"},!0)}if(!g){const ve=O*Ht;Tr(ht.current,{transform:gr(ee)?`translate3d(0, ${ve}px, 0)`:`translate3d(${ve}px, 0, 0)`})}}}Me.useEffect(()=>{window.requestAnimationFrame(()=>{it.current=!0})},[]),Me.useEffect(()=>{var pt;function Ht(){if(!ht.current||!we)return;const Kt=document.activeElement;if(Vv(Kt)||Ut.current){var jt;const ie=((jt=window.visualViewport)==null?void 0:jt.height)||0,O=window.innerHeight;let j=O-ie;const Z=ht.current.getBoundingClientRect().height||0,te=Z>O*.8;Sn.current||(Sn.current=Z);const pe=ht.current.getBoundingClientRect().top;if(Math.abs(Zt.current-j)>60&&(Ut.current=!Ut.current),g&&g.length>0&&En&&Xt){const me=En[Xt]||0;j+=me}if(Zt.current=j,Z>ie||Ut.current){const me=ht.current.getBoundingClientRect().height;let ve=me;me>ie&&(ve=ie-(te?pe:Uv)),G?ht.current.style.height=`${me-Math.max(j,0)}px`:ht.current.style.height=`${Math.max(ve,ie-pe)}px`}else D4()||(ht.current.style.height=`${Sn.current}px`);g&&g.length>0&&!Ut.current?ht.current.style.bottom="0px":ht.current.style.bottom=`${Math.max(j,0)}px`}}return(pt=window.visualViewport)==null||pt.addEventListener("resize",Ht),()=>{var Kt;return(Kt=window.visualViewport)==null?void 0:Kt.removeEventListener("resize",Ht)}},[Xt,g,En]);function zn(pt){Nt(),F==null||F(),pt||Ze(!1),setTimeout(()=>{g&&Pr(g[0])},Zn.DURATION*1e3)}function We(){if(!ht.current)return;const pt=document.querySelector("[data-vaul-drawer-wrapper]"),Ht=Mp(ht.current,ee);Tr(ht.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${Zn.DURATION}s cubic-bezier(${Zn.EASE.join(",")})`}),Tr(at.current,{transition:`opacity ${Zn.DURATION}s cubic-bezier(${Zn.EASE.join(",")})`,opacity:"1"}),p&&Ht&&Ht>0&&nt&&Tr(pt,{borderRadius:`${bP}px`,overflow:"hidden",...gr(ee)?{transform:`scale(${Ue()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ue()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Zn.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Zn.EASE.join(",")})`},!0)}function Nt(){!$e||!ht.current||(ht.current.classList.remove(S_),Et.current=!1,qe(!1),qt.current=new Date)}function Pt(pt){if(!$e||!ht.current)return;ht.current.classList.remove(S_),Et.current=!1,qe(!1),qt.current=new Date;const Ht=Mp(ht.current,ee);if(!pt||!hn(pt.target,!1)||!Ht||Number.isNaN(Ht)||Rt.current===null)return;const Kt=qt.current.getTime()-Rt.current.getTime(),jt=on.current-(gr(ee)?pt.pageY:pt.pageX),ie=Math.abs(jt)/Kt;if(ie>.05&&(Dt(!0),setTimeout(()=>{Dt(!1)},200)),g){xn({draggedDistance:jt*(ee==="bottom"||ee==="right"?1:-1),closeDrawer:zn,velocity:ie,dismissible:P}),h==null||h(pt,!0);return}if(ee==="bottom"||ee==="right"?jt>0:jt<0){We(),h==null||h(pt,!0);return}if(ie>xP){zn(),h==null||h(pt,!1);return}var O;const j=Math.min((O=ht.current.getBoundingClientRect().height)!=null?O:0,window.innerHeight);var Z;const te=Math.min((Z=ht.current.getBoundingClientRect().width)!=null?Z:0,window.innerWidth),pe=ee==="left"||ee==="right";if(Math.abs(Ht)>=(pe?te:j)*S){zn(),h==null||h(pt,!1);return}h==null||h(pt,!0),We()}Me.useEffect(()=>(nt&&(Tr(document.documentElement,{scrollBehavior:"auto"}),ft.current=new Date),()=>{H4(document.documentElement,"scrollBehavior")}),[nt]);function Gn(pt){const Ht=pt?(window.innerWidth-gl)/window.innerWidth:1,Kt=pt?-gl:0;cn.current&&window.clearTimeout(cn.current),Tr(ht.current,{transition:`transform ${Zn.DURATION}s cubic-bezier(${Zn.EASE.join(",")})`,transform:gr(ee)?`scale(${Ht}) translate3d(0, ${Kt}px, 0)`:`scale(${Ht}) translate3d(${Kt}px, 0, 0)`}),!pt&&ht.current&&(cn.current=setTimeout(()=>{const jt=Mp(ht.current,ee);Tr(ht.current,{transition:"none",transform:gr(ee)?`translate3d(0, ${jt}px, 0)`:`translate3d(${jt}px, 0, 0)`})},500))}function vr(pt,Ht){if(Ht<0)return;const Kt=(window.innerWidth-gl)/window.innerWidth,jt=Kt+Ht*(1-Kt),ie=-gl+Ht*gl;Tr(ht.current,{transform:gr(ee)?`scale(${jt}) translate3d(0, ${ie}px, 0)`:`scale(${jt}) translate3d(${ie}px, 0, 0)`,transition:"none"})}function zt(pt,Ht){const Kt=gr(ee)?window.innerHeight:window.innerWidth,jt=Ht?(Kt-gl)/Kt:1,ie=Ht?-gl:0;Ht&&Tr(ht.current,{transition:`transform ${Zn.DURATION}s cubic-bezier(${Zn.EASE.join(",")})`,transform:gr(ee)?`scale(${jt}) translate3d(0, ${ie}px, 0)`:`scale(${jt}) translate3d(${ie}px, 0, 0)`})}return Me.useEffect(()=>{ne||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[ne]),Me.createElement(T4,{defaultOpen:ye,onOpenChange:pt=>{!P&&!pt||(pt?Te(!0):zn(!0),Ze(pt))},open:nt},Me.createElement(mP.Provider,{value:{activeSnapPoint:Lt,snapPoints:g,setActiveSnapPoint:Pr,drawerRef:ht,overlayRef:at,onOpenChange:t,onPress:tr,onRelease:Pt,onDrag:ar,dismissible:P,shouldAnimate:it,handleOnly:T,isOpen:nt,isDragging:$e,shouldFade:er,closeDrawer:zn,onNestedDrag:vr,onNestedOpenChange:Gn,onNestedRelease:zt,keyboardIsOpen:Ut,modal:ne,snapPointsOffset:En,activeSnapPointIndex:Xt,direction:ee,shouldScaleBackground:p,setBackgroundColorOnScale:c,noBodyStyles:H,container:ze,autoFocus:Ne}},i))}const kP=Me.forwardRef(function({...e},t){const{overlayRef:i,snapPoints:a,onRelease:h,shouldFade:g,isOpen:p,modal:c,shouldAnimate:S}=Kd(),E=_P(t,i),P=a&&a.length>0;if(!c)return null;const T=Me.useCallback(A=>h(A),[h]);return Me.createElement(E4,{onMouseUp:T,ref:E,"data-vaul-overlay":"","data-vaul-snap-points":p&&P?"true":"false","data-vaul-snap-points-overlay":p&&g?"true":"false","data-vaul-animate":S!=null&&S.current?"true":"false",...e})});kP.displayName="Drawer.Overlay";const TP=Me.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:i,...a},h){const{drawerRef:g,onPress:p,onRelease:c,onDrag:S,keyboardIsOpen:E,snapPointsOffset:P,activeSnapPointIndex:T,modal:A,isOpen:$,direction:X,snapPoints:G,container:ne,handleOnly:F,shouldAnimate:V,autoFocus:H}=Kd(),[ee,ye]=Me.useState(!1),be=_P(h,g),fe=Me.useRef(null),le=Me.useRef(null),we=Me.useRef(!1),Le=G&&G.length>0;J4();const ze=(De,Ke,nt=0)=>{if(we.current)return!0;const Ze=Math.abs(De.y),je=Math.abs(De.x),Te=je>Ze,$e=["bottom","right"].includes(Ke)?1:-1;if(Ke==="left"||Ke==="right"){if(!(De.x*$e<0)&&je>=0&&je<=nt)return Te}else if(!(De.y*$e<0)&&Ze>=0&&Ze<=nt)return!Te;return we.current=!0,!0};Me.useEffect(()=>{Le&&window.requestAnimationFrame(()=>{ye(!0)})},[]);function Ne(De){fe.current=null,we.current=!1,c(De)}return Me.createElement(P4,{"data-vaul-drawer-direction":X,"data-vaul-drawer":"","data-vaul-delayed-snap-points":ee?"true":"false","data-vaul-snap-points":$&&Le?"true":"false","data-vaul-custom-container":ne?"true":"false","data-vaul-animate":V!=null&&V.current?"true":"false",...a,ref:be,style:P&&P.length>0?{"--snap-point-height":`${P[T??0]}px`,...t}:t,onPointerDown:De=>{F||(a.onPointerDown==null||a.onPointerDown.call(a,De),fe.current={x:De.pageX,y:De.pageY},p(De))},onOpenAutoFocus:De=>{i==null||i(De),H||De.preventDefault()},onPointerDownOutside:De=>{if(e==null||e(De),!A||De.defaultPrevented){De.preventDefault();return}E.current&&(E.current=!1)},onFocusOutside:De=>{if(!A){De.preventDefault();return}},onPointerMove:De=>{if(le.current=De,F||(a.onPointerMove==null||a.onPointerMove.call(a,De),!fe.current))return;const Ke=De.pageY-fe.current.y,nt=De.pageX-fe.current.x,Ze=De.pointerType==="touch"?10:2;ze({x:nt,y:Ke},X,Ze)?S(De):(Math.abs(nt)>Ze||Math.abs(Ke)>Ze)&&(fe.current=null)},onPointerUp:De=>{a.onPointerUp==null||a.onPointerUp.call(a,De),fe.current=null,we.current=!1,c(De)},onPointerOut:De=>{a.onPointerOut==null||a.onPointerOut.call(a,De),Ne(le.current)},onContextMenu:De=>{a.onContextMenu==null||a.onContextMenu.call(a,De),le.current&&Ne(le.current)}})});TP.displayName="Drawer.Content";const tO=250,nO=120,rO=Me.forwardRef(function({preventCycle:e=!1,children:t,...i},a){const{closeDrawer:h,isDragging:g,snapPoints:p,activeSnapPoint:c,setActiveSnapPoint:S,dismissible:E,handleOnly:P,isOpen:T,onPress:A,onDrag:$}=Kd(),X=Me.useRef(null),G=Me.useRef(!1);function ne(){if(G.current){H();return}window.setTimeout(()=>{F()},nO)}function F(){if(g||e||G.current){H();return}if(H(),!p||p.length===0){E||h();return}if(c===p[p.length-1]&&E){h();return}const ye=p.findIndex(fe=>fe===c);if(ye===-1)return;const be=p[ye+1];S(be)}function V(){X.current=window.setTimeout(()=>{G.current=!0},tO)}function H(){X.current&&window.clearTimeout(X.current),G.current=!1}return Me.createElement("div",{onClick:ne,onPointerCancel:H,onPointerDown:ee=>{P&&A(ee),V()},onPointerMove:ee=>{P&&$(ee)},ref:a,"data-vaul-drawer-visible":T?"true":"false","data-vaul-handle":"","aria-hidden":"true",...i},Me.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});rO.displayName="Drawer.Handle";function iO(e){const t=Kd(),{container:i=t.container,...a}=e;return Me.createElement(C4,{container:i,...a})}const zo={Root:eO,Content:TP,Overlay:kP,Portal:iO,Title:I4,Description:A4},CP=({shouldScaleBackground:e=!0,...t})=>re.jsx(zo.Root,{shouldScaleBackground:e,...t});CP.displayName="Drawer";const sO=zo.Portal,EP=K.forwardRef(({className:e,...t},i)=>re.jsx(zo.Overlay,{ref:i,className:fn("fixed inset-0 z-[250] bg-black/80",e),...t}));EP.displayName=zo.Overlay.displayName;const PP=K.forwardRef(({className:e,children:t,showOverlay:i=!0,...a},h)=>re.jsxs(sO,{children:[i&&re.jsx(EP,{}),re.jsx(zo.Content,{ref:h,className:fn("fixed inset-x-0 bottom-0 z-[251] mt-24 flex h-auto flex-col rounded-t-[10px] border border-border bg-background",e),...a,children:t})]}));PP.displayName="DrawerContent";const oO=K.forwardRef(({className:e,...t},i)=>re.jsx(zo.Title,{ref:i,className:fn("text-lg font-semibold leading-none tracking-tight",e),...t}));oO.displayName=zo.Title.displayName;const aO=K.forwardRef(({className:e,...t},i)=>re.jsx(zo.Description,{ref:i,className:fn("text-sm text-neutral-500",e),...t}));aO.displayName=zo.Description.displayName;function lO(e){return Object.prototype.toString.call(e)==="[object Object]"}function gS(e){return lO(e)||Array.isArray(e)}function cO(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Dx(e,t){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;const h=JSON.stringify(Object.keys(e.breakpoints||{})),g=JSON.stringify(Object.keys(t.breakpoints||{}));return h!==g?!1:i.every(p=>{const c=e[p],S=t[p];return typeof c=="function"?`${c}`==`${S}`:!gS(c)||!gS(S)?c===S:Dx(c,S)})}function yS(e){return e.concat().sort((t,i)=>t.name>i.name?1:-1).map(t=>t.options)}function uO(e,t){if(e.length!==t.length)return!1;const i=yS(e),a=yS(t);return i.every((h,g)=>{const p=a[g];return Dx(h,p)})}function zx(e){return typeof e=="number"}function $v(e){return typeof e=="string"}function ig(e){return typeof e=="boolean"}function _S(e){return Object.prototype.toString.call(e)==="[object Object]"}function Yn(e){return Math.abs(e)}function Rx(e){return Math.sign(e)}function pd(e,t){return Yn(e-t)}function hO(e,t){if(e===0||t===0||Yn(e)<=Yn(t))return 0;const i=pd(Yn(e),Yn(t));return Yn(i/e)}function dO(e){return Math.round(e*100)/100}function Od(e){return Nd(e).map(Number)}function Bs(e){return e[Yd(e)]}function Yd(e){return Math.max(0,e.length-1)}function Lx(e,t){return t===Yd(e)}function vS(e,t=0){return Array.from(Array(e),(i,a)=>t+a)}function Nd(e){return Object.keys(e)}function IP(e,t){return[e,t].reduce((i,a)=>(Nd(a).forEach(h=>{const g=i[h],p=a[h],c=_S(g)&&_S(p);i[h]=c?IP(g,p):p}),i),{})}function Hv(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function fO(e,t){const i={start:a,center:h,end:g};function a(){return 0}function h(S){return g(S)/2}function g(S){return t-S}function p(S,E){return $v(e)?i[e](S):e(t,S,E)}return{measure:p}}function jd(){let e=[];function t(h,g,p,c={passive:!0}){let S;if("addEventListener"in h)h.addEventListener(g,p,c),S=()=>h.removeEventListener(g,p,c);else{const E=h;E.addListener(p),S=()=>E.removeListener(p)}return e.push(S),a}function i(){e=e.filter(h=>h())}const a={add:t,clear:i};return a}function pO(e,t,i,a){const h=jd(),g=1e3/60;let p=null,c=0,S=0;function E(){h.add(e,"visibilitychange",()=>{e.hidden&&X()})}function P(){$(),h.clear()}function T(ne){if(!S)return;p||(p=ne,i(),i());const F=ne-p;for(p=ne,c+=F;c>=g;)i(),c-=g;const V=c/g;a(V),S&&(S=t.requestAnimationFrame(T))}function A(){S||(S=t.requestAnimationFrame(T))}function $(){t.cancelAnimationFrame(S),p=null,c=0,S=0}function X(){p=null,c=0}return{init:E,destroy:P,start:A,stop:$,update:i,render:a}}function mO(e,t){const i=t==="rtl",a=e==="y",h=a?"y":"x",g=a?"x":"y",p=!a&&i?-1:1,c=P(),S=T();function E(X){const{height:G,width:ne}=X;return a?G:ne}function P(){return a?"top":i?"right":"left"}function T(){return a?"bottom":i?"left":"right"}function A(X){return X*p}return{scroll:h,cross:g,startEdge:c,endEdge:S,measureSize:E,direction:A}}function Rl(e=0,t=0){const i=Yn(e-t);function a(E){return E<e}function h(E){return E>t}function g(E){return a(E)||h(E)}function p(E){return g(E)?a(E)?e:t:E}function c(E){return i?E-i*Math.ceil((E-t)/i):E}return{length:i,max:t,min:e,constrain:p,reachedAny:g,reachedMax:h,reachedMin:a,removeOffset:c}}function AP(e,t,i){const{constrain:a}=Rl(0,e),h=e+1;let g=p(t);function p(A){return i?Yn((h+A)%h):a(A)}function c(){return g}function S(A){return g=p(A),T}function E(A){return P().set(c()+A)}function P(){return AP(e,c(),i)}const T={get:c,set:S,add:E,clone:P};return T}function gO(e,t,i,a,h,g,p,c,S,E,P,T,A,$,X,G,ne,F,V){const{cross:H,direction:ee}=e,ye=["INPUT","SELECT","TEXTAREA"],be={passive:!1},fe=jd(),le=jd(),we=Rl(50,225).constrain($.measure(20)),Le={mouse:300,touch:400},ze={mouse:500,touch:600},Ne=X?43:25;let De=!1,Ke=0,nt=0,Ze=!1,je=!1,Te=!1,$e=!1;function qe(it){if(!V)return;function Zt(wn){(ig(V)||V(it,wn))&&qt(wn)}const ht=t;fe.add(ht,"dragstart",wn=>wn.preventDefault(),be).add(ht,"touchmove",()=>{},be).add(ht,"touchend",()=>{}).add(ht,"touchstart",Zt).add(ht,"mousedown",Zt).add(ht,"touchcancel",Et).add(ht,"contextmenu",Et).add(ht,"click",cn,!0)}function yt(){fe.clear(),le.clear()}function Dt(){const it=$e?i:t;le.add(it,"touchmove",St,be).add(it,"touchend",Et).add(it,"mousemove",St,be).add(it,"mouseup",Et)}function at(it){const Zt=it.nodeName||"";return ye.includes(Zt)}function ft(){return(X?ze:Le)[$e?"mouse":"touch"]}function Rt(it,Zt){const ht=T.add(Rx(it)*-1),wn=P.byDistance(it,!X).distance;return X||Yn(it)<we?wn:ne&&Zt?wn*.5:P.byIndex(ht.get(),0).distance}function qt(it){const Zt=Hv(it,a);$e=Zt,Te=X&&Zt&&!it.buttons&&De,De=pd(h.get(),p.get())>=2,!(Zt&&it.button!==0)&&(at(it.target)||(Ze=!0,g.pointerDown(it),E.useFriction(0).useDuration(0),h.set(p),Dt(),Ke=g.readPoint(it),nt=g.readPoint(it,H),A.emit("pointerDown")))}function St(it){if(!Hv(it,a)&&it.touches.length>=2)return Et(it);const ht=g.readPoint(it),wn=g.readPoint(it,H),Pe=pd(ht,Ke),Sn=pd(wn,nt);if(!je&&!$e&&(!it.cancelable||(je=Pe>Sn,!je)))return Et(it);const ur=g.pointerMove(it);Pe>G&&(Te=!0),E.useFriction(.3).useDuration(.75),c.start(),h.add(ee(ur)),it.preventDefault()}function Et(it){const ht=P.byDistance(0,!1).index!==T.get(),wn=g.pointerUp(it)*ft(),Pe=Rt(ee(wn),ht),Sn=hO(wn,Pe),ur=Ne-10*Sn,Lt=F+Sn/50;je=!1,Ze=!1,le.clear(),E.useDuration(ur).useFriction(Lt),S.distance(Pe,!X),$e=!1,A.emit("pointerUp")}function cn(it){Te&&(it.stopPropagation(),it.preventDefault(),Te=!1)}function on(){return Ze}return{init:qe,destroy:yt,pointerDown:on}}function yO(e,t){let a,h;function g(T){return T.timeStamp}function p(T,A){const X=`client${(A||e.scroll)==="x"?"X":"Y"}`;return(Hv(T,t)?T:T.touches[0])[X]}function c(T){return a=T,h=T,p(T)}function S(T){const A=p(T)-p(h),$=g(T)-g(a)>170;return h=T,$&&(a=T),A}function E(T){if(!a||!h)return 0;const A=p(h)-p(a),$=g(T)-g(a),X=g(T)-g(h)>170,G=A/$;return $&&!X&&Yn(G)>.1?G:0}return{pointerDown:c,pointerMove:S,pointerUp:E,readPoint:p}}function _O(){function e(i){const{offsetTop:a,offsetLeft:h,offsetWidth:g,offsetHeight:p}=i;return{top:a,right:h+g,bottom:a+p,left:h,width:g,height:p}}return{measure:e}}function vO(e){function t(a){return e*(a/100)}return{measure:t}}function xO(e,t,i,a,h,g,p){const c=[e].concat(a);let S,E,P=[],T=!1;function A(ne){return h.measureSize(p.measure(ne))}function $(ne){if(!g)return;E=A(e),P=a.map(A);function F(V){for(const H of V){if(T)return;const ee=H.target===e,ye=a.indexOf(H.target),be=ee?E:P[ye],fe=A(ee?e:a[ye]);if(Yn(fe-be)>=.5){ne.reInit(),t.emit("resize");break}}}S=new ResizeObserver(V=>{(ig(g)||g(ne,V))&&F(V)}),i.requestAnimationFrame(()=>{c.forEach(V=>S.observe(V))})}function X(){T=!0,S&&S.disconnect()}return{init:$,destroy:X}}function bO(e,t,i,a,h,g){let p=0,c=0,S=h,E=g,P=e.get(),T=0;function A(){const be=a.get()-e.get(),fe=!S;let le=0;return fe?(p=0,i.set(a),e.set(a),le=be):(i.set(e),p+=be/S,p*=E,P+=p,e.add(p),le=P-T),c=Rx(le),T=P,ye}function $(){const be=a.get()-t.get();return Yn(be)<.001}function X(){return S}function G(){return c}function ne(){return p}function F(){return H(h)}function V(){return ee(g)}function H(be){return S=be,ye}function ee(be){return E=be,ye}const ye={direction:G,duration:X,velocity:ne,seek:A,settled:$,useBaseFriction:V,useBaseDuration:F,useFriction:ee,useDuration:H};return ye}function wO(e,t,i,a,h){const g=h.measure(10),p=h.measure(50),c=Rl(.1,.99);let S=!1;function E(){return!(S||!e.reachedAny(i.get())||!e.reachedAny(t.get()))}function P($){if(!E())return;const X=e.reachedMin(t.get())?"min":"max",G=Yn(e[X]-t.get()),ne=i.get()-t.get(),F=c.constrain(G/p);i.subtract(ne*F),!$&&Yn(ne)<g&&(i.set(e.constrain(i.get())),a.useDuration(25).useBaseFriction())}function T($){S=!$}return{shouldConstrain:E,constrain:P,toggleActive:T}}function SO(e,t,i,a,h){const g=Rl(-t+e,0),p=T(),c=P(),S=A();function E(X,G){return pd(X,G)<=1}function P(){const X=p[0],G=Bs(p),ne=p.lastIndexOf(X),F=p.indexOf(G)+1;return Rl(ne,F)}function T(){return i.map((X,G)=>{const{min:ne,max:F}=g,V=g.constrain(X),H=!G,ee=Lx(i,G);return H?F:ee||E(ne,V)?ne:E(F,V)?F:V}).map(X=>parseFloat(X.toFixed(3)))}function A(){if(t<=e+h)return[g.max];if(a==="keepSnaps")return p;const{min:X,max:G}=c;return p.slice(X,G)}return{snapsContained:S,scrollContainLimit:c}}function kO(e,t,i){const a=t[0],h=i?a-e:Bs(t);return{limit:Rl(h,a)}}function TO(e,t,i,a){const g=t.min+.1,p=t.max+.1,{reachedMin:c,reachedMax:S}=Rl(g,p);function E(A){return A===1?S(i.get()):A===-1?c(i.get()):!1}function P(A){if(!E(A))return;const $=e*(A*-1);a.forEach(X=>X.add($))}return{loop:P}}function CO(e){const{max:t,length:i}=e;function a(g){const p=g-t;return i?p/-i:0}return{get:a}}function EO(e,t,i,a,h){const{startEdge:g,endEdge:p}=e,{groupSlides:c}=h,S=T().map(t.measure),E=A(),P=$();function T(){return c(a).map(G=>Bs(G)[p]-G[0][g]).map(Yn)}function A(){return a.map(G=>i[g]-G[g]).map(G=>-Yn(G))}function $(){return c(E).map(G=>G[0]).map((G,ne)=>G+S[ne])}return{snaps:E,snapsAligned:P}}function PO(e,t,i,a,h,g){const{groupSlides:p}=h,{min:c,max:S}=a,E=P();function P(){const A=p(g),$=!e||t==="keepSnaps";return i.length===1?[g]:$?A:A.slice(c,S).map((X,G,ne)=>{const F=!G,V=Lx(ne,G);if(F){const H=Bs(ne[0])+1;return vS(H)}if(V){const H=Yd(g)-Bs(ne)[0]+1;return vS(H,Bs(ne)[0])}return X})}return{slideRegistry:E}}function IO(e,t,i,a,h){const{reachedAny:g,removeOffset:p,constrain:c}=a;function S(X){return X.concat().sort((G,ne)=>Yn(G)-Yn(ne))[0]}function E(X){const G=e?p(X):c(X),ne=t.map((V,H)=>({diff:P(V-G,0),index:H})).sort((V,H)=>Yn(V.diff)-Yn(H.diff)),{index:F}=ne[0];return{index:F,distance:G}}function P(X,G){const ne=[X,X+i,X-i];if(!e)return X;if(!G)return S(ne);const F=ne.filter(V=>Rx(V)===G);return F.length?S(F):Bs(ne)-i}function T(X,G){const ne=t[X]-h.get(),F=P(ne,G);return{index:X,distance:F}}function A(X,G){const ne=h.get()+X,{index:F,distance:V}=E(ne),H=!e&&g(ne);if(!G||H)return{index:F,distance:X};const ee=t[F]-V,ye=X+P(ee,0);return{index:F,distance:ye}}return{byDistance:A,byIndex:T,shortcut:P}}function AO(e,t,i,a,h,g,p){function c(T){const A=T.distance,$=T.index!==t.get();g.add(A),A&&(a.duration()?e.start():(e.update(),e.render(1),e.update())),$&&(i.set(t.get()),t.set(T.index),p.emit("select"))}function S(T,A){const $=h.byDistance(T,A);c($)}function E(T,A){const $=t.clone().set(T),X=h.byIndex($.get(),A);c(X)}return{distance:S,index:E}}function MO(e,t,i,a,h,g,p,c){const S={passive:!0,capture:!0};let E=0;function P($){if(!c)return;function X(G){if(new Date().getTime()-E>10)return;p.emit("slideFocusStart"),e.scrollLeft=0;const V=i.findIndex(H=>H.includes(G));zx(V)&&(h.useDuration(0),a.index(V,0),p.emit("slideFocus"))}g.add(document,"keydown",T,!1),t.forEach((G,ne)=>{g.add(G,"focus",F=>{(ig(c)||c($,F))&&X(ne)},S)})}function T($){$.code==="Tab"&&(E=new Date().getTime())}return{init:P}}function Qh(e){let t=e;function i(){return t}function a(S){t=p(S)}function h(S){t+=p(S)}function g(S){t-=p(S)}function p(S){return zx(S)?S:S.get()}return{get:i,set:a,add:h,subtract:g}}function MP(e,t){const i=e.scroll==="x"?p:c,a=t.style;let h=null,g=!1;function p(A){return`translate3d(${A}px,0px,0px)`}function c(A){return`translate3d(0px,${A}px,0px)`}function S(A){if(g)return;const $=dO(e.direction(A));$!==h&&(a.transform=i($),h=$)}function E(A){g=!A}function P(){g||(a.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:P,to:S,toggleActive:E}}function DO(e,t,i,a,h,g,p,c,S){const P=Od(h),T=Od(h).reverse(),A=F().concat(V());function $(fe,le){return fe.reduce((we,Le)=>we-h[Le],le)}function X(fe,le){return fe.reduce((we,Le)=>$(we,le)>0?we.concat([Le]):we,[])}function G(fe){return g.map((le,we)=>({start:le-a[we]+.5+fe,end:le+t-.5+fe}))}function ne(fe,le,we){const Le=G(le);return fe.map(ze=>{const Ne=we?0:-i,De=we?i:0,Ke=we?"end":"start",nt=Le[ze][Ke];return{index:ze,loopPoint:nt,slideLocation:Qh(-1),translate:MP(e,S[ze]),target:()=>c.get()>nt?Ne:De}})}function F(){const fe=p[0],le=X(T,fe);return ne(le,i,!1)}function V(){const fe=t-p[0]-1,le=X(P,fe);return ne(le,-i,!0)}function H(){return A.every(({index:fe})=>{const le=P.filter(we=>we!==fe);return $(le,t)<=.1})}function ee(){A.forEach(fe=>{const{target:le,translate:we,slideLocation:Le}=fe,ze=le();ze!==Le.get()&&(we.to(ze),Le.set(ze))})}function ye(){A.forEach(fe=>fe.translate.clear())}return{canLoop:H,clear:ye,loop:ee,loopPoints:A}}function zO(e,t,i){let a,h=!1;function g(S){if(!i)return;function E(P){for(const T of P)if(T.type==="childList"){S.reInit(),t.emit("slidesChanged");break}}a=new MutationObserver(P=>{h||(ig(i)||i(S,P))&&E(P)}),a.observe(e,{childList:!0})}function p(){a&&a.disconnect(),h=!0}return{init:g,destroy:p}}function RO(e,t,i,a){const h={};let g=null,p=null,c,S=!1;function E(){c=new IntersectionObserver(X=>{S||(X.forEach(G=>{const ne=t.indexOf(G.target);h[ne]=G}),g=null,p=null,i.emit("slidesInView"))},{root:e.parentElement,threshold:a}),t.forEach(X=>c.observe(X))}function P(){c&&c.disconnect(),S=!0}function T(X){return Nd(h).reduce((G,ne)=>{const F=parseInt(ne),{isIntersecting:V}=h[F];return(X&&V||!X&&!V)&&G.push(F),G},[])}function A(X=!0){if(X&&g)return g;if(!X&&p)return p;const G=T(X);return X&&(g=G),X||(p=G),G}return{init:E,destroy:P,get:A}}function LO(e,t,i,a,h,g){const{measureSize:p,startEdge:c,endEdge:S}=e,E=i[0]&&h,P=X(),T=G(),A=i.map(p),$=ne();function X(){if(!E)return 0;const V=i[0];return Yn(t[c]-V[c])}function G(){if(!E)return 0;const V=g.getComputedStyle(Bs(a));return parseFloat(V.getPropertyValue(`margin-${S}`))}function ne(){return i.map((V,H,ee)=>{const ye=!H,be=Lx(ee,H);return ye?A[H]+P:be?A[H]+T:ee[H+1][c]-V[c]}).map(Yn)}return{slideSizes:A,slideSizesWithGaps:$,startGap:P,endGap:T}}function BO(e,t,i,a,h,g,p,c,S){const{startEdge:E,endEdge:P,direction:T}=e,A=zx(i);function $(F,V){return Od(F).filter(H=>H%V===0).map(H=>F.slice(H,H+V))}function X(F){return F.length?Od(F).reduce((V,H,ee)=>{const ye=Bs(V)||0,be=ye===0,fe=H===Yd(F),le=h[E]-g[ye][E],we=h[E]-g[H][P],Le=!a&&be?T(p):0,ze=!a&&fe?T(c):0,Ne=Yn(we-ze-(le+Le));return ee&&Ne>t+S&&V.push(H),fe&&V.push(F.length),V},[]).map((V,H,ee)=>{const ye=Math.max(ee[H-1]||0);return F.slice(ye,V)}):[]}function G(F){return A?$(F,i):X(F)}return{groupSlides:G}}function FO(e,t,i,a,h,g,p){const{align:c,axis:S,direction:E,startIndex:P,loop:T,duration:A,dragFree:$,dragThreshold:X,inViewThreshold:G,slidesToScroll:ne,skipSnaps:F,containScroll:V,watchResize:H,watchSlides:ee,watchDrag:ye,watchFocus:be}=g,fe=2,le=_O(),we=le.measure(t),Le=i.map(le.measure),ze=mO(S,E),Ne=ze.measureSize(we),De=vO(Ne),Ke=fO(c,Ne),nt=!T&&!!V,Ze=T||!!V,{slideSizes:je,slideSizesWithGaps:Te,startGap:$e,endGap:qe}=LO(ze,we,Le,i,Ze,h),yt=BO(ze,Ne,ne,T,we,Le,$e,qe,fe),{snaps:Dt,snapsAligned:at}=EO(ze,Ke,we,Le,yt),ft=-Bs(Dt)+Bs(Te),{snapsContained:Rt,scrollContainLimit:qt}=SO(Ne,ft,at,V,fe),St=nt?Rt:at,{limit:Et}=kO(ft,St,T),cn=AP(Yd(St),P,T),on=cn.clone(),Ut=Od(i),it=({dragHandler:hn,scrollBody:ar,scrollBounds:zn,options:{loop:We}})=>{We||zn.constrain(hn.pointerDown()),ar.seek()},Zt=({scrollBody:hn,translate:ar,location:zn,offsetLocation:We,previousLocation:Nt,scrollLooper:Pt,slideLooper:Gn,dragHandler:vr,animation:zt,eventHandler:pt,scrollBounds:Ht,options:{loop:Kt}},jt)=>{const ie=hn.settled(),O=!Ht.shouldConstrain(),j=Kt?ie:ie&&O,Z=j&&!vr.pointerDown();Z&&zt.stop();const te=zn.get()*jt+Nt.get()*(1-jt);We.set(te),Kt&&(Pt.loop(hn.direction()),Gn.loop()),ar.to(We.get()),Z&&pt.emit("settle"),j||pt.emit("scroll")},ht=pO(a,h,()=>it(tr),hn=>Zt(tr,hn)),wn=.68,Pe=St[cn.get()],Sn=Qh(Pe),ur=Qh(Pe),Lt=Qh(Pe),Xt=Qh(Pe),Pr=bO(Sn,Lt,ur,Xt,A,wn),xn=IO(T,St,ft,Et,Xt),En=AO(ht,cn,on,Pr,xn,Xt,p),li=CO(Et),er=jd(),Zr=RO(t,i,p,G),{slideRegistry:ki}=PO(nt,V,St,qt,yt,Ut),Ue=MO(e,i,ki,En,Pr,er,p,be),tr={ownerDocument:a,ownerWindow:h,eventHandler:p,containerRect:we,slideRects:Le,animation:ht,axis:ze,dragHandler:gO(ze,e,a,h,Xt,yO(ze,h),Sn,ht,En,Pr,xn,cn,p,De,$,X,F,wn,ye),eventStore:er,percentOfView:De,index:cn,indexPrevious:on,limit:Et,location:Sn,offsetLocation:Lt,previousLocation:ur,options:g,resizeHandler:xO(t,p,h,i,ze,H,le),scrollBody:Pr,scrollBounds:wO(Et,Lt,Xt,Pr,De),scrollLooper:TO(ft,Et,Lt,[Sn,Lt,ur,Xt]),scrollProgress:li,scrollSnapList:St.map(li.get),scrollSnaps:St,scrollTarget:xn,scrollTo:En,slideLooper:DO(ze,Ne,ft,je,Te,Dt,St,Lt,i),slideFocus:Ue,slidesHandler:zO(t,p,ee),slidesInView:Zr,slideIndexes:Ut,slideRegistry:ki,slidesToScroll:yt,target:Xt,translate:MP(ze,t)};return tr}function OO(){let e={},t;function i(E){t=E}function a(E){return e[E]||[]}function h(E){return a(E).forEach(P=>P(t,E)),S}function g(E,P){return e[E]=a(E).concat([P]),S}function p(E,P){return e[E]=a(E).filter(T=>T!==P),S}function c(){e={}}const S={init:i,emit:h,off:p,on:g,clear:c};return S}const NO={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function jO(e){function t(g,p){return IP(g,p||{})}function i(g){const p=g.breakpoints||{},c=Nd(p).filter(S=>e.matchMedia(S).matches).map(S=>p[S]).reduce((S,E)=>t(S,E),{});return t(g,c)}function a(g){return g.map(p=>Nd(p.breakpoints||{})).reduce((p,c)=>p.concat(c),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:i,optionsMediaQueries:a}}function VO(e){let t=[];function i(g,p){return t=p.filter(({options:c})=>e.optionsAtMedia(c).active!==!1),t.forEach(c=>c.init(g,e)),p.reduce((c,S)=>Object.assign(c,{[S.name]:S}),{})}function a(){t=t.filter(g=>g.destroy())}return{init:i,destroy:a}}function Dm(e,t,i){const a=e.ownerDocument,h=a.defaultView,g=jO(h),p=VO(g),c=jd(),S=OO(),{mergeOptions:E,optionsAtMedia:P,optionsMediaQueries:T}=g,{on:A,off:$,emit:X}=S,G=ze;let ne=!1,F,V=E(NO,Dm.globalOptions),H=E(V),ee=[],ye,be,fe;function le(){const{container:Ut,slides:it}=H;be=($v(Ut)?e.querySelector(Ut):Ut)||e.children[0];const ht=$v(it)?be.querySelectorAll(it):it;fe=[].slice.call(ht||be.children)}function we(Ut){const it=FO(e,be,fe,a,h,Ut,S);if(Ut.loop&&!it.slideLooper.canLoop()){const Zt=Object.assign({},Ut,{loop:!1});return we(Zt)}return it}function Le(Ut,it){ne||(V=E(V,Ut),H=P(V),ee=it||ee,le(),F=we(H),T([V,...ee.map(({options:Zt})=>Zt)]).forEach(Zt=>c.add(Zt,"change",ze)),H.active&&(F.translate.to(F.location.get()),F.animation.init(),F.slidesInView.init(),F.slideFocus.init(on),F.eventHandler.init(on),F.resizeHandler.init(on),F.slidesHandler.init(on),F.options.loop&&F.slideLooper.loop(),be.offsetParent&&fe.length&&F.dragHandler.init(on),ye=p.init(on,ee)))}function ze(Ut,it){const Zt=yt();Ne(),Le(E({startIndex:Zt},Ut),it),S.emit("reInit")}function Ne(){F.dragHandler.destroy(),F.eventStore.clear(),F.translate.clear(),F.slideLooper.clear(),F.resizeHandler.destroy(),F.slidesHandler.destroy(),F.slidesInView.destroy(),F.animation.destroy(),p.destroy(),c.clear()}function De(){ne||(ne=!0,c.clear(),Ne(),S.emit("destroy"),S.clear())}function Ke(Ut,it,Zt){!H.active||ne||(F.scrollBody.useBaseFriction().useDuration(it===!0?0:H.duration),F.scrollTo.index(Ut,Zt||0))}function nt(Ut){const it=F.index.add(1).get();Ke(it,Ut,-1)}function Ze(Ut){const it=F.index.add(-1).get();Ke(it,Ut,1)}function je(){return F.index.add(1).get()!==yt()}function Te(){return F.index.add(-1).get()!==yt()}function $e(){return F.scrollSnapList}function qe(){return F.scrollProgress.get(F.offsetLocation.get())}function yt(){return F.index.get()}function Dt(){return F.indexPrevious.get()}function at(){return F.slidesInView.get()}function ft(){return F.slidesInView.get(!1)}function Rt(){return ye}function qt(){return F}function St(){return e}function Et(){return be}function cn(){return fe}const on={canScrollNext:je,canScrollPrev:Te,containerNode:Et,internalEngine:qt,destroy:De,off:$,on:A,emit:X,plugins:Rt,previousScrollSnap:Dt,reInit:G,rootNode:St,scrollNext:nt,scrollPrev:Ze,scrollProgress:qe,scrollSnapList:$e,scrollTo:Ke,selectedScrollSnap:yt,slideNodes:cn,slidesInView:at,slidesNotInView:ft};return Le(t,i),setTimeout(()=>S.emit("init"),0),on}Dm.globalOptions=void 0;function Bx(e={},t=[]){const i=K.useRef(e),a=K.useRef(t),[h,g]=K.useState(),[p,c]=K.useState(),S=K.useCallback(()=>{h&&h.reInit(i.current,a.current)},[h]);return K.useEffect(()=>{Dx(i.current,e)||(i.current=e,S())},[e,S]),K.useEffect(()=>{uO(a.current,t)||(a.current=t,S())},[t,S]),K.useEffect(()=>{if(cO()&&p){Dm.globalOptions=Bx.globalOptions;const E=Dm(p,i.current,a.current);return g(E),()=>E.destroy()}else g(void 0)},[p,g]),[c,h]}Bx.globalOptions=void 0;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$O=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,a)=>a?a.toUpperCase():i.toLowerCase()),xS=e=>{const t=$O(e);return t.charAt(0).toUpperCase()+t.slice(1)},DP=(...e)=>e.filter((t,i,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===i).join(" ").trim(),HO=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=K.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:h="",children:g,iconNode:p,...c},S)=>K.createElement("svg",{ref:S,...GO,width:t,height:t,stroke:e,strokeWidth:a?Number(i)*24/Number(t):i,className:DP("lucide",h),...!g&&!HO(c)&&{"aria-hidden":"true"},...c},[...p.map(([E,P])=>K.createElement(E,P)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=(e,t)=>{const i=K.forwardRef(({className:a,...h},g)=>K.createElement(WO,{ref:g,iconNode:t,className:DP(`lucide-${UO(xS(e))}`,`lucide-${e}`,a),...h}));return i.displayName=xS(e),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ZO=Ro("calendar",qO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],KO=Ro("chevron-down",XO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zP=Ro("chevron-left",YO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],RP=Ro("chevron-right",JO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],eN=Ro("hammer",QO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],nN=Ro("navigation",tN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],iN=Ro("pen-tool",rN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],oN=Ro("share-2",sN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fx=Ro("x",aN),LP=K.createContext(null);function sg(){const e=K.useContext(LP);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const BP=K.forwardRef(({orientation:e="horizontal",opts:t,setApi:i,plugins:a,className:h,children:g,...p},c)=>{const[S,E]=Bx({...t,axis:e==="horizontal"?"x":"y"},a),[P,T]=K.useState(0),[A,$]=K.useState([]),X=K.useCallback(V=>{V&&T(V.selectedScrollSnap())},[]),G=K.useCallback(()=>{E&&E.scrollPrev()},[E]),ne=K.useCallback(()=>{E&&E.scrollNext()},[E]),F=K.useCallback(V=>{E&&E.scrollTo(V)},[E]);return K.useEffect(()=>{!E||!i||i(E)},[E,i]),K.useEffect(()=>{if(E)return $(E.scrollSnapList()),X(E),E.on("reInit",X),E.on("select",X),()=>{E==null||E.off("select",X)}},[E,X]),re.jsx(LP.Provider,{value:{carouselRef:S,api:E,opts:t,orientation:e,scrollPrev:G,scrollNext:ne,scrollTo:F,selectedIndex:P,scrollSnaps:A},children:re.jsx("div",{ref:c,className:fn("relative",h),role:"region","aria-roledescription":"carousel",...p,children:g})})});BP.displayName="Carousel";const FP=K.forwardRef(({className:e,...t},i)=>{const{carouselRef:a,orientation:h}=sg();return re.jsx("div",{ref:a,className:"overflow-hidden",children:re.jsx("div",{ref:i,className:fn("flex",h==="horizontal"?"":"flex-col",e),...t})})});FP.displayName="CarouselContent";const OP=K.forwardRef(({className:e,...t},i)=>re.jsx("div",{ref:i,role:"group","aria-roledescription":"slide",className:fn("min-w-0 shrink-0 grow-0 basis-full",e),...t}));OP.displayName="CarouselItem";const lN=K.forwardRef(({className:e,...t},i)=>{const{scrollPrev:a,api:h}=sg(),g=p=>{p.preventDefault(),p.stopPropagation(),a()};return re.jsx("button",{ref:i,type:"button",className:fn("absolute left-3 top-1/2 -translate-y-1/2 z-20","h-10 w-10 rounded-full","bg-white/80 hover:bg-white","flex items-center justify-center","shadow-lg border-0","transition-colors cursor-pointer","focus:outline-none focus-visible:ring-2 focus-visible:ring-[#d4af37]",e),onClick:g,disabled:!h,...t,children:re.jsx(zP,{className:"h-5 w-5 text-neutral-700"})})});lN.displayName="CarouselPrevious";const cN=K.forwardRef(({className:e,...t},i)=>{const{scrollNext:a,api:h}=sg(),g=p=>{p.preventDefault(),p.stopPropagation(),a()};return re.jsx("button",{ref:i,type:"button",className:fn("absolute right-3 top-1/2 -translate-y-1/2 z-20","h-10 w-10 rounded-full","bg-white/80 hover:bg-white","flex items-center justify-center","shadow-lg border-0","transition-colors cursor-pointer","focus:outline-none focus-visible:ring-2 focus-visible:ring-[#d4af37]",e),onClick:g,disabled:!h,...t,children:re.jsx(RP,{className:"h-5 w-5 text-neutral-700"})})});cN.displayName="CarouselNext";const uN=K.forwardRef(({className:e,...t},i)=>{const{scrollTo:a,selectedIndex:h,scrollSnaps:g}=sg();return g.length<=1?null:re.jsx("div",{ref:i,className:fn("flex justify-center gap-2",e),...t,children:g.map((p,c)=>re.jsx("button",{type:"button",className:fn("h-2 rounded-full transition-all",c===h?"bg-white w-5":"bg-white/50 hover:bg-white/75 w-2"),onClick:()=>a(c),"aria-label":`Go to slide ${c+1}`},c))})});uN.displayName="CarouselDots";const hN=({api:e})=>e?re.jsxs(re.Fragment,{children:[re.jsx("button",{type:"button",onClick:()=>e.scrollPrev(),className:"absolute left-3 top-1/2 -translate-y-1/2 z-20 h-10 w-10 rounded-full bg-white/90 hover:bg-white flex items-center justify-center shadow-lg",style:{transform:"translateY(-50%)"},children:re.jsx(zP,{className:"h-5 w-5 text-neutral-700"})}),re.jsx("button",{type:"button",onClick:()=>e.scrollNext(),className:"absolute right-3 top-1/2 -translate-y-1/2 z-20 h-10 w-10 rounded-full bg-white/90 hover:bg-white flex items-center justify-center shadow-lg",style:{transform:"translateY(-50%)"},children:re.jsx(RP,{className:"h-5 w-5 text-neutral-700"})})]}):null,dN=({images:e,title:t,onClose:i})=>{const[a,h]=K.useState(null),[g,p]=K.useState(0);return K.useEffect(()=>{a&&(p(a.selectedScrollSnap()),a.on("select",()=>{p(a.selectedScrollSnap())}))},[a]),re.jsxs("div",{className:"relative w-full",children:[re.jsx("button",{type:"button",className:"absolute top-3 right-3 z-[60] h-9 w-9 rounded-full bg-black/40 backdrop-blur-sm text-white hover:bg-black/60 flex items-center justify-center",onClick:i,children:re.jsx(Fx,{className:"h-5 w-5"})}),re.jsx(BP,{className:"w-full",opts:{loop:e.length>1},setApi:h,children:re.jsx(FP,{className:"m-0",children:e.map((c,S)=>re.jsx(OP,{className:"p-0",children:re.jsx("div",{className:"w-full bg-muted/20 h-[45vh] md:h-[45vh]",children:re.jsx("img",{src:nB(c),alt:`${t} - Image ${S+1}`,className:"w-full h-full object-cover"})})},S))})}),e.length>1&&re.jsxs(re.Fragment,{children:[re.jsx(hN,{api:a}),re.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-20 flex gap-2",children:e.map((c,S)=>re.jsx("button",{type:"button",className:`h-2 rounded-full transition-all ${S===g?"bg-white w-5":"bg-white/50 w-2"}`,onClick:()=>a==null?void 0:a.scrollTo(S)},S))})]})]})},bS=({selectedRecord:e,onClose:t,scrollAreaRef:i,checkScroll:a})=>{const h=e.images&&Array.isArray(e.images)?e.images:[e.image],g=fs(e),p=`https://www.google.com/maps/dir/?api=1&destination=${e.location.center[1]},${e.location.center[0]}&travelmode=walking`,c=[{icon:ZO,label:"Year",value:e.year},{icon:iN,label:"Architect",value:e.architect||"Unknown"},{icon:eN,label:"Builder",value:e.builder||"Unknown"}],S=async()=>{var T,A;const E=`${window.location.origin}${window.location.pathname}?site=${encodeURIComponent(e.id)}`,P={title:`${e.title} - Kala Ghoda Heritage Map`,text:e.description,url:E};if(navigator.share&&((T=navigator.canShare)!=null&&T.call(navigator,P)))try{await navigator.share(P);return}catch($){if($.name==="AbortError")return}try{await((A=navigator.clipboard)==null?void 0:A.writeText(E)),alert("Link copied to clipboard!")}catch{prompt("Copy this link:",E)}};return re.jsx("div",{ref:i,className:"flex-1 overflow-y-auto overflow-x-hidden",onScroll:a,children:re.jsxs("div",{"data-vaul-no-drag":!0,children:[re.jsx(dN,{images:h,title:e.title,onClose:t}),re.jsxs("div",{className:"p-6 space-y-5",children:[re.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(E=>re.jsx(Kp,{className:"px-3 py-1 text-xs font-bold uppercase tracking-wide text-white border-0 shadow-sm",style:{backgroundColor:mr.colors[E]||"#333"},children:E},E))}),re.jsx("h2",{className:"text-2xl font-bold text-foreground tracking-tight",style:{fontFamily:"'Labrada', serif"},children:e.title}),re.jsx("p",{className:"text-muted-foreground leading-relaxed text-[15px]",children:e.description}),re.jsx(Qm,{className:"bg-muted/30 backdrop-blur-sm border-border/50 shadow-none",children:re.jsx(eg,{className:"p-4 space-y-3",children:c.map(E=>re.jsxs("div",{className:"flex items-center gap-3",children:[re.jsx(E.icon,{className:"h-4 w-4 text-primary"}),re.jsx("span",{className:"text-sm text-muted-foreground w-20 font-medium",children:E.label}),re.jsx("span",{className:"text-sm font-semibold text-foreground",children:E.value})]},E.label))})}),re.jsxs("div",{className:"flex gap-3 pt-2",children:[re.jsx(zs,{asChild:!0,className:"flex-1 bg-[#2980b9] hover:bg-[#2471a3] text-white shadow-md transition-all active:scale-95",children:re.jsxs("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2",children:[re.jsx(nN,{className:"h-4 w-4"}),re.jsx("span",{className:"font-semibold",children:"Navigate"})]})}),re.jsxs(zs,{variant:"outline",className:"flex-1 border-border/50 bg-background/50 hover:bg-accent transition-all active:scale-95",onClick:S,children:[re.jsx(oN,{className:"h-4 w-4 mr-2"}),re.jsx("span",{className:"font-semibold",children:"Share"})]})]})]})]})})},fN=({selectedRecord:e,onClose:t})=>{const i=K.useRef(null),[a,h]=K.useState(!1),g=window.innerWidth<=768;K.useEffect(()=>{const A=$=>{$.key==="Escape"&&t()};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[t]);const p=()=>{if(i.current){const{scrollTop:A,scrollHeight:$,clientHeight:X}=i.current;h(A+X<$-20)}};K.useEffect(()=>{const A=()=>{if(i.current){const{scrollTop:$,scrollHeight:X,clientHeight:G}=i.current;h(X>G+10&&$+G<X-10)}};if(i.current){i.current.scrollTop=0;const $=new ResizeObserver(A);return $.observe(i.current),i.current.firstElementChild&&$.observe(i.current.firstElementChild),A(),setTimeout(A,200),()=>$.disconnect()}},[e]);const c=()=>{var A;(A=i.current)==null||A.scrollBy({top:300,behavior:"smooth"})},[S,E]=K.useState(!0);K.useEffect(()=>{g&&E(!0)},[e,g]);const P=()=>{E(!1),setTimeout(t,300)},T=A=>{E(A),A||setTimeout(t,300)};return g?re.jsx(CP,{open:S,onOpenChange:T,modal:!1,children:re.jsxs(PP,{className:"h-[75vh] max-h-[75vh] flex flex-col bg-background/80 backdrop-blur-xl border-t border-border/50",showOverlay:!1,children:[re.jsx("div",{className:"absolute top-0 left-0 right-0 h-12 z-50 flex justify-center pt-3 cursor-grab active:cursor-grabbing",children:re.jsx("div",{className:"w-12 h-1.5 bg-foreground/20 rounded-full shadow-sm"})}),re.jsx(bS,{selectedRecord:e,onClose:P,scrollAreaRef:i,checkScroll:p}),a&&re.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center pointer-events-none z-50",children:re.jsx(zs,{variant:"secondary",size:"icon",className:"h-10 w-10 rounded-full shadow-lg bg-background/90 backdrop-blur hover:bg-background pointer-events-auto border border-border/50",onClick:c,children:re.jsx(Bi.div,{animate:{y:[0,4,0]},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},children:re.jsx(KO,{className:"h-5 w-5 text-muted-foreground"})})})})]})}):re.jsxs(re.Fragment,{children:[re.jsx(Bi.div,{className:"fixed inset-0 bg-black/20 z-[199] backdrop-blur-[2px]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),re.jsx(Bi.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:500,damping:30,mass:.8},className:"fixed right-0 top-0 h-full w-[400px] bg-background/70 backdrop-blur-xl border-l border-border/50 shadow-2xl z-[200] flex flex-col rounded-l-2xl overflow-hidden",children:re.jsx(bS,{selectedRecord:e,onClose:t,scrollAreaRef:i,checkScroll:p})})]})};var NP={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})(JA,function(){var i={},a={};function h(p,c,S){if(a[p]=S,p==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",P={};return a.shared(P),a.index(i,P),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),i}}h("shared",["exports"],function(p){function c(s,r,o,u){return new(o||(o=Promise))(function(m,v){function x(M){try{k(u.next(M))}catch(D){v(D)}}function b(M){try{k(u.throw(M))}catch(D){v(D)}}function k(M){var D;M.done?m(M.value):(D=M.value,D instanceof o?D:new o(function(R){R(D)})).then(x,b)}k((u=u.apply(s,r||[])).next())})}function S(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var E=P;function P(s,r){this.x=s,this.y=r}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,r){return this.clone()._rotateAround(s,r)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var r=s.x-this.x,o=s.y-this.y;return r*r+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,r){return Math.atan2(this.x*r-this.y*s,this.x*s+this.y*r)},_matMult:function(s){var r=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=r,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var r=Math.cos(s),o=Math.sin(s),u=o*this.x+r*this.y;return this.x=r*this.x-o*this.y,this.y=u,this},_rotateAround:function(s,r){var o=Math.cos(s),u=Math.sin(s),m=r.y+u*(this.x-r.x)+o*(this.y-r.y);return this.x=r.x+o*(this.x-r.x)-u*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(s){return s instanceof P?s:Array.isArray(s)?new P(s[0],s[1]):s};var T=S(E),A=$;function $(s,r,o,u){this.cx=3*s,this.bx=3*(o-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=r,this.p2x=o,this.p2y=u}$.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,r){if(r===void 0&&(r=1e-6),s<0)return 0;if(s>1)return 1;for(var o=s,u=0;u<8;u++){var m=this.sampleCurveX(o)-s;if(Math.abs(m)<r)return o;var v=this.sampleCurveDerivativeX(o);if(Math.abs(v)<1e-6)break;o-=m/v}var x=0,b=1;for(o=s,u=0;u<20&&(m=this.sampleCurveX(o),!(Math.abs(m-s)<r));u++)s>m?x=o:b=o,o=.5*(b-x)+x;return o},solve:function(s,r){return this.sampleCurveY(this.solveCurveX(s,r))}};var X=S(A);let G,ne;function F(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function V(){if(ne==null&&(ne=!1,F())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let u=0;u<5*5;u++){const m=4*u;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(u%5,Math.floor(u/5),1,1)}const o=r.getImageData(0,0,5,5).data;for(let u=0;u<5*5*4;u++)if(u%4!=3&&o[u]!==u){ne=!0;break}}}return ne||!1}function H(s,r,o,u){const m=new X(s,r,o,u);return v=>m.solve(v)}const ee=H(.25,.1,.25,1);function ye(s,r,o){return Math.min(o,Math.max(r,s))}function be(s,r,o){const u=o-r,m=((s-r)%u+u)%u+r;return m===r?o:m}function fe(s,...r){for(const o of r)for(const u in o)s[u]=o[u];return s}let le=1;function we(s,r,o){const u={};for(const m in s)u[m]=r.call(this,s[m],m,s);return u}function Le(s,r,o){const u={};for(const m in s)r.call(this,s[m],m,s)&&(u[m]=s[m]);return u}function ze(s){return Array.isArray(s)?s.map(ze):typeof s=="object"&&s?we(s,ze):s}const Ne={};function De(s){Ne[s]||(typeof console<"u"&&console.warn(s),Ne[s]=!0)}function Ke(s,r,o){return(o.y-s.y)*(r.x-s.x)>(r.y-s.y)*(o.x-s.x)}function nt(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Ze=null;function je(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function $e(s,r,o,u,m){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(s,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const b=x.startsWith("BGR"),k=new Uint8ClampedArray(u*m*4);if(yield v.copyTo(k,function(M,D,R,N,U){const q=4*Math.max(-D,0),Y=(Math.max(0,R)-R)*N*4+q,oe=4*N,ce=Math.max(0,D),Ce=Math.max(0,R);return{rect:{x:ce,y:Ce,width:Math.min(M.width,D+N)-ce,height:Math.min(M.height,R+U)-Ce},layout:[{offset:Y,stride:oe}]}}(s,r,o,u,m)),b)for(let M=0;M<k.length;M+=4){const D=k[M];k[M]=k[M+2],k[M+2]=D}return k}finally{v.close()}})}let qe,yt;const Dt="AbortError";function at(){return new Error(Dt)}const ft={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Rt(s){return ft.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const qt="global-dispatcher";class St extends Error{constructor(r,o,u,m){super(`AJAXError: ${o} (${r}): ${u}`),this.status=r,this.statusText=o,this.url=u,this.body=m}}const Et=()=>nt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,cn=function(s,r){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const u=Rt(s.url);if(u)return u(s,r);if(nt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:qt},r)}if(!(/^file:/.test(o=s.url)||/^file:/.test(Et())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(u,m){return c(this,void 0,void 0,function*(){const v=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:Et(),signal:m.signal});u.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const M=yield x.blob();throw new St(x.status,x.statusText,u.url,M)}let b;b=u.type==="arrayBuffer"||u.type==="image"?x.arrayBuffer():u.type==="json"?x.json():x.text();const k=yield b;if(m.signal.aborted)throw at();return{data:k,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(s,r);if(nt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:qt},r)}var o;return function(u,m){return new Promise((v,x)=>{var b;const k=new XMLHttpRequest;k.open(u.method||"GET",u.url,!0),u.type!=="arrayBuffer"&&u.type!=="image"||(k.responseType="arraybuffer");for(const M in u.headers)k.setRequestHeader(M,u.headers[M]);u.type==="json"&&(k.responseType="text",!((b=u.headers)===null||b===void 0)&&b.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=u.credentials==="include",k.onerror=()=>{x(new Error(k.statusText))},k.onload=()=>{if(!m.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let M=k.response;if(u.type==="json")try{M=JSON.parse(k.response)}catch(D){return void x(D)}v({data:M,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const M=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});x(new St(k.status,k.statusText,u.url,M))}},m.signal.addEventListener("abort",()=>{k.abort(),x(at())}),k.send(u.body)})}(s,r)};function on(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const r=new URL(s),o=window.location;return r.protocol===o.protocol&&r.host===o.host}function Ut(s,r,o){o[s]&&o[s].indexOf(r)!==-1||(o[s]=o[s]||[],o[s].push(r))}function it(s,r,o){if(o&&o[s]){const u=o[s].indexOf(r);u!==-1&&o[s].splice(u,1)}}class Zt{constructor(r,o={}){fe(this,o),this.type=r}}class ht extends Zt{constructor(r,o={}){super("error",fe({error:r},o))}}class wn{on(r,o){return this._listeners=this._listeners||{},Ut(r,o,this._listeners),this}off(r,o){return it(r,o,this._listeners),it(r,o,this._oneTimeListeners),this}once(r,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Ut(r,o,this._oneTimeListeners),this):new Promise(u=>this.once(r,u))}fire(r,o){typeof r=="string"&&(r=new Zt(r,o||{}));const u=r.type;if(this.listens(u)){r.target=this;const m=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const b of m)b.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const b of v)it(u,b,this._oneTimeListeners),b.call(this,r);const x=this._eventedParent;x&&(fe(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof ht&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,o){return this._eventedParent=r,this._eventedParentData=o,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Sn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ur(s,r){const o={};for(const u in s)u!=="ref"&&(o[u]=s[u]);return Sn.forEach(u=>{u in r&&(o[u]=r[u])}),o}function Lt(s,r){if(Array.isArray(s)){if(!Array.isArray(r)||s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(!Lt(s[o],r[o]))return!1;return!0}if(typeof s=="object"&&s!==null&&r!==null){if(typeof r!="object"||Object.keys(s).length!==Object.keys(r).length)return!1;for(const o in s)if(!Lt(s[o],r[o]))return!1;return!0}return s===r}function Xt(s,r){s.push(r)}function Pr(s,r,o){Xt(o,{command:"addSource",args:[s,r[s]]})}function xn(s,r,o){Xt(r,{command:"removeSource",args:[s]}),o[s]=!0}function En(s,r,o,u){xn(s,o,u),Pr(s,r,o)}function li(s,r,o){let u;for(u in s[o])if(Object.prototype.hasOwnProperty.call(s[o],u)&&u!=="data"&&!Lt(s[o][u],r[o][u]))return!1;for(u in r[o])if(Object.prototype.hasOwnProperty.call(r[o],u)&&u!=="data"&&!Lt(s[o][u],r[o][u]))return!1;return!0}function er(s,r,o,u,m,v){s=s||{},r=r||{};for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&(Lt(s[x],r[x])||o.push({command:v,args:[u,x,r[x],m]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(Lt(s[x],r[x])||o.push({command:v,args:[u,x,r[x],m]}))}function Zr(s){return s.id}function ki(s,r){return s[r.id]=r,s}class Ue{constructor(r,o,u,m){this.message=(r?`${r}: `:"")+u,m&&(this.identifier=m),o!=null&&o.__line__&&(this.line=o.__line__)}}function tr(s,...r){for(const o of r)for(const u in o)s[u]=o[u];return s}class hn extends Error{constructor(r,o){super(o),this.message=o,this.key=r}}class ar{constructor(r,o=[]){this.parent=r,this.bindings={};for(const[u,m]of o)this.bindings[u]=m}concat(r){return new ar(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const zn={kind:"null"},We={kind:"number"},Nt={kind:"string"},Pt={kind:"boolean"},Gn={kind:"color"},vr={kind:"object"},zt={kind:"value"},pt={kind:"collator"},Ht={kind:"formatted"},Kt={kind:"padding"},jt={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function O(s,r){return{kind:"array",itemType:s,N:r}}function j(s){if(s.kind==="array"){const r=j(s.itemType);return typeof s.N=="number"?`array<${r}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${r}>`}return s.kind}const Z=[zn,We,Nt,Pt,Gn,Ht,vr,O(zt),Kt,jt,ie];function te(s,r){if(r.kind==="error")return null;if(s.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!te(s.itemType,r.itemType))&&(typeof s.N!="number"||s.N===r.N))return null}else{if(s.kind===r.kind)return null;if(s.kind==="value"){for(const o of Z)if(!te(o,r))return null}}return`Expected ${j(s)} but found ${j(r)} instead.`}function pe(s,r){return r.some(o=>o.kind===s.kind)}function me(s,r){return r.some(o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s)}function ve(s,r){return s.kind==="array"&&r.kind==="array"?s.itemType.kind===r.itemType.kind&&typeof s.N=="number":s.kind===r.kind}const he=.96422,Ie=.82521,Be=4/29,Ae=6/29,He=3*Ae*Ae,xt=Ae*Ae*Ae,It=Math.PI/180,nn=180/Math.PI;function Vt(s){return(s%=360)<0&&(s+=360),s}function rn([s,r,o,u]){let m,v;const x=nr((.2225045*(s=Yt(s))+.7168786*(r=Yt(r))+.0606169*(o=Yt(o)))/1);s===r&&r===o?m=v=x:(m=nr((.4360747*s+.3850649*r+.1430804*o)/he),v=nr((.0139322*s+.0971045*r+.7141733*o)/Ie));const b=116*x-16;return[b<0?0:b,500*(m-x),200*(x-v),u]}function Yt(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function nr(s){return s>xt?Math.pow(s,1/3):s/He+Be}function Bn([s,r,o,u]){let m=(s+16)/116,v=isNaN(r)?m:m+r/500,x=isNaN(o)?m:m-o/200;return m=1*mn(m),v=he*mn(v),x=Ie*mn(x),[Gt(3.1338561*v-1.6168667*m-.4906146*x),Gt(-.9787684*v+1.9161415*m+.033454*x),Gt(.0719453*v-.2289914*m+1.4052427*x),u]}function Gt(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function mn(s){return s>Ae?s*s*s:He*(s-Be)}function Rn(s){return parseInt(s.padEnd(2,s),16)/255}function hr(s,r){return xr(r?s/100:s,0,1)}function xr(s,r,o){return Math.min(Math.max(r,s),o)}function Nr(s){return!s.some(Number.isNaN)}const Lo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class gn{constructor(r,o,u,m=1,v=!0){this.r=r,this.g=o,this.b=u,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,o,u,m]))}static parse(r){if(r instanceof gn)return r;if(typeof r!="string")return;const o=function(u){if((u=u.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Lo[u];if(m){const[x,b,k]=m;return[x/255,b/255,k/255,1]}if(u.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(u)){const x=u.length<6?1:2;let b=1;return[Rn(u.slice(b,b+=x)),Rn(u.slice(b,b+=x)),Rn(u.slice(b,b+=x)),Rn(u.slice(b,b+x)||"ff")]}if(u.startsWith("rgb")){const x=u.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,k,M,D,R,N,U,q,Y,oe,ce,Ce]=x,_e=[D||" ",U||" ",oe].join("");if(_e==="  "||_e==="  /"||_e===",,"||_e===",,,"){const ke=[M,N,Y].join(""),Re=ke==="%%%"?100:ke===""?255:0;if(Re){const Ve=[xr(+k/Re,0,1),xr(+R/Re,0,1),xr(+q/Re,0,1),ce?hr(+ce,Ce):1];if(Nr(Ve))return Ve}}return}}const v=u.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,b,k,M,D,R,N,U,q]=v,Y=[k||" ",D||" ",N].join("");if(Y==="  "||Y==="  /"||Y===",,"||Y===",,,"){const oe=[+b,xr(+M,0,100),xr(+R,0,100),U?hr(+U,q):1];if(Nr(oe))return function([ce,Ce,_e,ke]){function Re(Ve){const ot=(Ve+ce/30)%12,At=Ce*Math.min(_e,1-_e);return _e-At*Math.max(-1,Math.min(ot-3,9-ot,1))}return ce=Vt(ce),Ce/=100,_e/=100,[Re(0),Re(8),Re(4),ke]}(oe)}}}(r);return o?new gn(...o,!1):void 0}get rgb(){const{r,g:o,b:u,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[r/v,o/v,u/v,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[o,u,m,v]=rn(r),x=Math.sqrt(u*u+m*m);return[Math.round(1e4*x)?Vt(Math.atan2(m,u)*nn):NaN,x,o,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",rn(this.rgb))}overwriteGetter(r,o){return Object.defineProperty(this,r,{value:o}),o}toString(){const[r,o,u,m]=this.rgb;return`rgba(${[r,o,u].map(v=>Math.round(255*v)).join(",")},${m})`}}gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1);class Eu{constructor(r,o,u){this.sensitivity=r?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,o){return this.collator.compare(r,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pu{constructor(r,o,u,m,v){this.text=r,this.image=o,this.scale=u,this.fontStack=m,this.textColor=v}}class ci{constructor(r){this.sections=r}static fromString(r){return new ci([new Pu(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof ci?r:ci.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class ui{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof ui)return r;if(typeof r=="number")return new ui([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const o of r)if(typeof o!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new ui(r)}}toString(){return JSON.stringify(this.values)}}const ag=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ti{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ti)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let o=0;o<r.length;o+=2){const u=r[o],m=r[o+1];if(typeof u!="string"||!ag.has(u)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Ti(r)}}toString(){return JSON.stringify(this.values)}}class hi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new hi({name:r,available:!1}):null}}function Bo(s,r,o,u){return typeof s=="number"&&s>=0&&s<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof o=="number"&&o>=0&&o<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[s,r,o,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[s,r,o,u]:[s,r,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function no(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof gn||s instanceof Eu||s instanceof ci||s instanceof ui||s instanceof Ti||s instanceof hi)return!0;if(Array.isArray(s)){for(const r of s)if(!no(r))return!1;return!0}if(typeof s=="object"){for(const r in s)if(!no(s[r]))return!1;return!0}return!1}function rr(s){if(s===null)return zn;if(typeof s=="string")return Nt;if(typeof s=="boolean")return Pt;if(typeof s=="number")return We;if(s instanceof gn)return Gn;if(s instanceof Eu)return pt;if(s instanceof ci)return Ht;if(s instanceof ui)return Kt;if(s instanceof Ti)return ie;if(s instanceof hi)return jt;if(Array.isArray(s)){const r=s.length;let o;for(const u of s){const m=rr(u);if(o){if(o===m)continue;o=zt;break}o=m}return O(o||zt,r)}return vr}function Va(s){const r=typeof s;return s===null?"":r==="string"||r==="number"||r==="boolean"?String(s):s instanceof gn||s instanceof ci||s instanceof ui||s instanceof Ti||s instanceof hi?s.toString():JSON.stringify(s)}class Ui{constructor(r,o){this.type=r,this.value=o}static parse(r,o){if(r.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!no(r[1]))return o.error("invalid value");const u=r[1];let m=rr(u);const v=o.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new Ui(m,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Wn{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Fl={string:Nt,number:We,boolean:Pt,object:vr};class $i{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");let u,m=1;const v=r[0];if(v==="array"){let b,k;if(r.length>2){const M=r[1];if(typeof M!="string"||!(M in Fl)||M==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);b=Fl[M],m++}else b=zt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return o.error('The length argument to "array" must be a positive integer literal',2);k=r[2],m++}u=O(b,k)}else{if(!Fl[v])throw new Error(`Types doesn't contain name = ${v}`);u=Fl[v]}const x=[];for(;m<r.length;m++){const b=o.parse(r[m],m,zt);if(!b)return null;x.push(b)}return new $i(u,x)}evaluate(r){for(let o=0;o<this.args.length;o++){const u=this.args[o].evaluate(r);if(!te(this.type,rr(u)))return u;if(o===this.args.length-1)throw new Wn(`Expected value to be of type ${j(this.type)}, but found ${j(rr(u))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Iu={"to-boolean":Pt,"to-color":Gn,"to-number":We,"to-string":Nt};class Hi{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const u=r[0];if(!Iu[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&r.length!==2)return o.error("Expected one argument.");const m=Iu[u],v=[];for(let x=1;x<r.length;x++){const b=o.parse(r[x],x,zt);if(!b)return null;v.push(b)}return new Hi(m,v)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let o,u;for(const m of this.args){if(o=m.evaluate(r),u=null,o instanceof gn)return o;if(typeof o=="string"){const v=r.parseColor(o);if(v)return v}else if(Array.isArray(o)&&(u=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Bo(o[0],o[1],o[2],o[3]),!u))return new gn(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Wn(u||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const u of this.args){o=u.evaluate(r);const m=ui.parse(o);if(m)return m}throw new Wn(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const u of this.args){o=u.evaluate(r);const m=Ti.parse(o);if(m)return m}throw new Wn(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const u of this.args){if(o=u.evaluate(r),o===null)return 0;const m=Number(o);if(!isNaN(m))return m}throw new Wn(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return ci.fromString(Va(this.args[0].evaluate(r)));case"resolvedImage":return hi.fromString(Va(this.args[0].evaluate(r)));default:return Va(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const lg=["Unknown","Point","LineString","Polygon"];class Ol{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?lg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let o=this._parseColorCache[r];return o||(o=this._parseColorCache[r]=gn.parse(r)),o}}class ro{constructor(r,o,u=[],m,v=new ar,x=[]){this.registry=r,this.path=u,this.key=u.map(b=>`[${b}]`).join(""),this.scope=v,this.errors=x,this.expectedType=m,this._isConstant=o}parse(r,o,u,m,v={}){return o?this.concat(o,u,m)._parse(r,v):this._parse(r,v)}_parse(r,o){function u(m,v,x){return x==="assert"?new $i(v,[m]):x==="coerce"?new Hi(v,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(r,this);if(!x)return null;if(this.expectedType){const b=this.expectedType,k=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||k.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string")if(b.kind!=="padding"||k.kind!=="value"&&k.kind!=="number"&&k.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||k.kind!=="value"&&k.kind!=="array"){if(this.checkSubtype(b,k))return null}else x=u(x,b,o.typeAnnotation||"coerce");else x=u(x,b,o.typeAnnotation||"coerce");else x=u(x,b,o.typeAnnotation||"coerce");else x=u(x,b,o.typeAnnotation||"assert")}if(!(x instanceof Ui)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const b=new Ol;try{x=new Ui(x.type,x.evaluate(b))}catch(k){return this.error(k.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,o,u){const m=typeof r=="number"?this.path.concat(r):this.path,v=u?this.scope.concat(u):this.scope;return new ro(this.registry,this._isConstant,m,o||null,v,this.errors)}error(r,...o){const u=`${this.key}${o.map(m=>`[${m}]`).join("")}`;this.errors.push(new hn(u,r))}checkSubtype(r,o){const u=te(r,o);return u&&this.error(u),u}}class Ns{constructor(r,o){this.type=o.type,this.bindings=[].concat(r),this.result=o}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const o of this.bindings)r(o[1]);r(this.result)}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const u=[];for(let v=1;v<r.length-1;v+=2){const x=r[v];if(typeof x!="string")return o.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return o.error("Variable names must contain only alphanumeric characters or '_'.",v);const b=o.parse(r[v+1],v+1);if(!b)return null;u.push([x,b])}const m=o.parse(r[r.length-1],r.length-1,o.expectedType,u);return m?new Ns(u,m):null}outputDefined(){return this.result.outputDefined()}}class un{constructor(r,o){this.type=o.type,this.name=r,this.boundExpression=o}static parse(r,o){if(r.length!==2||typeof r[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const u=r[1];return o.scope.has(u)?new un(u,o.scope.get(u)):o.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Au{constructor(r,o,u){this.type=r,this.index=o,this.input=u}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=o.parse(r[1],1,We),m=o.parse(r[2],2,O(o.expectedType||zt));return u&&m?new Au(m.type.itemType,u,m):null}evaluate(r){const o=this.index.evaluate(r),u=this.input.evaluate(r);if(o<0)throw new Wn(`Array index out of bounds: ${o} < 0.`);if(o>=u.length)throw new Wn(`Array index out of bounds: ${o} > ${u.length-1}.`);if(o!==Math.floor(o))throw new Wn(`Array index must be an integer, but found ${o} instead.`);return u[o]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Mu{constructor(r,o){this.type=Pt,this.needle=r,this.haystack=o}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=o.parse(r[1],1,zt),m=o.parse(r[2],2,zt);return u&&m?pe(u.type,[Pt,Nt,We,zn,zt])?new Mu(u,m):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(u.type)} instead`):null}evaluate(r){const o=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!u)return!1;if(!me(o,["boolean","string","number","null"]))throw new Wn(`Expected first argument to be of type boolean, string, number or null, but found ${j(rr(o))} instead.`);if(!me(u,["string","array"]))throw new Wn(`Expected second argument to be of type array or string, but found ${j(rr(u))} instead.`);return u.indexOf(o)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Fo{constructor(r,o,u){this.type=We,this.needle=r,this.haystack=o,this.fromIndex=u}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=o.parse(r[1],1,zt),m=o.parse(r[2],2,zt);if(!u||!m)return null;if(!pe(u.type,[Pt,Nt,We,zn,zt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(u.type)} instead`);if(r.length===4){const v=o.parse(r[3],3,We);return v?new Fo(u,m,v):null}return new Fo(u,m)}evaluate(r){const o=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!me(o,["boolean","string","number","null"]))throw new Wn(`Expected first argument to be of type boolean, string, number or null, but found ${j(rr(o))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(r)),me(u,["string"])){const v=u.indexOf(o,m);return v===-1?-1:[...u.slice(0,v)].length}if(me(u,["array"]))return u.indexOf(o,m);throw new Wn(`Expected second argument to be of type array or string, but found ${j(rr(u))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Du{constructor(r,o,u,m,v,x){this.inputType=r,this.type=o,this.input=u,this.cases=m,this.outputs=v,this.otherwise=x}static parse(r,o){if(r.length<5)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return o.error("Expected an even number of arguments.");let u,m;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);const v={},x=[];for(let M=2;M<r.length-1;M+=2){let D=r[M];const R=r[M+1];Array.isArray(D)||(D=[D]);const N=o.concat(M);if(D.length===0)return N.error("Expected at least one branch label.");for(const q of D){if(typeof q!="number"&&typeof q!="string")return N.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return N.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return N.error("Numeric branch labels must be integer values.");if(u){if(N.checkSubtype(u,rr(q)))return null}else u=rr(q);if(v[String(q)]!==void 0)return N.error("Branch labels must be unique.");v[String(q)]=x.length}const U=o.parse(R,M,m);if(!U)return null;m=m||U.type,x.push(U)}const b=o.parse(r[1],1,zt);if(!b)return null;const k=o.parse(r[r.length-1],r.length-1,m);return k?b.type.kind!=="value"&&o.concat(1).checkSubtype(u,b.type)?null:new Du(u,m,b,v,x,k):null}evaluate(r){const o=this.input.evaluate(r);return(rr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Nl{constructor(r,o,u){this.type=r,this.branches=o,this.otherwise=u}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return o.error("Expected an odd number of arguments.");let u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);const m=[];for(let x=1;x<r.length-1;x+=2){const b=o.parse(r[x],x,Pt);if(!b)return null;const k=o.parse(r[x+1],x+1,u);if(!k)return null;m.push([b,k]),u=u||k.type}const v=o.parse(r[r.length-1],r.length-1,u);if(!v)return null;if(!u)throw new Error("Can't infer output type");return new Nl(u,m,v)}evaluate(r){for(const[o,u]of this.branches)if(o.evaluate(r))return u.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[o,u]of this.branches)r(o),r(u);r(this.otherwise)}outputDefined(){return this.branches.every(([r,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class Ua{constructor(r,o,u,m){this.type=r,this.input=o,this.beginIndex=u,this.endIndex=m}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=o.parse(r[1],1,zt),m=o.parse(r[2],2,We);if(!u||!m)return null;if(!pe(u.type,[O(zt),Nt,zt]))return o.error(`Expected first argument to be of type array or string, but found ${j(u.type)} instead`);if(r.length===4){const v=o.parse(r[3],3,We);return v?new Ua(u.type,u,m,v):null}return new Ua(u.type,u,m)}evaluate(r){const o=this.input.evaluate(r),u=this.beginIndex.evaluate(r);let m;if(this.endIndex&&(m=this.endIndex.evaluate(r)),me(o,["string"]))return[...o].slice(u,m).join("");if(me(o,["array"]))return o.slice(u,m);throw new Wn(`Expected first argument to be of type array or string, but found ${j(rr(o))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function jl(s,r){const o=s.length-1;let u,m,v=0,x=o,b=0;for(;v<=x;)if(b=Math.floor((v+x)/2),u=s[b],m=s[b+1],u<=r){if(b===o||r<m)return b;v=b+1}else{if(!(u>r))throw new Wn("Input is not a number.");x=b-1}return 0}class Oo{constructor(r,o,u){this.type=r,this.input=o,this.labels=[],this.outputs=[];for(const[m,v]of u)this.labels.push(m),this.outputs.push(v)}static parse(r,o){if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");const u=o.parse(r[1],1,We);if(!u)return null;const m=[];let v=null;o.expectedType&&o.expectedType.kind!=="value"&&(v=o.expectedType);for(let x=1;x<r.length;x+=2){const b=x===1?-1/0:r[x],k=r[x+1],M=x,D=x+1;if(typeof b!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(m.length&&m[m.length-1][0]>=b)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const R=o.parse(k,D,v);if(!R)return null;v=v||R.type,m.push([b,R])}return new Oo(v,u,m)}evaluate(r){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(r);const m=this.input.evaluate(r);if(m<=o[0])return u[0].evaluate(r);const v=o.length;return m>=o[v-1]?u[v-1].evaluate(r):u[jl(o,m)].evaluate(r)}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Jd(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cg=Qd;function Qd(s,r,o,u){this.cx=3*s,this.bx=3*(o-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=r,this.p2x=o,this.p2y=u}Qd.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,r){if(r===void 0&&(r=1e-6),s<0)return 0;if(s>1)return 1;for(var o=s,u=0;u<8;u++){var m=this.sampleCurveX(o)-s;if(Math.abs(m)<r)return o;var v=this.sampleCurveDerivativeX(o);if(Math.abs(v)<1e-6)break;o-=m/v}var x=0,b=1;for(o=s,u=0;u<20&&(m=this.sampleCurveX(o),!(Math.abs(m-s)<r));u++)s>m?x=o:b=o,o=.5*(b-x)+x;return o},solve:function(s,r){return this.sampleCurveY(this.solveCurveX(s,r))}};var ug=Jd(cg);function io(s,r,o){return s+o*(r-s)}function $a(s,r,o){return s.map((u,m)=>io(u,r[m],o))}const Xr={number:io,color:function(s,r,o,u="rgb"){switch(u){case"rgb":{const[m,v,x,b]=$a(s.rgb,r.rgb,o);return new gn(m,v,x,b,!1)}case"hcl":{const[m,v,x,b]=s.hcl,[k,M,D,R]=r.hcl;let N,U;if(isNaN(m)||isNaN(k))isNaN(m)?isNaN(k)?N=NaN:(N=k,x!==1&&x!==0||(U=M)):(N=m,D!==1&&D!==0||(U=v));else{let Ce=k-m;k>m&&Ce>180?Ce-=360:k<m&&m-k>180&&(Ce+=360),N=m+o*Ce}const[q,Y,oe,ce]=function([Ce,_e,ke,Re]){return Ce=isNaN(Ce)?0:Ce*It,Bn([ke,Math.cos(Ce)*_e,Math.sin(Ce)*_e,Re])}([N,U??io(v,M,o),io(x,D,o),io(b,R,o)]);return new gn(q,Y,oe,ce,!1)}case"lab":{const[m,v,x,b]=Bn($a(s.lab,r.lab,o));return new gn(m,v,x,b,!1)}}},array:$a,padding:function(s,r,o){return new ui($a(s.values,r.values,o))},variableAnchorOffsetCollection:function(s,r,o){const u=s.values,m=r.values;if(u.length!==m.length)throw new Wn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${r.toString()}`);const v=[];for(let x=0;x<u.length;x+=2){if(u[x]!==m[x])throw new Wn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${u[x]}, to[${x}]: ${m[x]}`);v.push(u[x]);const[b,k]=u[x+1],[M,D]=m[x+1];v.push([io(b,M,o),io(k,D,o)])}return new Ti(v)}};class Kr{constructor(r,o,u,m,v){this.type=r,this.operator=o,this.interpolation=u,this.input=m,this.labels=[],this.outputs=[];for(const[x,b]of v)this.labels.push(x),this.outputs.push(b)}static interpolationFactor(r,o,u,m){let v=0;if(r.name==="exponential")v=Vl(o,r.base,u,m);else if(r.name==="linear")v=Vl(o,1,u,m);else if(r.name==="cubic-bezier"){const x=r.controlPoints;v=new ug(x[0],x[1],x[2],x[3]).solve(Vl(o,1,u,m))}return v}static parse(r,o){let[u,m,v,...x]=r;if(!Array.isArray(m)||m.length===0)return o.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const M=m[1];if(typeof M!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:M}}else{if(m[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const M=m.slice(1);if(M.length!==4||M.some(D=>typeof D!="number"||D<0||D>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:M}}}if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(v=o.parse(v,2,We),!v)return null;const b=[];let k=null;u==="interpolate-hcl"||u==="interpolate-lab"?k=Gn:o.expectedType&&o.expectedType.kind!=="value"&&(k=o.expectedType);for(let M=0;M<x.length;M+=2){const D=x[M],R=x[M+1],N=M+3,U=M+4;if(typeof D!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(b.length&&b[b.length-1][0]>=D)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',N);const q=o.parse(R,U,k);if(!q)return null;k=k||q.type,b.push([D,q])}return ve(k,We)||ve(k,Gn)||ve(k,Kt)||ve(k,ie)||ve(k,O(We))?new Kr(k,u,m,v,b):o.error(`Type ${j(k)} is not interpolatable.`)}evaluate(r){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(r);const m=this.input.evaluate(r);if(m<=o[0])return u[0].evaluate(r);const v=o.length;if(m>=o[v-1])return u[v-1].evaluate(r);const x=jl(o,m),b=Kr.interpolationFactor(this.interpolation,m,o[x],o[x+1]),k=u[x].evaluate(r),M=u[x+1].evaluate(r);switch(this.operator){case"interpolate":return Xr[this.type.kind](k,M,b);case"interpolate-hcl":return Xr.color(k,M,b,"hcl");case"interpolate-lab":return Xr.color(k,M,b,"lab")}}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Vl(s,r,o,u){const m=u-o,v=s-o;return m===0?0:r===1?v/m:(Math.pow(r,v)-1)/(Math.pow(r,m)-1)}class Ul{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expectected at least one argument.");let u=null;const m=o.expectedType;m&&m.kind!=="value"&&(u=m);const v=[];for(const b of r.slice(1)){const k=o.parse(b,1+v.length,u,void 0,{typeAnnotation:"omit"});if(!k)return null;u=u||k.type,v.push(k)}if(!u)throw new Error("No output type");const x=m&&v.some(b=>te(m,b.type));return new Ul(x?zt:u,v)}evaluate(r){let o,u=null,m=0;for(const v of this.args)if(m++,u=v.evaluate(r),u&&u instanceof hi&&!u.available&&(o||(o=u.name),u=null,m===this.args.length&&(u=o)),u!==null)break;return u}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function $l(s,r){return s==="=="||s==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function ef(s,r,o,u){return u.compare(r,o)===0}function No(s,r,o){const u=s!=="=="&&s!=="!=";return class jP{constructor(v,x,b){this.type=Pt,this.lhs=v,this.rhs=x,this.collator=b,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const b=v[0];let k=x.parse(v[1],1,zt);if(!k)return null;if(!$l(b,k.type))return x.concat(1).error(`"${b}" comparisons are not supported for type '${j(k.type)}'.`);let M=x.parse(v[2],2,zt);if(!M)return null;if(!$l(b,M.type))return x.concat(2).error(`"${b}" comparisons are not supported for type '${j(M.type)}'.`);if(k.type.kind!==M.type.kind&&k.type.kind!=="value"&&M.type.kind!=="value")return x.error(`Cannot compare types '${j(k.type)}' and '${j(M.type)}'.`);u&&(k.type.kind==="value"&&M.type.kind!=="value"?k=new $i(M.type,[k]):k.type.kind!=="value"&&M.type.kind==="value"&&(M=new $i(k.type,[M])));let D=null;if(v.length===4){if(k.type.kind!=="string"&&M.type.kind!=="string"&&k.type.kind!=="value"&&M.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(D=x.parse(v[3],3,pt),!D)return null}return new jP(k,M,D)}evaluate(v){const x=this.lhs.evaluate(v),b=this.rhs.evaluate(v);if(u&&this.hasUntypedArgument){const k=rr(x),M=rr(b);if(k.kind!==M.kind||k.kind!=="string"&&k.kind!=="number")throw new Wn(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${k.kind}, ${M.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const k=rr(x),M=rr(b);if(k.kind!=="string"||M.kind!=="string")return r(v,x,b)}return this.collator?o(v,x,b,this.collator.evaluate(v)):r(v,x,b)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const hg=No("==",function(s,r,o){return r===o},ef),tf=No("!=",function(s,r,o){return r!==o},function(s,r,o,u){return!ef(0,r,o,u)}),nf=No("<",function(s,r,o){return r<o},function(s,r,o,u){return u.compare(r,o)<0}),dg=No(">",function(s,r,o){return r>o},function(s,r,o,u){return u.compare(r,o)>0}),fg=No("<=",function(s,r,o){return r<=o},function(s,r,o,u){return u.compare(r,o)<=0}),rf=No(">=",function(s,r,o){return r>=o},function(s,r,o,u){return u.compare(r,o)>=0});class Ha{constructor(r,o,u){this.type=pt,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=o}static parse(r,o){if(r.length!==2)return o.error("Expected one argument.");const u=r[1];if(typeof u!="object"||Array.isArray(u))return o.error("Collator options argument must be an object.");const m=o.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,Pt);if(!m)return null;const v=o.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,Pt);if(!v)return null;let x=null;return u.locale&&(x=o.parse(u.locale,1,Nt),!x)?null:new Ha(m,v,x)}evaluate(r){return new Eu(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class zu{constructor(r,o,u,m,v){this.type=Nt,this.number=r,this.locale=o,this.currency=u,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(r,o){if(r.length!==3)return o.error("Expected two arguments.");const u=o.parse(r[1],1,We);if(!u)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return o.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=o.parse(m.locale,1,Nt),!v))return null;let x=null;if(m.currency&&(x=o.parse(m.currency,1,Nt),!x))return null;let b=null;if(m["min-fraction-digits"]&&(b=o.parse(m["min-fraction-digits"],1,We),!b))return null;let k=null;return m["max-fraction-digits"]&&(k=o.parse(m["max-fraction-digits"],1,We),!k)?null:new zu(u,v,x,b,k)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Hl{constructor(r){this.type=Ht,this.sections=r}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const u=r[1];if(!Array.isArray(u)&&typeof u=="object")return o.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=r.length-1;++x){const b=r[x];if(v&&typeof b=="object"&&!Array.isArray(b)){v=!1;let k=null;if(b["font-scale"]&&(k=o.parse(b["font-scale"],1,We),!k))return null;let M=null;if(b["text-font"]&&(M=o.parse(b["text-font"],1,O(Nt)),!M))return null;let D=null;if(b["text-color"]&&(D=o.parse(b["text-color"],1,Gn),!D))return null;const R=m[m.length-1];R.scale=k,R.font=M,R.textColor=D}else{const k=o.parse(r[x],1,zt);if(!k)return null;const M=k.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:k,scale:null,font:null,textColor:null})}}return new Hl(m)}evaluate(r){return new ci(this.sections.map(o=>{const u=o.content.evaluate(r);return rr(u)===jt?new Pu("",u,null,null,null):new Pu(Va(u),null,o.scale?o.scale.evaluate(r):null,o.font?o.font.evaluate(r).join(","):null,o.textColor?o.textColor.evaluate(r):null)}))}eachChild(r){for(const o of this.sections)r(o.content),o.scale&&r(o.scale),o.font&&r(o.font),o.textColor&&r(o.textColor)}outputDefined(){return!1}}class Ru{constructor(r){this.type=jt,this.input=r}static parse(r,o){if(r.length!==2)return o.error("Expected two arguments.");const u=o.parse(r[1],1,Nt);return u?new Ru(u):o.error("No image name provided.")}evaluate(r){const o=this.input.evaluate(r),u=hi.fromString(o);return u&&r.availableImages&&(u.available=r.availableImages.indexOf(o)>-1),u}eachChild(r){r(this.input)}outputDefined(){return!1}}class Lu{constructor(r){this.type=We,this.input=r}static parse(r,o){if(r.length!==2)return o.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=o.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${j(u.type)} instead.`):new Lu(u):null}evaluate(r){const o=this.input.evaluate(r);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new Wn(`Expected value to be of type string or array, but found ${j(rr(o))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const os=8192;function pg(s,r){const o=(180+s[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(o*m*os),Math.round(u*m*os)]}function Bu(s,r){const o=Math.pow(2,r.z);return[(m=(s[0]/os+r.x)/o,360*m-180),(u=(s[1]/os+r.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90)];var u,m}function so(s,r){s[0]=Math.min(s[0],r[0]),s[1]=Math.min(s[1],r[1]),s[2]=Math.max(s[2],r[0]),s[3]=Math.max(s[3],r[1])}function js(s,r){return!(s[0]<=r[0]||s[2]>=r[2]||s[1]<=r[1]||s[3]>=r[3])}function dn(s,r,o){const u=s[0]-r[0],m=s[1]-r[1],v=s[0]-o[0],x=s[1]-o[1];return u*x-v*m==0&&u*v<=0&&m*x<=0}function Gl(s,r,o,u){return(m=[u[0]-o[0],u[1]-o[1]])[0]*(v=[r[0]-s[0],r[1]-s[1]])[1]-m[1]*v[0]!=0&&!(!of(s,r,o,u)||!of(o,u,s,r));var m,v}function mg(s,r,o){for(const u of o)for(let m=0;m<u.length-1;++m)if(Gl(s,r,u[m],u[m+1]))return!0;return!1}function jo(s,r,o=!1){let u=!1;for(const b of r)for(let k=0;k<b.length-1;k++){if(dn(s,b[k],b[k+1]))return o;(v=b[k])[1]>(m=s)[1]!=(x=b[k+1])[1]>m[1]&&m[0]<(x[0]-v[0])*(m[1]-v[1])/(x[1]-v[1])+v[0]&&(u=!u)}var m,v,x;return u}function gg(s,r){for(const o of r)if(jo(s,o))return!0;return!1}function sf(s,r){for(const o of s)if(!jo(o,r))return!1;for(let o=0;o<s.length-1;++o)if(mg(s[o],s[o+1],r))return!1;return!0}function yg(s,r){for(const o of r)if(sf(s,o))return!0;return!1}function of(s,r,o,u){const m=u[0]-o[0],v=u[1]-o[1],x=(s[0]-o[0])*v-m*(s[1]-o[1]),b=(r[0]-o[0])*v-m*(r[1]-o[1]);return x>0&&b<0||x<0&&b>0}function Fu(s,r,o){const u=[];for(let m=0;m<s.length;m++){const v=[];for(let x=0;x<s[m].length;x++){const b=pg(s[m][x],o);so(r,b),v.push(b)}u.push(v)}return u}function af(s,r,o){const u=[];for(let m=0;m<s.length;m++){const v=Fu(s[m],r,o);u.push(v)}return u}function lf(s,r,o,u){if(s[0]<o[0]||s[0]>o[2]){const m=.5*u;let v=s[0]-o[0]>m?-u:o[0]-s[0]>m?u:0;v===0&&(v=s[0]-o[2]>m?-u:o[2]-s[0]>m?u:0),s[0]+=v}so(r,s)}function cf(s,r,o,u){const m=Math.pow(2,u.z)*os,v=[u.x*os,u.y*os],x=[];for(const b of s)for(const k of b){const M=[k.x+v[0],k.y+v[1]];lf(M,r,o,m),x.push(M)}return x}function uf(s,r,o,u){const m=Math.pow(2,u.z)*os,v=[u.x*os,u.y*os],x=[];for(const k of s){const M=[];for(const D of k){const R=[D.x+v[0],D.y+v[1]];so(r,R),M.push(R)}x.push(M)}if(r[2]-r[0]<=m/2){(b=r)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const k of x)for(const M of k)lf(M,r,o,m)}var b;return x}class oo{constructor(r,o){this.type=Pt,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(no(r[1])){const u=r[1];if(u.type==="FeatureCollection"){const m=[];for(const v of u.features){const{type:x,coordinates:b}=v.geometry;x==="Polygon"&&m.push(b),x==="MultiPolygon"&&m.push(...b)}if(m.length)return new oo(u,{type:"MultiPolygon",coordinates:m})}else if(u.type==="Feature"){const m=u.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new oo(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new oo(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,u){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(u.type==="Polygon"){const b=Fu(u.coordinates,v,x),k=cf(o.geometry(),m,v,x);if(!js(m,v))return!1;for(const M of k)if(!jo(M,b))return!1}if(u.type==="MultiPolygon"){const b=af(u.coordinates,v,x),k=cf(o.geometry(),m,v,x);if(!js(m,v))return!1;for(const M of k)if(!gg(M,b))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,u){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(u.type==="Polygon"){const b=Fu(u.coordinates,v,x),k=uf(o.geometry(),m,v,x);if(!js(m,v))return!1;for(const M of k)if(!sf(M,b))return!1}if(u.type==="MultiPolygon"){const b=af(u.coordinates,v,x),k=uf(o.geometry(),m,v,x);if(!js(m,v))return!1;for(const M of k)if(!yg(M,b))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let hf=class{constructor(s=[],r=(o,u)=>o<u?-1:o>u?1:0){if(this.data=s,this.length=this.data.length,this.compare=r,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:r,compare:o}=this,u=r[s];for(;s>0;){const m=s-1>>1,v=r[m];if(o(u,v)>=0)break;r[s]=v,s=m}r[s]=u}_down(s){const{data:r,compare:o}=this,u=this.length>>1,m=r[s];for(;s<u;){let v=1+(s<<1);const x=v+1;if(x<this.length&&o(r[x],r[v])<0&&(v=x),o(r[v],m)>=0)break;r[s]=r[v],s=v}r[s]=m}};function _g(s,r,o,u,m){df(s,r,o,u||s.length-1,m||vg)}function df(s,r,o,u,m){for(;u>o;){if(u-o>600){var v=u-o+1,x=r-o+1,b=Math.log(v),k=.5*Math.exp(2*b/3),M=.5*Math.sqrt(b*k*(v-k)/v)*(x-v/2<0?-1:1);df(s,r,Math.max(o,Math.floor(r-x*k/v+M)),Math.min(u,Math.floor(r+(v-x)*k/v+M)),m)}var D=s[r],R=o,N=u;for(Ga(s,o,r),m(s[u],D)>0&&Ga(s,o,u);R<N;){for(Ga(s,R,N),R++,N--;m(s[R],D)<0;)R++;for(;m(s[N],D)>0;)N--}m(s[o],D)===0?Ga(s,o,N):Ga(s,++N,u),N<=r&&(o=N+1),r<=N&&(u=N-1)}}function Ga(s,r,o){var u=s[r];s[r]=s[o],s[o]=u}function vg(s,r){return s<r?-1:s>r?1:0}function Wl(s,r){if(s.length<=1)return[s];const o=[];let u,m;for(const v of s){const x=bg(v);x!==0&&(v.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(u&&o.push(u),u=[v]):u.push(v))}if(u&&o.push(u),r>1)for(let v=0;v<o.length;v++)o[v].length<=r||(_g(o[v],r,1,o[v].length-1,xg),o[v]=o[v].slice(0,r));return o}function xg(s,r){return r.area-s.area}function bg(s){let r=0;for(let o,u,m=0,v=s.length,x=v-1;m<v;x=m++)o=s[m],u=s[x],r+=(u.x-o.x)*(o.y+u.y);return r}const ff=1/298.257223563,pf=ff*(2-ff),mf=Math.PI/180;class Ou{constructor(r){const o=6378.137*mf*1e3,u=Math.cos(r*mf),m=1/(1-pf*(1-u*u)),v=Math.sqrt(m);this.kx=o*v*u,this.ky=o*v*m*(1-pf)}distance(r,o){const u=this.wrap(r[0]-o[0])*this.kx,m=(r[1]-o[1])*this.ky;return Math.sqrt(u*u+m*m)}pointOnLine(r,o){let u,m,v,x,b=1/0;for(let k=0;k<r.length-1;k++){let M=r[k][0],D=r[k][1],R=this.wrap(r[k+1][0]-M)*this.kx,N=(r[k+1][1]-D)*this.ky,U=0;R===0&&N===0||(U=(this.wrap(o[0]-M)*this.kx*R+(o[1]-D)*this.ky*N)/(R*R+N*N),U>1?(M=r[k+1][0],D=r[k+1][1]):U>0&&(M+=R/this.kx*U,D+=N/this.ky*U)),R=this.wrap(o[0]-M)*this.kx,N=(o[1]-D)*this.ky;const q=R*R+N*N;q<b&&(b=q,u=M,m=D,v=k,x=U)}return{point:[u,m],index:v,t:Math.max(0,Math.min(1,x))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function gf(s,r){return r[0]-s[0]}function ql(s){return s[1]-s[0]+1}function ws(s,r){return s[1]>=s[0]&&s[1]<r}function Nu(s,r){if(s[0]>s[1])return[null,null];const o=ql(s);if(r){if(o===2)return[s,null];const m=Math.floor(o/2);return[[s[0],s[0]+m],[s[0]+m,s[1]]]}if(o===1)return[s,null];const u=Math.floor(o/2)-1;return[[s[0],s[0]+u],[s[0]+u+1,s[1]]]}function ju(s,r){if(!ws(r,s.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let u=r[0];u<=r[1];++u)so(o,s[u]);return o}function Vu(s){const r=[1/0,1/0,-1/0,-1/0];for(const o of s)for(const u of o)so(r,u);return r}function Zl(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Uu(s,r,o){if(!Zl(s)||!Zl(r))return NaN;let u=0,m=0;return s[2]<r[0]&&(u=r[0]-s[2]),s[0]>r[2]&&(u=s[0]-r[2]),s[1]>r[3]&&(m=s[1]-r[3]),s[3]<r[1]&&(m=r[1]-s[3]),o.distance([0,0],[u,m])}function ao(s,r,o){const u=o.pointOnLine(r,s);return o.distance(s,u.point)}function $u(s,r,o,u,m){const v=Math.min(ao(s,[o,u],m),ao(r,[o,u],m)),x=Math.min(ao(o,[s,r],m),ao(u,[s,r],m));return Math.min(v,x)}function wg(s,r,o,u,m){if(!ws(r,s.length)||!ws(u,o.length))return 1/0;let v=1/0;for(let x=r[0];x<r[1];++x){const b=s[x],k=s[x+1];for(let M=u[0];M<u[1];++M){const D=o[M],R=o[M+1];if(Gl(b,k,D,R))return 0;v=Math.min(v,$u(b,k,D,R,m))}}return v}function Vn(s,r,o,u,m){if(!ws(r,s.length)||!ws(u,o.length))return NaN;let v=1/0;for(let x=r[0];x<=r[1];++x)for(let b=u[0];b<=u[1];++b)if(v=Math.min(v,m.distance(s[x],o[b])),v===0)return v;return v}function Sg(s,r,o){if(jo(s,r,!0))return 0;let u=1/0;for(const m of r){const v=m[0],x=m[m.length-1];if(v!==x&&(u=Math.min(u,ao(s,[x,v],o)),u===0))return u;const b=o.pointOnLine(m,s);if(u=Math.min(u,o.distance(s,b.point)),u===0)return u}return u}function Wt(s,r,o,u){if(!ws(r,s.length))return NaN;for(let v=r[0];v<=r[1];++v)if(jo(s[v],o,!0))return 0;let m=1/0;for(let v=r[0];v<r[1];++v){const x=s[v],b=s[v+1];for(const k of o)for(let M=0,D=k.length,R=D-1;M<D;R=M++){const N=k[R],U=k[M];if(Gl(x,b,N,U))return 0;m=Math.min(m,$u(x,b,N,U,u))}}return m}function Xl(s,r){for(const o of s)for(const u of o)if(jo(u,r,!0))return!0;return!1}function kn(s,r,o,u=1/0){const m=Vu(s),v=Vu(r);if(u!==1/0&&Uu(m,v,o)>=u)return u;if(js(m,v)){if(Xl(s,r))return 0}else if(Xl(r,s))return 0;let x=1/0;for(const b of s)for(let k=0,M=b.length,D=M-1;k<M;D=k++){const R=b[D],N=b[k];for(const U of r)for(let q=0,Y=U.length,oe=Y-1;q<Y;oe=q++){const ce=U[oe],Ce=U[q];if(Gl(R,N,ce,Ce))return 0;x=Math.min(x,$u(R,N,ce,Ce,o))}}return x}function yn(s,r,o,u,m,v){if(!v)return;const x=Uu(ju(u,v),m,o);x<r&&s.push([x,v,[0,0]])}function lo(s,r,o,u,m,v,x){if(!v||!x)return;const b=Uu(ju(u,v),ju(m,x),o);b<r&&s.push([b,v,x])}function Wa(s,r,o,u,m=1/0){let v=Math.min(u.distance(s[0],o[0][0]),m);if(v===0)return v;const x=new hf([[0,[0,s.length-1],[0,0]]],gf),b=Vu(o);for(;x.length>0;){const k=x.pop();if(k[0]>=v)continue;const M=k[1],D=r?50:100;if(ql(M)<=D){if(!ws(M,s.length))return NaN;if(r){const R=Wt(s,M,o,u);if(isNaN(R)||R===0)return R;v=Math.min(v,R)}else for(let R=M[0];R<=M[1];++R){const N=Sg(s[R],o,u);if(v=Math.min(v,N),v===0)return 0}}else{const R=Nu(M,r);yn(x,v,u,s,b,R[0]),yn(x,v,u,s,b,R[1])}}return v}function qa(s,r,o,u,m,v=1/0){let x=Math.min(v,m.distance(s[0],o[0]));if(x===0)return x;const b=new hf([[0,[0,s.length-1],[0,o.length-1]]],gf);for(;b.length>0;){const k=b.pop();if(k[0]>=x)continue;const M=k[1],D=k[2],R=r?50:100,N=u?50:100;if(ql(M)<=R&&ql(D)<=N){if(!ws(M,s.length)&&ws(D,o.length))return NaN;let U;if(r&&u)U=wg(s,M,o,D,m),x=Math.min(x,U);else if(r&&!u){const q=s.slice(M[0],M[1]+1);for(let Y=D[0];Y<=D[1];++Y)if(U=ao(o[Y],q,m),x=Math.min(x,U),x===0)return x}else if(!r&&u){const q=o.slice(D[0],D[1]+1);for(let Y=M[0];Y<=M[1];++Y)if(U=ao(s[Y],q,m),x=Math.min(x,U),x===0)return x}else U=Vn(s,M,o,D,m),x=Math.min(x,U)}else{const U=Nu(M,r),q=Nu(D,u);lo(b,x,m,s,o,U[0],q[0]),lo(b,x,m,s,o,U[0],q[1]),lo(b,x,m,s,o,U[1],q[0]),lo(b,x,m,s,o,U[1],q[1])}}return x}function Hu(s){return s.type==="MultiPolygon"?s.coordinates.map(r=>({type:"Polygon",coordinates:r})):s.type==="MultiLineString"?s.coordinates.map(r=>({type:"LineString",coordinates:r})):s.type==="MultiPoint"?s.coordinates.map(r=>({type:"Point",coordinates:r})):[s]}class co{constructor(r,o){this.type=We,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(no(r[1])){const u=r[1];if(u.type==="FeatureCollection")return new co(u,u.features.map(m=>Hu(m.geometry)).flat());if(u.type==="Feature")return new co(u,Hu(u.geometry));if("type"in u&&"coordinates"in u)return new co(u,Hu(u))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,u){const m=o.geometry(),v=m.flat().map(k=>Bu([k.x,k.y],o.canonical));if(m.length===0)return NaN;const x=new Ou(v[0][1]);let b=1/0;for(const k of u){switch(k.type){case"Point":b=Math.min(b,qa(v,!1,[k.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,qa(v,!1,k.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,Wa(v,!1,k.coordinates,x,b))}if(b===0)return b}return b}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,u){const m=o.geometry(),v=m.flat().map(k=>Bu([k.x,k.y],o.canonical));if(m.length===0)return NaN;const x=new Ou(v[0][1]);let b=1/0;for(const k of u){switch(k.type){case"Point":b=Math.min(b,qa(v,!0,[k.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,qa(v,!0,k.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,Wa(v,!0,k.coordinates,x,b))}if(b===0)return b}return b}(r,this.geometries);if(r.geometryType()==="Polygon")return function(o,u){const m=o.geometry();if(m.length===0||m[0].length===0)return NaN;const v=Wl(m,0).map(k=>k.map(M=>M.map(D=>Bu([D.x,D.y],o.canonical)))),x=new Ou(v[0][0][0][1]);let b=1/0;for(const k of u)for(const M of v){switch(k.type){case"Point":b=Math.min(b,Wa([k.coordinates],!1,M,x,b));break;case"LineString":b=Math.min(b,Wa(k.coordinates,!0,M,x,b));break;case"Polygon":b=Math.min(b,kn(M,k.coordinates,x,b))}if(b===0)return b}return b}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Vo={"==":hg,"!=":tf,">":dg,"<":nf,">=":rf,"<=":fg,array:$i,at:Au,boolean:$i,case:Nl,coalesce:Ul,collator:Ha,format:Hl,image:Ru,in:Mu,"index-of":Fo,interpolate:Kr,"interpolate-hcl":Kr,"interpolate-lab":Kr,length:Lu,let:Ns,literal:Ui,match:Du,number:$i,"number-format":zu,object:$i,slice:Ua,step:Oo,string:$i,"to-boolean":Hi,"to-color":Hi,"to-number":Hi,"to-string":Hi,var:un,within:oo,distance:co};class Ci{constructor(r,o,u,m){this.name=r,this.type=o,this._evaluate=u,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,o){const u=r[0],m=Ci.definitions[u];if(!m)return o.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,b=x.filter(([M])=>!Array.isArray(M)||M.length===r.length-1);let k=null;for(const[M,D]of b){k=new ro(o.registry,Za,o.path,null,o.scope);const R=[];let N=!1;for(let U=1;U<r.length;U++){const q=r[U],Y=Array.isArray(M)?M[U-1]:M.type,oe=k.parse(q,1+R.length,Y);if(!oe){N=!0;break}R.push(oe)}if(!N)if(Array.isArray(M)&&M.length!==R.length)k.error(`Expected ${M.length} arguments, but found ${R.length} instead.`);else{for(let U=0;U<R.length;U++){const q=Array.isArray(M)?M[U]:M.type,Y=R[U];k.concat(U+1).checkSubtype(q,Y.type)}if(k.errors.length===0)return new Ci(u,v,D,R)}}if(b.length===1)o.errors.push(...k.errors);else{const M=(b.length?b:x).map(([R])=>{return N=R,Array.isArray(N)?`(${N.map(j).join(", ")})`:`(${j(N.type)}...)`;var N}).join(" | "),D=[];for(let R=1;R<r.length;R++){const N=o.parse(r[R],1+D.length);if(!N)return null;D.push(j(N.type))}o.error(`Expected arguments of type ${M}, but found (${D.join(", ")}) instead.`)}return null}static register(r,o){Ci.definitions=o;for(const u in o)r[u]=Ci}}function Gu(s,[r,o,u,m]){r=r.evaluate(s),o=o.evaluate(s),u=u.evaluate(s);const v=m?m.evaluate(s):1,x=Bo(r,o,u,v);if(x)throw new Wn(x);return new gn(r/255,o/255,u/255,v,!1)}function Wu(s,r){return s in r}function qu(s,r){const o=r[s];return o===void 0?null:o}function uo(s){return{type:s}}function Za(s){if(s instanceof un)return Za(s.boundExpression);if(s instanceof Ci&&s.name==="error"||s instanceof Ha||s instanceof oo||s instanceof co)return!1;const r=s instanceof Hi||s instanceof $i;let o=!0;return s.eachChild(u=>{o=r?o&&Za(u):o&&u instanceof Ui}),!!o&&Xa(s)&&Ka(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Xa(s){if(s instanceof Ci&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof oo||s instanceof co)return!1;let r=!0;return s.eachChild(o=>{r&&!Xa(o)&&(r=!1)}),r}function Uo(s){if(s instanceof Ci&&s.name==="feature-state")return!1;let r=!0;return s.eachChild(o=>{r&&!Uo(o)&&(r=!1)}),r}function Ka(s,r){if(s instanceof Ci&&r.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild(u=>{o&&!Ka(u,r)&&(o=!1)}),o}function Kl(s){return{result:"success",value:s}}function $o(s){return{result:"error",value:s}}function Ho(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function yf(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Zu(s){return!!s.expression&&s.expression.interpolated}function an(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Yl(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function kg(s){return s}function _f(s,r){const o=r.type==="color",u=s.stops&&typeof s.stops[0][0]=="object",m=u||!(u||s.property!==void 0),v=s.type||(Zu(r)?"exponential":"interval");if(o||r.type==="padding"){const D=o?gn.parse:ui.parse;(s=tr({},s)).stops&&(s.stops=s.stops.map(R=>[R[0],D(R[1])])),s.default=D(s.default?s.default:r.default)}if(s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;let b,k,M;if(v==="exponential")b=xf;else if(v==="interval")b=Jl;else if(v==="categorical"){b=vf,k=Object.create(null);for(const D of s.stops)k[D[0]]=D[1];M=typeof s.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);b=bf}if(u){const D={},R=[];for(let q=0;q<s.stops.length;q++){const Y=s.stops[q],oe=Y[0].zoom;D[oe]===void 0&&(D[oe]={zoom:oe,type:s.type,property:s.property,default:s.default,stops:[]},R.push(oe)),D[oe].stops.push([Y[0].value,Y[1]])}const N=[];for(const q of R)N.push([D[q].zoom,_f(D[q],r)]);const U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:Kr.interpolationFactor.bind(void 0,U),zoomStops:N.map(q=>q[0]),evaluate:({zoom:q},Y)=>xf({stops:N,base:s.base},r,q).evaluate(q,Y)}}if(m){const D=v==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Kr.interpolationFactor.bind(void 0,D),zoomStops:s.stops.map(R=>R[0]),evaluate:({zoom:R})=>b(s,r,R,k,M)}}return{kind:"source",evaluate(D,R){const N=R&&R.properties?R.properties[s.property]:void 0;return N===void 0?Go(s.default,r.default):b(s,r,N,k,M)}}}function Go(s,r,o){return s!==void 0?s:r!==void 0?r:o!==void 0?o:void 0}function vf(s,r,o,u,m){return Go(typeof o===m?u[o]:void 0,s.default,r.default)}function Jl(s,r,o){if(an(o)!=="number")return Go(s.default,r.default);const u=s.stops.length;if(u===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[u-1][0])return s.stops[u-1][1];const m=jl(s.stops.map(v=>v[0]),o);return s.stops[m][1]}function xf(s,r,o){const u=s.base!==void 0?s.base:1;if(an(o)!=="number")return Go(s.default,r.default);const m=s.stops.length;if(m===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[m-1][0])return s.stops[m-1][1];const v=jl(s.stops.map(D=>D[0]),o),x=function(D,R,N,U){const q=U-N,Y=D-N;return q===0?0:R===1?Y/q:(Math.pow(R,Y)-1)/(Math.pow(R,q)-1)}(o,u,s.stops[v][0],s.stops[v+1][0]),b=s.stops[v][1],k=s.stops[v+1][1],M=Xr[r.type]||kg;return typeof b.evaluate=="function"?{evaluate(...D){const R=b.evaluate.apply(void 0,D),N=k.evaluate.apply(void 0,D);if(R!==void 0&&N!==void 0)return M(R,N,x,s.colorSpace)}}:M(b,k,x,s.colorSpace)}function bf(s,r,o){switch(r.type){case"color":o=gn.parse(o);break;case"formatted":o=ci.fromString(o.toString());break;case"resolvedImage":o=hi.fromString(o.toString());break;case"padding":o=ui.parse(o);break;default:an(o)===r.type||r.type==="enum"&&r.values[o]||(o=void 0)}return Go(o,s.default,r.default)}Ci.register(Vo,{error:[{kind:"error"},[Nt],(s,[r])=>{throw new Wn(r.evaluate(s))}],typeof:[Nt,[zt],(s,[r])=>j(rr(r.evaluate(s)))],"to-rgba":[O(We,4),[Gn],(s,[r])=>{const[o,u,m,v]=r.evaluate(s).rgb;return[255*o,255*u,255*m,v]}],rgb:[Gn,[We,We,We],Gu],rgba:[Gn,[We,We,We,We],Gu],has:{type:Pt,overloads:[[[Nt],(s,[r])=>Wu(r.evaluate(s),s.properties())],[[Nt,vr],(s,[r,o])=>Wu(r.evaluate(s),o.evaluate(s))]]},get:{type:zt,overloads:[[[Nt],(s,[r])=>qu(r.evaluate(s),s.properties())],[[Nt,vr],(s,[r,o])=>qu(r.evaluate(s),o.evaluate(s))]]},"feature-state":[zt,[Nt],(s,[r])=>qu(r.evaluate(s),s.featureState||{})],properties:[vr,[],s=>s.properties()],"geometry-type":[Nt,[],s=>s.geometryType()],id:[zt,[],s=>s.id()],zoom:[We,[],s=>s.globals.zoom],"heatmap-density":[We,[],s=>s.globals.heatmapDensity||0],"line-progress":[We,[],s=>s.globals.lineProgress||0],accumulated:[zt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[We,uo(We),(s,r)=>{let o=0;for(const u of r)o+=u.evaluate(s);return o}],"*":[We,uo(We),(s,r)=>{let o=1;for(const u of r)o*=u.evaluate(s);return o}],"-":{type:We,overloads:[[[We,We],(s,[r,o])=>r.evaluate(s)-o.evaluate(s)],[[We],(s,[r])=>-r.evaluate(s)]]},"/":[We,[We,We],(s,[r,o])=>r.evaluate(s)/o.evaluate(s)],"%":[We,[We,We],(s,[r,o])=>r.evaluate(s)%o.evaluate(s)],ln2:[We,[],()=>Math.LN2],pi:[We,[],()=>Math.PI],e:[We,[],()=>Math.E],"^":[We,[We,We],(s,[r,o])=>Math.pow(r.evaluate(s),o.evaluate(s))],sqrt:[We,[We],(s,[r])=>Math.sqrt(r.evaluate(s))],log10:[We,[We],(s,[r])=>Math.log(r.evaluate(s))/Math.LN10],ln:[We,[We],(s,[r])=>Math.log(r.evaluate(s))],log2:[We,[We],(s,[r])=>Math.log(r.evaluate(s))/Math.LN2],sin:[We,[We],(s,[r])=>Math.sin(r.evaluate(s))],cos:[We,[We],(s,[r])=>Math.cos(r.evaluate(s))],tan:[We,[We],(s,[r])=>Math.tan(r.evaluate(s))],asin:[We,[We],(s,[r])=>Math.asin(r.evaluate(s))],acos:[We,[We],(s,[r])=>Math.acos(r.evaluate(s))],atan:[We,[We],(s,[r])=>Math.atan(r.evaluate(s))],min:[We,uo(We),(s,r)=>Math.min(...r.map(o=>o.evaluate(s)))],max:[We,uo(We),(s,r)=>Math.max(...r.map(o=>o.evaluate(s)))],abs:[We,[We],(s,[r])=>Math.abs(r.evaluate(s))],round:[We,[We],(s,[r])=>{const o=r.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[We,[We],(s,[r])=>Math.floor(r.evaluate(s))],ceil:[We,[We],(s,[r])=>Math.ceil(r.evaluate(s))],"filter-==":[Pt,[Nt,zt],(s,[r,o])=>s.properties()[r.value]===o.value],"filter-id-==":[Pt,[zt],(s,[r])=>s.id()===r.value],"filter-type-==":[Pt,[Nt],(s,[r])=>s.geometryType()===r.value],"filter-<":[Pt,[Nt,zt],(s,[r,o])=>{const u=s.properties()[r.value],m=o.value;return typeof u==typeof m&&u<m}],"filter-id-<":[Pt,[zt],(s,[r])=>{const o=s.id(),u=r.value;return typeof o==typeof u&&o<u}],"filter->":[Pt,[Nt,zt],(s,[r,o])=>{const u=s.properties()[r.value],m=o.value;return typeof u==typeof m&&u>m}],"filter-id->":[Pt,[zt],(s,[r])=>{const o=s.id(),u=r.value;return typeof o==typeof u&&o>u}],"filter-<=":[Pt,[Nt,zt],(s,[r,o])=>{const u=s.properties()[r.value],m=o.value;return typeof u==typeof m&&u<=m}],"filter-id-<=":[Pt,[zt],(s,[r])=>{const o=s.id(),u=r.value;return typeof o==typeof u&&o<=u}],"filter->=":[Pt,[Nt,zt],(s,[r,o])=>{const u=s.properties()[r.value],m=o.value;return typeof u==typeof m&&u>=m}],"filter-id->=":[Pt,[zt],(s,[r])=>{const o=s.id(),u=r.value;return typeof o==typeof u&&o>=u}],"filter-has":[Pt,[zt],(s,[r])=>r.value in s.properties()],"filter-has-id":[Pt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Pt,[O(Nt)],(s,[r])=>r.value.indexOf(s.geometryType())>=0],"filter-id-in":[Pt,[O(zt)],(s,[r])=>r.value.indexOf(s.id())>=0],"filter-in-small":[Pt,[Nt,O(zt)],(s,[r,o])=>o.value.indexOf(s.properties()[r.value])>=0],"filter-in-large":[Pt,[Nt,O(zt)],(s,[r,o])=>function(u,m,v,x){for(;v<=x;){const b=v+x>>1;if(m[b]===u)return!0;m[b]>u?x=b-1:v=b+1}return!1}(s.properties()[r.value],o.value,0,o.value.length-1)],all:{type:Pt,overloads:[[[Pt,Pt],(s,[r,o])=>r.evaluate(s)&&o.evaluate(s)],[uo(Pt),(s,r)=>{for(const o of r)if(!o.evaluate(s))return!1;return!0}]]},any:{type:Pt,overloads:[[[Pt,Pt],(s,[r,o])=>r.evaluate(s)||o.evaluate(s)],[uo(Pt),(s,r)=>{for(const o of r)if(o.evaluate(s))return!0;return!1}]]},"!":[Pt,[Pt],(s,[r])=>!r.evaluate(s)],"is-supported-script":[Pt,[Nt],(s,[r])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(r.evaluate(s))}],upcase:[Nt,[Nt],(s,[r])=>r.evaluate(s).toUpperCase()],downcase:[Nt,[Nt],(s,[r])=>r.evaluate(s).toLowerCase()],concat:[Nt,uo(zt),(s,r)=>r.map(o=>Va(o.evaluate(s))).join("")],"resolved-locale":[Nt,[pt],(s,[r])=>r.evaluate(s).resolvedLocale()]});class Ql{constructor(r,o){var u;this.expression=r,this._warningHistory={},this._evaluator=new Ol,this._defaultValue=o?(u=o).type==="color"&&Yl(u.default)?new gn(0,0,0,0):u.type==="color"?gn.parse(u.default)||null:u.type==="padding"?ui.parse(u.default)||null:u.type==="variableAnchorOffsetCollection"?Ti.parse(u.default)||null:u.default===void 0?null:u.default:null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(r,o,u,m,v,x){return this._evaluator.globals=r,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,o,u,m,v,x){this._evaluator.globals=r,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new Wn(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function ec(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Vo}function Wo(s,r){const o=new ro(Vo,Za,[],r?function(m){const v={color:Gn,string:Nt,number:We,enum:Nt,boolean:Pt,formatted:Ht,padding:Kt,resolvedImage:jt,variableAnchorOffsetCollection:ie};return m.type==="array"?O(v[m.value]||zt,m.length):v[m.type]}(r):void 0),u=o.parse(s,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Kl(new Ql(u,r)):$o(o.errors)}class qo{constructor(r,o){this.kind=r,this._styleExpression=o,this.isStateDependent=r!=="constant"&&!Uo(o.expression)}evaluateWithoutErrorHandling(r,o,u,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,o,u,m,v,x)}evaluate(r,o,u,m,v,x){return this._styleExpression.evaluate(r,o,u,m,v,x)}}class Zo{constructor(r,o,u,m){this.kind=r,this.zoomStops=u,this._styleExpression=o,this.isStateDependent=r!=="camera"&&!Uo(o.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,o,u,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,o,u,m,v,x)}evaluate(r,o,u,m,v,x){return this._styleExpression.evaluate(r,o,u,m,v,x)}interpolationFactor(r,o,u){return this.interpolationType?Kr.interpolationFactor(this.interpolationType,r,o,u):0}}function Xu(s,r){const o=Wo(s,r);if(o.result==="error")return o;const u=o.value.expression,m=Xa(u);if(!m&&!Ho(r))return $o([new hn("","data expressions not supported")]);const v=Ka(u,["zoom"]);if(!v&&!yf(r))return $o([new hn("","zoom expressions not supported")]);const x=Ya(u);return x||v?x instanceof hn?$o([x]):x instanceof Kr&&!Zu(r)?$o([new hn("",'"interpolate" expressions cannot be used with this property')]):Kl(x?new Zo(m?"camera":"composite",o.value,x.labels,x instanceof Kr?x.interpolation:void 0):new qo(m?"constant":"source",o.value)):$o([new hn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xo{constructor(r,o){this._parameters=r,this._specification=o,tr(this,_f(this._parameters,this._specification))}static deserialize(r){return new Xo(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Ya(s){let r=null;if(s instanceof Ns)r=Ya(s.result);else if(s instanceof Ul){for(const o of s.args)if(r=Ya(o),r)break}else(s instanceof Oo||s instanceof Kr)&&s.input instanceof Ci&&s.input.name==="zoom"&&(r=s);return r instanceof hn||s.eachChild(o=>{const u=Ya(o);u instanceof hn?r=u:!r&&u?r=new hn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&u&&r!==u&&(r=new hn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function tc(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const r of s.slice(1))if(!tc(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const nc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ku(s){if(s==null)return{filter:()=>!0,needGeometry:!1};tc(s)||(s=rc(s));const r=Wo(s,nc);if(r.result==="error")throw new Error(r.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,u,m)=>r.value.evaluate(o,u,{},m),needGeometry:wf(s)}}function Tg(s,r){return s<r?-1:s>r?1:0}function wf(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let r=1;r<s.length;r++)if(wf(s[r]))return!0;return!1}function rc(s){if(!s)return!0;const r=s[0];return s.length<=1?r!=="any":r==="=="?Yu(s[1],s[2],"=="):r==="!="?Ir(Yu(s[1],s[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Yu(s[1],s[2],r):r==="any"?(o=s.slice(1),["any"].concat(o.map(rc))):r==="all"?["all"].concat(s.slice(1).map(rc)):r==="none"?["all"].concat(s.slice(1).map(rc).map(Ir)):r==="in"?Ja(s[1],s.slice(2)):r==="!in"?Ir(Ja(s[1],s.slice(2))):r==="has"?Qa(s[1]):r!=="!has"||Ir(Qa(s[1]));var o}function Yu(s,r,o){switch(s){case"$type":return[`filter-type-${o}`,r];case"$id":return[`filter-id-${o}`,r];default:return[`filter-${o}`,s,r]}}function Ja(s,r){if(r.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(o=>typeof o!=typeof r[0])?["filter-in-large",s,["literal",r.sort(Tg)]]:["filter-in-small",s,["literal",r]]}}function Qa(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Ir(s){return["!",s]}function ho(s){const r=typeof s;if(r==="number"||r==="boolean"||r==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let m="[";for(const v of s)m+=`${ho(v)},`;return`${m}]`}const o=Object.keys(s).sort();let u="{";for(let m=0;m<o.length;m++)u+=`${JSON.stringify(o[m])}:${ho(s[o[m]])},`;return`${u}}`}function Sf(s){let r="";for(const o of Sn)r+=`/${ho(s[o])}`;return r}function kf(s){const r=s.value;return r?[new Ue(s.key,r,"constants have been deprecated as of v8")]:[]}function Un(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Gi(s){if(Array.isArray(s))return s.map(Gi);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const r={};for(const o in s)r[o]=Gi(s[o]);return r}return Un(s)}function di(s){const r=s.key,o=s.value,u=s.valueSpec||{},m=s.objectElementValidators||{},v=s.style,x=s.styleSpec,b=s.validateSpec;let k=[];const M=an(o);if(M!=="object")return[new Ue(r,o,`object expected, ${M} found`)];for(const D in o){const R=D.split(".")[0],N=u[R]||u["*"];let U;if(m[R])U=m[R];else if(u[R])U=b;else if(m["*"])U=m["*"];else{if(!u["*"]){k.push(new Ue(r,o[D],`unknown property "${D}"`));continue}U=b}k=k.concat(U({key:(r&&`${r}.`)+D,value:o[D],valueSpec:N,style:v,styleSpec:x,object:o,objectKey:D,validateSpec:b},o))}for(const D in u)m[D]||u[D].required&&u[D].default===void 0&&o[D]===void 0&&k.push(new Ue(r,o,`missing required property "${D}"`));return k}function el(s){const r=s.value,o=s.valueSpec,u=s.style,m=s.styleSpec,v=s.key,x=s.arrayElementValidator||s.validateSpec;if(an(r)!=="array")return[new Ue(v,r,`array expected, ${an(r)} found`)];if(o.length&&r.length!==o.length)return[new Ue(v,r,`array length ${o.length} expected, length ${r.length} found`)];if(o["min-length"]&&r.length<o["min-length"])return[new Ue(v,r,`array length at least ${o["min-length"]} expected, length ${r.length} found`)];let b={type:o.value,values:o.values};m.$version<7&&(b.function=o.function),an(o.value)==="object"&&(b=o.value);let k=[];for(let M=0;M<r.length;M++)k=k.concat(x({array:r,arrayIndex:M,value:r[M],valueSpec:b,validateSpec:s.validateSpec,style:u,styleSpec:m,key:`${v}[${M}]`}));return k}function Ju(s){const r=s.key,o=s.value,u=s.valueSpec;let m=an(o);return m==="number"&&o!=o&&(m="NaN"),m!=="number"?[new Ue(r,o,`number expected, ${m} found`)]:"minimum"in u&&o<u.minimum?[new Ue(r,o,`${o} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&o>u.maximum?[new Ue(r,o,`${o} is greater than the maximum value ${u.maximum}`)]:[]}function ic(s){const r=s.valueSpec,o=Un(s.value.type);let u,m,v,x={};const b=o!=="categorical"&&s.value.property===void 0,k=!b,M=an(s.value.stops)==="array"&&an(s.value.stops[0])==="array"&&an(s.value.stops[0][0])==="object",D=di({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(U){if(o==="identity")return[new Ue(U.key,U.value,'identity function may not have a "stops" property')];let q=[];const Y=U.value;return q=q.concat(el({key:U.key,value:Y,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:R})),an(Y)==="array"&&Y.length===0&&q.push(new Ue(U.key,Y,"array must have at least one stop")),q},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:r,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return o==="identity"&&b&&D.push(new Ue(s.key,s.value,'missing required property "property"')),o==="identity"||s.value.stops||D.push(new Ue(s.key,s.value,'missing required property "stops"')),o==="exponential"&&s.valueSpec.expression&&!Zu(s.valueSpec)&&D.push(new Ue(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(k&&!Ho(s.valueSpec)?D.push(new Ue(s.key,s.value,"property functions not supported")):b&&!yf(s.valueSpec)&&D.push(new Ue(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!M||s.value.property!==void 0||D.push(new Ue(s.key,s.value,'"property" property is required')),D;function R(U){let q=[];const Y=U.value,oe=U.key;if(an(Y)!=="array")return[new Ue(oe,Y,`array expected, ${an(Y)} found`)];if(Y.length!==2)return[new Ue(oe,Y,`array length 2 expected, length ${Y.length} found`)];if(M){if(an(Y[0])!=="object")return[new Ue(oe,Y,`object expected, ${an(Y[0])} found`)];if(Y[0].zoom===void 0)return[new Ue(oe,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new Ue(oe,Y,"object stop key must have value")];if(v&&v>Un(Y[0].zoom))return[new Ue(oe,Y[0].zoom,"stop zoom values must appear in ascending order")];Un(Y[0].zoom)!==v&&(v=Un(Y[0].zoom),m=void 0,x={}),q=q.concat(di({key:`${oe}[0]`,value:Y[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Ju,value:N}}))}else q=q.concat(N({key:`${oe}[0]`,value:Y[0],validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},Y));return ec(Gi(Y[1]))?q.concat([new Ue(`${oe}[1]`,Y[1],"expressions are not allowed in function stops.")]):q.concat(U.validateSpec({key:`${oe}[1]`,value:Y[1],valueSpec:r,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function N(U,q){const Y=an(U.value),oe=Un(U.value),ce=U.value!==null?U.value:q;if(u){if(Y!==u)return[new Ue(U.key,ce,`${Y} stop domain type must match previous stop domain type ${u}`)]}else u=Y;if(Y!=="number"&&Y!=="string"&&Y!=="boolean")return[new Ue(U.key,ce,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&o!=="categorical"){let Ce=`number expected, ${Y} found`;return Ho(r)&&o===void 0&&(Ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ue(U.key,ce,Ce)]}return o!=="categorical"||Y!=="number"||isFinite(oe)&&Math.floor(oe)===oe?o!=="categorical"&&Y==="number"&&m!==void 0&&oe<m?[new Ue(U.key,ce,"stop domain values must appear in ascending order")]:(m=oe,o==="categorical"&&oe in x?[new Ue(U.key,ce,"stop domain values must be unique")]:(x[oe]=!0,[])):[new Ue(U.key,ce,`integer expected, found ${oe}`)]}}function Ko(s){const r=(s.expressionContext==="property"?Xu:Wo)(Gi(s.value),s.valueSpec);if(r.result==="error")return r.value.map(u=>new Ue(`${s.key}${u.key}`,s.value,u.message));const o=r.value.expression||r.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new Ue(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Uo(o))return[new Ue(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Uo(o))return[new Ue(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Ka(o,["zoom","feature-state"]))return[new Ue(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Xa(o))return[new Ue(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ss(s){const r=s.key,o=s.value,u=s.valueSpec,m=[];return Array.isArray(u.values)?u.values.indexOf(Un(o))===-1&&m.push(new Ue(r,o,`expected one of [${u.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(u.values).indexOf(Un(o))===-1&&m.push(new Ue(r,o,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(o)} found`)),m}function Qu(s){return tc(Gi(s.value))?Ko(tr({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):sc(s)}function sc(s){const r=s.value,o=s.key;if(an(r)!=="array")return[new Ue(o,r,`array expected, ${an(r)} found`)];const u=s.styleSpec;let m,v=[];if(r.length<1)return[new Ue(o,r,"filter array must have at least 1 element")];switch(v=v.concat(Ss({key:`${o}[0]`,value:r[0],valueSpec:u.filter_operator,style:s.style,styleSpec:s.styleSpec})),Un(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Un(r[1])==="$type"&&v.push(new Ue(o,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new Ue(o,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=an(r[1]),m!=="string"&&v.push(new Ue(`${o}[1]`,r[1],`string expected, ${m} found`)));for(let x=2;x<r.length;x++)m=an(r[x]),Un(r[1])==="$type"?v=v.concat(Ss({key:`${o}[${x}]`,value:r[x],valueSpec:u.geometry_type,style:s.style,styleSpec:s.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Ue(`${o}[${x}]`,r[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)v=v.concat(sc({key:`${o}[${x}]`,value:r[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":m=an(r[1]),r.length!==2?v.push(new Ue(o,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Ue(`${o}[1]`,r[1],`string expected, ${m} found`))}return v}function eh(s,r){const o=s.key,u=s.validateSpec,m=s.style,v=s.styleSpec,x=s.value,b=s.objectKey,k=v[`${r}_${s.layerType}`];if(!k)return[];const M=b.match(/^(.*)-transition$/);if(r==="paint"&&M&&k[M[1]]&&k[M[1]].transition)return u({key:o,value:x,valueSpec:v.transition,style:m,styleSpec:v});const D=s.valueSpec||k[b];if(!D)return[new Ue(o,x,`unknown property "${b}"`)];let R;if(an(x)==="string"&&Ho(D)&&!D.tokens&&(R=/^{([^}]+)}$/.exec(x)))return[new Ue(o,x,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(R[1])} }\`.`)];const N=[];return s.layerType==="symbol"&&(b==="text-field"&&m&&!m.glyphs&&N.push(new Ue(o,x,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&Yl(Gi(x))&&Un(x.type)==="identity"&&N.push(new Ue(o,x,'"text-font" does not support identity functions'))),N.concat(u({key:s.key,value:x,valueSpec:D,style:m,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:b}))}function oc(s){return eh(s,"paint")}function th(s){return eh(s,"layout")}function nh(s){let r=[];const o=s.value,u=s.key,m=s.style,v=s.styleSpec;o.type||o.ref||r.push(new Ue(u,o,'either "type" or "ref" is required'));let x=Un(o.type);const b=Un(o.ref);if(o.id){const k=Un(o.id);for(let M=0;M<s.arrayIndex;M++){const D=m.layers[M];Un(D.id)===k&&r.push(new Ue(u,o.id,`duplicate layer id "${o.id}", previously used at line ${D.id.__line__}`))}}if("ref"in o){let k;["type","source","source-layer","filter","layout"].forEach(M=>{M in o&&r.push(new Ue(u,o[M],`"${M}" is prohibited for ref layers`))}),m.layers.forEach(M=>{Un(M.id)===b&&(k=M)}),k?k.ref?r.push(new Ue(u,o.ref,"ref cannot reference another ref layer")):x=Un(k.type):r.push(new Ue(u,o.ref,`ref layer "${b}" not found`))}else if(x!=="background")if(o.source){const k=m.sources&&m.sources[o.source],M=k&&Un(k.type);k?M==="vector"&&x==="raster"?r.push(new Ue(u,o.source,`layer "${o.id}" requires a raster source`)):M!=="raster-dem"&&x==="hillshade"?r.push(new Ue(u,o.source,`layer "${o.id}" requires a raster-dem source`)):M==="raster"&&x!=="raster"?r.push(new Ue(u,o.source,`layer "${o.id}" requires a vector source`)):M!=="vector"||o["source-layer"]?M==="raster-dem"&&x!=="hillshade"?r.push(new Ue(u,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!o.paint||!o.paint["line-gradient"]||M==="geojson"&&k.lineMetrics||r.push(new Ue(u,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Ue(u,o,`layer "${o.id}" must specify a "source-layer"`)):r.push(new Ue(u,o.source,`source "${o.source}" not found`))}else r.push(new Ue(u,o,'missing required property "source"'));return r=r.concat(di({key:u,value:o,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${u}.type`,value:o.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:o,objectKey:"type"}),filter:Qu,layout:k=>di({layer:o,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":M=>th(tr({layerType:x},M))}}),paint:k=>di({layer:o,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":M=>oc(tr({layerType:x},M))}})}})),r}function fo(s){const r=s.value,o=s.key,u=an(r);return u!=="string"?[new Ue(o,r,`string expected, ${u} found`)]:[]}const ac={promoteId:function({key:s,value:r}){if(an(r)==="string")return fo({key:s,value:r});{const o=[];for(const u in r)o.push(...fo({key:`${s}.${u}`,value:r[u]}));return o}}};function tl(s){const r=s.value,o=s.key,u=s.styleSpec,m=s.style,v=s.validateSpec;if(!r.type)return[new Ue(o,r,'"type" is required')];const x=Un(r.type);let b;switch(x){case"vector":case"raster":return b=di({key:o,value:r,valueSpec:u[`source_${x.replace("-","_")}`],style:s.style,styleSpec:u,objectElementValidators:ac,validateSpec:v}),b;case"raster-dem":return b=function(k){var M;const D=(M=k.sourceName)!==null&&M!==void 0?M:"",R=k.value,N=k.styleSpec,U=N.source_raster_dem,q=k.style;let Y=[];const oe=an(R);if(R===void 0)return Y;if(oe!=="object")return Y.push(new Ue("source_raster_dem",R,`object expected, ${oe} found`)),Y;const ce=Un(R.encoding)==="custom",Ce=["redFactor","greenFactor","blueFactor","baseShift"],_e=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const ke in R)!ce&&Ce.includes(ke)?Y.push(new Ue(ke,R[ke],`In "${D}": "${ke}" is only valid when "encoding" is set to "custom". ${_e} encoding found`)):U[ke]?Y=Y.concat(k.validateSpec({key:ke,value:R[ke],valueSpec:U[ke],validateSpec:k.validateSpec,style:q,styleSpec:N})):Y.push(new Ue(ke,R[ke],`unknown property "${ke}"`));return Y}({sourceName:o,value:r,style:s.style,styleSpec:u,validateSpec:v}),b;case"geojson":if(b=di({key:o,value:r,valueSpec:u.source_geojson,style:m,styleSpec:u,validateSpec:v,objectElementValidators:ac}),r.cluster)for(const k in r.clusterProperties){const[M,D]=r.clusterProperties[k],R=typeof M=="string"?[M,["accumulated"],["get",k]]:M;b.push(...Ko({key:`${o}.${k}.map`,value:D,expressionContext:"cluster-map"})),b.push(...Ko({key:`${o}.${k}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return b;case"video":return di({key:o,value:r,valueSpec:u.source_video,style:m,validateSpec:v,styleSpec:u});case"image":return di({key:o,value:r,valueSpec:u.source_image,style:m,validateSpec:v,styleSpec:u});case"canvas":return[new Ue(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ss({key:`${o}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function rh(s){const r=s.value,o=s.styleSpec,u=o.light,m=s.style;let v=[];const x=an(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new Ue("light",r,`object expected, ${x} found`)]),v;for(const b in r){const k=b.match(/^(.*)-transition$/);v=v.concat(k&&u[k[1]]&&u[k[1]].transition?s.validateSpec({key:b,value:r[b],valueSpec:o.transition,validateSpec:s.validateSpec,style:m,styleSpec:o}):u[b]?s.validateSpec({key:b,value:r[b],valueSpec:u[b],validateSpec:s.validateSpec,style:m,styleSpec:o}):[new Ue(b,r[b],`unknown property "${b}"`)])}return v}function ih(s){const r=s.value,o=s.styleSpec,u=o.sky,m=s.style,v=an(r);if(r===void 0)return[];if(v!=="object")return[new Ue("sky",r,`object expected, ${v} found`)];let x=[];for(const b in r)x=x.concat(u[b]?s.validateSpec({key:b,value:r[b],valueSpec:u[b],style:m,styleSpec:o}):[new Ue(b,r[b],`unknown property "${b}"`)]);return x}function sh(s){const r=s.value,o=s.styleSpec,u=o.terrain,m=s.style;let v=[];const x=an(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new Ue("terrain",r,`object expected, ${x} found`)]),v;for(const b in r)v=v.concat(u[b]?s.validateSpec({key:b,value:r[b],valueSpec:u[b],validateSpec:s.validateSpec,style:m,styleSpec:o}):[new Ue(b,r[b],`unknown property "${b}"`)]);return v}function oh(s){let r=[];const o=s.value,u=s.key;if(Array.isArray(o)){const m=[],v=[];for(const x in o)o[x].id&&m.includes(o[x].id)&&r.push(new Ue(u,o,`all the sprites' ids must be unique, but ${o[x].id} is duplicated`)),m.push(o[x].id),o[x].url&&v.includes(o[x].url)&&r.push(new Ue(u,o,`all the sprites' URLs must be unique, but ${o[x].url} is duplicated`)),v.push(o[x].url),r=r.concat(di({key:`${u}[${x}]`,value:o[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return r}return fo({key:u,value:o})}const lc={"*":()=>[],array:el,boolean:function(s){const r=s.value,o=s.key,u=an(r);return u!=="boolean"?[new Ue(o,r,`boolean expected, ${u} found`)]:[]},number:Ju,color:function(s){const r=s.key,o=s.value,u=an(o);return u!=="string"?[new Ue(r,o,`color expected, ${u} found`)]:gn.parse(String(o))?[]:[new Ue(r,o,`color expected, "${o}" found`)]},constants:kf,enum:Ss,filter:Qu,function:ic,layer:nh,object:di,source:tl,light:rh,sky:ih,terrain:sh,projection:function(s){const r=s.value,o=s.styleSpec,u=o.projection,m=s.style,v=an(r);if(r===void 0)return[];if(v!=="object")return[new Ue("projection",r,`object expected, ${v} found`)];let x=[];for(const b in r)x=x.concat(u[b]?s.validateSpec({key:b,value:r[b],valueSpec:u[b],style:m,styleSpec:o}):[new Ue(b,r[b],`unknown property "${b}"`)]);return x},string:fo,formatted:function(s){return fo(s).length===0?[]:Ko(s)},resolvedImage:function(s){return fo(s).length===0?[]:Ko(s)},padding:function(s){const r=s.key,o=s.value;if(an(o)==="array"){if(o.length<1||o.length>4)return[new Ue(r,o,`padding requires 1 to 4 values; ${o.length} values found`)];const u={type:"number"};let m=[];for(let v=0;v<o.length;v++)m=m.concat(s.validateSpec({key:`${r}[${v}]`,value:o[v],validateSpec:s.validateSpec,valueSpec:u}));return m}return Ju({key:r,value:o,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const r=s.key,o=s.value,u=an(o),m=s.styleSpec;if(u!=="array"||o.length<1||o.length%2!=0)return[new Ue(r,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<o.length;x+=2)v=v.concat(Ss({key:`${r}[${x}]`,value:o[x],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(el({key:`${r}[${x+1}]`,value:o[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:m}));return v},sprite:oh};function nl(s){const r=s.value,o=s.valueSpec,u=s.styleSpec;return s.validateSpec=nl,o.expression&&Yl(Un(r))?ic(s):o.expression&&ec(Gi(r))?Ko(s):o.type&&lc[o.type]?lc[o.type](s):di(tr({},s,{valueSpec:o.type?u[o.type]:o}))}function Tf(s){const r=s.value,o=s.key,u=fo(s);return u.length||(r.indexOf("{fontstack}")===-1&&u.push(new Ue(o,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&u.push(new Ue(o,r,'"glyphs" url must include a "{range}" token'))),u}function Ei(s,r=Pe){let o=[];return o=o.concat(nl({key:"",value:s,valueSpec:r.$root,styleSpec:r,style:s,validateSpec:nl,objectElementValidators:{glyphs:Tf,"*":()=>[]}})),s.constants&&(o=o.concat(kf({key:"constants",value:s.constants}))),ah(o)}function as(s){return function(r){return s({...r,validateSpec:nl})}}function ah(s){return[].concat(s).sort((r,o)=>r.line-o.line)}function Wi(s){return function(...r){return ah(s.apply(this,r))}}Ei.source=Wi(as(tl)),Ei.sprite=Wi(as(oh)),Ei.glyphs=Wi(as(Tf)),Ei.light=Wi(as(rh)),Ei.sky=Wi(as(ih)),Ei.terrain=Wi(as(sh)),Ei.layer=Wi(as(nh)),Ei.filter=Wi(as(Qu)),Ei.paintProperty=Wi(as(oc)),Ei.layoutProperty=Wi(as(th));const po=Ei,Cg=po.light,Eg=po.sky,Cf=po.paintProperty,Ef=po.layoutProperty;function lh(s,r){let o=!1;if(r&&r.length)for(const u of r)s.fire(new ht(new Error(u.message))),o=!0;return o}class Yo{constructor(r,o,u){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(o=x[1])+2*(u=x[2]);for(let k=0;k<this.d*this.d;k++){const M=x[3+k],D=x[3+k+1];m.push(M===D?null:x.subarray(M,D))}const b=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],b),this.bboxes=x.subarray(b),this.insert=this._insertReadonly}else{this.d=o+2*u;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=r,this.padding=u,this.scale=o/r,this.uid=0;const v=u/o*r;this.min=-v,this.max=r+v}insert(r,o,u,m,v){this._forEachCell(o,u,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,o,u,m,v,x){this.cells[v].push(x)}query(r,o,u,m,v){const x=this.min,b=this.max;if(r<=x&&o<=x&&b<=u&&b<=m&&!v)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(r,o,u,m,this._queryCell,k,{},v),k}}_queryCell(r,o,u,m,v,x,b,k){const M=this.cells[v];if(M!==null){const D=this.keys,R=this.bboxes;for(let N=0;N<M.length;N++){const U=M[N];if(b[U]===void 0){const q=4*U;(k?k(R[q+0],R[q+1],R[q+2],R[q+3]):r<=R[q+2]&&o<=R[q+3]&&u>=R[q+0]&&m>=R[q+1])?(b[U]=!0,x.push(D[U])):b[U]=!1}}}}_forEachCell(r,o,u,m,v,x,b,k){const M=this._convertToCellCoord(r),D=this._convertToCellCoord(o),R=this._convertToCellCoord(u),N=this._convertToCellCoord(m);for(let U=M;U<=R;U++)for(let q=D;q<=N;q++){const Y=this.d*q+U;if((!k||k(this._convertFromCellCoord(U),this._convertFromCellCoord(q),this._convertFromCellCoord(U+1),this._convertFromCellCoord(q+1)))&&v.call(this,r,o,u,m,Y,x,b,k))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,o=3+this.cells.length+1+1;let u=0;for(let x=0;x<this.cells.length;x++)u+=this.cells[x].length;const m=new Int32Array(o+u+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=o;for(let x=0;x<r.length;x++){const b=r[x];m[3+x]=v,m.set(b,v),v+=b.length}return m[3+r.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+r.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(r,o){const u=r.toArrayBuffer();return o&&o.push(u),{buffer:u}}static deserialize(r){return new Yo(r.buffer)}}const Pi={};function ut(s,r,o={}){if(Pi[s])throw new Error(`${s} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:s,writeable:!1}),Pi[s]={klass:r,omit:o.omit||[],shallow:o.shallow||[]}}ut("Object",Object),ut("TransferableGridIndex",Yo),ut("Color",gn),ut("Error",Error),ut("AJAXError",St),ut("ResolvedImage",hi),ut("StylePropertyFunction",Xo),ut("StyleExpression",Ql,{omit:["_evaluator"]}),ut("ZoomDependentExpression",Zo),ut("ZoomConstantExpression",qo),ut("CompoundExpression",Ci,{omit:["_evaluate"]});for(const s in Vo)Vo[s]._classRegistryKey||ut(`Expression_${s}`,Vo[s]);function cc(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function ch(s){return s.$name||s.constructor._classRegistryKey}function Pf(s){return!function(r){if(r===null||typeof r!="object")return!1;const o=ch(r);return!(!o||o==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||cc(s)||je(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Jo(s,r){if(Pf(s))return(cc(s)||je(s))&&r&&r.push(s),ArrayBuffer.isView(s)&&r&&r.push(s.buffer),s instanceof ImageData&&r&&r.push(s.data.buffer),s;if(Array.isArray(s)){const v=[];for(const x of s)v.push(Jo(x,r));return v}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const o=ch(s);if(!o)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Pi[o])throw new Error(`${o} is not registered.`);const{klass:u}=Pi[o],m=u.serialize?u.serialize(s,r):{};if(u.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in s){if(!s.hasOwnProperty(v)||Pi[o].omit.indexOf(v)>=0)continue;const x=s[v];m[v]=Pi[o].shallow.indexOf(v)>=0?x:Jo(x,r)}s instanceof Error&&(m.message=s.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(m.$name=o),m}function Qo(s){if(Pf(s))return s;if(Array.isArray(s))return s.map(Qo);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const r=ch(s)||"Object";if(!Pi[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:o}=Pi[r];if(!o)throw new Error(`can't deserialize unregistered class ${r}`);if(o.deserialize)return o.deserialize(s);const u=Object.create(o.prototype);for(const m of Object.keys(s)){if(m==="$name")continue;const v=s[m];u[m]=Pi[r].shallow.indexOf(m)>=0?v:Qo(v)}return u}class uh{constructor(){this.first=!0}update(r,o){const u=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=o),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=u,!0))}}const Qt={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function hh(s){for(const r of s)if(fh(r.charCodeAt(0)))return!0;return!1}function Pg(s){for(const r of s)if(!ea(r.charCodeAt(0)))return!1;return!0}function dh(s){const r=s.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}}).filter(o=>o);return new RegExp(r.join("|"),"u")}const Ig=dh(["Arab","Dupl","Mong","Ougr","Syrc"]);function ea(s){return!Ig.test(String.fromCodePoint(s))}const If=dh(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function fh(s){return!(s!==746&&s!==747&&(s<4352||!(Qt["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Qt["CJK Compatibility"](s)||Qt["CJK Strokes"](s)||!(!Qt["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Qt["Enclosed CJK Letters and Months"](s)||Qt["Ideographic Description Characters"](s)||Qt.Kanbun(s)||Qt.Katakana(s)&&s!==12540||!(!Qt["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Qt["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Qt["Vertical Forms"](s)||Qt["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||If.test(String.fromCodePoint(s)))))}function Af(s){return!(fh(s)||function(r){return!!(Qt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Qt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Qt["Letterlike Symbols"](r)||Qt["Number Forms"](r)||Qt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Qt["Control Pictures"](r)&&r!==9251||Qt["Optical Character Recognition"](r)||Qt["Enclosed Alphanumerics"](r)||Qt["Geometric Shapes"](r)||Qt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Qt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Qt["CJK Symbols and Punctuation"](r)||Qt.Katakana(r)||Qt["Private Use Area"](r)||Qt["CJK Compatibility Forms"](r)||Qt["Small Form Variants"](r)||Qt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(s))}const Ag=dh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ph(s){return Ag.test(String.fromCodePoint(s))}function Mg(s,r){return!(!r&&ph(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Qt.Khmer(s))}function Dg(s){for(const r of s)if(ph(r.charCodeAt(0)))return!0;return!1}const fi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Pn{constructor(r,o){this.zoom=r,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new uh,this.transition={})}isSupportedScript(r){return function(o,u){for(const m of o)if(!Mg(m.charCodeAt(0),u))return!1;return!0}(r,fi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,o=r-Math.floor(r),u=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*o}}}class ta{constructor(r,o){this.property=r,this.value=o,this.expression=function(u,m){if(Yl(u))return new Xo(u,m);if(ec(u)){const v=Xu(u,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=u;return m.type==="color"&&typeof u=="string"?v=gn.parse(u):m.type!=="padding"||typeof u!="number"&&!Array.isArray(u)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(u)&&(v=Ti.parse(u)):v=ui.parse(u),{kind:"constant",evaluate:()=>v}}}(o===void 0?r.specification.default:o,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,o,u){return this.property.possiblyEvaluate(this,r,o,u)}}class uc{constructor(r){this.property=r,this.value=new ta(r,void 0)}transitioned(r,o){return new Mf(this.property,this.value,o,fe({},r.transition,this.transition),r.now)}untransitioned(){return new Mf(this.property,this.value,null,{},0)}}class hc{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return ze(this._values[r].value.value)}setValue(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new uc(this._values[r].property)),this._values[r].value=new ta(this._values[r].property,o===null?void 0:ze(o))}getTransition(r){return ze(this._values[r].transition)}setTransition(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new uc(this._values[r].property)),this._values[r].transition=ze(o)||void 0}serialize(){const r={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(r[o]=u);const m=this.getTransition(o);m!==void 0&&(r[`${o}-transition`]=m)}return r}transitioned(r,o){const u=new rl(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].transitioned(r,o._values[m]);return u}untransitioned(){const r=new rl(this._properties);for(const o of Object.keys(this._values))r._values[o]=this._values[o].untransitioned();return r}}class Mf{constructor(r,o,u,m,v){this.property=r,this.value=o,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=u)}possiblyEvaluate(r,o,u){const m=r.now||0,v=this.value.possiblyEvaluate(r,o,u),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(r,o,u);{const b=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,o,u),v,function(k){if(k<=0)return 0;if(k>=1)return 1;const M=k*k,D=M*k;return 4*(k<.5?D:3*(k-M)+D-.75)}(b))}}return v}}class rl{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,o,u){const m=new sl(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,o,u);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class il{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return ze(this._values[r].value)}setValue(r,o){this._values[r]=new ta(this._values[r].property,o===null?void 0:ze(o))}serialize(){const r={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(r[o]=u)}return r}possiblyEvaluate(r,o,u){const m=new sl(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,o,u);return m}}class ls{constructor(r,o,u){this.property=r,this.value=o,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,o,u,m){return this.property.evaluate(this.value,this.parameters,r,o,u,m)}}class sl{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class mt{constructor(r){this.specification=r}possiblyEvaluate(r,o){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(o)}interpolate(r,o,u){const m=Xr[this.specification.type];return m?m(r,o,u):r}}class Mt{constructor(r,o){this.specification=r,this.overrides=o}possiblyEvaluate(r,o,u,m){return new ls(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(o,null,{},u,m)}:r.expression,o)}interpolate(r,o,u){if(r.value.kind!=="constant"||o.value.kind!=="constant")return r;if(r.value.value===void 0||o.value.value===void 0)return new ls(this,{kind:"constant",value:void 0},r.parameters);const m=Xr[this.specification.type];if(m){const v=m(r.value.value,o.value.value,u);return new ls(this,{kind:"constant",value:v},r.parameters)}return r}evaluate(r,o,u,m,v,x){return r.kind==="constant"?r.value:r.evaluate(o,u,m,v,x)}}class dc extends Mt{possiblyEvaluate(r,o,u,m){if(r.value===void 0)return new ls(this,{kind:"constant",value:void 0},o);if(r.expression.kind==="constant"){const v=r.expression.evaluate(o,null,{},u,m),x=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,b=this._calculate(x,x,x,o);return new ls(this,{kind:"constant",value:b},o)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:o.zoom-1}),r.expression.evaluate({zoom:o.zoom}),r.expression.evaluate({zoom:o.zoom+1}),o);return new ls(this,{kind:"constant",value:v},o)}return new ls(this,r.expression,o)}evaluate(r,o,u,m,v,x){if(r.kind==="source"){const b=r.evaluate(o,u,m,v,x);return this._calculate(b,b,b,o)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(o.zoom)-1},u,m),r.evaluate({zoom:Math.floor(o.zoom)},u,m),r.evaluate({zoom:Math.floor(o.zoom)+1},u,m),o):r.value}_calculate(r,o,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:u,to:o}}interpolate(r){return r}}class fc{constructor(r){this.specification=r}possiblyEvaluate(r,o,u,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(o,null,{},u,m);return this._calculate(v,v,v,o)}return this._calculate(r.expression.evaluate(new Pn(Math.floor(o.zoom-1),o)),r.expression.evaluate(new Pn(Math.floor(o.zoom),o)),r.expression.evaluate(new Pn(Math.floor(o.zoom+1),o)),o)}}_calculate(r,o,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:u,to:o}}interpolate(r){return r}}class mh{constructor(r){this.specification=r}possiblyEvaluate(r,o,u,m){return!!r.expression.evaluate(o,null,{},u,m)}interpolate(){return!1}}class _{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in r){const u=r[o];u.specification.overridable&&this.overridableProperties.push(o);const m=this.defaultPropertyValues[o]=new ta(u,void 0),v=this.defaultTransitionablePropertyValues[o]=new uc(u);this.defaultTransitioningPropertyValues[o]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=m.possiblyEvaluate({})}}}ut("DataDrivenProperty",Mt),ut("DataConstantProperty",mt),ut("CrossFadedDataDrivenProperty",dc),ut("CrossFadedProperty",fc),ut("ColorRampProperty",mh);const n="-transition";class l extends wn{constructor(r,o){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),o.layout&&(this._unevaluatedLayout=new il(o.layout)),o.paint)){this._transitionablePaint=new hc(o.paint);for(const u in r.paint)this.setPaintProperty(u,r.paint[u],{validate:!1});for(const u in r.layout)this.setLayoutProperty(u,r.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sl(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,o,u={}){o!=null&&this._validate(Ef,`layers.${this.id}.layout.${r}`,r,o,u)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,o):this.visibility=o)}getPaintProperty(r){return r.endsWith(n)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,o,u={}){if(o!=null&&this._validate(Cf,`layers.${this.id}.paint.${r}`,r,o,u))return!1;if(r.endsWith(n))return this._transitionablePaint.setTransition(r.slice(0,-11),o||void 0),!1;{const m=this._transitionablePaint._values[r],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),b=m.value;this._transitionablePaint.setValue(r,o),this._handleSpecialPaintPropertyUpdate(r);const k=this._transitionablePaint._values[r].value;return k.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(r,b,k)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,o,u){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,o){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,o)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Le(r,(o,u)=>!(o===void 0||u==="layout"&&!Object.keys(o).length||u==="paint"&&!Object.keys(o).length))}_validate(r,o,u,m,v={}){return(!v||v.validate!==!1)&&lh(this,r.call(po,{key:o,layerType:this.type,objectKey:u,value:m,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const o=this.paint.get(r);if(o instanceof ls&&Ho(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class f{constructor(r,o){this._structArray=r,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,o){return r._trim(),o&&(r.isTransferred=!0,o.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const o=Object.create(this.prototype);return o.arrayBuffer=r.arrayBuffer,o.length=r.length,o.capacity=r.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function w(s,r=1){let o=0,u=0;return{members:s.map(m=>{const v=d[m.type].BYTES_PER_ELEMENT,x=o=C(o,Math.max(r,v)),b=m.components||1;return u=Math.max(u,v),o+=v*b,{name:m.name,type:m.type,components:b,offset:x}}),size:C(o,Math.max(u,r)),alignment:r}}function C(s,r){return Math.ceil(s/r)*r}class I extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o){const u=this.length;return this.resize(u+1),this.emplace(u,r,o)}emplace(r,o,u){const m=2*r;return this.int16[m+0]=o,this.int16[m+1]=u,r}}I.prototype.bytesPerElement=4,ut("StructArrayLayout2i4",I);class z extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,u)}emplace(r,o,u,m){const v=3*r;return this.int16[v+0]=o,this.int16[v+1]=u,this.int16[v+2]=m,r}}z.prototype.bytesPerElement=6,ut("StructArrayLayout3i6",z);class L extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,o,u,m)}emplace(r,o,u,m,v){const x=4*r;return this.int16[x+0]=o,this.int16[x+1]=u,this.int16[x+2]=m,this.int16[x+3]=v,r}}L.prototype.bytesPerElement=8,ut("StructArrayLayout4i8",L);class B extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,u,m,v,x)}emplace(r,o,u,m,v,x,b){const k=6*r;return this.int16[k+0]=o,this.int16[k+1]=u,this.int16[k+2]=m,this.int16[k+3]=v,this.int16[k+4]=x,this.int16[k+5]=b,r}}B.prototype.bytesPerElement=12,ut("StructArrayLayout2i4i12",B);class W extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,u,m,v,x)}emplace(r,o,u,m,v,x,b){const k=4*r,M=8*r;return this.int16[k+0]=o,this.int16[k+1]=u,this.uint8[M+4]=m,this.uint8[M+5]=v,this.uint8[M+6]=x,this.uint8[M+7]=b,r}}W.prototype.bytesPerElement=8,ut("StructArrayLayout2i4ub8",W);class J extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o){const u=this.length;return this.resize(u+1),this.emplace(u,r,o)}emplace(r,o,u){const m=2*r;return this.float32[m+0]=o,this.float32[m+1]=u,r}}J.prototype.bytesPerElement=8,ut("StructArrayLayout2f8",J);class Q extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v,x,b,k,M,D){const R=this.length;return this.resize(R+1),this.emplace(R,r,o,u,m,v,x,b,k,M,D)}emplace(r,o,u,m,v,x,b,k,M,D,R){const N=10*r;return this.uint16[N+0]=o,this.uint16[N+1]=u,this.uint16[N+2]=m,this.uint16[N+3]=v,this.uint16[N+4]=x,this.uint16[N+5]=b,this.uint16[N+6]=k,this.uint16[N+7]=M,this.uint16[N+8]=D,this.uint16[N+9]=R,r}}Q.prototype.bytesPerElement=20,ut("StructArrayLayout10ui20",Q);class ae extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v,x,b,k,M,D,R,N){const U=this.length;return this.resize(U+1),this.emplace(U,r,o,u,m,v,x,b,k,M,D,R,N)}emplace(r,o,u,m,v,x,b,k,M,D,R,N,U){const q=12*r;return this.int16[q+0]=o,this.int16[q+1]=u,this.int16[q+2]=m,this.int16[q+3]=v,this.uint16[q+4]=x,this.uint16[q+5]=b,this.uint16[q+6]=k,this.uint16[q+7]=M,this.int16[q+8]=D,this.int16[q+9]=R,this.int16[q+10]=N,this.int16[q+11]=U,r}}ae.prototype.bytesPerElement=24,ut("StructArrayLayout4i4ui4i24",ae);class ue extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,u)}emplace(r,o,u,m){const v=3*r;return this.float32[v+0]=o,this.float32[v+1]=u,this.float32[v+2]=m,r}}ue.prototype.bytesPerElement=12,ut("StructArrayLayout3f12",ue);class de extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint32[1*r+0]=o,r}}de.prototype.bytesPerElement=4,ut("StructArrayLayout1ul4",de);class ge extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v,x,b,k,M){const D=this.length;return this.resize(D+1),this.emplace(D,r,o,u,m,v,x,b,k,M)}emplace(r,o,u,m,v,x,b,k,M,D){const R=10*r,N=5*r;return this.int16[R+0]=o,this.int16[R+1]=u,this.int16[R+2]=m,this.int16[R+3]=v,this.int16[R+4]=x,this.int16[R+5]=b,this.uint32[N+3]=k,this.uint16[R+8]=M,this.uint16[R+9]=D,r}}ge.prototype.bytesPerElement=20,ut("StructArrayLayout6i1ul2ui20",ge);class se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,u,m,v,x)}emplace(r,o,u,m,v,x,b){const k=6*r;return this.int16[k+0]=o,this.int16[k+1]=u,this.int16[k+2]=m,this.int16[k+3]=v,this.int16[k+4]=x,this.int16[k+5]=b,r}}se.prototype.bytesPerElement=12,ut("StructArrayLayout2i2i2i12",se);class xe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,o,u,m,v)}emplace(r,o,u,m,v,x){const b=4*r,k=8*r;return this.float32[b+0]=o,this.float32[b+1]=u,this.float32[b+2]=m,this.int16[k+6]=v,this.int16[k+7]=x,r}}xe.prototype.bytesPerElement=16,ut("StructArrayLayout2f1f2i16",xe);class Se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,u,m,v,x)}emplace(r,o,u,m,v,x,b){const k=16*r,M=4*r,D=8*r;return this.uint8[k+0]=o,this.uint8[k+1]=u,this.float32[M+1]=m,this.float32[M+2]=v,this.int16[D+6]=x,this.int16[D+7]=b,r}}Se.prototype.bytesPerElement=16,ut("StructArrayLayout2ub2f2i16",Se);class Ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,u)}emplace(r,o,u,m){const v=3*r;return this.uint16[v+0]=o,this.uint16[v+1]=u,this.uint16[v+2]=m,r}}Ee.prototype.bytesPerElement=6,ut("StructArrayLayout3ui6",Ee);class Oe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v,x,b,k,M,D,R,N,U,q,Y,oe,ce){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,r,o,u,m,v,x,b,k,M,D,R,N,U,q,Y,oe,ce)}emplace(r,o,u,m,v,x,b,k,M,D,R,N,U,q,Y,oe,ce,Ce){const _e=24*r,ke=12*r,Re=48*r;return this.int16[_e+0]=o,this.int16[_e+1]=u,this.uint16[_e+2]=m,this.uint16[_e+3]=v,this.uint32[ke+2]=x,this.uint32[ke+3]=b,this.uint32[ke+4]=k,this.uint16[_e+10]=M,this.uint16[_e+11]=D,this.uint16[_e+12]=R,this.float32[ke+7]=N,this.float32[ke+8]=U,this.uint8[Re+36]=q,this.uint8[Re+37]=Y,this.uint8[Re+38]=oe,this.uint32[ke+10]=ce,this.int16[_e+22]=Ce,r}}Oe.prototype.bytesPerElement=48,ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Oe);class Ge extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,m,v,x,b,k,M,D,R,N,U,q,Y,oe,ce,Ce,_e,ke,Re,Ve,ot,At,rt,et,vt,dt){const ct=this.length;return this.resize(ct+1),this.emplace(ct,r,o,u,m,v,x,b,k,M,D,R,N,U,q,Y,oe,ce,Ce,_e,ke,Re,Ve,ot,At,rt,et,vt,dt)}emplace(r,o,u,m,v,x,b,k,M,D,R,N,U,q,Y,oe,ce,Ce,_e,ke,Re,Ve,ot,At,rt,et,vt,dt,ct){const Fe=32*r,bt=16*r;return this.int16[Fe+0]=o,this.int16[Fe+1]=u,this.int16[Fe+2]=m,this.int16[Fe+3]=v,this.int16[Fe+4]=x,this.int16[Fe+5]=b,this.int16[Fe+6]=k,this.int16[Fe+7]=M,this.uint16[Fe+8]=D,this.uint16[Fe+9]=R,this.uint16[Fe+10]=N,this.uint16[Fe+11]=U,this.uint16[Fe+12]=q,this.uint16[Fe+13]=Y,this.uint16[Fe+14]=oe,this.uint16[Fe+15]=ce,this.uint16[Fe+16]=Ce,this.uint16[Fe+17]=_e,this.uint16[Fe+18]=ke,this.uint16[Fe+19]=Re,this.uint16[Fe+20]=Ve,this.uint16[Fe+21]=ot,this.uint16[Fe+22]=At,this.uint32[bt+12]=rt,this.float32[bt+13]=et,this.float32[bt+14]=vt,this.uint16[Fe+30]=dt,this.uint16[Fe+31]=ct,r}}Ge.prototype.bytesPerElement=64,ut("StructArrayLayout8i15ui1ul2f2ui64",Ge);class tt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.float32[1*r+0]=o,r}}tt.prototype.bytesPerElement=4,ut("StructArrayLayout1f4",tt);class lt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,u)}emplace(r,o,u,m){const v=3*r;return this.uint16[6*r+0]=o,this.float32[v+1]=u,this.float32[v+2]=m,r}}lt.prototype.bytesPerElement=12,ut("StructArrayLayout1ui2f12",lt);class Je extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,u){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,u)}emplace(r,o,u,m){const v=4*r;return this.uint32[2*r+0]=o,this.uint16[v+2]=u,this.uint16[v+3]=m,r}}Je.prototype.bytesPerElement=8,ut("StructArrayLayout1ul2ui8",Je);class Ye extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o){const u=this.length;return this.resize(u+1),this.emplace(u,r,o)}emplace(r,o,u){const m=2*r;return this.uint16[m+0]=o,this.uint16[m+1]=u,r}}Ye.prototype.bytesPerElement=4,ut("StructArrayLayout2ui4",Ye);class gt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint16[1*r+0]=o,r}}gt.prototype.bytesPerElement=2,ut("StructArrayLayout1ui2",gt);class Ot extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,o,u,m)}emplace(r,o,u,m,v){const x=4*r;return this.float32[x+0]=o,this.float32[x+1]=u,this.float32[x+2]=m,this.float32[x+3]=v,r}}Ot.prototype.bytesPerElement=16,ut("StructArrayLayout4f16",Ot);class Qe extends f{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}Qe.prototype.size=20;class st extends ge{get(r){return new Qe(this,r)}}ut("CollisionBoxArray",st);class Bt extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Bt.prototype.size=48;class In extends Oe{get(r){return new Bt(this,r)}}ut("PlacedSymbolArray",In);class $t extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}$t.prototype.size=64;class Jt extends Ge{get(r){return new $t(this,r)}}ut("SymbolInstanceArray",Jt);class An extends tt{getoffsetX(r){return this.float32[1*r+0]}}ut("GlyphOffsetArray",An);class Ar extends z{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}ut("SymbolLineVertexArray",Ar);class qi extends f{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}qi.prototype.size=12;class Mn extends lt{get(r){return new qi(this,r)}}ut("TextAnchorOffsetArray",Mn);class Yr extends f{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Yr.prototype.size=8;class jr extends Je{get(r){return new Yr(this,r)}}ut("FeatureIndexArray",jr);class Mr extends I{}class Vr extends I{}class cs extends I{}class na extends B{}class pc extends W{}class ra extends J{}class Ii extends Q{}class mc extends ae{}class gh extends ue{}class Ai extends de{}class Mi extends se{}class Vs extends Se{}class Zi extends Ee{}class br extends Ye{}const Dr=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:pi}=Dr;class en{constructor(r=[]){this.segments=r}prepareSegment(r,o,u,m){let v=this.segments[this.segments.length-1];return r>en.MAX_VERTEX_ARRAY_LENGTH&&De(`Max vertices per segment is ${en.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>en.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const o in r.vaos)r.vaos[o].destroy()}static simpleSegment(r,o,u,m){return new en([{vertexOffset:r,primitiveOffset:o,vertexLength:u,primitiveLength:m,vaos:{},sortKey:0}])}}function mo(s,r){return 256*(s=ye(Math.floor(s),0,255))+ye(Math.floor(r),0,255)}en.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ut("SegmentVector",en);const ia=w([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var sa={exports:{}},Df={exports:{}};Df.exports=function(s,r){var o,u,m,v,x,b,k,M;for(u=s.length-(o=3&s.length),m=r,x=3432918353,b=461845907,M=0;M<u;)k=255&s.charCodeAt(M)|(255&s.charCodeAt(++M))<<8|(255&s.charCodeAt(++M))<<16|(255&s.charCodeAt(++M))<<24,++M,m=27492+(65535&(v=5*(65535&(m=(m^=k=(65535&(k=(k=(65535&k)*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*b+(((k>>>16)*b&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(k=0,o){case 3:k^=(255&s.charCodeAt(M+2))<<16;case 2:k^=(255&s.charCodeAt(M+1))<<8;case 1:m^=k=(65535&(k=(k=(65535&(k^=255&s.charCodeAt(M)))*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*b+(((k>>>16)*b&65535)<<16)&4294967295}return m^=s.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var zg=Df.exports,zf={exports:{}};zf.exports=function(s,r){for(var o,u=s.length,m=r^u,v=0;u>=4;)o=1540483477*(65535&(o=255&s.charCodeAt(v)|(255&s.charCodeAt(++v))<<8|(255&s.charCodeAt(++v))<<16|(255&s.charCodeAt(++v))<<24))+((1540483477*(o>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),u-=4,++v;switch(u){case 3:m^=(255&s.charCodeAt(v+2))<<16;case 2:m^=(255&s.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&s.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Us=zg,Rf=zf.exports;sa.exports=Us,sa.exports.murmur3=Us,sa.exports.murmur2=Rf;var gc=S(sa.exports);class ol{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,o,u,m){this.ids.push(yc(r)),this.positions.push(o,u,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=yc(r);let u=0,m=this.ids.length-1;for(;u<m;){const x=u+m>>1;this.ids[x]>=o?m=x:u=x+1}const v=[];for(;this.ids[u]===o;)v.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return v}static serialize(r,o){const u=new Float64Array(r.ids),m=new Uint32Array(r.positions);return _c(u,m,0,u.length-1),o&&o.push(u.buffer,m.buffer),{ids:u,positions:m}}static deserialize(r){const o=new ol;return o.ids=r.ids,o.positions=r.positions,o.indexed=!0,o}}function yc(s){const r=+s;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:gc(String(s))}function _c(s,r,o,u){for(;o<u;){const m=s[o+u>>1];let v=o-1,x=u+1;for(;;){do v++;while(s[v]<m);do x--;while(s[x]>m);if(v>=x)break;oa(s,v,x),oa(r,3*v,3*x),oa(r,3*v+1,3*x+1),oa(r,3*v+2,3*x+2)}x-o<u-x?(_c(s,r,o,x),o=x+1):(_c(s,r,x+1,u),u=x)}}function oa(s,r,o){const u=s[r];s[r]=s[o],s[o]=u}ut("FeaturePositionMap",ol);class al{constructor(r,o){this.gl=r.gl,this.location=o}}class Lf extends al{constructor(r,o){super(r,o),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class jx extends al{constructor(r,o){super(r,o),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Vx extends al{constructor(r,o){super(r,o),this.current=gn.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const sI=new Float32Array(16);function Rg(s){return[mo(255*s.r,255*s.g),mo(255*s.b,255*s.a)]}class yh{constructor(r,o,u){this.value=r,this.uniformNames=o.map(m=>`u_${m}`),this.type=u}setUniform(r,o,u){r.set(u.constantOr(this.value))}getBinding(r,o,u){return this.type==="color"?new Vx(r,o):new Lf(r,o)}}class vc{constructor(r,o){this.uniformNames=o.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=r.tlbr}setUniform(r,o,u,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,o,u){return u.substr(0,9)==="u_pattern"?new jx(r,o):new Lf(r,o)}}class go{constructor(r,o,u,m){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(v=>({name:`a_${v}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,o,u,m,v){const x=this.paintVertexArray.length,b=this.expression.evaluate(new Pn(0),o,{},m,[],v);this.paintVertexArray.resize(r),this._setPaintValue(x,r,b)}updatePaintArray(r,o,u,m){const v=this.expression.evaluate({zoom:0},u,m);this._setPaintValue(r,o,v)}_setPaintValue(r,o,u){if(this.type==="color"){const m=Rg(u);for(let v=r;v<o;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=r;m<o;m++)this.paintVertexArray.emplace(m,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ks{constructor(r,o,u,m,v,x){this.expression=r,this.uniformNames=o.map(b=>`u_${b}_t`),this.type=u,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=o.map(b=>({name:`a_${b}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,o,u,m,v){const x=this.expression.evaluate(new Pn(this.zoom),o,{},m,[],v),b=this.expression.evaluate(new Pn(this.zoom+1),o,{},m,[],v),k=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(k,r,x,b)}updatePaintArray(r,o,u,m){const v=this.expression.evaluate({zoom:this.zoom},u,m),x=this.expression.evaluate({zoom:this.zoom+1},u,m);this._setPaintValue(r,o,v,x)}_setPaintValue(r,o,u,m){if(this.type==="color"){const v=Rg(u),x=Rg(m);for(let b=r;b<o;b++)this.paintVertexArray.emplace(b,v[0],v[1],x[0],x[1])}else{for(let v=r;v<o;v++)this.paintVertexArray.emplace(v,u,m);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,o){const u=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,m=ye(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,o,u){return new Lf(r,o)}}class aa{constructor(r,o,u,m,v,x){this.expression=r,this.type=o,this.useIntegerZoom=u,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,o,u){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,o.patterns&&o.patterns[this.layerId],u)}updatePaintArray(r,o,u,m,v){this._setPaintValues(r,o,u.patterns&&u.patterns[this.layerId],v)}_setPaintValues(r,o,u,m){if(!m||!u)return;const{min:v,mid:x,max:b}=u,k=m[v],M=m[x],D=m[b];if(k&&M&&D)for(let R=r;R<o;R++)this.zoomInPaintVertexArray.emplace(R,M.tl[0],M.tl[1],M.br[0],M.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],M.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(R,M.tl[0],M.tl[1],M.br[0],M.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],M.pixelRatio,D.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,ia.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,ia.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ux{constructor(r,o,u){this.binders={},this._buffers=[];const m=[];for(const v in r.paint._values){if(!u(v))continue;const x=r.paint.get(v);if(!(x instanceof ls&&Ho(x.property.specification)))continue;const b=oI(v,r.type),k=x.value,M=x.property.specification.type,D=x.property.useIntegerZoom,R=x.property.specification["property-type"],N=R==="cross-faded"||R==="cross-faded-data-driven";if(k.kind==="constant")this.binders[v]=N?new vc(k.value,b):new yh(k.value,b,M),m.push(`/u_${v}`);else if(k.kind==="source"||N){const U=$x(v,M,"source");this.binders[v]=N?new aa(k,M,D,o,U,r.id):new go(k,b,M,U),m.push(`/a_${v}`)}else{const U=$x(v,M,"composite");this.binders[v]=new ks(k,b,M,D,o,U),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const o=this.binders[r];return o instanceof go||o instanceof ks?o.maxValue:0}populatePaintArrays(r,o,u,m,v){for(const x in this.binders){const b=this.binders[x];(b instanceof go||b instanceof ks||b instanceof aa)&&b.populatePaintArray(r,o,u,m,v)}}setConstantPatternPositions(r,o){for(const u in this.binders){const m=this.binders[u];m instanceof vc&&m.setConstantPatternPositions(r,o)}}updatePaintArrays(r,o,u,m,v){let x=!1;for(const b in r){const k=o.getPositions(b);for(const M of k){const D=u.feature(M.index);for(const R in this.binders){const N=this.binders[R];if((N instanceof go||N instanceof ks||N instanceof aa)&&N.expression.isStateDependent===!0){const U=m.paint.get(R);N.expression=U.value,N.updatePaintArray(M.start,M.end,D,r[b],v),x=!0}}}}return x}defines(){const r=[];for(const o in this.binders){const u=this.binders[o];(u instanceof yh||u instanceof vc)&&r.push(...u.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof go||u instanceof ks)for(let m=0;m<u.paintVertexAttributes.length;m++)r.push(u.paintVertexAttributes[m].name);else if(u instanceof aa)for(let m=0;m<ia.members.length;m++)r.push(ia.members[m].name)}return r}getBinderUniforms(){const r=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof yh||u instanceof vc||u instanceof ks)for(const m of u.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,o){const u=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof yh||v instanceof vc||v instanceof ks){for(const x of v.uniformNames)if(o[x]){const b=v.getBinding(r,o[x],x);u.push({name:x,property:m,binding:b})}}}return u}setUniforms(r,o,u,m){for(const{name:v,property:x,binding:b}of o)this.binders[x].setUniform(b,m,u.get(x),v)}updatePaintBuffers(r){this._buffers=[];for(const o in this.binders){const u=this.binders[o];if(r&&u instanceof aa){const m=r.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(u instanceof go||u instanceof ks)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(r){for(const o in this.binders){const u=this.binders[o];(u instanceof go||u instanceof ks||u instanceof aa)&&u.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const o=this.binders[r];(o instanceof go||o instanceof ks||o instanceof aa)&&o.destroy()}}}class ll{constructor(r,o,u=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new Ux(m,o,u);this.needsUpload=!1,this._featureMap=new ol,this._bufferOffset=0}populatePaintArrays(r,o,u,m,v,x){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(r,o,m,v,x);o.id!==void 0&&this._featureMap.add(o.id,u,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,o,u,m){for(const v of u)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,o,v,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function oI(s,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${r}-`,"").replace(/-/g,"_")]}function $x(s,r,o){const u={color:{source:J,composite:Ot},number:{source:tt,composite:J}},m=function(v){return{"line-pattern":{source:Ii,composite:Ii},"fill-pattern":{source:Ii,composite:Ii},"fill-extrusion-pattern":{source:Ii,composite:Ii}}[v]}(s);return m&&m[o]||u[r][o]}ut("ConstantBinder",yh),ut("CrossFadedConstantBinder",vc),ut("SourceExpressionBinder",go),ut("CrossFadedCompositeBinder",aa),ut("CompositeExpressionBinder",ks),ut("ProgramConfiguration",Ux,{omit:["_buffers"]}),ut("ProgramConfigurationSet",ll);const ir=8192,Lg=Math.pow(2,14)-1,Hx=-Lg-1;function cl(s){const r=ir/s.extent,o=s.loadGeometry();for(let u=0;u<o.length;u++){const m=o[u];for(let v=0;v<m.length;v++){const x=m[v],b=Math.round(x.x*r),k=Math.round(x.y*r);x.x=ye(b,Hx,Lg),x.y=ye(k,Hx,Lg),(b<x.x||b>x.x+1||k<x.y||k>x.y+1)&&De("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function ul(s,r){return{type:s.type,id:s.id,properties:s.properties,geometry:r?cl(s):[]}}function Bf(s,r,o,u,m){s.emplaceBack(2*r+(u+1)/2,2*o+(m+1)/2)}class Bg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Vr,this.indexArray=new Zi,this.segments=new en,this.programConfigurations=new ll(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,u){const m=this.layers[0],v=[];let x=null,b=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),b=!x.isConstant());for(const{feature:k,id:M,index:D,sourceLayerIndex:R}of r){const N=this.layers[0]._featureFilter.needGeometry,U=ul(k,N);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),U,u))continue;const q=b?x.evaluate(U,{},u):void 0,Y={id:M,properties:k.properties,type:k.type,sourceLayerIndex:R,index:D,geometry:N?U.geometry:cl(k),patterns:{},sortKey:q};v.push(Y)}b&&v.sort((k,M)=>k.sortKey-M.sortKey);for(const k of v){const{geometry:M,index:D,sourceLayerIndex:R}=k,N=r[D].feature;this.addFeature(k,M,D,u),o.featureIndex.insert(N,M,D,R,this.index)}}update(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,pi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,o,u,m){for(const v of o)for(const x of v){const b=x.x,k=x.y;if(b<0||b>=ir||k<0||k>=ir)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),D=M.vertexLength;Bf(this.layoutVertexArray,b,k,-1,-1),Bf(this.layoutVertexArray,b,k,1,-1),Bf(this.layoutVertexArray,b,k,1,1),Bf(this.layoutVertexArray,b,k,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+3,D+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},m)}}function Gx(s,r){for(let o=0;o<s.length;o++)if(xc(r,s[o]))return!0;for(let o=0;o<r.length;o++)if(xc(s,r[o]))return!0;return!!Fg(s,r)}function aI(s,r,o){return!!xc(s,r)||!!Og(r,s,o)}function Wx(s,r){if(s.length===1)return Zx(r,s[0]);for(let o=0;o<r.length;o++){const u=r[o];for(let m=0;m<u.length;m++)if(xc(s,u[m]))return!0}for(let o=0;o<s.length;o++)if(Zx(r,s[o]))return!0;for(let o=0;o<r.length;o++)if(Fg(s,r[o]))return!0;return!1}function lI(s,r,o){if(s.length>1){if(Fg(s,r))return!0;for(let u=0;u<r.length;u++)if(Og(r[u],s,o))return!0}for(let u=0;u<s.length;u++)if(Og(s[u],r,o))return!0;return!1}function Fg(s,r){if(s.length===0||r.length===0)return!1;for(let o=0;o<s.length-1;o++){const u=s[o],m=s[o+1];for(let v=0;v<r.length-1;v++)if(cI(u,m,r[v],r[v+1]))return!0}return!1}function cI(s,r,o,u){return Ke(s,o,u)!==Ke(r,o,u)&&Ke(s,r,o)!==Ke(s,r,u)}function Og(s,r,o){const u=o*o;if(r.length===1)return s.distSqr(r[0])<u;for(let m=1;m<r.length;m++)if(qx(s,r[m-1],r[m])<u)return!0;return!1}function qx(s,r,o){const u=r.distSqr(o);if(u===0)return s.distSqr(r);const m=((s.x-r.x)*(o.x-r.x)+(s.y-r.y)*(o.y-r.y))/u;return s.distSqr(m<0?r:m>1?o:o.sub(r)._mult(m)._add(r))}function Zx(s,r){let o,u,m,v=!1;for(let x=0;x<s.length;x++){o=s[x];for(let b=0,k=o.length-1;b<o.length;k=b++)u=o[b],m=o[k],u.y>r.y!=m.y>r.y&&r.x<(m.x-u.x)*(r.y-u.y)/(m.y-u.y)+u.x&&(v=!v)}return v}function xc(s,r){let o=!1;for(let u=0,m=s.length-1;u<s.length;m=u++){const v=s[u],x=s[m];v.y>r.y!=x.y>r.y&&r.x<(x.x-v.x)*(r.y-v.y)/(x.y-v.y)+v.x&&(o=!o)}return o}function uI(s,r,o){const u=o[0],m=o[2];if(s.x<u.x&&r.x<u.x||s.x>m.x&&r.x>m.x||s.y<u.y&&r.y<u.y||s.y>m.y&&r.y>m.y)return!1;const v=Ke(s,r,o[0]);return v!==Ke(s,r,o[1])||v!==Ke(s,r,o[2])||v!==Ke(s,r,o[3])}function _h(s,r,o){const u=r.paint.get(s).value;return u.kind==="constant"?u.value:o.programConfigurations.get(r.id).getMaxValue(s)}function Ff(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Of(s,r,o,u,m){if(!r[0]&&!r[1])return s;const v=T.convert(r)._mult(m);o==="viewport"&&v._rotate(-u);const x=[];for(let b=0;b<s.length;b++)x.push(s[b].sub(v));return x}let Xx,Kx;ut("CircleBucket",Bg,{omit:["layers"]});var hI={get paint(){return Kx=Kx||new _({"circle-radius":new Mt(Pe.paint_circle["circle-radius"]),"circle-color":new Mt(Pe.paint_circle["circle-color"]),"circle-blur":new Mt(Pe.paint_circle["circle-blur"]),"circle-opacity":new Mt(Pe.paint_circle["circle-opacity"]),"circle-translate":new mt(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new mt(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mt(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mt(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mt(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mt(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mt(Pe.paint_circle["circle-stroke-opacity"])})},get layout(){return Xx=Xx||new _({"circle-sort-key":new Mt(Pe.layout_circle["circle-sort-key"])})}},Jr=1e-6,bc=typeof Float32Array<"u"?Float32Array:Array;function Ng(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Yx(s,r,o){var u=r[0],m=r[1],v=r[2],x=r[3],b=r[4],k=r[5],M=r[6],D=r[7],R=r[8],N=r[9],U=r[10],q=r[11],Y=r[12],oe=r[13],ce=r[14],Ce=r[15],_e=o[0],ke=o[1],Re=o[2],Ve=o[3];return s[0]=_e*u+ke*b+Re*R+Ve*Y,s[1]=_e*m+ke*k+Re*N+Ve*oe,s[2]=_e*v+ke*M+Re*U+Ve*ce,s[3]=_e*x+ke*D+Re*q+Ve*Ce,s[4]=(_e=o[4])*u+(ke=o[5])*b+(Re=o[6])*R+(Ve=o[7])*Y,s[5]=_e*m+ke*k+Re*N+Ve*oe,s[6]=_e*v+ke*M+Re*U+Ve*ce,s[7]=_e*x+ke*D+Re*q+Ve*Ce,s[8]=(_e=o[8])*u+(ke=o[9])*b+(Re=o[10])*R+(Ve=o[11])*Y,s[9]=_e*m+ke*k+Re*N+Ve*oe,s[10]=_e*v+ke*M+Re*U+Ve*ce,s[11]=_e*x+ke*D+Re*q+Ve*Ce,s[12]=(_e=o[12])*u+(ke=o[13])*b+(Re=o[14])*R+(Ve=o[15])*Y,s[13]=_e*m+ke*k+Re*N+Ve*oe,s[14]=_e*v+ke*M+Re*U+Ve*ce,s[15]=_e*x+ke*D+Re*q+Ve*Ce,s}Math.hypot||(Math.hypot=function(){for(var s=0,r=arguments.length;r--;)s+=arguments[r]*arguments[r];return Math.sqrt(s)});var vh,dI=Yx;function Nf(s,r,o){var u=r[0],m=r[1],v=r[2],x=r[3];return s[0]=o[0]*u+o[4]*m+o[8]*v+o[12]*x,s[1]=o[1]*u+o[5]*m+o[9]*v+o[13]*x,s[2]=o[2]*u+o[6]*m+o[10]*v+o[14]*x,s[3]=o[3]*u+o[7]*m+o[11]*v+o[15]*x,s}vh=new bc(4),bc!=Float32Array&&(vh[0]=0,vh[1]=0,vh[2]=0,vh[3]=0);class fI extends l{constructor(r){super(r,hI)}createBucket(r){return new Bg(r)}queryRadius(r){const o=r;return _h("circle-radius",this,o)+_h("circle-stroke-width",this,o)+Ff(this.paint.get("circle-translate"))}queryIntersectsFeature(r,o,u,m,v,x,b,k){const M=Of(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,b),D=this.paint.get("circle-radius").evaluate(o,u)+this.paint.get("circle-stroke-width").evaluate(o,u),R=this.paint.get("circle-pitch-alignment")==="map",N=R?M:function(q,Y){return q.map(oe=>Jx(oe,Y))}(M,k),U=R?D*b:D;for(const q of m)for(const Y of q){const oe=R?Y:Jx(Y,k);let ce=U;const Ce=Nf([],[Y.x,Y.y,0,1],k);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ce*=Ce[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ce*=x.cameraToCenterDistance/Ce[3]),aI(N,oe,ce))return!0}return!1}}function Jx(s,r){const o=Nf([],[s.x,s.y,0,1],r);return new T(o[0]/o[3],o[1]/o[3])}class Qx extends Bg{}let eb;ut("HeatmapBucket",Qx,{omit:["layers"]});var pI={get paint(){return eb=eb||new _({"heatmap-radius":new Mt(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mt(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mt(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new mh(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mt(Pe.paint_heatmap["heatmap-opacity"])})}};function jg(s,{width:r,height:o},u,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*o*u)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*o*u}`)}else m=new Uint8Array(r*o*u);return s.width=r,s.height=o,s.data=m,s}function tb(s,{width:r,height:o},u){if(r===s.width&&o===s.height)return;const m=jg({},{width:r,height:o},u);Vg(s,m,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,r),height:Math.min(s.height,o)},u),s.width=r,s.height=o,s.data=m.data}function Vg(s,r,o,u,m,v){if(m.width===0||m.height===0)return r;if(m.width>s.width||m.height>s.height||o.x>s.width-m.width||o.y>s.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||u.x>r.width-m.width||u.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,b=r.data;if(x===b)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<m.height;k++){const M=((o.y+k)*s.width+o.x)*v,D=((u.y+k)*r.width+u.x)*v;for(let R=0;R<m.width*v;R++)b[D+R]=x[M+R]}return r}class xh{constructor(r,o){jg(this,r,1,o)}resize(r){tb(this,r,1)}clone(){return new xh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,u,m,v){Vg(r,o,u,m,v,1)}}class Xi{constructor(r,o){jg(this,r,4,o)}resize(r){tb(this,r,4)}replace(r,o){o?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Xi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,u,m,v){Vg(r,o,u,m,v,4)}}function nb(s){const r={},o=s.resolution||256,u=s.clips?s.clips.length:1,m=s.image||new Xi({width:o,height:u});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const v=(x,b,k)=>{r[s.evaluationKey]=k;const M=s.expression.evaluate(r);m.data[x+b+0]=Math.floor(255*M.r/M.a),m.data[x+b+1]=Math.floor(255*M.g/M.a),m.data[x+b+2]=Math.floor(255*M.b/M.a),m.data[x+b+3]=Math.floor(255*M.a)};if(s.clips)for(let x=0,b=0;x<u;++x,b+=4*o)for(let k=0,M=0;k<o;k++,M+=4){const D=k/(o-1),{start:R,end:N}=s.clips[x];v(b,M,R*(1-D)+N*D)}else for(let x=0,b=0;x<o;x++,b+=4)v(0,b,x/(o-1));return m}ut("AlphaImage",xh),ut("RGBAImage",Xi);const Ug="big-fb";class mI extends l{createBucket(r){return new Qx(r)}constructor(r){super(r,pI),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=nb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Ug)&&this.heatmapFbos.delete(Ug)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let rb;var gI={get paint(){return rb=rb||new _({"hillshade-illumination-direction":new mt(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mt(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mt(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mt(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mt(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mt(Pe.paint_hillshade["hillshade-accent-color"])})}};class yI extends l{constructor(r){super(r,gI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const _I=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:vI}=_I;function ib(s,r,o=2){const u=r&&r.length,m=u?r[0]*o:s.length;let v=sb(s,0,m,o,!0);const x=[];if(!v||v.next===v.prev)return x;let b,k,M;if(u&&(v=function(D,R,N,U){const q=[];for(let Y=0,oe=R.length;Y<oe;Y++){const ce=sb(D,R[Y]*U,Y<oe-1?R[Y+1]*U:D.length,U,!1);ce===ce.next&&(ce.steiner=!0),q.push(EI(ce))}q.sort(kI);for(let Y=0;Y<q.length;Y++)N=TI(q[Y],N);return N}(s,r,v,o)),s.length>80*o){b=1/0,k=1/0;let D=-1/0,R=-1/0;for(let N=o;N<m;N+=o){const U=s[N],q=s[N+1];U<b&&(b=U),q<k&&(k=q),U>D&&(D=U),q>R&&(R=q)}M=Math.max(D-b,R-k),M=M!==0?32767/M:0}return bh(v,x,o,b,k,M,0),x}function sb(s,r,o,u,m){let v;if(m===function(x,b,k,M){let D=0;for(let R=b,N=k-M;R<k;R+=M)D+=(x[N]-x[R])*(x[R+1]+x[N+1]),N=R;return D}(s,r,o,u)>0)for(let x=r;x<o;x+=u)v=lb(x/u|0,s[x],s[x+1],v);else for(let x=o-u;x>=r;x-=u)v=lb(x/u|0,s[x],s[x+1],v);return v&&jf(v,v.next)&&(Sh(v),v=v.next),v}function hl(s,r){if(!s)return s;r||(r=s);let o,u=s;do if(o=!1,u.steiner||!jf(u,u.next)&&qn(u.prev,u,u.next)!==0)u=u.next;else{if(Sh(u),u=r=u.prev,u===u.next)break;o=!0}while(o||u!==r);return r}function bh(s,r,o,u,m,v,x){if(!s)return;!x&&v&&function(k,M,D,R){let N=k;do N.z===0&&(N.z=$g(N.x,N.y,M,D,R)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==k);N.prevZ.nextZ=null,N.prevZ=null,function(U){let q,Y=1;do{let oe,ce=U;U=null;let Ce=null;for(q=0;ce;){q++;let _e=ce,ke=0;for(let Ve=0;Ve<Y&&(ke++,_e=_e.nextZ,_e);Ve++);let Re=Y;for(;ke>0||Re>0&&_e;)ke!==0&&(Re===0||!_e||ce.z<=_e.z)?(oe=ce,ce=ce.nextZ,ke--):(oe=_e,_e=_e.nextZ,Re--),Ce?Ce.nextZ=oe:U=oe,oe.prevZ=Ce,Ce=oe;ce=_e}Ce.nextZ=null,Y*=2}while(q>1)}(N)}(s,u,m,v);let b=s;for(;s.prev!==s.next;){const k=s.prev,M=s.next;if(v?bI(s,u,m,v):xI(s))r.push(k.i,s.i,M.i),Sh(s),s=M.next,b=M.next;else if((s=M)===b){x?x===1?bh(s=wI(hl(s),r),r,o,u,m,v,2):x===2&&SI(s,r,o,u,m,v):bh(hl(s),r,o,u,m,v,1);break}}}function xI(s){const r=s.prev,o=s,u=s.next;if(qn(r,o,u)>=0)return!1;const m=r.x,v=o.x,x=u.x,b=r.y,k=o.y,M=u.y,D=m<v?m<x?m:x:v<x?v:x,R=b<k?b<M?b:M:k<M?k:M,N=m>v?m>x?m:x:v>x?v:x,U=b>k?b>M?b:M:k>M?k:M;let q=u.next;for(;q!==r;){if(q.x>=D&&q.x<=N&&q.y>=R&&q.y<=U&&wc(m,b,v,k,x,M,q.x,q.y)&&qn(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function bI(s,r,o,u){const m=s.prev,v=s,x=s.next;if(qn(m,v,x)>=0)return!1;const b=m.x,k=v.x,M=x.x,D=m.y,R=v.y,N=x.y,U=b<k?b<M?b:M:k<M?k:M,q=D<R?D<N?D:N:R<N?R:N,Y=b>k?b>M?b:M:k>M?k:M,oe=D>R?D>N?D:N:R>N?R:N,ce=$g(U,q,r,o,u),Ce=$g(Y,oe,r,o,u);let _e=s.prevZ,ke=s.nextZ;for(;_e&&_e.z>=ce&&ke&&ke.z<=Ce;){if(_e.x>=U&&_e.x<=Y&&_e.y>=q&&_e.y<=oe&&_e!==m&&_e!==x&&wc(b,D,k,R,M,N,_e.x,_e.y)&&qn(_e.prev,_e,_e.next)>=0||(_e=_e.prevZ,ke.x>=U&&ke.x<=Y&&ke.y>=q&&ke.y<=oe&&ke!==m&&ke!==x&&wc(b,D,k,R,M,N,ke.x,ke.y)&&qn(ke.prev,ke,ke.next)>=0))return!1;ke=ke.nextZ}for(;_e&&_e.z>=ce;){if(_e.x>=U&&_e.x<=Y&&_e.y>=q&&_e.y<=oe&&_e!==m&&_e!==x&&wc(b,D,k,R,M,N,_e.x,_e.y)&&qn(_e.prev,_e,_e.next)>=0)return!1;_e=_e.prevZ}for(;ke&&ke.z<=Ce;){if(ke.x>=U&&ke.x<=Y&&ke.y>=q&&ke.y<=oe&&ke!==m&&ke!==x&&wc(b,D,k,R,M,N,ke.x,ke.y)&&qn(ke.prev,ke,ke.next)>=0)return!1;ke=ke.nextZ}return!0}function wI(s,r){let o=s;do{const u=o.prev,m=o.next.next;!jf(u,m)&&ob(u,o,o.next,m)&&wh(u,m)&&wh(m,u)&&(r.push(u.i,o.i,m.i),Sh(o),Sh(o.next),o=s=m),o=o.next}while(o!==s);return hl(o)}function SI(s,r,o,u,m,v){let x=s;do{let b=x.next.next;for(;b!==x.prev;){if(x.i!==b.i&&PI(x,b)){let k=ab(x,b);return x=hl(x,x.next),k=hl(k,k.next),bh(x,r,o,u,m,v,0),void bh(k,r,o,u,m,v,0)}b=b.next}x=x.next}while(x!==s)}function kI(s,r){return s.x-r.x}function TI(s,r){const o=function(m,v){let x=v;const b=m.x,k=m.y;let M,D=-1/0;do{if(k<=x.y&&k>=x.next.y&&x.next.y!==x.y){const Y=x.x+(k-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(Y<=b&&Y>D&&(D=Y,M=x.x<x.next.x?x:x.next,Y===b))return M}x=x.next}while(x!==v);if(!M)return null;const R=M,N=M.x,U=M.y;let q=1/0;x=M;do{if(b>=x.x&&x.x>=N&&b!==x.x&&wc(k<U?b:D,k,N,U,k<U?D:b,k,x.x,x.y)){const Y=Math.abs(k-x.y)/(b-x.x);wh(x,m)&&(Y<q||Y===q&&(x.x>M.x||x.x===M.x&&CI(M,x)))&&(M=x,q=Y)}x=x.next}while(x!==R);return M}(s,r);if(!o)return r;const u=ab(o,s);return hl(u,u.next),hl(o,o.next)}function CI(s,r){return qn(s.prev,s,r.prev)<0&&qn(r.next,s,s.next)<0}function $g(s,r,o,u,m){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-u)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function EI(s){let r=s,o=s;do(r.x<o.x||r.x===o.x&&r.y<o.y)&&(o=r),r=r.next;while(r!==s);return o}function wc(s,r,o,u,m,v,x,b){return(m-x)*(r-b)>=(s-x)*(v-b)&&(s-x)*(u-b)>=(o-x)*(r-b)&&(o-x)*(v-b)>=(m-x)*(u-b)}function PI(s,r){return s.next.i!==r.i&&s.prev.i!==r.i&&!function(o,u){let m=o;do{if(m.i!==o.i&&m.next.i!==o.i&&m.i!==u.i&&m.next.i!==u.i&&ob(m,m.next,o,u))return!0;m=m.next}while(m!==o);return!1}(s,r)&&(wh(s,r)&&wh(r,s)&&function(o,u){let m=o,v=!1;const x=(o.x+u.x)/2,b=(o.y+u.y)/2;do m.y>b!=m.next.y>b&&m.next.y!==m.y&&x<(m.next.x-m.x)*(b-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==o);return v}(s,r)&&(qn(s.prev,s,r.prev)||qn(s,r.prev,r))||jf(s,r)&&qn(s.prev,s,s.next)>0&&qn(r.prev,r,r.next)>0)}function qn(s,r,o){return(r.y-s.y)*(o.x-r.x)-(r.x-s.x)*(o.y-r.y)}function jf(s,r){return s.x===r.x&&s.y===r.y}function ob(s,r,o,u){const m=Uf(qn(s,r,o)),v=Uf(qn(s,r,u)),x=Uf(qn(o,u,s)),b=Uf(qn(o,u,r));return m!==v&&x!==b||!(m!==0||!Vf(s,o,r))||!(v!==0||!Vf(s,u,r))||!(x!==0||!Vf(o,s,u))||!(b!==0||!Vf(o,r,u))}function Vf(s,r,o){return r.x<=Math.max(s.x,o.x)&&r.x>=Math.min(s.x,o.x)&&r.y<=Math.max(s.y,o.y)&&r.y>=Math.min(s.y,o.y)}function Uf(s){return s>0?1:s<0?-1:0}function wh(s,r){return qn(s.prev,s,s.next)<0?qn(s,r,s.next)>=0&&qn(s,s.prev,r)>=0:qn(s,r,s.prev)<0||qn(s,s.next,r)<0}function ab(s,r){const o=Hg(s.i,s.x,s.y),u=Hg(r.i,r.x,r.y),m=s.next,v=r.prev;return s.next=r,r.prev=s,o.next=m,m.prev=o,u.next=o,o.prev=u,v.next=u,u.prev=v,u}function lb(s,r,o,u){const m=Hg(s,r,o);return u?(m.next=u.next,m.prev=u,u.next.prev=m,u.next=m):(m.prev=m,m.next=m),m}function Sh(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Hg(s,r,o){return{i:s,x:r,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Gg(s,r,o){const u=o.patternDependencies;let m=!1;for(const v of r){const x=v.paint.get(`${s}-pattern`);x.isConstant()||(m=!0);const b=x.constantOr(null);b&&(m=!0,u[b.to]=!0,u[b.from]=!0)}return m}function Wg(s,r,o,u,m){const v=m.patternDependencies;for(const x of r){const b=x.paint.get(`${s}-pattern`).value;if(b.kind!=="constant"){let k=b.evaluate({zoom:u-1},o,{},m.availableImages),M=b.evaluate({zoom:u},o,{},m.availableImages),D=b.evaluate({zoom:u+1},o,{},m.availableImages);k=k&&k.name?k.name:k,M=M&&M.name?M.name:M,D=D&&D.name?D.name:D,v[k]=!0,v[M]=!0,v[D]=!0,o.patterns[x.id]={min:k,mid:M,max:D}}}return o}class qg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new cs,this.indexArray=new Zi,this.indexArray2=new br,this.programConfigurations=new ll(r.layers,r.zoom),this.segments=new en,this.segments2=new en,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,u){this.hasPattern=Gg("fill",this.layers,o);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),x=[];for(const{feature:b,id:k,index:M,sourceLayerIndex:D}of r){const R=this.layers[0]._featureFilter.needGeometry,N=ul(b,R);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),N,u))continue;const U=v?m.evaluate(N,{},u,o.availableImages):void 0,q={id:k,properties:b.properties,type:b.type,sourceLayerIndex:D,index:M,geometry:R?N.geometry:cl(b),patterns:{},sortKey:U};x.push(q)}v&&x.sort((b,k)=>b.sortKey-k.sortKey);for(const b of x){const{geometry:k,index:M,sourceLayerIndex:D}=b;if(this.hasPattern){const R=Wg("fill",this.layers,b,this.zoom,o);this.patternFeatures.push(R)}else this.addFeature(b,k,M,u,{});o.featureIndex.insert(r[M].feature,k,M,D,this.index)}}update(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)}addFeatures(r,o,u){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,vI),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,o,u,m,v){for(const x of Wl(o,500)){let b=0;for(const U of x)b+=U.length;const k=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),M=k.vertexLength,D=[],R=[];for(const U of x){if(U.length===0)continue;U!==x[0]&&R.push(D.length/2);const q=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),Y=q.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(Y+U.length-1,Y),D.push(U[0].x),D.push(U[0].y);for(let oe=1;oe<U.length;oe++)this.layoutVertexArray.emplaceBack(U[oe].x,U[oe].y),this.indexArray2.emplaceBack(Y+oe-1,Y+oe),D.push(U[oe].x),D.push(U[oe].y);q.vertexLength+=U.length,q.primitiveLength+=U.length}const N=ib(D,R);for(let U=0;U<N.length;U+=3)this.indexArray.emplaceBack(M+N[U],M+N[U+1],M+N[U+2]);k.vertexLength+=b,k.primitiveLength+=N.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,v,m)}}let cb,ub;ut("FillBucket",qg,{omit:["layers","patternFeatures"]});var II={get paint(){return ub=ub||new _({"fill-antialias":new mt(Pe.paint_fill["fill-antialias"]),"fill-opacity":new Mt(Pe.paint_fill["fill-opacity"]),"fill-color":new Mt(Pe.paint_fill["fill-color"]),"fill-outline-color":new Mt(Pe.paint_fill["fill-outline-color"]),"fill-translate":new mt(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new mt(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new dc(Pe.paint_fill["fill-pattern"])})},get layout(){return cb=cb||new _({"fill-sort-key":new Mt(Pe.layout_fill["fill-sort-key"])})}};class AI extends l{constructor(r){super(r,II)}recalculate(r,o){super.recalculate(r,o);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new qg(r)}queryRadius(){return Ff(this.paint.get("fill-translate"))}queryIntersectsFeature(r,o,u,m,v,x,b){return Wx(Of(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,b),m)}isTileClipped(){return!0}}const MI=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),DI=w([{name:"a_centroid",components:2,type:"Int16"}],4),{members:zI}=MI;var la={},RI=E,hb=Sc;function Sc(s,r,o,u,m){this.properties={},this.extent=o,this.type=0,this._pbf=s,this._geometry=-1,this._keys=u,this._values=m,s.readFields(LI,this,r)}function LI(s,r,o){s==1?r.id=o.readVarint():s==2?function(u,m){for(var v=u.readVarint()+u.pos;u.pos<v;){var x=m._keys[u.readVarint()],b=m._values[u.readVarint()];m.properties[x]=b}}(o,r):s==3?r.type=o.readVarint():s==4&&(r._geometry=o.pos)}function BI(s){for(var r,o,u=0,m=0,v=s.length,x=v-1;m<v;x=m++)u+=((o=s[x]).x-(r=s[m]).x)*(r.y+o.y);return u}Sc.types=["Unknown","Point","LineString","Polygon"],Sc.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var r,o=s.readVarint()+s.pos,u=1,m=0,v=0,x=0,b=[];s.pos<o;){if(m<=0){var k=s.readVarint();u=7&k,m=k>>3}if(m--,u===1||u===2)v+=s.readSVarint(),x+=s.readSVarint(),u===1&&(r&&b.push(r),r=[]),r.push(new RI(v,x));else{if(u!==7)throw new Error("unknown command "+u);r&&r.push(r[0].clone())}}return r&&b.push(r),b},Sc.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var r=s.readVarint()+s.pos,o=1,u=0,m=0,v=0,x=1/0,b=-1/0,k=1/0,M=-1/0;s.pos<r;){if(u<=0){var D=s.readVarint();o=7&D,u=D>>3}if(u--,o===1||o===2)(m+=s.readSVarint())<x&&(x=m),m>b&&(b=m),(v+=s.readSVarint())<k&&(k=v),v>M&&(M=v);else if(o!==7)throw new Error("unknown command "+o)}return[x,k,b,M]},Sc.prototype.toGeoJSON=function(s,r,o){var u,m,v=this.extent*Math.pow(2,o),x=this.extent*s,b=this.extent*r,k=this.loadGeometry(),M=Sc.types[this.type];function D(U){for(var q=0;q<U.length;q++){var Y=U[q];U[q]=[360*(Y.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+b)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(u=0;u<k.length;u++)R[u]=k[u][0];D(k=R);break;case 2:for(u=0;u<k.length;u++)D(k[u]);break;case 3:for(k=function(U){var q=U.length;if(q<=1)return[U];for(var Y,oe,ce=[],Ce=0;Ce<q;Ce++){var _e=BI(U[Ce]);_e!==0&&(oe===void 0&&(oe=_e<0),oe===_e<0?(Y&&ce.push(Y),Y=[U[Ce]]):Y.push(U[Ce]))}return Y&&ce.push(Y),ce}(k),u=0;u<k.length;u++)for(m=0;m<k[u].length;m++)D(k[u][m])}k.length===1?k=k[0]:M="Multi"+M;var N={type:"Feature",geometry:{type:M,coordinates:k},properties:this.properties};return"id"in this&&(N.id=this.id),N};var FI=hb,db=fb;function fb(s,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(OI,this,r),this.length=this._features.length}function OI(s,r,o){s===15?r.version=o.readVarint():s===1?r.name=o.readString():s===5?r.extent=o.readVarint():s===2?r._features.push(o.pos):s===3?r._keys.push(o.readString()):s===4&&r._values.push(function(u){for(var m=null,v=u.readVarint()+u.pos;u.pos<v;){var x=u.readVarint()>>3;m=x===1?u.readString():x===2?u.readFloat():x===3?u.readDouble():x===4?u.readVarint64():x===5?u.readVarint():x===6?u.readSVarint():x===7?u.readBoolean():null}return m}(o))}fb.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var r=this._pbf.readVarint()+this._pbf.pos;return new FI(this._pbf,r,this.extent,this._keys,this._values)};var NI=db;function jI(s,r,o){if(s===3){var u=new NI(o,o.readVarint()+o.pos);u.length&&(r[u.name]=u)}}la.VectorTile=function(s,r){this.layers=s.readFields(jI,{},r)},la.VectorTileFeature=hb,la.VectorTileLayer=db;const VI=la.VectorTileFeature.types,Zg=Math.pow(2,13);function kh(s,r,o,u,m,v,x,b){s.emplaceBack(r,o,2*Math.floor(u*Zg)+x,m*Zg*2,v*Zg*2,Math.round(b))}class Xg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new na,this.centroidVertexArray=new Mr,this.indexArray=new Zi,this.programConfigurations=new ll(r.layers,r.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,u){this.features=[],this.hasPattern=Gg("fill-extrusion",this.layers,o);for(const{feature:m,id:v,index:x,sourceLayerIndex:b}of r){const k=this.layers[0]._featureFilter.needGeometry,M=ul(m,k);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),M,u))continue;const D={id:v,sourceLayerIndex:b,index:x,geometry:k?M.geometry:cl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Wg("fill-extrusion",this.layers,D,this.zoom,o)):this.addFeature(D,D.geometry,x,u,{}),o.featureIndex.insert(m,D.geometry,x,b,this.index,!0)}}addFeatures(r,o,u){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,o,u)}}update(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,zI),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,DI.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,o,u,m,v){for(const x of Wl(o,500)){const b={x:0,y:0,vertexCount:0};let k=0;for(const q of x)k+=q.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const q of x){if(q.length===0||$I(q))continue;let Y=0;for(let oe=0;oe<q.length;oe++){const ce=q[oe];if(oe>=1){const Ce=q[oe-1];if(!UI(ce,Ce)){M.vertexLength+4>en.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const _e=ce.sub(Ce)._perp()._unit(),ke=Ce.dist(ce);Y+ke>32768&&(Y=0),kh(this.layoutVertexArray,ce.x,ce.y,_e.x,_e.y,0,0,Y),kh(this.layoutVertexArray,ce.x,ce.y,_e.x,_e.y,0,1,Y),b.x+=2*ce.x,b.y+=2*ce.y,b.vertexCount+=2,Y+=ke,kh(this.layoutVertexArray,Ce.x,Ce.y,_e.x,_e.y,0,0,Y),kh(this.layoutVertexArray,Ce.x,Ce.y,_e.x,_e.y,0,1,Y),b.x+=2*Ce.x,b.y+=2*Ce.y,b.vertexCount+=2;const Re=M.vertexLength;this.indexArray.emplaceBack(Re,Re+2,Re+1),this.indexArray.emplaceBack(Re+1,Re+2,Re+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+k>en.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),VI[r.type]!=="Polygon")continue;const D=[],R=[],N=M.vertexLength;for(const q of x)if(q.length!==0){q!==x[0]&&R.push(D.length/2);for(let Y=0;Y<q.length;Y++){const oe=q[Y];kh(this.layoutVertexArray,oe.x,oe.y,0,0,1,1,0),b.x+=oe.x,b.y+=oe.y,b.vertexCount+=1,D.push(oe.x),D.push(oe.y)}}const U=ib(D,R);for(let q=0;q<U.length;q+=3)this.indexArray.emplaceBack(N+U[q],N+U[q+2],N+U[q+1]);M.primitiveLength+=U.length/3,M.vertexLength+=k;for(let q=0;q<b.vertexCount;q++){const Y=Math.floor(b.x/b.vertexCount),oe=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(Y,oe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,v,m)}}function UI(s,r){return s.x===r.x&&(s.x<0||s.x>ir)||s.y===r.y&&(s.y<0||s.y>ir)}function $I(s){return s.every(r=>r.x<0)||s.every(r=>r.x>ir)||s.every(r=>r.y<0)||s.every(r=>r.y>ir)}let pb;ut("FillExtrusionBucket",Xg,{omit:["layers","features"]});var HI={get paint(){return pb=pb||new _({"fill-extrusion-opacity":new mt(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mt(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mt(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mt(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new dc(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mt(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mt(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mt(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class GI extends l{constructor(r){super(r,HI)}createBucket(r){return new Xg(r)}queryRadius(){return Ff(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,o,u,m,v,x,b,k){const M=Of(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,b),D=this.paint.get("fill-extrusion-height").evaluate(o,u),R=this.paint.get("fill-extrusion-base").evaluate(o,u),N=function(q,Y,oe,ce){const Ce=[];for(const _e of q){const ke=[_e.x,_e.y,0,1];Nf(ke,ke,Y),Ce.push(new T(ke[0]/ke[3],ke[1]/ke[3]))}return Ce}(M,k),U=function(q,Y,oe,ce){const Ce=[],_e=[],ke=ce[8]*Y,Re=ce[9]*Y,Ve=ce[10]*Y,ot=ce[11]*Y,At=ce[8]*oe,rt=ce[9]*oe,et=ce[10]*oe,vt=ce[11]*oe;for(const dt of q){const ct=[],Fe=[];for(const bt of dt){const _t=bt.x,Ft=bt.y,bn=ce[0]*_t+ce[4]*Ft+ce[12],vn=ce[1]*_t+ce[5]*Ft+ce[13],dr=ce[2]*_t+ce[6]*Ft+ce[14],us=ce[3]*_t+ce[7]*Ft+ce[15],Rr=dr+Ve,fr=us+ot,Qr=bn+At,ei=vn+rt,ti=dr+et,$n=us+vt,pr=new T((bn+ke)/fr,(vn+Re)/fr);pr.z=Rr/fr,ct.push(pr);const Ur=new T(Qr/$n,ei/$n);Ur.z=ti/$n,Fe.push(Ur)}Ce.push(ct),_e.push(Fe)}return[Ce,_e]}(m,R,D,k);return function(q,Y,oe){let ce=1/0;Wx(oe,Y)&&(ce=mb(oe,Y[0]));for(let Ce=0;Ce<Y.length;Ce++){const _e=Y[Ce],ke=q[Ce];for(let Re=0;Re<_e.length-1;Re++){const Ve=_e[Re],ot=[Ve,_e[Re+1],ke[Re+1],ke[Re],Ve];Gx(oe,ot)&&(ce=Math.min(ce,mb(oe,ot)))}}return ce!==1/0&&ce}(U[0],U[1],N)}}function Th(s,r){return s.x*r.x+s.y*r.y}function mb(s,r){if(s.length===1){let o=0;const u=r[o++];let m;for(;!m||u.equals(m);)if(m=r[o++],!m)return 1/0;for(;o<r.length;o++){const v=r[o],x=s[0],b=m.sub(u),k=v.sub(u),M=x.sub(u),D=Th(b,b),R=Th(b,k),N=Th(k,k),U=Th(M,b),q=Th(M,k),Y=D*N-R*R,oe=(N*U-R*q)/Y,ce=(D*q-R*U)/Y,Ce=u.z*(1-oe-ce)+m.z*oe+v.z*ce;if(isFinite(Ce))return Ce}return 1/0}{let o=1/0;for(const u of r)o=Math.min(o,u.z);return o}}const WI=w([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:qI}=WI,ZI=w([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:XI}=ZI,KI=la.VectorTileFeature.types,YI=Math.cos(Math.PI/180*37.5),gb=Math.pow(2,14)/.5;class Kg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new pc,this.layoutVertexArray2=new ra,this.indexArray=new Zi,this.programConfigurations=new ll(r.layers,r.zoom),this.segments=new en,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,u){this.hasPattern=Gg("line",this.layers,o);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),x=[];for(const{feature:b,id:k,index:M,sourceLayerIndex:D}of r){const R=this.layers[0]._featureFilter.needGeometry,N=ul(b,R);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),N,u))continue;const U=v?m.evaluate(N,{},u):void 0,q={id:k,properties:b.properties,type:b.type,sourceLayerIndex:D,index:M,geometry:R?N.geometry:cl(b),patterns:{},sortKey:U};x.push(q)}v&&x.sort((b,k)=>b.sortKey-k.sortKey);for(const b of x){const{geometry:k,index:M,sourceLayerIndex:D}=b;if(this.hasPattern){const R=Wg("line",this.layers,b,this.zoom,o);this.patternFeatures.push(R)}else this.addFeature(b,k,M,u,{});o.featureIndex.insert(r[M].feature,k,M,D,this.index)}}update(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)}addFeatures(r,o,u){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,XI)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,qI),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,o,u,m,v){const x=this.layers[0].layout,b=x.get("line-join").evaluate(r,{}),k=x.get("line-cap"),M=x.get("line-miter-limit"),D=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const R of o)this.addLine(R,r,b,k,M,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,v,m)}addLine(r,o,u,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ce=0;ce<r.length-1;ce++)this.totalDistance+=r[ce].dist(r[ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=KI[o.type]==="Polygon";let k=r.length;for(;k>=2&&r[k-1].equals(r[k-2]);)k--;let M=0;for(;M<k-1&&r[M].equals(r[M+1]);)M++;if(k<(b?3:2))return;u==="bevel"&&(v=1.05);const D=this.overscaling<=16?15*ir/(512*this.overscaling):0,R=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let N,U,q,Y,oe;this.e1=this.e2=-1,b&&(N=r[k-2],oe=r[M].sub(N)._unit()._perp());for(let ce=M;ce<k;ce++){if(q=ce===k-1?b?r[M+1]:void 0:r[ce+1],q&&r[ce].equals(q))continue;oe&&(Y=oe),N&&(U=N),N=r[ce],oe=q?q.sub(N)._unit()._perp():Y,Y=Y||oe;let Ce=Y.add(oe);Ce.x===0&&Ce.y===0||Ce._unit();const _e=Y.x*oe.x+Y.y*oe.y,ke=Ce.x*oe.x+Ce.y*oe.y,Re=ke!==0?1/ke:1/0,Ve=2*Math.sqrt(2-2*ke),ot=ke<YI&&U&&q,At=Y.x*oe.y-Y.y*oe.x>0;if(ot&&ce>M){const vt=N.dist(U);if(vt>2*D){const dt=N.sub(N.sub(U)._mult(D/vt)._round());this.updateDistance(U,dt),this.addCurrentVertex(dt,Y,0,0,R),U=dt}}const rt=U&&q;let et=rt?u:b?"butt":m;if(rt&&et==="round"&&(Re<x?et="miter":Re<=2&&(et="fakeround")),et==="miter"&&Re>v&&(et="bevel"),et==="bevel"&&(Re>2&&(et="flipbevel"),Re<v&&(et="miter")),U&&this.updateDistance(U,N),et==="miter")Ce._mult(Re),this.addCurrentVertex(N,Ce,0,0,R);else if(et==="flipbevel"){if(Re>100)Ce=oe.mult(-1);else{const vt=Re*Y.add(oe).mag()/Y.sub(oe).mag();Ce._perp()._mult(vt*(At?-1:1))}this.addCurrentVertex(N,Ce,0,0,R),this.addCurrentVertex(N,Ce.mult(-1),0,0,R)}else if(et==="bevel"||et==="fakeround"){const vt=-Math.sqrt(Re*Re-1),dt=At?vt:0,ct=At?0:vt;if(U&&this.addCurrentVertex(N,Y,dt,ct,R),et==="fakeround"){const Fe=Math.round(180*Ve/Math.PI/20);for(let bt=1;bt<Fe;bt++){let _t=bt/Fe;if(_t!==.5){const bn=_t-.5;_t+=_t*bn*(_t-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*bn*bn+(.848013+_e*(.215638*_e-1.06021)))}const Ft=oe.sub(Y)._mult(_t)._add(Y)._unit()._mult(At?-1:1);this.addHalfVertex(N,Ft.x,Ft.y,!1,At,0,R)}}q&&this.addCurrentVertex(N,oe,-dt,-ct,R)}else if(et==="butt")this.addCurrentVertex(N,Ce,0,0,R);else if(et==="square"){const vt=U?1:-1;this.addCurrentVertex(N,Ce,vt,vt,R)}else et==="round"&&(U&&(this.addCurrentVertex(N,Y,0,0,R),this.addCurrentVertex(N,Y,1,1,R,!0)),q&&(this.addCurrentVertex(N,oe,-1,-1,R,!0),this.addCurrentVertex(N,oe,0,0,R)));if(ot&&ce<k-1){const vt=N.dist(q);if(vt>2*D){const dt=N.add(q.sub(N)._mult(D/vt)._round());this.updateDistance(N,dt),this.addCurrentVertex(dt,oe,0,0,R),N=dt}}}}addCurrentVertex(r,o,u,m,v,x=!1){const b=o.y*m-o.x,k=-o.y-o.x*m;this.addHalfVertex(r,o.x+o.y*u,o.y-o.x*u,x,!1,u,v),this.addHalfVertex(r,b,k,x,!0,-m,v),this.distance>gb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,o,u,m,v,x))}addHalfVertex({x:r,y:o},u,m,v,x,b,k){const M=.5*(this.lineClips?this.scaledDistance*(gb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(o<<1)+(x?1:0),Math.round(63*u)+128,Math.round(63*m)+128,1+(b===0?0:b<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),k.primitiveLength++),x?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,o){this.distance+=r.dist(o),this.updateScaledDistance()}}let yb,_b;ut("LineBucket",Kg,{omit:["layers","patternFeatures"]});var vb={get paint(){return _b=_b||new _({"line-opacity":new Mt(Pe.paint_line["line-opacity"]),"line-color":new Mt(Pe.paint_line["line-color"]),"line-translate":new mt(Pe.paint_line["line-translate"]),"line-translate-anchor":new mt(Pe.paint_line["line-translate-anchor"]),"line-width":new Mt(Pe.paint_line["line-width"]),"line-gap-width":new Mt(Pe.paint_line["line-gap-width"]),"line-offset":new Mt(Pe.paint_line["line-offset"]),"line-blur":new Mt(Pe.paint_line["line-blur"]),"line-dasharray":new fc(Pe.paint_line["line-dasharray"]),"line-pattern":new dc(Pe.paint_line["line-pattern"]),"line-gradient":new mh(Pe.paint_line["line-gradient"])})},get layout(){return yb=yb||new _({"line-cap":new mt(Pe.layout_line["line-cap"]),"line-join":new Mt(Pe.layout_line["line-join"]),"line-miter-limit":new mt(Pe.layout_line["line-miter-limit"]),"line-round-limit":new mt(Pe.layout_line["line-round-limit"]),"line-sort-key":new Mt(Pe.layout_line["line-sort-key"])})}};class JI extends Mt{possiblyEvaluate(r,o){return o=new Pn(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(r,o)}evaluate(r,o,u,m){return o=fe({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(r,o,u,m)}}let $f;class QI extends l{constructor(r){super(r,vb),this.gradientVersion=0,$f||($f=new JI(vb.paint.properties["line-width"].specification),$f.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(u){return u._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof Oo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,o){super.recalculate(r,o),this.paint._values["line-floorwidth"]=$f.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Kg(r)}queryRadius(r){const o=r,u=xb(_h("line-width",this,o),_h("line-gap-width",this,o)),m=_h("line-offset",this,o);return u/2+Math.abs(m)+Ff(this.paint.get("line-translate"))}queryIntersectsFeature(r,o,u,m,v,x,b){const k=Of(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,b),M=b/2*xb(this.paint.get("line-width").evaluate(o,u),this.paint.get("line-gap-width").evaluate(o,u)),D=this.paint.get("line-offset").evaluate(o,u);return D&&(m=function(R,N){const U=[];for(let q=0;q<R.length;q++){const Y=R[q],oe=[];for(let ce=0;ce<Y.length;ce++){const Ce=Y[ce-1],_e=Y[ce],ke=Y[ce+1],Re=ce===0?new T(0,0):_e.sub(Ce)._unit()._perp(),Ve=ce===Y.length-1?new T(0,0):ke.sub(_e)._unit()._perp(),ot=Re._add(Ve)._unit(),At=ot.x*Ve.x+ot.y*Ve.y;At!==0&&ot._mult(1/At),oe.push(ot._mult(N)._add(_e))}U.push(oe)}return U}(m,D*b)),function(R,N,U){for(let q=0;q<N.length;q++){const Y=N[q];if(R.length>=3){for(let oe=0;oe<Y.length;oe++)if(xc(R,Y[oe]))return!0}if(lI(R,Y,U))return!0}return!1}(k,m,M)}isTileClipped(){return!0}}function xb(s,r){return r>0?r+2*s:s}const eA=w([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),tA=w([{name:"a_projected_pos",components:3,type:"Float32"}],4);w([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const nA=w([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);w([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const bb=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rA=w([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function iA(s,r,o){return s.sections.forEach(u=>{u.text=function(m,v,x){const b=v.layout.get("text-transform").evaluate(x,{});return b==="uppercase"?m=m.toLocaleUpperCase():b==="lowercase"&&(m=m.toLocaleLowerCase()),fi.applyArabicShaping&&(m=fi.applyArabicShaping(m)),m}(u.text,r,o)}),s}w([{name:"triangle",components:3,type:"Uint16"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),w([{type:"Float32",name:"offsetX"}]),w([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),w([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ch={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var lr=24,wb=_n,Sb=function(s,r,o,u,m){var v,x,b=8*m-u-1,k=(1<<b)-1,M=k>>1,D=-7,R=m-1,N=-1,U=s[r+R];for(R+=N,v=U&(1<<-D)-1,U>>=-D,D+=b;D>0;v=256*v+s[r+R],R+=N,D-=8);for(x=v&(1<<-D)-1,v>>=-D,D+=u;D>0;x=256*x+s[r+R],R+=N,D-=8);if(v===0)v=1-M;else{if(v===k)return x?NaN:1/0*(U?-1:1);x+=Math.pow(2,u),v-=M}return(U?-1:1)*x*Math.pow(2,v-u)},kb=function(s,r,o,u,m,v){var x,b,k,M=8*v-m-1,D=(1<<M)-1,R=D>>1,N=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=0,q=1,Y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,x=D):(x=Math.floor(Math.log(r)/Math.LN2),r*(k=Math.pow(2,-x))<1&&(x--,k*=2),(r+=x+R>=1?N/k:N*Math.pow(2,1-R))*k>=2&&(x++,k/=2),x+R>=D?(b=0,x=D):x+R>=1?(b=(r*k-1)*Math.pow(2,m),x+=R):(b=r*Math.pow(2,R-1)*Math.pow(2,m),x=0));m>=8;s[o+U]=255&b,U+=q,b/=256,m-=8);for(x=x<<m|b,M+=m;M>0;s[o+U]=255&x,U+=q,x/=256,M-=8);s[o+U-q]|=128*Y};function _n(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}_n.Varint=0,_n.Fixed64=1,_n.Bytes=2,_n.Fixed32=5;var Yg=4294967296,Tb=1/Yg,Cb=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function yo(s){return s.type===_n.Bytes?s.readVarint()+s.pos:s.pos+1}function kc(s,r,o){return o?4294967296*r+(s>>>0):4294967296*(r>>>0)+(s>>>0)}function Eb(s,r,o){var u=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));o.realloc(u);for(var m=o.pos-1;m>=s;m--)o.buf[m+u]=o.buf[m]}function sA(s,r){for(var o=0;o<s.length;o++)r.writeVarint(s[o])}function oA(s,r){for(var o=0;o<s.length;o++)r.writeSVarint(s[o])}function aA(s,r){for(var o=0;o<s.length;o++)r.writeFloat(s[o])}function lA(s,r){for(var o=0;o<s.length;o++)r.writeDouble(s[o])}function cA(s,r){for(var o=0;o<s.length;o++)r.writeBoolean(s[o])}function uA(s,r){for(var o=0;o<s.length;o++)r.writeFixed32(s[o])}function hA(s,r){for(var o=0;o<s.length;o++)r.writeSFixed32(s[o])}function dA(s,r){for(var o=0;o<s.length;o++)r.writeFixed64(s[o])}function fA(s,r){for(var o=0;o<s.length;o++)r.writeSFixed64(s[o])}function Hf(s,r){return(s[r]|s[r+1]<<8|s[r+2]<<16)+16777216*s[r+3]}function Tc(s,r,o){s[o]=r,s[o+1]=r>>>8,s[o+2]=r>>>16,s[o+3]=r>>>24}function Pb(s,r){return(s[r]|s[r+1]<<8|s[r+2]<<16)+(s[r+3]<<24)}_n.prototype={destroy:function(){this.buf=null},readFields:function(s,r,o){for(o=o||this.length;this.pos<o;){var u=this.readVarint(),m=u>>3,v=this.pos;this.type=7&u,s(m,r,this),this.pos===v&&this.skip(u)}return r},readMessage:function(s,r){return this.readFields(s,r,this.readVarint()+this.pos)},readFixed32:function(){var s=Hf(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=Pb(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Hf(this.buf,this.pos)+Hf(this.buf,this.pos+4)*Yg;return this.pos+=8,s},readSFixed64:function(){var s=Hf(this.buf,this.pos)+Pb(this.buf,this.pos+4)*Yg;return this.pos+=8,s},readFloat:function(){var s=Sb(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Sb(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var r,o,u=this.buf;return r=127&(o=u[this.pos++]),o<128?r:(r|=(127&(o=u[this.pos++]))<<7,o<128?r:(r|=(127&(o=u[this.pos++]))<<14,o<128?r:(r|=(127&(o=u[this.pos++]))<<21,o<128?r:function(m,v,x){var b,k,M=x.buf;if(b=(112&(k=M[x.pos++]))>>4,k<128||(b|=(127&(k=M[x.pos++]))<<3,k<128)||(b|=(127&(k=M[x.pos++]))<<10,k<128)||(b|=(127&(k=M[x.pos++]))<<17,k<128)||(b|=(127&(k=M[x.pos++]))<<24,k<128)||(b|=(1&(k=M[x.pos++]))<<31,k<128))return kc(m,b,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(o=u[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,r=this.pos;return this.pos=s,s-r>=12&&Cb?function(o,u,m){return Cb.decode(o.subarray(u,m))}(this.buf,r,s):function(o,u,m){for(var v="",x=u;x<m;){var b,k,M,D=o[x],R=null,N=D>239?4:D>223?3:D>191?2:1;if(x+N>m)break;N===1?D<128&&(R=D):N===2?(192&(b=o[x+1]))==128&&(R=(31&D)<<6|63&b)<=127&&(R=null):N===3?(k=o[x+2],(192&(b=o[x+1]))==128&&(192&k)==128&&((R=(15&D)<<12|(63&b)<<6|63&k)<=2047||R>=55296&&R<=57343)&&(R=null)):N===4&&(k=o[x+2],M=o[x+3],(192&(b=o[x+1]))==128&&(192&k)==128&&(192&M)==128&&((R=(15&D)<<18|(63&b)<<12|(63&k)<<6|63&M)<=65535||R>=1114112)&&(R=null)),R===null?(R=65533,N=1):R>65535&&(R-=65536,v+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),v+=String.fromCharCode(R),x+=N}return v}(this.buf,r,s)},readBytes:function(){var s=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,s);return this.pos=s,r},readPackedVarint:function(s,r){if(this.type!==_n.Bytes)return s.push(this.readVarint(r));var o=yo(this);for(s=s||[];this.pos<o;)s.push(this.readVarint(r));return s},readPackedSVarint:function(s){if(this.type!==_n.Bytes)return s.push(this.readSVarint());var r=yo(this);for(s=s||[];this.pos<r;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==_n.Bytes)return s.push(this.readBoolean());var r=yo(this);for(s=s||[];this.pos<r;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==_n.Bytes)return s.push(this.readFloat());var r=yo(this);for(s=s||[];this.pos<r;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==_n.Bytes)return s.push(this.readDouble());var r=yo(this);for(s=s||[];this.pos<r;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==_n.Bytes)return s.push(this.readFixed32());var r=yo(this);for(s=s||[];this.pos<r;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==_n.Bytes)return s.push(this.readSFixed32());var r=yo(this);for(s=s||[];this.pos<r;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==_n.Bytes)return s.push(this.readFixed64());var r=yo(this);for(s=s||[];this.pos<r;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==_n.Bytes)return s.push(this.readSFixed64());var r=yo(this);for(s=s||[];this.pos<r;)s.push(this.readSFixed64());return s},skip:function(s){var r=7&s;if(r===_n.Varint)for(;this.buf[this.pos++]>127;);else if(r===_n.Bytes)this.pos=this.readVarint()+this.pos;else if(r===_n.Fixed32)this.pos+=4;else{if(r!==_n.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(s,r){this.writeVarint(s<<3|r)},realloc:function(s){for(var r=this.length||16;r<this.pos+s;)r*=2;if(r!==this.length){var o=new Uint8Array(r);o.set(this.buf),this.buf=o,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Tc(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Tc(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Tc(this.buf,-1&s,this.pos),Tc(this.buf,Math.floor(s*Tb),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Tc(this.buf,-1&s,this.pos),Tc(this.buf,Math.floor(s*Tb),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(r,o){var u,m;if(r>=0?(u=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(u=~(-r%4294967296))?u=u+1|0:(u=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(v,x,b){b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,b.buf[b.pos]=127&(v>>>=7)}(u,0,o),function(v,x){var b=(7&v)<<4;x.buf[x.pos++]|=b|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,o)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var r=this.pos;this.pos=function(u,m,v){for(var x,b,k=0;k<m.length;k++){if((x=m.charCodeAt(k))>55295&&x<57344){if(!b){x>56319||k+1===m.length?(u[v++]=239,u[v++]=191,u[v++]=189):b=x;continue}if(x<56320){u[v++]=239,u[v++]=191,u[v++]=189,b=x;continue}x=b-55296<<10|x-56320|65536,b=null}else b&&(u[v++]=239,u[v++]=191,u[v++]=189,b=null);x<128?u[v++]=x:(x<2048?u[v++]=x>>6|192:(x<65536?u[v++]=x>>12|224:(u[v++]=x>>18|240,u[v++]=x>>12&63|128),u[v++]=x>>6&63|128),u[v++]=63&x|128)}return v}(this.buf,s,this.pos);var o=this.pos-r;o>=128&&Eb(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeFloat:function(s){this.realloc(4),kb(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),kb(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var r=s.length;this.writeVarint(r),this.realloc(r);for(var o=0;o<r;o++)this.buf[this.pos++]=s[o]},writeRawMessage:function(s,r){this.pos++;var o=this.pos;s(r,this);var u=this.pos-o;u>=128&&Eb(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeMessage:function(s,r,o){this.writeTag(s,_n.Bytes),this.writeRawMessage(r,o)},writePackedVarint:function(s,r){r.length&&this.writeMessage(s,sA,r)},writePackedSVarint:function(s,r){r.length&&this.writeMessage(s,oA,r)},writePackedBoolean:function(s,r){r.length&&this.writeMessage(s,cA,r)},writePackedFloat:function(s,r){r.length&&this.writeMessage(s,aA,r)},writePackedDouble:function(s,r){r.length&&this.writeMessage(s,lA,r)},writePackedFixed32:function(s,r){r.length&&this.writeMessage(s,uA,r)},writePackedSFixed32:function(s,r){r.length&&this.writeMessage(s,hA,r)},writePackedFixed64:function(s,r){r.length&&this.writeMessage(s,dA,r)},writePackedSFixed64:function(s,r){r.length&&this.writeMessage(s,fA,r)},writeBytesField:function(s,r){this.writeTag(s,_n.Bytes),this.writeBytes(r)},writeFixed32Field:function(s,r){this.writeTag(s,_n.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(s,r){this.writeTag(s,_n.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(s,r){this.writeTag(s,_n.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(s,r){this.writeTag(s,_n.Fixed64),this.writeSFixed64(r)},writeVarintField:function(s,r){this.writeTag(s,_n.Varint),this.writeVarint(r)},writeSVarintField:function(s,r){this.writeTag(s,_n.Varint),this.writeSVarint(r)},writeStringField:function(s,r){this.writeTag(s,_n.Bytes),this.writeString(r)},writeFloatField:function(s,r){this.writeTag(s,_n.Fixed32),this.writeFloat(r)},writeDoubleField:function(s,r){this.writeTag(s,_n.Fixed64),this.writeDouble(r)},writeBooleanField:function(s,r){this.writeVarintField(s,!!r)}};var Jg=S(wb);const Qg=3;function pA(s,r,o){s===1&&o.readMessage(mA,r)}function mA(s,r,o){if(s===3){const{id:u,bitmap:m,width:v,height:x,left:b,top:k,advance:M}=o.readMessage(gA,{});r.push({id:u,bitmap:new xh({width:v+2*Qg,height:x+2*Qg},m),metrics:{width:v,height:x,left:b,top:k,advance:M}})}}function gA(s,r,o){s===1?r.id=o.readVarint():s===2?r.bitmap=o.readBytes():s===3?r.width=o.readVarint():s===4?r.height=o.readVarint():s===5?r.left=o.readSVarint():s===6?r.top=o.readSVarint():s===7&&(r.advance=o.readVarint())}const Ib=Qg;function Ab(s){let r=0,o=0;for(const x of s)r+=x.w*x.h,o=Math.max(o,x.w);s.sort((x,b)=>b.h-x.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),o),h:1/0}];let m=0,v=0;for(const x of s)for(let b=u.length-1;b>=0;b--){const k=u[b];if(!(x.w>k.w||x.h>k.h)){if(x.x=k.x,x.y=k.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===k.w&&x.h===k.h){const M=u.pop();b<u.length&&(u[b]=M)}else x.h===k.h?(k.x+=x.w,k.w-=x.w):x.w===k.w?(k.y+=x.h,k.h-=x.h):(u.push({x:k.x+x.w,y:k.y,w:k.w-x.w,h:x.h}),k.y+=x.h,k.h-=x.h);break}}return{w:m,h:v,fill:r/(m*v)||0}}const mi=1;class ey{constructor(r,{pixelRatio:o,version:u,stretchX:m,stretchY:v,content:x,textFitWidth:b,textFitHeight:k}){this.paddedRect=r,this.pixelRatio=o,this.stretchX=m,this.stretchY=v,this.content=x,this.version=u,this.textFitWidth=b,this.textFitHeight=k}get tl(){return[this.paddedRect.x+mi,this.paddedRect.y+mi]}get br(){return[this.paddedRect.x+this.paddedRect.w-mi,this.paddedRect.y+this.paddedRect.h-mi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*mi)/this.pixelRatio,(this.paddedRect.h-2*mi)/this.pixelRatio]}}class Mb{constructor(r,o){const u={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,u,v),this.addImages(o,m,v);const{w:x,h:b}=Ab(v),k=new Xi({width:x||1,height:b||1});for(const M in r){const D=r[M],R=u[M].paddedRect;Xi.copy(D.data,k,{x:0,y:0},{x:R.x+mi,y:R.y+mi},D.data)}for(const M in o){const D=o[M],R=m[M].paddedRect,N=R.x+mi,U=R.y+mi,q=D.data.width,Y=D.data.height;Xi.copy(D.data,k,{x:0,y:0},{x:N,y:U},D.data),Xi.copy(D.data,k,{x:0,y:Y-1},{x:N,y:U-1},{width:q,height:1}),Xi.copy(D.data,k,{x:0,y:0},{x:N,y:U+Y},{width:q,height:1}),Xi.copy(D.data,k,{x:q-1,y:0},{x:N-1,y:U},{width:1,height:Y}),Xi.copy(D.data,k,{x:0,y:0},{x:N+q,y:U},{width:1,height:Y})}this.image=k,this.iconPositions=u,this.patternPositions=m}addImages(r,o,u){for(const m in r){const v=r[m],x={x:0,y:0,w:v.data.width+2*mi,h:v.data.height+2*mi};u.push(x),o[m]=new ey(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,o){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in r.updatedImages)this.patchUpdatedImage(this.iconPositions[u],r.getImage(u),o),this.patchUpdatedImage(this.patternPositions[u],r.getImage(u),o)}patchUpdatedImage(r,o,u){if(!r||!o||r.version===o.version)return;r.version=o.version;const[m,v]=r.tl;u.update(o.data,void 0,{x:m,y:v})}}var ca;ut("ImagePosition",ey),ut("ImageAtlas",Mb),p.ah=void 0,(ca=p.ah||(p.ah={}))[ca.none=0]="none",ca[ca.horizontal=1]="horizontal",ca[ca.vertical=2]="vertical",ca[ca.horizontalOnly=3]="horizontalOnly";const Eh=-17;class Ph{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,o){const u=new Ph;return u.scale=r||1,u.fontStack=o,u}static forImage(r){const o=new Ph;return o.imageName=r,o}}class Cc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,o){const u=new Cc;for(let m=0;m<r.sections.length;m++){const v=r.sections[m];v.image?u.addImageSection(v):u.addTextSection(v,o)}return u}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let o="";for(let u=0;u<r.length;u++){const m=r.charCodeAt(u+1)||null,v=r.charCodeAt(u-1)||null;o+=m&&Af(m)&&!Ch[r[u+1]]||v&&Af(v)&&!Ch[r[u-1]]||!Ch[r[u]]?r[u]:Ch[r[u]]}return o}(this.text)}trim(){let r=0;for(let u=0;u<this.text.length&&Wf[this.text.charCodeAt(u)];u++)r++;let o=this.text.length;for(let u=this.text.length-1;u>=0&&u>=r&&Wf[this.text.charCodeAt(u)];u--)o--;this.text=this.text.substring(r,o),this.sectionIndex=this.sectionIndex.slice(r,o)}substring(r,o){const u=new Cc;return u.text=this.text.substring(r,o),u.sectionIndex=this.sectionIndex.slice(r,o),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,o)=>Math.max(r,this.sections[o].scale),0)}addTextSection(r,o){this.text+=r.text,this.sections.push(Ph.forText(r.scale,r.fontStack||o));const u=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(u)}addImageSection(r){const o=r.image?r.image.name:"";if(o.length===0)return void De("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Ph.forImage(o)),this.sectionIndex.push(this.sections.length-1)):De("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Gf(s,r,o,u,m,v,x,b,k,M,D,R,N,U,q){const Y=Cc.fromFeature(s,m);let oe;R===p.ah.vertical&&Y.verticalizePunctuation();const{processBidirectionalText:ce,processStyledBidirectionalText:Ce}=fi;if(ce&&Y.sections.length===1){oe=[];const Re=ce(Y.toString(),ty(Y,M,v,r,u,U));for(const Ve of Re){const ot=new Cc;ot.text=Ve,ot.sections=Y.sections;for(let At=0;At<Ve.length;At++)ot.sectionIndex.push(0);oe.push(ot)}}else if(Ce){oe=[];const Re=Ce(Y.text,Y.sectionIndex,ty(Y,M,v,r,u,U));for(const Ve of Re){const ot=new Cc;ot.text=Ve[0],ot.sectionIndex=Ve[1],ot.sections=Y.sections,oe.push(ot)}}else oe=function(Re,Ve){const ot=[],At=Re.text;let rt=0;for(const et of Ve)ot.push(Re.substring(rt,et)),rt=et;return rt<At.length&&ot.push(Re.substring(rt,At.length)),ot}(Y,ty(Y,M,v,r,u,U));const _e=[],ke={positionedLines:_e,text:Y.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:R,iconsInText:!1,verticalizable:!1};return function(Re,Ve,ot,At,rt,et,vt,dt,ct,Fe,bt,_t){let Ft=0,bn=Eh,vn=0,dr=0;const us=dt==="right"?1:dt==="left"?0:.5;let Rr=0;for(const $n of rt){$n.trim();const pr=$n.getMaxScale(),Ur=(pr-1)*lr,Lr={positionedGlyphs:[],lineOffset:0};Re.positionedLines[Rr]=Lr;const ni=Lr.positionedGlyphs;let Br=0;if(!$n.length()){bn+=et,++Rr;continue}for(let gi=0;gi<$n.length();gi++){const ln=$n.getSection(gi),Tn=$n.getSectionIndex(gi),Dn=$n.getCharCode(gi);let Di=0,Fn=null,Ac=null,Hs=null,Gs=lr;const hs=!(ct===p.ah.horizontal||!bt&&!fh(Dn)||bt&&(Wf[Dn]||(fr=Dn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(fr)))));if(ln.imageName){const Ji=At[ln.imageName];if(!Ji)continue;Hs=ln.imageName,Re.iconsInText=Re.iconsInText||!0,Ac=Ji.paddedRect;const wr=Ji.displaySize;ln.scale=ln.scale*lr/_t,Fn={width:wr[0],height:wr[1],left:mi,top:-Ib,advance:hs?wr[1]:wr[0]},Di=Ur+(lr-wr[1]*ln.scale),Gs=Fn.advance;const _o=hs?wr[0]*ln.scale-lr*pr:wr[1]*ln.scale-lr*pr;_o>0&&_o>Br&&(Br=_o)}else{const Ji=ot[ln.fontStack],wr=Ji&&Ji[Dn];if(wr&&wr.rect)Ac=wr.rect,Fn=wr.metrics;else{const _o=Ve[ln.fontStack],Rh=_o&&_o[Dn];if(!Rh)continue;Fn=Rh.metrics}Di=(pr-ln.scale)*lr}hs?(Re.verticalizable=!0,ni.push({glyph:Dn,imageName:Hs,x:Ft,y:bn+Di,vertical:hs,scale:ln.scale,fontStack:ln.fontStack,sectionIndex:Tn,metrics:Fn,rect:Ac}),Ft+=Gs*ln.scale+Fe):(ni.push({glyph:Dn,imageName:Hs,x:Ft,y:bn+Di,vertical:hs,scale:ln.scale,fontStack:ln.fontStack,sectionIndex:Tn,metrics:Fn,rect:Ac}),Ft+=Fn.advance*ln.scale+Fe)}ni.length!==0&&(vn=Math.max(Ft-Fe,vn),xA(ni,0,ni.length-1,us,Br)),Ft=0;const Yi=et*pr+Br;Lr.lineOffset=Math.max(Br,Ur),bn+=Yi,dr=Math.max(Yi,dr),++Rr}var fr;const Qr=bn-Eh,{horizontalAlign:ei,verticalAlign:ti}=ny(vt);(function($n,pr,Ur,Lr,ni,Br,Yi,gi,ln){const Tn=(pr-Ur)*ni;let Dn=0;Dn=Br!==Yi?-gi*Lr-Eh:(-Lr*ln+.5)*Yi;for(const Di of $n)for(const Fn of Di.positionedGlyphs)Fn.x+=Tn,Fn.y+=Dn})(Re.positionedLines,us,ei,ti,vn,dr,et,Qr,rt.length),Re.top+=-ti*Qr,Re.bottom=Re.top+Qr,Re.left+=-ei*vn,Re.right=Re.left+vn}(ke,r,o,u,oe,x,b,k,R,M,N,q),!function(Re){for(const Ve of Re)if(Ve.positionedGlyphs.length!==0)return!1;return!0}(_e)&&ke}const Wf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yA={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},_A={40:!0};function Db(s,r,o,u,m,v){if(r.imageName){const x=u[r.imageName];return x?x.displaySize[0]*r.scale*lr/v+m:0}{const x=o[r.fontStack],b=x&&x[s];return b?b.metrics.advance*r.scale+m:0}}function zb(s,r,o,u){const m=Math.pow(s-r,2);return u?s<r?m/2:2*m:m+Math.abs(o)*o}function vA(s,r,o){let u=0;return s===10&&(u-=1e4),o&&(u+=150),s!==40&&s!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function Rb(s,r,o,u,m,v){let x=null,b=zb(r,o,m,v);for(const k of u){const M=zb(r-k.x,o,m,v)+k.badness;M<=b&&(x=k,b=M)}return{index:s,x:r,priorBreak:x,badness:b}}function Lb(s){return s?Lb(s.priorBreak).concat(s.index):[]}function ty(s,r,o,u,m,v){if(!s)return[];const x=[],b=function(R,N,U,q,Y,oe){let ce=0;for(let Ce=0;Ce<R.length();Ce++){const _e=R.getSection(Ce);ce+=Db(R.getCharCode(Ce),_e,q,Y,N,oe)}return ce/Math.max(1,Math.ceil(ce/U))}(s,r,o,u,m,v),k=s.text.indexOf("")>=0;let M=0;for(let R=0;R<s.length();R++){const N=s.getSection(R),U=s.getCharCode(R);if(Wf[U]||(M+=Db(U,N,u,m,r,v)),R<s.length()-1){const q=!((D=U)<11904)&&(!!Qt["CJK Compatibility Forms"](D)||!!Qt["CJK Compatibility"](D)||!!Qt["CJK Strokes"](D)||!!Qt["CJK Symbols and Punctuation"](D)||!!Qt["Enclosed CJK Letters and Months"](D)||!!Qt["Halfwidth and Fullwidth Forms"](D)||!!Qt["Ideographic Description Characters"](D)||!!Qt["Vertical Forms"](D)||If.test(String.fromCodePoint(D)));(yA[U]||q||N.imageName||R!==s.length()-2&&_A[s.getCharCode(R+1)])&&x.push(Rb(R+1,M,b,x,vA(U,s.getCharCode(R+1),q&&k),!1))}}var D;return Lb(Rb(s.length(),M,b,x,0,!0))}function ny(s){let r=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:r,verticalAlign:o}}function xA(s,r,o,u,m){if(!u&&!m)return;const v=s[o],x=(s[o].x+v.metrics.advance*v.scale)*u;for(let b=r;b<=o;b++)s[b].x-=x,s[b].y+=m}function bA(s,r,o){const{horizontalAlign:u,verticalAlign:m}=ny(o),v=r[0]-s.displaySize[0]*u,x=r[1]-s.displaySize[1]*m;return{image:s,top:x,bottom:x+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function Bb(s){var r,o;let u=s.left,m=s.top,v=s.right-u,x=s.bottom-m;const b=(r=s.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",k=(o=s.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",M=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(k==="proportional"){if(b==="stretchOnly"&&v/x<M||b==="proportional"){const D=Math.ceil(x*M);u*=D/v,v=D}}else if(b==="proportional"&&k==="stretchOnly"&&M!==0&&v/x>M){const D=Math.ceil(v/M);m*=D/x,x=D}return{x1:u,y1:m,x2:u+v,y2:m+x}}function Fb(s,r,o,u,m,v){const x=s.image;let b;if(x.content){const oe=x.content,ce=x.pixelRatio||1;b=[oe[0]/ce,oe[1]/ce,x.displaySize[0]-oe[2]/ce,x.displaySize[1]-oe[3]/ce]}const k=r.left*v,M=r.right*v;let D,R,N,U;o==="width"||o==="both"?(U=m[0]+k-u[3],R=m[0]+M+u[1]):(U=m[0]+(k+M-x.displaySize[0])/2,R=U+x.displaySize[0]);const q=r.top*v,Y=r.bottom*v;return o==="height"||o==="both"?(D=m[1]+q-u[0],N=m[1]+Y+u[2]):(D=m[1]+(q+Y-x.displaySize[1])/2,N=D+x.displaySize[1]),{image:x,top:D,right:R,bottom:N,left:U,collisionPadding:b}}const Ih=255,$s=128,ua=Ih*$s;function Ob(s,r){const{expression:o}=r;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Pn(s+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:m}=o;let v=0;for(;v<u.length&&u[v]<=s;)v++;v=Math.max(0,v-1);let x=v;for(;x<u.length&&u[x]<s+1;)x++;x=Math.min(u.length-1,x);const b=u[v],k=u[x];return o.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:k,interpolationType:m}:{kind:"camera",minZoom:b,maxZoom:k,minSize:o.evaluate(new Pn(b)),maxSize:o.evaluate(new Pn(k)),interpolationType:m}}}function ry(s,r,o){let u="never";const m=s.get(r);return m?u=m:s.get(o)&&(u="always"),u}const wA=la.VectorTileFeature.types,SA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function qf(s,r,o,u,m,v,x,b,k,M,D,R,N){const U=b?Math.min(ua,Math.round(b[0])):0,q=b?Math.min(ua,Math.round(b[1])):0;s.emplaceBack(r,o,Math.round(32*u),Math.round(32*m),v,x,(U<<1)+(k?1:0),q,16*M,16*D,256*R,256*N)}function iy(s,r,o){s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o)}function kA(s){for(const r of s.sections)if(Dg(r.text))return!0;return!1}class sy{constructor(r){this.layoutVertexArray=new mc,this.indexArray=new Zi,this.programConfigurations=r,this.segments=new en,this.dynamicLayoutVertexArray=new gh,this.opacityVertexArray=new Ai,this.hasVisibleVertices=!1,this.placedSymbolArray=new In}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,o,u,m){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,eA.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,tA.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,SA,!0),this.opacityVertexBuffer.itemSize=1),(u||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ut("SymbolBuffers",sy);class oy{constructor(r,o,u){this.layoutVertexArray=new r,this.layoutAttributes=o,this.indexArray=new u,this.segments=new en,this.collisionVertexArray=new Vs}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,nA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ut("CollisionBuffers",oy);class Ec{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ng([]),this.placementViewportMatrix=Ng([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ob(this.zoom,o["text-size"]),this.iconSizeData=Ob(this.zoom,o["icon-size"]);const u=this.layers[0].layout,m=u.get("symbol-sort-key"),v=u.get("symbol-z-order");this.canOverlap=ry(u,"text-overlap","text-allow-overlap")!=="never"||ry(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(x=>p.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new sy(new ll(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new sy(new ll(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new An,this.lineVertexArray=new Ar,this.symbolInstances=new Jt,this.textAnchorOffsets=new Mn}calculateGlyphDependencies(r,o,u,m,v){for(let x=0;x<r.length;x++)if(o[r.charCodeAt(x)]=!0,(u||m)&&v){const b=Ch[r.charAt(x)];b&&(o[b.charCodeAt(0)]=!0)}}populate(r,o,u){const m=this.layers[0],v=m.layout,x=v.get("text-font"),b=v.get("text-field"),k=v.get("icon-image"),M=(b.value.kind!=="constant"||b.value.value instanceof ci&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),D=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,R=v.get("symbol-sort-key");if(this.features=[],!M&&!D)return;const N=o.iconDependencies,U=o.glyphDependencies,q=o.availableImages,Y=new Pn(this.zoom);for(const{feature:oe,id:ce,index:Ce,sourceLayerIndex:_e}of r){const ke=m._featureFilter.needGeometry,Re=ul(oe,ke);if(!m._featureFilter.filter(Y,Re,u))continue;let Ve,ot;if(ke||(Re.geometry=cl(oe)),M){const rt=m.getValueAndResolveTokens("text-field",Re,u,q),et=ci.factory(rt),vt=this.hasRTLText=this.hasRTLText||kA(et);(!vt||fi.getRTLTextPluginStatus()==="unavailable"||vt&&fi.isParsed())&&(Ve=iA(et,m,Re))}if(D){const rt=m.getValueAndResolveTokens("icon-image",Re,u,q);ot=rt instanceof hi?rt:hi.fromString(rt)}if(!Ve&&!ot)continue;const At=this.sortFeaturesByKey?R.evaluate(Re,{},u):void 0;if(this.features.push({id:ce,text:Ve,icon:ot,index:Ce,sourceLayerIndex:_e,geometry:Re.geometry,properties:oe.properties,type:wA[oe.type],sortKey:At}),ot&&(N[ot.name]=!0),Ve){const rt=x.evaluate(Re,{},u).join(","),et=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(p.ah.vertical)>=0;for(const vt of Ve.sections)if(vt.image)N[vt.image.name]=!0;else{const dt=hh(Ve.toString()),ct=vt.fontStack||rt,Fe=U[ct]=U[ct]||{};this.calculateGlyphDependencies(vt.text,Fe,et,this.allowVerticalPlacement,dt)}}}v.get("symbol-placement")==="line"&&(this.features=function(oe){const ce={},Ce={},_e=[];let ke=0;function Re(rt){_e.push(oe[rt]),ke++}function Ve(rt,et,vt){const dt=Ce[rt];return delete Ce[rt],Ce[et]=dt,_e[dt].geometry[0].pop(),_e[dt].geometry[0]=_e[dt].geometry[0].concat(vt[0]),dt}function ot(rt,et,vt){const dt=ce[et];return delete ce[et],ce[rt]=dt,_e[dt].geometry[0].shift(),_e[dt].geometry[0]=vt[0].concat(_e[dt].geometry[0]),dt}function At(rt,et,vt){const dt=vt?et[0][et[0].length-1]:et[0][0];return`${rt}:${dt.x}:${dt.y}`}for(let rt=0;rt<oe.length;rt++){const et=oe[rt],vt=et.geometry,dt=et.text?et.text.toString():null;if(!dt){Re(rt);continue}const ct=At(dt,vt),Fe=At(dt,vt,!0);if(ct in Ce&&Fe in ce&&Ce[ct]!==ce[Fe]){const bt=ot(ct,Fe,vt),_t=Ve(ct,Fe,_e[bt].geometry);delete ce[ct],delete Ce[Fe],Ce[At(dt,_e[_t].geometry,!0)]=_t,_e[bt].geometry=null}else ct in Ce?Ve(ct,Fe,vt):Fe in ce?ot(ct,Fe,vt):(Re(rt),ce[ct]=ke-1,Ce[Fe]=ke-1)}return _e.filter(rt=>rt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((oe,ce)=>oe.sortKey-ce.sortKey)}update(r,o,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,o,this.layers,u),this.icon.programConfigurations.updatePaintArrays(r,o,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,o){const u=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(o[r.segment+1]),v=r.dist(o[r.segment]);const x={};for(let b=r.segment+1;b<o.length;b++)x[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:m},b<o.length-1&&(m+=o[b+1].dist(o[b]));for(let b=r.segment||0;b>=0;b--)x[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:v},b>0&&(v+=o[b-1].dist(o[b]));for(let b=0;b<o.length;b++){const k=x[b];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(r,o,u,m,v,x,b,k,M,D,R,N){const U=r.indexArray,q=r.layoutVertexArray,Y=r.segments.prepareSegment(4*o.length,q,U,this.canOverlap?x.sortKey:void 0),oe=this.glyphOffsetArray.length,ce=Y.vertexLength,Ce=this.allowVerticalPlacement&&b===p.ah.vertical?Math.PI/2:0,_e=x.text&&x.text.sections;for(let ke=0;ke<o.length;ke++){const{tl:Re,tr:Ve,bl:ot,br:At,tex:rt,pixelOffsetTL:et,pixelOffsetBR:vt,minFontScaleX:dt,minFontScaleY:ct,glyphOffset:Fe,isSDF:bt,sectionIndex:_t}=o[ke],Ft=Y.vertexLength,bn=Fe[1];qf(q,k.x,k.y,Re.x,bn+Re.y,rt.x,rt.y,u,bt,et.x,et.y,dt,ct),qf(q,k.x,k.y,Ve.x,bn+Ve.y,rt.x+rt.w,rt.y,u,bt,vt.x,et.y,dt,ct),qf(q,k.x,k.y,ot.x,bn+ot.y,rt.x,rt.y+rt.h,u,bt,et.x,vt.y,dt,ct),qf(q,k.x,k.y,At.x,bn+At.y,rt.x+rt.w,rt.y+rt.h,u,bt,vt.x,vt.y,dt,ct),iy(r.dynamicLayoutVertexArray,k,Ce),U.emplaceBack(Ft,Ft+1,Ft+2),U.emplaceBack(Ft+1,Ft+2,Ft+3),Y.vertexLength+=4,Y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Fe[0]),ke!==o.length-1&&_t===o[ke+1].sectionIndex||r.programConfigurations.populatePaintArrays(q.length,x,x.index,{},N,_e&&_e[_t])}r.placedSymbolArray.emplaceBack(k.x,k.y,oe,this.glyphOffsetArray.length-oe,ce,M,D,k.segment,u?u[0]:0,u?u[1]:0,m[0],m[1],b,0,!1,0,R)}_addCollisionDebugVertex(r,o,u,m,v,x){return o.emplaceBack(0,0),r.emplaceBack(u.x,u.y,m,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,o,u,m,v,x,b){const k=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),M=k.vertexLength,D=v.layoutVertexArray,R=v.collisionVertexArray,N=b.anchorX,U=b.anchorY;this._addCollisionDebugVertex(D,R,x,N,U,new T(r,o)),this._addCollisionDebugVertex(D,R,x,N,U,new T(u,o)),this._addCollisionDebugVertex(D,R,x,N,U,new T(u,m)),this._addCollisionDebugVertex(D,R,x,N,U,new T(r,m)),k.vertexLength+=4;const q=v.indexArray;q.emplaceBack(M,M+1),q.emplaceBack(M+1,M+2),q.emplaceBack(M+2,M+3),q.emplaceBack(M+3,M),k.primitiveLength+=4}addDebugCollisionBoxes(r,o,u,m){for(let v=r;v<o;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new oy(Mi,bb.members,br),this.iconCollisionBox=new oy(Mi,bb.members,br);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(r,o,u,m,v,x,b,k,M){const D={};for(let R=o;R<u;R++){const N=r.get(R);D.textBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},D.textFeatureIndex=N.featureIndex;break}for(let R=m;R<v;R++){const N=r.get(R);D.verticalTextBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},D.verticalTextFeatureIndex=N.featureIndex;break}for(let R=x;R<b;R++){const N=r.get(R);D.iconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},D.iconFeatureIndex=N.featureIndex;break}for(let R=k;R<M;R++){const N=r.get(R);D.verticalIconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},D.verticalIconFeatureIndex=N.featureIndex;break}return D}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,o){const u=r.placedSymbolArray.get(o),m=u.vertexStartIndex+4*u.numGlyphs;for(let v=u.vertexStartIndex;v<m;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(r),u=Math.cos(r),m=[],v=[],x=[];for(let b=0;b<this.symbolInstances.length;++b){x.push(b);const k=this.symbolInstances.get(b);m.push(0|Math.round(o*k.anchorX+u*k.anchorY)),v.push(k.featureIndex)}return x.sort((b,k)=>m[b]-m[k]||v[k]-v[b]),x}addToSortKeyRanges(r,o){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const u=this.symbolInstances.get(o);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Nb,jb;ut("SymbolBucket",Ec,{omit:["layers","collisionBoxArray","features","compareText"]}),Ec.MAX_GLYPHS=65535,Ec.addDynamicAttributes=iy;var ay={get paint(){return jb=jb||new _({"icon-opacity":new Mt(Pe.paint_symbol["icon-opacity"]),"icon-color":new Mt(Pe.paint_symbol["icon-color"]),"icon-halo-color":new Mt(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mt(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mt(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new mt(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new mt(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Mt(Pe.paint_symbol["text-opacity"]),"text-color":new Mt(Pe.paint_symbol["text-color"],{runtimeType:Gn,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Mt(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new Mt(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new Mt(Pe.paint_symbol["text-halo-blur"]),"text-translate":new mt(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new mt(Pe.paint_symbol["text-translate-anchor"])})},get layout(){return Nb=Nb||new _({"symbol-placement":new mt(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new mt(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mt(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Mt(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mt(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mt(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new mt(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new mt(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new mt(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mt(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mt(Pe.layout_symbol["icon-size"]),"icon-text-fit":new mt(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mt(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mt(Pe.layout_symbol["icon-image"]),"icon-rotate":new Mt(Pe.layout_symbol["icon-rotate"]),"icon-padding":new Mt(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new mt(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new Mt(Pe.layout_symbol["icon-offset"]),"icon-anchor":new Mt(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mt(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mt(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mt(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new Mt(Pe.layout_symbol["text-field"]),"text-font":new Mt(Pe.layout_symbol["text-font"]),"text-size":new Mt(Pe.layout_symbol["text-size"]),"text-max-width":new Mt(Pe.layout_symbol["text-max-width"]),"text-line-height":new mt(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new Mt(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new Mt(Pe.layout_symbol["text-justify"]),"text-radial-offset":new Mt(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mt(Pe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Mt(Pe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Mt(Pe.layout_symbol["text-anchor"]),"text-max-angle":new mt(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new mt(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new Mt(Pe.layout_symbol["text-rotate"]),"text-padding":new mt(Pe.layout_symbol["text-padding"]),"text-keep-upright":new mt(Pe.layout_symbol["text-keep-upright"]),"text-transform":new Mt(Pe.layout_symbol["text-transform"]),"text-offset":new Mt(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new mt(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new mt(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new mt(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new mt(Pe.layout_symbol["text-optional"])})}};class Vb{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:zn,this.defaultValue=r}evaluate(r){if(r.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(r.formattedSection))return o.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ut("FormatSectionOverride",Vb,{omit:["defaultValue"]});class Zf extends l{constructor(r){super(r,ay)}recalculate(r,o){if(super.recalculate(r,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const m=[];for(const v of u)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,o,u,m){const v=this.layout.get(r).evaluate(o,{},u,m),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||ec(x.value)||!v?v:function(b,k){return k.replace(/{([^{}]+)}/g,(M,D)=>b&&D in b?String(b[D]):"")}(o.properties,v)}createBucket(r){return new Ec(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of ay.paint.overridableProperties){if(!Zf.hasPaintOverride(this.layout,r))continue;const o=this.paint.get(r),u=new Vb(o),m=new Ql(u,o.property.specification);let v=null;v=o.value.kind==="constant"||o.value.kind==="source"?new qo("source",m):new Zo("composite",m,o.value.zoomStops),this.paint._values[r]=new ls(o.property,v,o.parameters)}}_handleOverridablePaintPropertyUpdate(r,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven())&&Zf.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,o){const u=r.get("text-field"),m=ay.paint.properties[o];let v=!1;const x=b=>{for(const k of b)if(m.overrides&&m.overrides.hasOverride(k))return void(v=!0)};if(u.value.kind==="constant"&&u.value.value instanceof ci)x(u.value.value.sections);else if(u.value.kind==="source"){const b=M=>{v||(M instanceof Ui&&rr(M.value)===Ht?x(M.value.sections):M instanceof Hl?x(M.sections):M.eachChild(b))},k=u.value;k._styleExpression&&b(k._styleExpression.expression)}return v}}let Ub;var TA={get paint(){return Ub=Ub||new _({"background-color":new mt(Pe.paint_background["background-color"]),"background-pattern":new fc(Pe.paint_background["background-pattern"]),"background-opacity":new mt(Pe.paint_background["background-opacity"])})}};class CA extends l{constructor(r){super(r,TA)}}let $b;var EA={get paint(){return $b=$b||new _({"raster-opacity":new mt(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new mt(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mt(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mt(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new mt(Pe.paint_raster["raster-saturation"]),"raster-contrast":new mt(Pe.paint_raster["raster-contrast"]),"raster-resampling":new mt(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new mt(Pe.paint_raster["raster-fade-duration"])})}};class PA extends l{constructor(r){super(r,EA)}}class IA extends l{constructor(r){super(r,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class AA{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const ly=63710088e-1;class ha{constructor(r,o){if(isNaN(r)||isNaN(o))throw new Error(`Invalid LngLat object: (${r}, ${o})`);if(this.lng=+r,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ha(be(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const o=Math.PI/180,u=this.lat*o,m=r.lat*o,v=Math.sin(u)*Math.sin(m)+Math.cos(u)*Math.cos(m)*Math.cos((r.lng-this.lng)*o);return ly*Math.acos(Math.min(v,1))}static convert(r){if(r instanceof ha)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new ha(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new ha(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Hb=2*Math.PI*ly;function Gb(s){return Hb*Math.cos(s*Math.PI/180)}function Wb(s){return(180+s)/360}function qb(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Zb(s,r){return s/Gb(r)}function cy(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Ah{constructor(r,o,u=0){this.x=+r,this.y=+o,this.z=+u}static fromLngLat(r,o=0){const u=ha.convert(r);return new Ah(Wb(u.lng),qb(u.lat),Zb(o,u.lat))}toLngLat(){return new ha(360*this.x-180,cy(this.y))}toAltitude(){return this.z*Gb(cy(this.y))}meterInMercatorCoordinateUnits(){return 1/Hb*(r=cy(this.y),1/Math.cos(r*Math.PI/180));var r}}function Xb(s,r,o){var u=2*Math.PI*6378137/256/Math.pow(2,o);return[s*u-2*Math.PI*6378137/2,r*u-2*Math.PI*6378137/2]}class uy{constructor(r,o,u){if(!function(m,v,x){return!(m<0||m>25||x<0||x>=Math.pow(2,m)||v<0||v>=Math.pow(2,m))}(r,o,u))throw new Error(`x=${o}, y=${u}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=o,this.y=u,this.key=Mh(0,r,r,o,u)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,o,u){const m=(x=this.y,b=this.z,k=Xb(256*(v=this.x),256*(x=Math.pow(2,b)-x-1),b),M=Xb(256*(v+1),256*(x+1),b),k[0]+","+k[1]+","+M[0]+","+M[1]);var v,x,b,k,M;const D=function(R,N,U){let q,Y="";for(let oe=R;oe>0;oe--)q=1<<oe-1,Y+=(N&q?1:0)+(U&q?2:0);return Y}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const o=this.z-r.z;return o>0&&r.x===this.x>>o&&r.y===this.y>>o}getTilePoint(r){const o=Math.pow(2,this.z);return new T((r.x*o-this.x)*ir,(r.y*o-this.y)*ir)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Kb{constructor(r,o){this.wrap=r,this.canonical=o,this.key=Mh(r,o.z,o.z,o.x,o.y)}}class Ki{constructor(r,o,u,m,v){if(r<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${u}`);this.overscaledZ=r,this.wrap=o,this.canonical=new uy(u,+m,+v),this.key=Mh(o,r,u,m,v)}clone(){return new Ki(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-r;return r>this.canonical.z?new Ki(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ki(r,this.wrap,r,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(r,o){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-r;return r>this.canonical.z?Mh(this.wrap*+o,r,this.canonical.z,this.canonical.x,this.canonical.y):Mh(this.wrap*+o,r,r,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const o=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>o&&r.canonical.y===this.canonical.y>>o}children(r){if(this.overscaledZ>=r)return[new Ki(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,u=2*this.canonical.x,m=2*this.canonical.y;return[new Ki(o,this.wrap,o,u,m),new Ki(o,this.wrap,o,u+1,m),new Ki(o,this.wrap,o,u,m+1),new Ki(o,this.wrap,o,u+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Ki(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Ki(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Kb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Ah(r.x-this.wrap,r.y))}}function Mh(s,r,o,u,m){(s*=2)<0&&(s=-1*s-1);const v=1<<o;return(v*v*s+v*m+u).toString(36)+o.toString(36)+r.toString(36)}ut("CanonicalTileID",uy),ut("OverscaledTileID",Ki,{omit:["posMatrix"]});class Yb{constructor(r,o,u,m=1,v=1,x=1,b=0){if(this.uid=r,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&!["mapbox","terrarium","custom"].includes(u))return void De(`"${u}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const k=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),u){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=x,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<k;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(k,M)]=this.data[this._idx(k-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,k)]=this.data[this._idx(M,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<k;M++)for(let D=0;D<k;D++){const R=this.get(M,D);R>this.max&&(this.max=R),R<this.min&&(this.min=R)}}get(r,o){const u=new Uint8Array(this.data.buffer),m=4*this._idx(r,o);return this.unpack(u[m],u[m+1],u[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,o){if(r<-1||r>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(r+1)}unpack(r,o,u){return r*this.redFactor+o*this.greenFactor+u*this.blueFactor-this.baseShift}getPixels(){return new Xi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,o,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=o*this.dim,v=o*this.dim+this.dim,x=u*this.dim,b=u*this.dim+this.dim;switch(o){case-1:m=v-1;break;case 1:v=m+1}switch(u){case-1:x=b-1;break;case 1:b=x+1}const k=-o*this.dim,M=-u*this.dim;for(let D=x;D<b;D++)for(let R=m;R<v;R++)this.data[this._idx(R,D)]=r.data[this._idx(R+k,D+M)]}}ut("DEMData",Yb);class Jb{constructor(r){this._stringToNumber={},this._numberToString=[];for(let o=0;o<r.length;o++){const u=r[o];this._stringToNumber[u]=o,this._numberToString[o]=u}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Qb{constructor(r,o,u,m,v){this.type="Feature",this._vectorTileFeature=r,r._z=o,r._x=u,r._y=m,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(r[o]=this[o]);return r}}class ew{constructor(r,o){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Yo(ir,16,0),this.grid3D=new Yo(ir,16,0),this.featureIndexArray=new jr,this.promoteId=o}insert(r,o,u,m,v,x){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,m,v);const k=x?this.grid3D:this.grid;for(let M=0;M<o.length;M++){const D=o[M],R=[1/0,1/0,-1/0,-1/0];for(let N=0;N<D.length;N++){const U=D[N];R[0]=Math.min(R[0],U.x),R[1]=Math.min(R[1],U.y),R[2]=Math.max(R[2],U.x),R[3]=Math.max(R[3],U.y)}R[0]<ir&&R[1]<ir&&R[2]>=0&&R[3]>=0&&k.insert(b,R[0],R[1],R[2],R[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new la.VectorTile(new Jg(this.rawTileData)).layers,this.sourceLayerCoder=new Jb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,o,u,m){this.loadVTLayers();const v=r.params||{},x=ir/r.tileSize/r.scale,b=Ku(v.filter),k=r.queryGeometry,M=r.queryPadding*x,D=nw(k),R=this.grid.query(D.minX-M,D.minY-M,D.maxX+M,D.maxY+M),N=nw(r.cameraQueryGeometry),U=this.grid3D.query(N.minX-M,N.minY-M,N.maxX+M,N.maxY+M,(oe,ce,Ce,_e)=>function(ke,Re,Ve,ot,At){for(const et of ke)if(Re<=et.x&&Ve<=et.y&&ot>=et.x&&At>=et.y)return!0;const rt=[new T(Re,Ve),new T(Re,At),new T(ot,At),new T(ot,Ve)];if(ke.length>2){for(const et of rt)if(xc(ke,et))return!0}for(let et=0;et<ke.length-1;et++)if(uI(ke[et],ke[et+1],rt))return!0;return!1}(r.cameraQueryGeometry,oe-M,ce-M,Ce+M,_e+M));for(const oe of U)R.push(oe);R.sort(MA);const q={};let Y;for(let oe=0;oe<R.length;oe++){const ce=R[oe];if(ce===Y)continue;Y=ce;const Ce=this.featureIndexArray.get(ce);let _e=null;this.loadMatchingFeature(q,Ce.bucketIndex,Ce.sourceLayerIndex,Ce.featureIndex,b,v.layers,v.availableImages,o,u,m,(ke,Re,Ve)=>(_e||(_e=cl(ke)),Re.queryIntersectsFeature(k,ke,Ve,_e,this.z,r.transform,x,r.pixelPosMatrix)))}return q}loadMatchingFeature(r,o,u,m,v,x,b,k,M,D,R){const N=this.bucketLayerIDs[o];if(x&&!function(oe,ce){for(let Ce=0;Ce<oe.length;Ce++)if(ce.indexOf(oe[Ce])>=0)return!0;return!1}(x,N))return;const U=this.sourceLayerCoder.decode(u),q=this.vtLayers[U].feature(m);if(v.needGeometry){const oe=ul(q,!0);if(!v.filter(new Pn(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!v.filter(new Pn(this.tileID.overscaledZ),q))return;const Y=this.getId(q,U);for(let oe=0;oe<N.length;oe++){const ce=N[oe];if(x&&x.indexOf(ce)<0)continue;const Ce=k[ce];if(!Ce)continue;let _e={};Y&&D&&(_e=D.getState(Ce.sourceLayer||"_geojsonTileLayer",Y));const ke=fe({},M[ce]);ke.paint=tw(ke.paint,Ce.paint,q,_e,b),ke.layout=tw(ke.layout,Ce.layout,q,_e,b);const Re=!R||R(q,Ce,_e);if(!Re)continue;const Ve=new Qb(q,this.z,this.x,this.y,Y);Ve.layer=ke;let ot=r[ce];ot===void 0&&(ot=r[ce]=[]),ot.push({featureIndex:m,feature:Ve,intersectionZ:Re})}}lookupSymbolFeatures(r,o,u,m,v,x,b,k){const M={};this.loadVTLayers();const D=Ku(v);for(const R of r)this.loadMatchingFeature(M,u,m,R,D,x,b,k,o);return M}hasLayer(r){for(const o of this.bucketLayerIDs)for(const u of o)if(r===u)return!0;return!1}getId(r,o){let u=r.id;return this.promoteId&&(u=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof u=="boolean"&&(u=Number(u))),u}}function tw(s,r,o,u,m){return we(s,(v,x)=>{const b=r instanceof sl?r.get(x):null;return b&&b.evaluate?b.evaluate(o,u,m):b})}function nw(s){let r=1/0,o=1/0,u=-1/0,m=-1/0;for(const v of s)r=Math.min(r,v.x),o=Math.min(o,v.y),u=Math.max(u,v.x),m=Math.max(m,v.y);return{minX:r,minY:o,maxX:u,maxY:m}}function MA(s,r){return r-s}function rw(s,r,o,u,m){const v=[];for(let x=0;x<s.length;x++){const b=s[x];let k;for(let M=0;M<b.length-1;M++){let D=b[M],R=b[M+1];D.x<r&&R.x<r||(D.x<r?D=new T(r,D.y+(r-D.x)/(R.x-D.x)*(R.y-D.y))._round():R.x<r&&(R=new T(r,D.y+(r-D.x)/(R.x-D.x)*(R.y-D.y))._round()),D.y<o&&R.y<o||(D.y<o?D=new T(D.x+(o-D.y)/(R.y-D.y)*(R.x-D.x),o)._round():R.y<o&&(R=new T(D.x+(o-D.y)/(R.y-D.y)*(R.x-D.x),o)._round()),D.x>=u&&R.x>=u||(D.x>=u?D=new T(u,D.y+(u-D.x)/(R.x-D.x)*(R.y-D.y))._round():R.x>=u&&(R=new T(u,D.y+(u-D.x)/(R.x-D.x)*(R.y-D.y))._round()),D.y>=m&&R.y>=m||(D.y>=m?D=new T(D.x+(m-D.y)/(R.y-D.y)*(R.x-D.x),m)._round():R.y>=m&&(R=new T(D.x+(m-D.y)/(R.y-D.y)*(R.x-D.x),m)._round()),k&&D.equals(k[k.length-1])||(k=[D],v.push(k)),k.push(R)))))}}return v}ut("FeatureIndex",ew,{omit:["rawTileData","sourceLayerCoder"]});class da extends T{constructor(r,o,u,m){super(r,o),this.angle=u,m!==void 0&&(this.segment=m)}clone(){return new da(this.x,this.y,this.angle,this.segment)}}function iw(s,r,o,u,m){if(r.segment===void 0||o===0)return!0;let v=r,x=r.segment+1,b=0;for(;b>-o/2;){if(x--,x<0)return!1;b-=s[x].dist(v),v=s[x]}b+=s[x].dist(s[x+1]),x++;const k=[];let M=0;for(;b<o/2;){const D=s[x],R=s[x+1];if(!R)return!1;let N=s[x-1].angleTo(D)-D.angleTo(R);for(N=Math.abs((N+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:b,angleDelta:N}),M+=N;b-k[0].distance>u;)M-=k.shift().angleDelta;if(M>m)return!1;x++,b+=D.dist(R)}return!0}function sw(s){let r=0;for(let o=0;o<s.length-1;o++)r+=s[o].dist(s[o+1]);return r}function ow(s,r,o){return s?.6*r*o:0}function aw(s,r){return Math.max(s?s.right-s.left:0,r?r.right-r.left:0)}function DA(s,r,o,u,m,v){const x=ow(o,m,v),b=aw(o,u)*v;let k=0;const M=sw(s)/2;for(let D=0;D<s.length-1;D++){const R=s[D],N=s[D+1],U=R.dist(N);if(k+U>M){const q=(M-k)/U,Y=Xr.number(R.x,N.x,q),oe=Xr.number(R.y,N.y,q),ce=new da(Y,oe,N.angleTo(R),D);return ce._round(),!x||iw(s,ce,b,x,r)?ce:void 0}k+=U}}function zA(s,r,o,u,m,v,x,b,k){const M=ow(u,v,x),D=aw(u,m),R=D*x,N=s[0].x===0||s[0].x===k||s[0].y===0||s[0].y===k;return r-R<r/4&&(r=R+r/4),lw(s,N?r/2*b%r:(D/2+2*v)*x*b%r,r,M,o,R,N,!1,k)}function lw(s,r,o,u,m,v,x,b,k){const M=v/2,D=sw(s);let R=0,N=r-o,U=[];for(let q=0;q<s.length-1;q++){const Y=s[q],oe=s[q+1],ce=Y.dist(oe),Ce=oe.angleTo(Y);for(;N+o<R+ce;){N+=o;const _e=(N-R)/ce,ke=Xr.number(Y.x,oe.x,_e),Re=Xr.number(Y.y,oe.y,_e);if(ke>=0&&ke<k&&Re>=0&&Re<k&&N-M>=0&&N+M<=D){const Ve=new da(ke,Re,Ce,q);Ve._round(),u&&!iw(s,Ve,v,u,m)||U.push(Ve)}}R+=ce}return b||U.length||x||(U=lw(s,R/2,o,u,m,v,x,!0,k)),U}ut("Anchor",da);const Pc=mi;function cw(s,r,o,u){const m=[],v=s.image,x=v.pixelRatio,b=v.paddedRect.w-2*Pc,k=v.paddedRect.h-2*Pc;let M={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const D=v.stretchX||[[0,b]],R=v.stretchY||[[0,k]],N=(Fe,bt)=>Fe+bt[1]-bt[0],U=D.reduce(N,0),q=R.reduce(N,0),Y=b-U,oe=k-q;let ce=0,Ce=U,_e=0,ke=q,Re=0,Ve=Y,ot=0,At=oe;if(v.content&&u){const Fe=v.content,bt=Fe[2]-Fe[0],_t=Fe[3]-Fe[1];(v.textFitWidth||v.textFitHeight)&&(M=Bb(s)),ce=Xf(D,0,Fe[0]),_e=Xf(R,0,Fe[1]),Ce=Xf(D,Fe[0],Fe[2]),ke=Xf(R,Fe[1],Fe[3]),Re=Fe[0]-ce,ot=Fe[1]-_e,Ve=bt-Ce,At=_t-ke}const rt=M.x1,et=M.y1,vt=M.x2-rt,dt=M.y2-et,ct=(Fe,bt,_t,Ft)=>{const bn=Kf(Fe.stretch-ce,Ce,vt,rt),vn=Yf(Fe.fixed-Re,Ve,Fe.stretch,U),dr=Kf(bt.stretch-_e,ke,dt,et),us=Yf(bt.fixed-ot,At,bt.stretch,q),Rr=Kf(_t.stretch-ce,Ce,vt,rt),fr=Yf(_t.fixed-Re,Ve,_t.stretch,U),Qr=Kf(Ft.stretch-_e,ke,dt,et),ei=Yf(Ft.fixed-ot,At,Ft.stretch,q),ti=new T(bn,dr),$n=new T(Rr,dr),pr=new T(Rr,Qr),Ur=new T(bn,Qr),Lr=new T(vn/x,us/x),ni=new T(fr/x,ei/x),Br=r*Math.PI/180;if(Br){const ln=Math.sin(Br),Tn=Math.cos(Br),Dn=[Tn,-ln,ln,Tn];ti._matMult(Dn),$n._matMult(Dn),Ur._matMult(Dn),pr._matMult(Dn)}const Yi=Fe.stretch+Fe.fixed,gi=bt.stretch+bt.fixed;return{tl:ti,tr:$n,bl:Ur,br:pr,tex:{x:v.paddedRect.x+Pc+Yi,y:v.paddedRect.y+Pc+gi,w:_t.stretch+_t.fixed-Yi,h:Ft.stretch+Ft.fixed-gi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Lr,pixelOffsetBR:ni,minFontScaleX:Ve/x/vt,minFontScaleY:At/x/dt,isSDF:o}};if(u&&(v.stretchX||v.stretchY)){const Fe=uw(D,Y,U),bt=uw(R,oe,q);for(let _t=0;_t<Fe.length-1;_t++){const Ft=Fe[_t],bn=Fe[_t+1];for(let vn=0;vn<bt.length-1;vn++)m.push(ct(Ft,bt[vn],bn,bt[vn+1]))}}else m.push(ct({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:k+1}));return m}function Xf(s,r,o){let u=0;for(const m of s)u+=Math.max(r,Math.min(o,m[1]))-Math.max(r,Math.min(o,m[0]));return u}function uw(s,r,o){const u=[{fixed:-Pc,stretch:0}];for(const[m,v]of s){const x=u[u.length-1];u.push({fixed:m-x.stretch,stretch:x.stretch}),u.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return u.push({fixed:r+Pc,stretch:o}),u}function Kf(s,r,o,u){return s/r*o+u}function Yf(s,r,o,u){return s-r*o/u}class Jf{constructor(r,o,u,m,v,x,b,k,M,D){var R;if(this.boxStartIndex=r.length,M){let N=x.top,U=x.bottom;const q=x.collisionPadding;q&&(N-=q[1],U+=q[3]);let Y=U-N;Y>0&&(Y=Math.max(10,Y),this.circleDiameter=Y)}else{const N=!((R=x.image)===null||R===void 0)&&R.content&&(x.image.textFitWidth||x.image.textFitHeight)?Bb(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};N.y1=N.y1*b-k[0],N.y2=N.y2*b+k[2],N.x1=N.x1*b-k[3],N.x2=N.x2*b+k[1];const U=x.collisionPadding;if(U&&(N.x1-=U[0]*b,N.y1-=U[1]*b,N.x2+=U[2]*b,N.y2+=U[3]*b),D){const q=new T(N.x1,N.y1),Y=new T(N.x2,N.y1),oe=new T(N.x1,N.y2),ce=new T(N.x2,N.y2),Ce=D*Math.PI/180;q._rotate(Ce),Y._rotate(Ce),oe._rotate(Ce),ce._rotate(Ce),N.x1=Math.min(q.x,Y.x,oe.x,ce.x),N.x2=Math.max(q.x,Y.x,oe.x,ce.x),N.y1=Math.min(q.y,Y.y,oe.y,ce.y),N.y2=Math.max(q.y,Y.y,oe.y,ce.y)}r.emplaceBack(o.x,o.y,N.x1,N.y1,N.x2,N.y2,u,m,v)}this.boxEndIndex=r.length}}class RA{constructor(r=[],o=(u,m)=>u<m?-1:u>m?1:0){if(this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:o,compare:u}=this,m=o[r];for(;r>0;){const v=r-1>>1,x=o[v];if(u(m,x)>=0)break;o[r]=x,r=v}o[r]=m}_down(r){const{data:o,compare:u}=this,m=this.length>>1,v=o[r];for(;r<m;){let x=1+(r<<1);const b=x+1;if(b<this.length&&u(o[b],o[x])<0&&(x=b),u(o[x],v)>=0)break;o[r]=o[x],r=x}o[r]=v}}function LA(s,r=1,o=!1){let u=1/0,m=1/0,v=-1/0,x=-1/0;const b=s[0];for(let U=0;U<b.length;U++){const q=b[U];(!U||q.x<u)&&(u=q.x),(!U||q.y<m)&&(m=q.y),(!U||q.x>v)&&(v=q.x),(!U||q.y>x)&&(x=q.y)}const k=Math.min(v-u,x-m);let M=k/2;const D=new RA([],BA);if(k===0)return new T(u,m);for(let U=u;U<v;U+=k)for(let q=m;q<x;q+=k)D.push(new Ic(U+M,q+M,M,s));let R=function(U){let q=0,Y=0,oe=0;const ce=U[0];for(let Ce=0,_e=ce.length,ke=_e-1;Ce<_e;ke=Ce++){const Re=ce[Ce],Ve=ce[ke],ot=Re.x*Ve.y-Ve.x*Re.y;Y+=(Re.x+Ve.x)*ot,oe+=(Re.y+Ve.y)*ot,q+=3*ot}return new Ic(Y/q,oe/q,0,U)}(s),N=D.length;for(;D.length;){const U=D.pop();(U.d>R.d||!R.d)&&(R=U,o&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,N)),U.max-R.d<=r||(M=U.h/2,D.push(new Ic(U.p.x-M,U.p.y-M,M,s)),D.push(new Ic(U.p.x+M,U.p.y-M,M,s)),D.push(new Ic(U.p.x-M,U.p.y+M,M,s)),D.push(new Ic(U.p.x+M,U.p.y+M,M,s)),N+=4)}return o&&(console.log(`num probes: ${N}`),console.log(`best distance: ${R.d}`)),R.p}function BA(s,r){return r.max-s.max}function Ic(s,r,o,u){this.p=new T(s,r),this.h=o,this.d=function(m,v){let x=!1,b=1/0;for(let k=0;k<v.length;k++){const M=v[k];for(let D=0,R=M.length,N=R-1;D<R;N=D++){const U=M[D],q=M[N];U.y>m.y!=q.y>m.y&&m.x<(q.x-U.x)*(m.y-U.y)/(q.y-U.y)+U.x&&(x=!x),b=Math.min(b,qx(m,U,q))}}return(x?1:-1)*Math.sqrt(b)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}var zr;p.aq=void 0,(zr=p.aq||(p.aq={}))[zr.center=1]="center",zr[zr.left=2]="left",zr[zr.right=3]="right",zr[zr.top=4]="top",zr[zr.bottom=5]="bottom",zr[zr["top-left"]=6]="top-left",zr[zr["top-right"]=7]="top-right",zr[zr["bottom-left"]=8]="bottom-left",zr[zr["bottom-right"]=9]="bottom-right";const fa=7,hy=Number.POSITIVE_INFINITY;function hw(s,r){return r[1]!==hy?function(o,u,m){let v=0,x=0;switch(u=Math.abs(u),m=Math.abs(m),o){case"top-right":case"top-left":case"top":x=m-fa;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+fa}switch(o){case"top-right":case"bottom-right":case"right":v=-u;break;case"top-left":case"bottom-left":case"left":v=u}return[v,x]}(s,r[0],r[1]):function(o,u){let m=0,v=0;u<0&&(u=0);const x=u/Math.SQRT2;switch(o){case"top-right":case"top-left":v=x-fa;break;case"bottom-right":case"bottom-left":v=-x+fa;break;case"bottom":v=-u+fa;break;case"top":v=u-fa}switch(o){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=u;break;case"right":m=-u}return[m,v]}(s,r[0])}function dw(s,r,o){var u;const m=s.layout,v=(u=m.get("text-variable-anchor-offset"))===null||u===void 0?void 0:u.evaluate(r,{},o);if(v){const b=v.values,k=[];for(let M=0;M<b.length;M+=2){const D=k[M]=b[M],R=b[M+1].map(N=>N*lr);D.startsWith("top")?R[1]-=fa:D.startsWith("bottom")&&(R[1]+=fa),k[M+1]=R}return new Ti(k)}const x=m.get("text-variable-anchor");if(x){let b;b=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},o)*lr,hy]:m.get("text-offset").evaluate(r,{},o).map(M=>M*lr);const k=[];for(const M of x)k.push(M,hw(M,b));return new Ti(k)}return null}function dy(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function FA(s,r,o,u,m,v,x,b,k,M,D){let R=v.textMaxSize.evaluate(r,{});R===void 0&&(R=x);const N=s.layers[0].layout,U=N.get("icon-offset").evaluate(r,{},D),q=pw(o.horizontal),Y=x/24,oe=s.tilePixelRatio*Y,ce=s.tilePixelRatio*R/24,Ce=s.tilePixelRatio*b,_e=s.tilePixelRatio*N.get("symbol-spacing"),ke=N.get("text-padding")*s.tilePixelRatio,Re=function(Fe,bt,_t,Ft=1){const bn=Fe.get("icon-padding").evaluate(bt,{},_t),vn=bn&&bn.values;return[vn[0]*Ft,vn[1]*Ft,vn[2]*Ft,vn[3]*Ft]}(N,r,D,s.tilePixelRatio),Ve=N.get("text-max-angle")/180*Math.PI,ot=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point",At=N.get("icon-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",rt=N.get("symbol-placement"),et=_e/2,vt=N.get("icon-text-fit");let dt;u&&vt!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(dt=Fb(u,o.vertical,vt,N.get("icon-text-fit-padding"),U,Y)),q&&(u=Fb(u,q,vt,N.get("icon-text-fit-padding"),U,Y)));const ct=(Fe,bt)=>{bt.x<0||bt.x>=ir||bt.y<0||bt.y>=ir||function(_t,Ft,bn,vn,dr,us,Rr,fr,Qr,ei,ti,$n,pr,Ur,Lr,ni,Br,Yi,gi,ln,Tn,Dn,Di,Fn,Ac){const Hs=_t.addToLineVertexArray(Ft,bn);let Gs,hs,Ji,wr,_o=0,Rh=0,_w=0,vw=0,xy=-1,by=-1;const vo={};let xw=gc("");if(_t.allowVerticalPlacement&&vn.vertical){const $r=fr.layout.get("text-rotate").evaluate(Tn,{},Fn)+90;Ji=new Jf(Qr,Ft,ei,ti,$n,vn.vertical,pr,Ur,Lr,$r),Rr&&(wr=new Jf(Qr,Ft,ei,ti,$n,Rr,Br,Yi,Lr,$r))}if(dr){const $r=fr.layout.get("icon-rotate").evaluate(Tn,{}),Qi=fr.layout.get("icon-text-fit")!=="none",dl=cw(dr,$r,Di,Qi),Cs=Rr?cw(Rr,$r,Di,Qi):void 0;hs=new Jf(Qr,Ft,ei,ti,$n,dr,Br,Yi,!1,$r),_o=4*dl.length;const fl=_t.iconSizeData;let Ws=null;fl.kind==="source"?(Ws=[$s*fr.layout.get("icon-size").evaluate(Tn,{})],Ws[0]>ua&&De(`${_t.layerIds[0]}: Value for "icon-size" is >= ${Ih}. Reduce your "icon-size".`)):fl.kind==="composite"&&(Ws=[$s*Dn.compositeIconSizes[0].evaluate(Tn,{},Fn),$s*Dn.compositeIconSizes[1].evaluate(Tn,{},Fn)],(Ws[0]>ua||Ws[1]>ua)&&De(`${_t.layerIds[0]}: Value for "icon-size" is >= ${Ih}. Reduce your "icon-size".`)),_t.addSymbols(_t.icon,dl,Ws,ln,gi,Tn,p.ah.none,Ft,Hs.lineStartIndex,Hs.lineLength,-1,Fn),xy=_t.icon.placedSymbolArray.length-1,Cs&&(Rh=4*Cs.length,_t.addSymbols(_t.icon,Cs,Ws,ln,gi,Tn,p.ah.vertical,Ft,Hs.lineStartIndex,Hs.lineLength,-1,Fn),by=_t.icon.placedSymbolArray.length-1)}const bw=Object.keys(vn.horizontal);for(const $r of bw){const Qi=vn.horizontal[$r];if(!Gs){xw=gc(Qi.text);const Cs=fr.layout.get("text-rotate").evaluate(Tn,{},Fn);Gs=new Jf(Qr,Ft,ei,ti,$n,Qi,pr,Ur,Lr,Cs)}const dl=Qi.positionedLines.length===1;if(_w+=fw(_t,Ft,Qi,us,fr,Lr,Tn,ni,Hs,vn.vertical?p.ah.horizontal:p.ah.horizontalOnly,dl?bw:[$r],vo,xy,Dn,Fn),dl)break}vn.vertical&&(vw+=fw(_t,Ft,vn.vertical,us,fr,Lr,Tn,ni,Hs,p.ah.vertical,["vertical"],vo,by,Dn,Fn));const jA=Gs?Gs.boxStartIndex:_t.collisionBoxArray.length,VA=Gs?Gs.boxEndIndex:_t.collisionBoxArray.length,UA=Ji?Ji.boxStartIndex:_t.collisionBoxArray.length,$A=Ji?Ji.boxEndIndex:_t.collisionBoxArray.length,HA=hs?hs.boxStartIndex:_t.collisionBoxArray.length,GA=hs?hs.boxEndIndex:_t.collisionBoxArray.length,WA=wr?wr.boxStartIndex:_t.collisionBoxArray.length,qA=wr?wr.boxEndIndex:_t.collisionBoxArray.length;let Ts=-1;const ep=($r,Qi)=>$r&&$r.circleDiameter?Math.max($r.circleDiameter,Qi):Qi;Ts=ep(Gs,Ts),Ts=ep(Ji,Ts),Ts=ep(hs,Ts),Ts=ep(wr,Ts);const ww=Ts>-1?1:0;ww&&(Ts*=Ac/lr),_t.glyphOffsetArray.length>=Ec.MAX_GLYPHS&&De("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tn.sortKey!==void 0&&_t.addToSortKeyRanges(_t.symbolInstances.length,Tn.sortKey);const ZA=dw(fr,Tn,Fn),[XA,KA]=function($r,Qi){const dl=$r.length,Cs=Qi==null?void 0:Qi.values;if((Cs==null?void 0:Cs.length)>0)for(let fl=0;fl<Cs.length;fl+=2){const Ws=Cs[fl+1];$r.emplaceBack(p.aq[Cs[fl]],Ws[0],Ws[1])}return[dl,$r.length]}(_t.textAnchorOffsets,ZA);_t.symbolInstances.emplaceBack(Ft.x,Ft.y,vo.right>=0?vo.right:-1,vo.center>=0?vo.center:-1,vo.left>=0?vo.left:-1,vo.vertical||-1,xy,by,xw,jA,VA,UA,$A,HA,GA,WA,qA,ei,_w,vw,_o,Rh,ww,0,pr,Ts,XA,KA)}(s,bt,Fe,o,u,m,dt,s.layers[0],s.collisionBoxArray,r.index,r.sourceLayerIndex,s.index,oe,[ke,ke,ke,ke],ot,k,Ce,Re,At,U,r,v,M,D,x)};if(rt==="line")for(const Fe of rw(r.geometry,0,0,ir,ir)){const bt=zA(Fe,_e,Ve,o.vertical||q,u,24,ce,s.overscaling,ir);for(const _t of bt)q&&OA(s,q.text,et,_t)||ct(Fe,_t)}else if(rt==="line-center"){for(const Fe of r.geometry)if(Fe.length>1){const bt=DA(Fe,Ve,o.vertical||q,u,24,ce);bt&&ct(Fe,bt)}}else if(r.type==="Polygon")for(const Fe of Wl(r.geometry,0)){const bt=LA(Fe,16);ct(Fe[0],new da(bt.x,bt.y,0))}else if(r.type==="LineString")for(const Fe of r.geometry)ct(Fe,new da(Fe[0].x,Fe[0].y,0));else if(r.type==="Point")for(const Fe of r.geometry)for(const bt of Fe)ct([bt],new da(bt.x,bt.y,0))}function fw(s,r,o,u,m,v,x,b,k,M,D,R,N,U,q){const Y=function(Ce,_e,ke,Re,Ve,ot,At,rt){const et=Re.layout.get("text-rotate").evaluate(ot,{})*Math.PI/180,vt=[];for(const dt of _e.positionedLines)for(const ct of dt.positionedGlyphs){if(!ct.rect)continue;const Fe=ct.rect||{};let bt=Ib+1,_t=!0,Ft=1,bn=0;const vn=(Ve||rt)&&ct.vertical,dr=ct.metrics.advance*ct.scale/2;if(rt&&_e.verticalizable&&(bn=dt.lineOffset/2-(ct.imageName?-(lr-ct.metrics.width*ct.scale)/2:(ct.scale-1)*lr)),ct.imageName){const ln=At[ct.imageName];_t=ln.sdf,Ft=ln.pixelRatio,bt=mi/Ft}const us=Ve?[ct.x+dr,ct.y]:[0,0];let Rr=Ve?[0,0]:[ct.x+dr+ke[0],ct.y+ke[1]-bn],fr=[0,0];vn&&(fr=Rr,Rr=[0,0]);const Qr=ct.metrics.isDoubleResolution?2:1,ei=(ct.metrics.left-bt)*ct.scale-dr+Rr[0],ti=(-ct.metrics.top-bt)*ct.scale+Rr[1],$n=ei+Fe.w/Qr*ct.scale/Ft,pr=ti+Fe.h/Qr*ct.scale/Ft,Ur=new T(ei,ti),Lr=new T($n,ti),ni=new T(ei,pr),Br=new T($n,pr);if(vn){const ln=new T(-dr,dr-Eh),Tn=-Math.PI/2,Dn=lr/2-dr,Di=new T(5-Eh-Dn,-(ct.imageName?Dn:0)),Fn=new T(...fr);Ur._rotateAround(Tn,ln)._add(Di)._add(Fn),Lr._rotateAround(Tn,ln)._add(Di)._add(Fn),ni._rotateAround(Tn,ln)._add(Di)._add(Fn),Br._rotateAround(Tn,ln)._add(Di)._add(Fn)}if(et){const ln=Math.sin(et),Tn=Math.cos(et),Dn=[Tn,-ln,ln,Tn];Ur._matMult(Dn),Lr._matMult(Dn),ni._matMult(Dn),Br._matMult(Dn)}const Yi=new T(0,0),gi=new T(0,0);vt.push({tl:Ur,tr:Lr,bl:ni,br:Br,tex:Fe,writingMode:_e.writingMode,glyphOffset:us,sectionIndex:ct.sectionIndex,isSDF:_t,pixelOffsetTL:Yi,pixelOffsetBR:gi,minFontScaleX:0,minFontScaleY:0})}return vt}(0,o,b,m,v,x,u,s.allowVerticalPlacement),oe=s.textSizeData;let ce=null;oe.kind==="source"?(ce=[$s*m.layout.get("text-size").evaluate(x,{})],ce[0]>ua&&De(`${s.layerIds[0]}: Value for "text-size" is >= ${Ih}. Reduce your "text-size".`)):oe.kind==="composite"&&(ce=[$s*U.compositeTextSizes[0].evaluate(x,{},q),$s*U.compositeTextSizes[1].evaluate(x,{},q)],(ce[0]>ua||ce[1]>ua)&&De(`${s.layerIds[0]}: Value for "text-size" is >= ${Ih}. Reduce your "text-size".`)),s.addSymbols(s.text,Y,ce,b,v,x,M,r,k.lineStartIndex,k.lineLength,N,q);for(const Ce of D)R[Ce]=s.text.placedSymbolArray.length-1;return 4*Y.length}function pw(s){for(const r in s)return s[r];return null}function OA(s,r,o,u){const m=s.compareText;if(r in m){const v=m[r];for(let x=v.length-1;x>=0;x--)if(u.dist(v[x])<o)return!0}else m[r]=[];return m[r].push(u),!1}const mw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class fy{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,u]=new Uint8Array(r,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=u>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=mw[15&u];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[b]=new Uint32Array(r,4,1);return new fy(b,x,v,r)}constructor(r,o=64,u=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=u,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const v=mw.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,b=r*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-b%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${u}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+k,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+b+k),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+k,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=r)}add(r,o){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=r,this.coords[this._pos++]=o,u}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return py(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,o,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:b}=this,k=[0,v.length-1,0],M=[];for(;k.length;){const D=k.pop()||0,R=k.pop()||0,N=k.pop()||0;if(R-N<=b){for(let oe=N;oe<=R;oe++){const ce=x[2*oe],Ce=x[2*oe+1];ce>=r&&ce<=u&&Ce>=o&&Ce<=m&&M.push(v[oe])}continue}const U=N+R>>1,q=x[2*U],Y=x[2*U+1];q>=r&&q<=u&&Y>=o&&Y<=m&&M.push(v[U]),(D===0?r<=q:o<=Y)&&(k.push(N),k.push(U-1),k.push(1-D)),(D===0?u>=q:m>=Y)&&(k.push(U+1),k.push(R),k.push(1-D))}return M}within(r,o,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,b=[0,m.length-1,0],k=[],M=u*u;for(;b.length;){const D=b.pop()||0,R=b.pop()||0,N=b.pop()||0;if(R-N<=x){for(let oe=N;oe<=R;oe++)yw(v[2*oe],v[2*oe+1],r,o)<=M&&k.push(m[oe]);continue}const U=N+R>>1,q=v[2*U],Y=v[2*U+1];yw(q,Y,r,o)<=M&&k.push(m[U]),(D===0?r-u<=q:o-u<=Y)&&(b.push(N),b.push(U-1),b.push(1-D)),(D===0?r+u>=q:o+u>=Y)&&(b.push(U+1),b.push(R),b.push(1-D))}return k}}function py(s,r,o,u,m,v){if(m-u<=o)return;const x=u+m>>1;gw(s,r,x,u,m,v),py(s,r,o,u,x-1,1-v),py(s,r,o,x+1,m,1-v)}function gw(s,r,o,u,m,v){for(;m>u;){if(m-u>600){const M=m-u+1,D=o-u+1,R=Math.log(M),N=.5*Math.exp(2*R/3),U=.5*Math.sqrt(R*N*(M-N)/M)*(D-M/2<0?-1:1);gw(s,r,o,Math.max(u,Math.floor(o-D*N/M+U)),Math.min(m,Math.floor(o+(M-D)*N/M+U)),v)}const x=r[2*o+v];let b=u,k=m;for(Dh(s,r,u,o),r[2*m+v]>x&&Dh(s,r,u,m);b<k;){for(Dh(s,r,b,k),b++,k--;r[2*b+v]<x;)b++;for(;r[2*k+v]>x;)k--}r[2*u+v]===x?Dh(s,r,u,k):(k++,Dh(s,r,k,m)),k<=o&&(u=k+1),o<=k&&(m=k-1)}}function Dh(s,r,o,u){my(s,o,u),my(r,2*o,2*u),my(r,2*o+1,2*u+1)}function my(s,r,o){const u=s[r];s[r]=s[o],s[o]=u}function yw(s,r,o,u){const m=s-o,v=r-u;return m*m+v*v}var gy;p.bg=void 0,(gy=p.bg||(p.bg={})).create="create",gy.load="load",gy.fullLoad="fullLoad";let Qf=null,zh=[];const yy=1e3/60,_y="loadTime",vy="fullLoadTime",NA={mark(s){performance.mark(s)},frame(s){const r=s;Qf!=null&&zh.push(r-Qf),Qf=r},clearMetrics(){Qf=null,zh=[],performance.clearMeasures(_y),performance.clearMeasures(vy);for(const s in p.bg)performance.clearMarks(p.bg[s])},getPerformanceMetrics(){performance.measure(_y,p.bg.create,p.bg.load),performance.measure(vy,p.bg.create,p.bg.fullLoad);const s=performance.getEntriesByName(_y)[0].duration,r=performance.getEntriesByName(vy)[0].duration,o=zh.length,u=1/(zh.reduce((v,x)=>v+x,0)/o/1e3),m=zh.filter(v=>v>yy).reduce((v,x)=>v+(x-yy)/yy,0);return{loadTime:s,fullLoadTime:r,fps:u,percentDroppedFrames:m/(o+m)*100,totalFrames:o}}};p.$=class extends L{},p.A=bc,p.B=Eg,p.C=function(s){if(Ze==null){const r=s.navigator?s.navigator.userAgent:null;Ze=!!s.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ze},p.D=mt,p.E=wn,p.F=class{constructor(s,r){this.target=s,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new AA(()=>this.process()),this.subscription=function(o,u,m,v){return o.addEventListener(u,m,!1),{unsubscribe:()=>{o.removeEventListener(u,m,!1)}}}(this.target,"message",o=>this.receive(o)),this.globalScope=nt(self)?s:window}registerMessageHandler(s,r){this.messageHandlers[s]=r}sendAsync(s,r){return new Promise((o,u)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:o,reject:u},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const b={id:m,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const v=[],x=Object.assign(Object.assign({},s),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Jo(s.data,v)});this.target.postMessage(x,{transfer:v})})}receive(s){const r=s.data,o=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[o];const u=this.abortControllers[o];return delete this.abortControllers[o],void(u&&u.abort())}if(nt(self)||r.mustQueue)return this.tasks[o]=r,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,r)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),r=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(s,r)}processTask(s,r){return c(this,void 0,void 0,function*(){if(r.type==="<response>"){const m=this.resolveRejects[s];return delete this.resolveRejects[s],m?void(r.error?m.reject(Qo(r.error)):m.resolve(Qo(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=Qo(r.data),u=new AbortController;this.abortControllers[s]=u;try{const m=yield this.messageHandlers[r.type](r.sourceMapId,o,u);this.completeTask(s,null,m)}catch(m){this.completeTask(s,m)}})}completeTask(s,r,o){const u=[];delete this.abortControllers[s];const m={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Jo(r):null,data:Jo(o,u)};this.target.postMessage(m,{transfer:u})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},p.G=qt,p.H=function(){var s=new bc(16);return bc!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},p.I=ey,p.J=function(s,r,o){var u,m,v,x,b,k,M,D,R,N,U,q,Y=o[0],oe=o[1],ce=o[2];return r===s?(s[12]=r[0]*Y+r[4]*oe+r[8]*ce+r[12],s[13]=r[1]*Y+r[5]*oe+r[9]*ce+r[13],s[14]=r[2]*Y+r[6]*oe+r[10]*ce+r[14],s[15]=r[3]*Y+r[7]*oe+r[11]*ce+r[15]):(m=r[1],v=r[2],x=r[3],b=r[4],k=r[5],M=r[6],D=r[7],R=r[8],N=r[9],U=r[10],q=r[11],s[0]=u=r[0],s[1]=m,s[2]=v,s[3]=x,s[4]=b,s[5]=k,s[6]=M,s[7]=D,s[8]=R,s[9]=N,s[10]=U,s[11]=q,s[12]=u*Y+b*oe+R*ce+r[12],s[13]=m*Y+k*oe+N*ce+r[13],s[14]=v*Y+M*oe+U*ce+r[14],s[15]=x*Y+D*oe+q*ce+r[15]),s},p.K=function(s,r,o){var u=o[0],m=o[1],v=o[2];return s[0]=r[0]*u,s[1]=r[1]*u,s[2]=r[2]*u,s[3]=r[3]*u,s[4]=r[4]*m,s[5]=r[5]*m,s[6]=r[6]*m,s[7]=r[7]*m,s[8]=r[8]*v,s[9]=r[9]*v,s[10]=r[10]*v,s[11]=r[11]*v,s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s},p.L=Yx,p.M=function(s,r){const o={};for(let u=0;u<r.length;u++){const m=r[u];m in s&&(o[m]=s[m])}return o},p.N=ha,p.O=Wb,p.P=T,p.Q=qb,p.R=Xi,p.S=Ki,p.T=hc,p.U=F,p.V=V,p.W=$e,p.X=ir,p.Y=w,p.Z=Ah,p._=c,p.a=ft,p.a$=function(s,r){var o=s[0],u=s[1],m=s[2],v=s[3],x=s[4],b=s[5],k=s[6],M=s[7],D=s[8],R=s[9],N=s[10],U=s[11],q=s[12],Y=s[13],oe=s[14],ce=s[15],Ce=r[0],_e=r[1],ke=r[2],Re=r[3],Ve=r[4],ot=r[5],At=r[6],rt=r[7],et=r[8],vt=r[9],dt=r[10],ct=r[11],Fe=r[12],bt=r[13],_t=r[14],Ft=r[15];return Math.abs(o-Ce)<=Jr*Math.max(1,Math.abs(o),Math.abs(Ce))&&Math.abs(u-_e)<=Jr*Math.max(1,Math.abs(u),Math.abs(_e))&&Math.abs(m-ke)<=Jr*Math.max(1,Math.abs(m),Math.abs(ke))&&Math.abs(v-Re)<=Jr*Math.max(1,Math.abs(v),Math.abs(Re))&&Math.abs(x-Ve)<=Jr*Math.max(1,Math.abs(x),Math.abs(Ve))&&Math.abs(b-ot)<=Jr*Math.max(1,Math.abs(b),Math.abs(ot))&&Math.abs(k-At)<=Jr*Math.max(1,Math.abs(k),Math.abs(At))&&Math.abs(M-rt)<=Jr*Math.max(1,Math.abs(M),Math.abs(rt))&&Math.abs(D-et)<=Jr*Math.max(1,Math.abs(D),Math.abs(et))&&Math.abs(R-vt)<=Jr*Math.max(1,Math.abs(R),Math.abs(vt))&&Math.abs(N-dt)<=Jr*Math.max(1,Math.abs(N),Math.abs(dt))&&Math.abs(U-ct)<=Jr*Math.max(1,Math.abs(U),Math.abs(ct))&&Math.abs(q-Fe)<=Jr*Math.max(1,Math.abs(q),Math.abs(Fe))&&Math.abs(Y-bt)<=Jr*Math.max(1,Math.abs(Y),Math.abs(bt))&&Math.abs(oe-_t)<=Jr*Math.max(1,Math.abs(oe),Math.abs(_t))&&Math.abs(ce-Ft)<=Jr*Math.max(1,Math.abs(ce),Math.abs(Ft))},p.a0=en,p.a1=uy,p.a2=Ue,p.a3=s=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(o=>{r.onloadstart=()=>{o(r)};for(const u of s){const m=window.document.createElement("source");on(u)||(r.crossOrigin="Anonymous"),m.src=u,r.appendChild(m)}})},p.a4=function(){return le++},p.a5=st,p.a6=Ec,p.a7=Ku,p.a8=ul,p.a9=Qb,p.aA=function(s){if(s.type==="custom")return new IA(s);switch(s.type){case"background":return new CA(s);case"circle":return new fI(s);case"fill":return new AI(s);case"fill-extrusion":return new GI(s);case"heatmap":return new mI(s);case"hillshade":return new yI(s);case"line":return new QI(s);case"raster":return new PA(s);case"symbol":return new Zf(s)}},p.aB=ze,p.aC=function(s,r){if(!s)return[{command:"setStyle",args:[r]}];let o=[];try{if(!Lt(s.version,r.version))return[{command:"setStyle",args:[r]}];Lt(s.center,r.center)||o.push({command:"setCenter",args:[r.center]}),Lt(s.zoom,r.zoom)||o.push({command:"setZoom",args:[r.zoom]}),Lt(s.bearing,r.bearing)||o.push({command:"setBearing",args:[r.bearing]}),Lt(s.pitch,r.pitch)||o.push({command:"setPitch",args:[r.pitch]}),Lt(s.sprite,r.sprite)||o.push({command:"setSprite",args:[r.sprite]}),Lt(s.glyphs,r.glyphs)||o.push({command:"setGlyphs",args:[r.glyphs]}),Lt(s.transition,r.transition)||o.push({command:"setTransition",args:[r.transition]}),Lt(s.light,r.light)||o.push({command:"setLight",args:[r.light]}),Lt(s.terrain,r.terrain)||o.push({command:"setTerrain",args:[r.terrain]}),Lt(s.sky,r.sky)||o.push({command:"setSky",args:[r.sky]}),Lt(s.projection,r.projection)||o.push({command:"setProjection",args:[r.projection]});const u={},m=[];(function(x,b,k,M){let D;for(D in b=b||{},x=x||{})Object.prototype.hasOwnProperty.call(x,D)&&(Object.prototype.hasOwnProperty.call(b,D)||xn(D,k,M));for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&(Object.prototype.hasOwnProperty.call(x,D)?Lt(x[D],b[D])||(x[D].type==="geojson"&&b[D].type==="geojson"&&li(x,b,D)?Xt(k,{command:"setGeoJSONSourceData",args:[D,b[D].data]}):En(D,b,k,M)):Pr(D,b,k))})(s.sources,r.sources,m,u);const v=[];s.layers&&s.layers.forEach(x=>{"source"in x&&u[x.source]?o.push({command:"removeLayer",args:[x.id]}):v.push(x)}),o=o.concat(m),function(x,b,k){b=b||[];const M=(x=x||[]).map(Zr),D=b.map(Zr),R=x.reduce(ki,{}),N=b.reduce(ki,{}),U=M.slice(),q=Object.create(null);let Y,oe,ce,Ce,_e;for(let ke=0,Re=0;ke<M.length;ke++)Y=M[ke],Object.prototype.hasOwnProperty.call(N,Y)?Re++:(Xt(k,{command:"removeLayer",args:[Y]}),U.splice(U.indexOf(Y,Re),1));for(let ke=0,Re=0;ke<D.length;ke++)Y=D[D.length-1-ke],U[U.length-1-ke]!==Y&&(Object.prototype.hasOwnProperty.call(R,Y)?(Xt(k,{command:"removeLayer",args:[Y]}),U.splice(U.lastIndexOf(Y,U.length-Re),1)):Re++,Ce=U[U.length-ke],Xt(k,{command:"addLayer",args:[N[Y],Ce]}),U.splice(U.length-ke,0,Y),q[Y]=!0);for(let ke=0;ke<D.length;ke++)if(Y=D[ke],oe=R[Y],ce=N[Y],!q[Y]&&!Lt(oe,ce))if(Lt(oe.source,ce.source)&&Lt(oe["source-layer"],ce["source-layer"])&&Lt(oe.type,ce.type)){for(_e in er(oe.layout,ce.layout,k,Y,null,"setLayoutProperty"),er(oe.paint,ce.paint,k,Y,null,"setPaintProperty"),Lt(oe.filter,ce.filter)||Xt(k,{command:"setFilter",args:[Y,ce.filter]}),Lt(oe.minzoom,ce.minzoom)&&Lt(oe.maxzoom,ce.maxzoom)||Xt(k,{command:"setLayerZoomRange",args:[Y,ce.minzoom,ce.maxzoom]}),oe)Object.prototype.hasOwnProperty.call(oe,_e)&&_e!=="layout"&&_e!=="paint"&&_e!=="filter"&&_e!=="metadata"&&_e!=="minzoom"&&_e!=="maxzoom"&&(_e.indexOf("paint.")===0?er(oe[_e],ce[_e],k,Y,_e.slice(6),"setPaintProperty"):Lt(oe[_e],ce[_e])||Xt(k,{command:"setLayerProperty",args:[Y,_e,ce[_e]]}));for(_e in ce)Object.prototype.hasOwnProperty.call(ce,_e)&&!Object.prototype.hasOwnProperty.call(oe,_e)&&_e!=="layout"&&_e!=="paint"&&_e!=="filter"&&_e!=="metadata"&&_e!=="minzoom"&&_e!=="maxzoom"&&(_e.indexOf("paint.")===0?er(oe[_e],ce[_e],k,Y,_e.slice(6),"setPaintProperty"):Lt(oe[_e],ce[_e])||Xt(k,{command:"setLayerProperty",args:[Y,_e,ce[_e]]}))}else Xt(k,{command:"removeLayer",args:[Y]}),Ce=U[U.lastIndexOf(Y)+1],Xt(k,{command:"addLayer",args:[ce,Ce]})}(v,r.layers,o)}catch(u){console.warn("Unable to compute style diff:",u),o=[{command:"setStyle",args:[r]}]}return o},p.aD=function(s){const r=[],o=s.id;return o===void 0&&r.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&r.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&r.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),r},p.aE=function s(r,o){if(Array.isArray(r)){if(!Array.isArray(o)||r.length!==o.length)return!1;for(let u=0;u<r.length;u++)if(!s(r[u],o[u]))return!1;return!0}if(typeof r=="object"&&r!==null&&o!==null){if(typeof o!="object"||Object.keys(r).length!==Object.keys(o).length)return!1;for(const u in r)if(!s(r[u],o[u]))return!1;return!0}return r===o},p.aF=we,p.aG=Le,p.aH=class extends al{constructor(s,r){super(s,r),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},p.aI=Lf,p.aJ=class extends al{constructor(s,r){super(s,r),this.current=sI}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let r=1;r<16;r++)if(s[r]!==this.current[r]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},p.aK=jx,p.aL=Vx,p.aM=gn,p.aN=class extends al{constructor(s,r){super(s,r),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},p.aO=class extends al{constructor(s,r){super(s,r),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},p.aP=function(s,r,o,u,m,v,x){var b=1/(r-o),k=1/(u-m),M=1/(v-x);return s[0]=-2*b,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*k,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*M,s[11]=0,s[12]=(r+o)*b,s[13]=(m+u)*k,s[14]=(x+v)*M,s[15]=1,s},p.aQ=dI,p.aR=class extends xe{},p.aS=rA,p.aT=class extends Ee{},p.aU=Ug,p.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},p.aW=nb,p.aX=Mr,p.aY=Zi,p.aZ=class extends gt{},p.a_=function(s,r){return s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]&&s[3]===r[3]&&s[4]===r[4]&&s[5]===r[5]&&s[6]===r[6]&&s[7]===r[7]&&s[8]===r[8]&&s[9]===r[9]&&s[10]===r[10]&&s[11]===r[11]&&s[12]===r[12]&&s[13]===r[13]&&s[14]===r[14]&&s[15]===r[15]},p.aa=function(s){const r={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,u,m,v)=>{const x=m||v;return r[u]=!x||x.toLowerCase(),""}),r["max-age"]){const o=parseInt(r["max-age"],10);isNaN(o)?delete r["max-age"]:r["max-age"]=o}return r},p.ab=function(s,r){const o=[];for(const u in s)u in r||o.push(u);return o},p.ac=ye,p.ad=function(s,r,o){var u=Math.sin(o),m=Math.cos(o),v=r[0],x=r[1],b=r[2],k=r[3],M=r[4],D=r[5],R=r[6],N=r[7];return r!==s&&(s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[0]=v*m+M*u,s[1]=x*m+D*u,s[2]=b*m+R*u,s[3]=k*m+N*u,s[4]=M*m-v*u,s[5]=D*m-x*u,s[6]=R*m-b*u,s[7]=N*m-k*u,s},p.ae=function(s){var r=new bc(16);return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],r},p.af=Nf,p.ag=function(s,r){let o=0,u=0;if(s.kind==="constant")u=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:x}=s,b=m?ye(Kr.interpolationFactor(m,r,v,x),0,1):0;s.kind==="camera"?u=Xr.number(s.minSize,s.maxSize,b):o=b}return{uSizeT:o,uSize:u}},p.ai=function(s,{uSize:r,uSizeT:o},{lowerSize:u,upperSize:m}){return s.kind==="source"?u/$s:s.kind==="composite"?Xr.number(u/$s,m/$s,o):r},p.aj=iy,p.ak=function(s,r,o,u){const m=r.y-s.y,v=r.x-s.x,x=u.y-o.y,b=u.x-o.x,k=x*v-b*m;if(k===0)return null;const M=(b*(s.y-o.y)-x*(s.x-o.x))/k;return new T(s.x+M*v,s.y+M*m)},p.al=rw,p.am=Gx,p.an=Ng,p.ao=function(s){let r=1/0,o=1/0,u=-1/0,m=-1/0;for(const v of s)r=Math.min(r,v.x),o=Math.min(o,v.y),u=Math.max(u,v.x),m=Math.max(m,v.y);return[r,o,u,m]},p.ap=lr,p.ar=ry,p.as=function(s,r){var o=r[0],u=r[1],m=r[2],v=r[3],x=r[4],b=r[5],k=r[6],M=r[7],D=r[8],R=r[9],N=r[10],U=r[11],q=r[12],Y=r[13],oe=r[14],ce=r[15],Ce=o*b-u*x,_e=o*k-m*x,ke=o*M-v*x,Re=u*k-m*b,Ve=u*M-v*b,ot=m*M-v*k,At=D*Y-R*q,rt=D*oe-N*q,et=D*ce-U*q,vt=R*oe-N*Y,dt=R*ce-U*Y,ct=N*ce-U*oe,Fe=Ce*ct-_e*dt+ke*vt+Re*et-Ve*rt+ot*At;return Fe?(s[0]=(b*ct-k*dt+M*vt)*(Fe=1/Fe),s[1]=(m*dt-u*ct-v*vt)*Fe,s[2]=(Y*ot-oe*Ve+ce*Re)*Fe,s[3]=(N*Ve-R*ot-U*Re)*Fe,s[4]=(k*et-x*ct-M*rt)*Fe,s[5]=(o*ct-m*et+v*rt)*Fe,s[6]=(oe*ke-q*ot-ce*_e)*Fe,s[7]=(D*ot-N*ke+U*_e)*Fe,s[8]=(x*dt-b*et+M*At)*Fe,s[9]=(u*et-o*dt-v*At)*Fe,s[10]=(q*Ve-Y*ke+ce*Ce)*Fe,s[11]=(R*ke-D*Ve-U*Ce)*Fe,s[12]=(b*rt-x*vt-k*At)*Fe,s[13]=(o*vt-u*rt+m*At)*Fe,s[14]=(Y*_e-q*Re-oe*Ce)*Fe,s[15]=(D*Re-R*_e+N*Ce)*Fe,s):null},p.at=dy,p.au=ny,p.av=fy,p.aw=function(){const s={},r=Pe.$version;for(const o in Pe.$root){const u=Pe.$root[o];if(u.required){let m=null;m=o==="version"?r:u.type==="array"?[]:{},m!=null&&(s[o]=m)}}return s},p.ax=uh,p.ay=Et,p.az=function(s){s=s.slice();const r=Object.create(null);for(let o=0;o<s.length;o++)r[s[o].id]=s[o];for(let o=0;o<s.length;o++)"ref"in s[o]&&(s[o]=ur(s[o],r[s[o].ref]));return s},p.b=je,p.b0=function(s,r){return s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[4]=r[4],s[5]=r[5],s[6]=r[6],s[7]=r[7],s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s},p.b1=function(s,r,o){return s[0]=r[0]*o[0],s[1]=r[1]*o[1],s[2]=r[2]*o[2],s[3]=r[3]*o[3],s},p.b2=function(s,r){return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]+s[3]*r[3]},p.b3=be,p.b4=Kb,p.b5=Zb,p.b6=function(s,r,o,u,m){var v,x=1/Math.tan(r/2);return s[0]=x/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,m!=null&&m!==1/0?(s[10]=(m+u)*(v=1/(u-m)),s[14]=2*m*u*v):(s[10]=-1,s[14]=-2*u),s},p.b7=function(s,r,o){var u=Math.sin(o),m=Math.cos(o),v=r[4],x=r[5],b=r[6],k=r[7],M=r[8],D=r[9],R=r[10],N=r[11];return r!==s&&(s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[4]=v*m+M*u,s[5]=x*m+D*u,s[6]=b*m+R*u,s[7]=k*m+N*u,s[8]=M*m-v*u,s[9]=D*m-x*u,s[10]=R*m-b*u,s[11]=N*m-k*u,s},p.b8=H,p.b9=ee,p.bA=wb,p.bB=function(s){return s.message===Dt},p.bC=Wo,p.bD=fi,p.ba=function(s){return s*Math.PI/180},p.bb=function(s,r){const{x:o,y:u}=Ah.fromLngLat(r);return!(s<0||s>25||u<0||u>=1||o<0||o>=1)},p.bc=function(s,r){return s[0]=r[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=r[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=r[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},p.bd=class extends z{},p.be=ly,p.bf=NA,p.bh=St,p.bi=function(s,r){ft.REGISTERED_PROTOCOLS[s]=r},p.bj=function(s){delete ft.REGISTERED_PROTOCOLS[s]},p.bk=function(s,r){const o={};for(let m=0;m<s.length;m++){const v=r&&r[s[m].id]||Sf(s[m]);r&&(r[s[m].id]=v);let x=o[v];x||(x=o[v]=[]),x.push(s[m])}const u=[];for(const m in o)u.push(o[m]);return u},p.bl=ut,p.bm=Jb,p.bn=ew,p.bo=Mb,p.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=ir/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const r=s.bucket.layers[0],o=r.layout,u=r._unevaluatedLayout._values,m={layoutIconSize:u["icon-size"].possiblyEvaluate(new Pn(s.bucket.zoom+1),s.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new Pn(s.bucket.zoom+1),s.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new Pn(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:D}=s.bucket.textSizeData;m.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Pn(M),s.canonical),u["text-size"].possiblyEvaluate(new Pn(D),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:D}=s.bucket.iconSizeData;m.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Pn(M),s.canonical),u["icon-size"].possiblyEvaluate(new Pn(D),s.canonical)]}const v=o.get("text-line-height")*lr,x=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",b=o.get("text-keep-upright"),k=o.get("text-size");for(const M of s.bucket.features){const D=o.get("text-font").evaluate(M,{},s.canonical).join(","),R=k.evaluate(M,{},s.canonical),N=m.layoutTextSize.evaluate(M,{},s.canonical),U=m.layoutIconSize.evaluate(M,{},s.canonical),q={horizontal:{},vertical:void 0},Y=M.text;let oe,ce=[0,0];if(Y){const ke=Y.toString(),Re=o.get("text-letter-spacing").evaluate(M,{},s.canonical)*lr,Ve=Pg(ke)?Re:0,ot=o.get("text-anchor").evaluate(M,{},s.canonical),At=dw(r,M,s.canonical);if(!At){const dt=o.get("text-radial-offset").evaluate(M,{},s.canonical);ce=dt?hw(ot,[dt*lr,hy]):o.get("text-offset").evaluate(M,{},s.canonical).map(ct=>ct*lr)}let rt=x?"center":o.get("text-justify").evaluate(M,{},s.canonical);const et=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(M,{},s.canonical)*lr:1/0,vt=()=>{s.bucket.allowVerticalPlacement&&hh(ke)&&(q.vertical=Gf(Y,s.glyphMap,s.glyphPositions,s.imagePositions,D,et,v,ot,"left",Ve,ce,p.ah.vertical,!0,N,R))};if(!x&&At){const dt=new Set;if(rt==="auto")for(let Fe=0;Fe<At.values.length;Fe+=2)dt.add(dy(At.values[Fe]));else dt.add(rt);let ct=!1;for(const Fe of dt)if(!q.horizontal[Fe])if(ct)q.horizontal[Fe]=q.horizontal[0];else{const bt=Gf(Y,s.glyphMap,s.glyphPositions,s.imagePositions,D,et,v,"center",Fe,Ve,ce,p.ah.horizontal,!1,N,R);bt&&(q.horizontal[Fe]=bt,ct=bt.positionedLines.length===1)}vt()}else{rt==="auto"&&(rt=dy(ot));const dt=Gf(Y,s.glyphMap,s.glyphPositions,s.imagePositions,D,et,v,ot,rt,Ve,ce,p.ah.horizontal,!1,N,R);dt&&(q.horizontal[rt]=dt),vt(),hh(ke)&&x&&b&&(q.vertical=Gf(Y,s.glyphMap,s.glyphPositions,s.imagePositions,D,et,v,ot,rt,Ve,ce,p.ah.vertical,!1,N,R))}}let Ce=!1;if(M.icon&&M.icon.name){const ke=s.imageMap[M.icon.name];ke&&(oe=bA(s.imagePositions[M.icon.name],o.get("icon-offset").evaluate(M,{},s.canonical),o.get("icon-anchor").evaluate(M,{},s.canonical)),Ce=!!ke.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Ce:s.bucket.sdfIcons!==Ce&&De("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ke.pixelRatio!==s.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const _e=pw(q.horizontal)||q.vertical;s.bucket.iconsInText=!!_e&&_e.iconsInText,(_e||oe)&&FA(s.bucket,M,q,oe,s.imageMap,m,N,U,ce,Ce,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},p.bq=Kg,p.br=qg,p.bs=Xg,p.bt=la,p.bu=Jg,p.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},p.bw=function(s,r,o,u,m){return c(this,void 0,void 0,function*(){if(V())try{return yield $e(s,r,o,u,m)}catch{}return function(v,x,b,k,M){const D=v.width,R=v.height;qe&&yt||(qe=new OffscreenCanvas(D,R),yt=qe.getContext("2d",{willReadFrequently:!0})),qe.width=D,qe.height=R,yt.drawImage(v,0,0,D,R);const N=yt.getImageData(x,b,k,M);return yt.clearRect(0,0,D,R),N.data}(s,r,o,u,m)})},p.bx=Yb,p.by=S,p.bz=E,p.c=at,p.d=s=>c(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(r)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),p.e=fe,p.f=s=>new Promise((r,o)=>{const u=new Image;u.onload=()=>{r(u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=Te})},u.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(s)],{type:"image/png"});u.src=s.byteLength?URL.createObjectURL(m):Te}),p.g=Rt,p.h=(s,r)=>cn(fe(s,{type:"json"}),r),p.i=nt,p.j=ht,p.k=Zt,p.l=(s,r)=>cn(fe(s,{type:"arrayBuffer"}),r),p.m=cn,p.n=function(s){return new Jg(s).readFields(pA,[])},p.o=xh,p.p=Ab,p.q=_,p.r=Cg,p.s=on,p.t=lh,p.u=po,p.v=Pe,p.w=De,p.x=function([s,r,o]){return r+=90,r*=Math.PI/180,o*=Math.PI/180,{x:s*Math.cos(r)*Math.sin(o),y:s*Math.sin(r)*Math.sin(o),z:s*Math.cos(o)}},p.y=Xr,p.z=Pn}),h("worker",["./shared"],function(p){class c{constructor(O){this.keyCache={},O&&this.replace(O)}replace(O){this._layerConfigs={},this._layers={},this.update(O,[])}update(O,j){for(const te of O){this._layerConfigs[te.id]=te;const pe=this._layers[te.id]=p.aA(te);pe._featureFilter=p.a7(pe.filter),this.keyCache[te.id]&&delete this.keyCache[te.id]}for(const te of j)delete this.keyCache[te],delete this._layerConfigs[te],delete this._layers[te];this.familiesBySource={};const Z=p.bk(Object.values(this._layerConfigs),this.keyCache);for(const te of Z){const pe=te.map(Ae=>this._layers[Ae.id]),me=pe[0];if(me.visibility==="none")continue;const ve=me.source||"";let he=this.familiesBySource[ve];he||(he=this.familiesBySource[ve]={});const Ie=me.sourceLayer||"_geojsonTileLayer";let Be=he[Ie];Be||(Be=he[Ie]=[]),Be.push(pe)}}}class S{constructor(O){const j={},Z=[];for(const ve in O){const he=O[ve],Ie=j[ve]={};for(const Be in he){const Ae=he[+Be];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;const He={x:0,y:0,w:Ae.bitmap.width+2,h:Ae.bitmap.height+2};Z.push(He),Ie[Be]={rect:He,metrics:Ae.metrics}}}const{w:te,h:pe}=p.p(Z),me=new p.o({width:te||1,height:pe||1});for(const ve in O){const he=O[ve];for(const Ie in he){const Be=he[+Ie];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;const Ae=j[ve][Ie].rect;p.o.copy(Be.bitmap,me,{x:0,y:0},{x:Ae.x+1,y:Ae.y+1},Be.bitmap)}}this.image=me,this.positions=j}}p.bl("GlyphAtlas",S);class E{constructor(O){this.tileID=new p.S(O.tileID.overscaledZ,O.tileID.wrap,O.tileID.canonical.z,O.tileID.canonical.x,O.tileID.canonical.y),this.uid=O.uid,this.zoom=O.zoom,this.pixelRatio=O.pixelRatio,this.tileSize=O.tileSize,this.source=O.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=O.showCollisionBoxes,this.collectResourceTiming=!!O.collectResourceTiming,this.returnDependencies=!!O.returnDependencies,this.promoteId=O.promoteId,this.inFlightDependencies=[]}parse(O,j,Z,te){return p._(this,void 0,void 0,function*(){this.status="parsing",this.data=O,this.collisionBoxArray=new p.a5;const pe=new p.bm(Object.keys(O.layers).sort()),me=new p.bn(this.tileID,this.promoteId);me.bucketLayerIDs=[];const ve={},he={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Z},Ie=j.familiesBySource[this.source];for(const Gt in Ie){const mn=O.layers[Gt];if(!mn)continue;mn.version===1&&p.w(`Vector tile source "${this.source}" layer "${Gt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Rn=pe.encode(Gt),hr=[];for(let xr=0;xr<mn.length;xr++){const Nr=mn.feature(xr),Lo=me.getId(Nr,Gt);hr.push({feature:Nr,id:Lo,index:xr,sourceLayerIndex:Rn})}for(const xr of Ie[Gt]){const Nr=xr[0];Nr.source!==this.source&&p.w(`layer.source = ${Nr.source} does not equal this.source = ${this.source}`),Nr.minzoom&&this.zoom<Math.floor(Nr.minzoom)||Nr.maxzoom&&this.zoom>=Nr.maxzoom||Nr.visibility!=="none"&&(P(xr,this.zoom,Z),(ve[Nr.id]=Nr.createBucket({index:me.bucketLayerIDs.length,layers:xr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Rn,sourceID:this.source})).populate(hr,he,this.tileID.canonical),me.bucketLayerIDs.push(xr.map(Lo=>Lo.id)))}}const Be=p.aF(he.glyphDependencies,Gt=>Object.keys(Gt).map(Number));this.inFlightDependencies.forEach(Gt=>Gt==null?void 0:Gt.abort()),this.inFlightDependencies=[];let Ae=Promise.resolve({});if(Object.keys(Be).length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),Ae=te.sendAsync({type:"GG",data:{stacks:Be,source:this.source,tileID:this.tileID,type:"glyphs"}},Gt)}const He=Object.keys(he.iconDependencies);let xt=Promise.resolve({});if(He.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),xt=te.sendAsync({type:"GI",data:{icons:He,source:this.source,tileID:this.tileID,type:"icons"}},Gt)}const It=Object.keys(he.patternDependencies);let nn=Promise.resolve({});if(It.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),nn=te.sendAsync({type:"GI",data:{icons:It,source:this.source,tileID:this.tileID,type:"patterns"}},Gt)}const[Vt,rn,Yt]=yield Promise.all([Ae,xt,nn]),nr=new S(Vt),Bn=new p.bo(rn,Yt);for(const Gt in ve){const mn=ve[Gt];mn instanceof p.a6?(P(mn.layers,this.zoom,Z),p.bp({bucket:mn,glyphMap:Vt,glyphPositions:nr.positions,imageMap:rn,imagePositions:Bn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):mn.hasPattern&&(mn instanceof p.bq||mn instanceof p.br||mn instanceof p.bs)&&(P(mn.layers,this.zoom,Z),mn.addFeatures(he,this.tileID.canonical,Bn.patternPositions))}return this.status="done",{buckets:Object.values(ve).filter(Gt=>!Gt.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nr.image,imageAtlas:Bn,glyphMap:this.returnDependencies?Vt:null,iconMap:this.returnDependencies?rn:null,glyphPositions:this.returnDependencies?nr.positions:null}})}}function P(ie,O,j){const Z=new p.z(O);for(const te of ie)te.recalculate(Z,j)}class T{constructor(O,j,Z){this.actor=O,this.layerIndex=j,this.availableImages=Z,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(O,j){return p._(this,void 0,void 0,function*(){const Z=yield p.l(O.request,j);try{return{vectorTile:new p.bt.VectorTile(new p.bu(Z.data)),rawData:Z.data,cacheControl:Z.cacheControl,expires:Z.expires}}catch(te){const pe=new Uint8Array(Z.data);let me=`Unable to parse the tile at ${O.request.url}, `;throw me+=pe[0]===31&&pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${te.message}`,new Error(me)}})}loadTile(O){return p._(this,void 0,void 0,function*(){const j=O.uid,Z=!!(O&&O.request&&O.request.collectResourceTiming)&&new p.bv(O.request),te=new E(O);this.loading[j]=te;const pe=new AbortController;te.abort=pe;try{const me=yield this.loadVectorTile(O,pe);if(delete this.loading[j],!me)return null;const ve=me.rawData,he={};me.expires&&(he.expires=me.expires),me.cacheControl&&(he.cacheControl=me.cacheControl);const Ie={};if(Z){const Ae=Z.finish();Ae&&(Ie.resourceTiming=JSON.parse(JSON.stringify(Ae)))}te.vectorTile=me.vectorTile;const Be=te.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[j]=te,this.fetching[j]={rawTileData:ve,cacheControl:he,resourceTiming:Ie};try{const Ae=yield Be;return p.e({rawTileData:ve.slice(0)},Ae,he,Ie)}finally{delete this.fetching[j]}}catch(me){throw delete this.loading[j],te.status="done",this.loaded[j]=te,me}})}reloadTile(O){return p._(this,void 0,void 0,function*(){const j=O.uid;if(!this.loaded||!this.loaded[j])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Z=this.loaded[j];if(Z.showCollisionBoxes=O.showCollisionBoxes,Z.status==="parsing"){const te=yield Z.parse(Z.vectorTile,this.layerIndex,this.availableImages,this.actor);let pe;if(this.fetching[j]){const{rawTileData:me,cacheControl:ve,resourceTiming:he}=this.fetching[j];delete this.fetching[j],pe=p.e({rawTileData:me.slice(0)},te,ve,he)}else pe=te;return pe}if(Z.status==="done"&&Z.vectorTile)return Z.parse(Z.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(O){return p._(this,void 0,void 0,function*(){const j=this.loading,Z=O.uid;j&&j[Z]&&j[Z].abort&&(j[Z].abort.abort(),delete j[Z])})}removeTile(O){return p._(this,void 0,void 0,function*(){this.loaded&&this.loaded[O.uid]&&delete this.loaded[O.uid]})}}class A{constructor(){this.loaded={}}loadTile(O){return p._(this,void 0,void 0,function*(){const{uid:j,encoding:Z,rawImageData:te,redFactor:pe,greenFactor:me,blueFactor:ve,baseShift:he}=O,Ie=te.width+2,Be=te.height+2,Ae=p.b(te)?new p.R({width:Ie,height:Be},yield p.bw(te,-1,-1,Ie,Be)):te,He=new p.bx(j,Ae,Z,pe,me,ve,he);return this.loaded=this.loaded||{},this.loaded[j]=He,He})}removeTile(O){const j=this.loaded,Z=O.uid;j&&j[Z]&&delete j[Z]}}function $(ie,O){if(ie.length!==0){X(ie[0],O);for(var j=1;j<ie.length;j++)X(ie[j],!O)}}function X(ie,O){for(var j=0,Z=0,te=0,pe=ie.length,me=pe-1;te<pe;me=te++){var ve=(ie[te][0]-ie[me][0])*(ie[me][1]+ie[te][1]),he=j+ve;Z+=Math.abs(j)>=Math.abs(ve)?j-he+ve:ve-he+j,j=he}j+Z>=0!=!!O&&ie.reverse()}var G=p.by(function ie(O,j){var Z,te=O&&O.type;if(te==="FeatureCollection")for(Z=0;Z<O.features.length;Z++)ie(O.features[Z],j);else if(te==="GeometryCollection")for(Z=0;Z<O.geometries.length;Z++)ie(O.geometries[Z],j);else if(te==="Feature")ie(O.geometry,j);else if(te==="Polygon")$(O.coordinates,j);else if(te==="MultiPolygon")for(Z=0;Z<O.coordinates.length;Z++)$(O.coordinates[Z],j);return O});const ne=p.bt.VectorTileFeature.prototype.toGeoJSON;var F={exports:{}},V=p.bz,H=p.bt.VectorTileFeature,ee=ye;function ye(ie,O){this.options=O||{},this.features=ie,this.length=ie.length}function be(ie,O){this.id=typeof ie.id=="number"?ie.id:void 0,this.type=ie.type,this.rawGeometry=ie.type===1?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=O||4096}ye.prototype.feature=function(ie){return new be(this.features[ie],this.options.extent)},be.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var O=0;O<ie.length;O++){for(var j=ie[O],Z=[],te=0;te<j.length;te++)Z.push(new V(j[te][0],j[te][1]));this.geometry.push(Z)}return this.geometry},be.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,O=1/0,j=-1/0,Z=1/0,te=-1/0,pe=0;pe<ie.length;pe++)for(var me=ie[pe],ve=0;ve<me.length;ve++){var he=me[ve];O=Math.min(O,he.x),j=Math.max(j,he.x),Z=Math.min(Z,he.y),te=Math.max(te,he.y)}return[O,Z,j,te]},be.prototype.toGeoJSON=H.prototype.toGeoJSON;var fe=p.bA,le=ee;function we(ie){var O=new fe;return function(j,Z){for(var te in j.layers)Z.writeMessage(3,Le,j.layers[te])}(ie,O),O.finish()}function Le(ie,O){var j;O.writeVarintField(15,ie.version||1),O.writeStringField(1,ie.name||""),O.writeVarintField(5,ie.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<ie.length;j++)Z.feature=ie.feature(j),O.writeMessage(2,ze,Z);var te=Z.keys;for(j=0;j<te.length;j++)O.writeStringField(3,te[j]);var pe=Z.values;for(j=0;j<pe.length;j++)O.writeMessage(4,Ze,pe[j])}function ze(ie,O){var j=ie.feature;j.id!==void 0&&O.writeVarintField(1,j.id),O.writeMessage(2,Ne,ie),O.writeVarintField(3,j.type),O.writeMessage(4,nt,j)}function Ne(ie,O){var j=ie.feature,Z=ie.keys,te=ie.values,pe=ie.keycache,me=ie.valuecache;for(var ve in j.properties){var he=j.properties[ve],Ie=pe[ve];if(he!==null){Ie===void 0&&(Z.push(ve),pe[ve]=Ie=Z.length-1),O.writeVarint(Ie);var Be=typeof he;Be!=="string"&&Be!=="boolean"&&Be!=="number"&&(he=JSON.stringify(he));var Ae=Be+":"+he,He=me[Ae];He===void 0&&(te.push(he),me[Ae]=He=te.length-1),O.writeVarint(He)}}}function De(ie,O){return(O<<3)+(7&ie)}function Ke(ie){return ie<<1^ie>>31}function nt(ie,O){for(var j=ie.loadGeometry(),Z=ie.type,te=0,pe=0,me=j.length,ve=0;ve<me;ve++){var he=j[ve],Ie=1;Z===1&&(Ie=he.length),O.writeVarint(De(1,Ie));for(var Be=Z===3?he.length-1:he.length,Ae=0;Ae<Be;Ae++){Ae===1&&Z!==1&&O.writeVarint(De(2,Be-1));var He=he[Ae].x-te,xt=he[Ae].y-pe;O.writeVarint(Ke(He)),O.writeVarint(Ke(xt)),te+=He,pe+=xt}Z===3&&O.writeVarint(De(7,1))}}function Ze(ie,O){var j=typeof ie;j==="string"?O.writeStringField(1,ie):j==="boolean"?O.writeBooleanField(7,ie):j==="number"&&(ie%1!=0?O.writeDoubleField(3,ie):ie<0?O.writeSVarintField(6,ie):O.writeVarintField(5,ie))}F.exports=we,F.exports.fromVectorTileJs=we,F.exports.fromGeojsonVt=function(ie,O){O=O||{};var j={};for(var Z in ie)j[Z]=new le(ie[Z].features,O),j[Z].name=Z,j[Z].version=O.version,j[Z].extent=O.extent;return we({layers:j})},F.exports.GeoJSONWrapper=le;var je=p.by(F.exports);const Te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},$e=Math.fround||(qe=new Float32Array(1),ie=>(qe[0]=+ie,qe[0]));var qe;const yt=3,Dt=5,at=6;class ft{constructor(O){this.options=Object.assign(Object.create(Te),O),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(O){const{log:j,minZoom:Z,maxZoom:te}=this.options;j&&console.time("total time");const pe=`prepare ${O.length} points`;j&&console.time(pe),this.points=O;const me=[];for(let he=0;he<O.length;he++){const Ie=O[he];if(!Ie.geometry)continue;const[Be,Ae]=Ie.geometry.coordinates,He=$e(St(Be)),xt=$e(Et(Ae));me.push(He,xt,1/0,he,-1,1),this.options.reduce&&me.push(0)}let ve=this.trees[te+1]=this._createTree(me);j&&console.timeEnd(pe);for(let he=te;he>=Z;he--){const Ie=+Date.now();ve=this.trees[he]=this._createTree(this._cluster(ve,he)),j&&console.log("z%d: %d clusters in %dms",he,ve.numItems,+Date.now()-Ie)}return j&&console.timeEnd("total time"),this}getClusters(O,j){let Z=((O[0]+180)%360+360)%360-180;const te=Math.max(-90,Math.min(90,O[1]));let pe=O[2]===180?180:((O[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)Z=-180,pe=180;else if(Z>pe){const Ae=this.getClusters([Z,te,180,me],j),He=this.getClusters([-180,te,pe,me],j);return Ae.concat(He)}const ve=this.trees[this._limitZoom(j)],he=ve.range(St(Z),Et(me),St(pe),Et(te)),Ie=ve.data,Be=[];for(const Ae of he){const He=this.stride*Ae;Be.push(Ie[He+Dt]>1?Rt(Ie,He,this.clusterProps):this.points[Ie[He+yt]])}return Be}getChildren(O){const j=this._getOriginId(O),Z=this._getOriginZoom(O),te="No cluster with the specified id.",pe=this.trees[Z];if(!pe)throw new Error(te);const me=pe.data;if(j*this.stride>=me.length)throw new Error(te);const ve=this.options.radius/(this.options.extent*Math.pow(2,Z-1)),he=pe.within(me[j*this.stride],me[j*this.stride+1],ve),Ie=[];for(const Be of he){const Ae=Be*this.stride;me[Ae+4]===O&&Ie.push(me[Ae+Dt]>1?Rt(me,Ae,this.clusterProps):this.points[me[Ae+yt]])}if(Ie.length===0)throw new Error(te);return Ie}getLeaves(O,j,Z){const te=[];return this._appendLeaves(te,O,j=j||10,Z=Z||0,0),te}getTile(O,j,Z){const te=this.trees[this._limitZoom(O)],pe=Math.pow(2,O),{extent:me,radius:ve}=this.options,he=ve/me,Ie=(Z-he)/pe,Be=(Z+1+he)/pe,Ae={features:[]};return this._addTileFeatures(te.range((j-he)/pe,Ie,(j+1+he)/pe,Be),te.data,j,Z,pe,Ae),j===0&&this._addTileFeatures(te.range(1-he/pe,Ie,1,Be),te.data,pe,Z,pe,Ae),j===pe-1&&this._addTileFeatures(te.range(0,Ie,he/pe,Be),te.data,-1,Z,pe,Ae),Ae.features.length?Ae:null}getClusterExpansionZoom(O){let j=this._getOriginZoom(O)-1;for(;j<=this.options.maxZoom;){const Z=this.getChildren(O);if(j++,Z.length!==1)break;O=Z[0].properties.cluster_id}return j}_appendLeaves(O,j,Z,te,pe){const me=this.getChildren(j);for(const ve of me){const he=ve.properties;if(he&&he.cluster?pe+he.point_count<=te?pe+=he.point_count:pe=this._appendLeaves(O,he.cluster_id,Z,te,pe):pe<te?pe++:O.push(ve),O.length===Z)break}return pe}_createTree(O){const j=new p.av(O.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Z=0;Z<O.length;Z+=this.stride)j.add(O[Z],O[Z+1]);return j.finish(),j.data=O,j}_addTileFeatures(O,j,Z,te,pe,me){for(const ve of O){const he=ve*this.stride,Ie=j[he+Dt]>1;let Be,Ae,He;if(Ie)Be=qt(j,he,this.clusterProps),Ae=j[he],He=j[he+1];else{const nn=this.points[j[he+yt]];Be=nn.properties;const[Vt,rn]=nn.geometry.coordinates;Ae=St(Vt),He=Et(rn)}const xt={type:1,geometry:[[Math.round(this.options.extent*(Ae*pe-Z)),Math.round(this.options.extent*(He*pe-te))]],tags:Be};let It;It=Ie||this.options.generateId?j[he+yt]:this.points[j[he+yt]].id,It!==void 0&&(xt.id=It),me.features.push(xt)}}_limitZoom(O){return Math.max(this.options.minZoom,Math.min(Math.floor(+O),this.options.maxZoom+1))}_cluster(O,j){const{radius:Z,extent:te,reduce:pe,minPoints:me}=this.options,ve=Z/(te*Math.pow(2,j)),he=O.data,Ie=[],Be=this.stride;for(let Ae=0;Ae<he.length;Ae+=Be){if(he[Ae+2]<=j)continue;he[Ae+2]=j;const He=he[Ae],xt=he[Ae+1],It=O.within(he[Ae],he[Ae+1],ve),nn=he[Ae+Dt];let Vt=nn;for(const rn of It){const Yt=rn*Be;he[Yt+2]>j&&(Vt+=he[Yt+Dt])}if(Vt>nn&&Vt>=me){let rn,Yt=He*nn,nr=xt*nn,Bn=-1;const Gt=((Ae/Be|0)<<5)+(j+1)+this.points.length;for(const mn of It){const Rn=mn*Be;if(he[Rn+2]<=j)continue;he[Rn+2]=j;const hr=he[Rn+Dt];Yt+=he[Rn]*hr,nr+=he[Rn+1]*hr,he[Rn+4]=Gt,pe&&(rn||(rn=this._map(he,Ae,!0),Bn=this.clusterProps.length,this.clusterProps.push(rn)),pe(rn,this._map(he,Rn)))}he[Ae+4]=Gt,Ie.push(Yt/Vt,nr/Vt,1/0,Gt,-1,Vt),pe&&Ie.push(Bn)}else{for(let rn=0;rn<Be;rn++)Ie.push(he[Ae+rn]);if(Vt>1)for(const rn of It){const Yt=rn*Be;if(!(he[Yt+2]<=j)){he[Yt+2]=j;for(let nr=0;nr<Be;nr++)Ie.push(he[Yt+nr])}}}}return Ie}_getOriginId(O){return O-this.points.length>>5}_getOriginZoom(O){return(O-this.points.length)%32}_map(O,j,Z){if(O[j+Dt]>1){const me=this.clusterProps[O[j+at]];return Z?Object.assign({},me):me}const te=this.points[O[j+yt]].properties,pe=this.options.map(te);return Z&&pe===te?Object.assign({},pe):pe}}function Rt(ie,O,j){return{type:"Feature",id:ie[O+yt],properties:qt(ie,O,j),geometry:{type:"Point",coordinates:[(Z=ie[O],360*(Z-.5)),cn(ie[O+1])]}};var Z}function qt(ie,O,j){const Z=ie[O+Dt],te=Z>=1e4?`${Math.round(Z/1e3)}k`:Z>=1e3?Math.round(Z/100)/10+"k":Z,pe=ie[O+at],me=pe===-1?{}:Object.assign({},j[pe]);return Object.assign(me,{cluster:!0,cluster_id:ie[O+yt],point_count:Z,point_count_abbreviated:te})}function St(ie){return ie/360+.5}function Et(ie){const O=Math.sin(ie*Math.PI/180),j=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return j<0?0:j>1?1:j}function cn(ie){const O=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp(O))/Math.PI-90}function on(ie,O,j,Z){let te=Z;const pe=O+(j-O>>1);let me,ve=j-O;const he=ie[O],Ie=ie[O+1],Be=ie[j],Ae=ie[j+1];for(let He=O+3;He<j;He+=3){const xt=Ut(ie[He],ie[He+1],he,Ie,Be,Ae);if(xt>te)me=He,te=xt;else if(xt===te){const It=Math.abs(He-pe);It<ve&&(me=He,ve=It)}}te>Z&&(me-O>3&&on(ie,O,me,Z),ie[me+2]=te,j-me>3&&on(ie,me,j,Z))}function Ut(ie,O,j,Z,te,pe){let me=te-j,ve=pe-Z;if(me!==0||ve!==0){const he=((ie-j)*me+(O-Z)*ve)/(me*me+ve*ve);he>1?(j=te,Z=pe):he>0&&(j+=me*he,Z+=ve*he)}return me=ie-j,ve=O-Z,me*me+ve*ve}function it(ie,O,j,Z){const te={id:ie??null,type:O,geometry:j,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(O==="Point"||O==="MultiPoint"||O==="LineString")Zt(te,j);else if(O==="Polygon")Zt(te,j[0]);else if(O==="MultiLineString")for(const pe of j)Zt(te,pe);else if(O==="MultiPolygon")for(const pe of j)Zt(te,pe[0]);return te}function Zt(ie,O){for(let j=0;j<O.length;j+=3)ie.minX=Math.min(ie.minX,O[j]),ie.minY=Math.min(ie.minY,O[j+1]),ie.maxX=Math.max(ie.maxX,O[j]),ie.maxY=Math.max(ie.maxY,O[j+1])}function ht(ie,O,j,Z){if(!O.geometry)return;const te=O.geometry.coordinates;if(te&&te.length===0)return;const pe=O.geometry.type,me=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2);let ve=[],he=O.id;if(j.promoteId?he=O.properties[j.promoteId]:j.generateId&&(he=Z||0),pe==="Point")wn(te,ve);else if(pe==="MultiPoint")for(const Ie of te)wn(Ie,ve);else if(pe==="LineString")Pe(te,ve,me,!1);else if(pe==="MultiLineString"){if(j.lineMetrics){for(const Ie of te)ve=[],Pe(Ie,ve,me,!1),ie.push(it(he,"LineString",ve,O.properties));return}Sn(te,ve,me,!1)}else if(pe==="Polygon")Sn(te,ve,me,!0);else{if(pe!=="MultiPolygon"){if(pe==="GeometryCollection"){for(const Ie of O.geometry.geometries)ht(ie,{id:he,geometry:Ie,properties:O.properties},j,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ie of te){const Be=[];Sn(Ie,Be,me,!0),ve.push(Be)}}ie.push(it(he,pe,ve,O.properties))}function wn(ie,O){O.push(ur(ie[0]),Lt(ie[1]),0)}function Pe(ie,O,j,Z){let te,pe,me=0;for(let he=0;he<ie.length;he++){const Ie=ur(ie[he][0]),Be=Lt(ie[he][1]);O.push(Ie,Be,0),he>0&&(me+=Z?(te*Be-Ie*pe)/2:Math.sqrt(Math.pow(Ie-te,2)+Math.pow(Be-pe,2))),te=Ie,pe=Be}const ve=O.length-3;O[2]=1,on(O,0,ve,j),O[ve+2]=1,O.size=Math.abs(me),O.start=0,O.end=O.size}function Sn(ie,O,j,Z){for(let te=0;te<ie.length;te++){const pe=[];Pe(ie[te],pe,j,Z),O.push(pe)}}function ur(ie){return ie/360+.5}function Lt(ie){const O=Math.sin(ie*Math.PI/180),j=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return j<0?0:j>1?1:j}function Xt(ie,O,j,Z,te,pe,me,ve){if(Z/=O,pe>=(j/=O)&&me<Z)return ie;if(me<j||pe>=Z)return null;const he=[];for(const Ie of ie){const Be=Ie.geometry;let Ae=Ie.type;const He=te===0?Ie.minX:Ie.minY,xt=te===0?Ie.maxX:Ie.maxY;if(He>=j&&xt<Z){he.push(Ie);continue}if(xt<j||He>=Z)continue;let It=[];if(Ae==="Point"||Ae==="MultiPoint")Pr(Be,It,j,Z,te);else if(Ae==="LineString")xn(Be,It,j,Z,te,!1,ve.lineMetrics);else if(Ae==="MultiLineString")li(Be,It,j,Z,te,!1);else if(Ae==="Polygon")li(Be,It,j,Z,te,!0);else if(Ae==="MultiPolygon")for(const nn of Be){const Vt=[];li(nn,Vt,j,Z,te,!0),Vt.length&&It.push(Vt)}if(It.length){if(ve.lineMetrics&&Ae==="LineString"){for(const nn of It)he.push(it(Ie.id,Ae,nn,Ie.tags));continue}Ae!=="LineString"&&Ae!=="MultiLineString"||(It.length===1?(Ae="LineString",It=It[0]):Ae="MultiLineString"),Ae!=="Point"&&Ae!=="MultiPoint"||(Ae=It.length===3?"Point":"MultiPoint"),he.push(it(Ie.id,Ae,It,Ie.tags))}}return he.length?he:null}function Pr(ie,O,j,Z,te){for(let pe=0;pe<ie.length;pe+=3){const me=ie[pe+te];me>=j&&me<=Z&&er(O,ie[pe],ie[pe+1],ie[pe+2])}}function xn(ie,O,j,Z,te,pe,me){let ve=En(ie);const he=te===0?Zr:ki;let Ie,Be,Ae=ie.start;for(let Vt=0;Vt<ie.length-3;Vt+=3){const rn=ie[Vt],Yt=ie[Vt+1],nr=ie[Vt+2],Bn=ie[Vt+3],Gt=ie[Vt+4],mn=te===0?rn:Yt,Rn=te===0?Bn:Gt;let hr=!1;me&&(Ie=Math.sqrt(Math.pow(rn-Bn,2)+Math.pow(Yt-Gt,2))),mn<j?Rn>j&&(Be=he(ve,rn,Yt,Bn,Gt,j),me&&(ve.start=Ae+Ie*Be)):mn>Z?Rn<Z&&(Be=he(ve,rn,Yt,Bn,Gt,Z),me&&(ve.start=Ae+Ie*Be)):er(ve,rn,Yt,nr),Rn<j&&mn>=j&&(Be=he(ve,rn,Yt,Bn,Gt,j),hr=!0),Rn>Z&&mn<=Z&&(Be=he(ve,rn,Yt,Bn,Gt,Z),hr=!0),!pe&&hr&&(me&&(ve.end=Ae+Ie*Be),O.push(ve),ve=En(ie)),me&&(Ae+=Ie)}let He=ie.length-3;const xt=ie[He],It=ie[He+1],nn=te===0?xt:It;nn>=j&&nn<=Z&&er(ve,xt,It,ie[He+2]),He=ve.length-3,pe&&He>=3&&(ve[He]!==ve[0]||ve[He+1]!==ve[1])&&er(ve,ve[0],ve[1],ve[2]),ve.length&&O.push(ve)}function En(ie){const O=[];return O.size=ie.size,O.start=ie.start,O.end=ie.end,O}function li(ie,O,j,Z,te,pe){for(const me of ie)xn(me,O,j,Z,te,pe,!1)}function er(ie,O,j,Z){ie.push(O,j,Z)}function Zr(ie,O,j,Z,te,pe){const me=(pe-O)/(Z-O);return er(ie,pe,j+(te-j)*me,1),me}function ki(ie,O,j,Z,te,pe){const me=(pe-j)/(te-j);return er(ie,O+(Z-O)*me,pe,1),me}function Ue(ie,O){const j=[];for(let Z=0;Z<ie.length;Z++){const te=ie[Z],pe=te.type;let me;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")me=tr(te.geometry,O);else if(pe==="MultiLineString"||pe==="Polygon"){me=[];for(const ve of te.geometry)me.push(tr(ve,O))}else if(pe==="MultiPolygon"){me=[];for(const ve of te.geometry){const he=[];for(const Ie of ve)he.push(tr(Ie,O));me.push(he)}}j.push(it(te.id,pe,me,te.tags))}return j}function tr(ie,O){const j=[];j.size=ie.size,ie.start!==void 0&&(j.start=ie.start,j.end=ie.end);for(let Z=0;Z<ie.length;Z+=3)j.push(ie[Z]+O,ie[Z+1],ie[Z+2]);return j}function hn(ie,O){if(ie.transformed)return ie;const j=1<<ie.z,Z=ie.x,te=ie.y;for(const pe of ie.features){const me=pe.geometry,ve=pe.type;if(pe.geometry=[],ve===1)for(let he=0;he<me.length;he+=2)pe.geometry.push(ar(me[he],me[he+1],O,j,Z,te));else for(let he=0;he<me.length;he++){const Ie=[];for(let Be=0;Be<me[he].length;Be+=2)Ie.push(ar(me[he][Be],me[he][Be+1],O,j,Z,te));pe.geometry.push(Ie)}}return ie.transformed=!0,ie}function ar(ie,O,j,Z,te,pe){return[Math.round(j*(ie*Z-te)),Math.round(j*(O*Z-pe))]}function zn(ie,O,j,Z,te){const pe=O===te.maxZoom?0:te.tolerance/((1<<O)*te.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:ie.length,source:null,x:j,y:Z,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ve of ie)We(me,ve,pe,te);return me}function We(ie,O,j,Z){const te=O.geometry,pe=O.type,me=[];if(ie.minX=Math.min(ie.minX,O.minX),ie.minY=Math.min(ie.minY,O.minY),ie.maxX=Math.max(ie.maxX,O.maxX),ie.maxY=Math.max(ie.maxY,O.maxY),pe==="Point"||pe==="MultiPoint")for(let ve=0;ve<te.length;ve+=3)me.push(te[ve],te[ve+1]),ie.numPoints++,ie.numSimplified++;else if(pe==="LineString")Nt(me,te,ie,j,!1,!1);else if(pe==="MultiLineString"||pe==="Polygon")for(let ve=0;ve<te.length;ve++)Nt(me,te[ve],ie,j,pe==="Polygon",ve===0);else if(pe==="MultiPolygon")for(let ve=0;ve<te.length;ve++){const he=te[ve];for(let Ie=0;Ie<he.length;Ie++)Nt(me,he[Ie],ie,j,!0,Ie===0)}if(me.length){let ve=O.tags||null;if(pe==="LineString"&&Z.lineMetrics){ve={};for(const Ie in O.tags)ve[Ie]=O.tags[Ie];ve.mapbox_clip_start=te.start/te.size,ve.mapbox_clip_end=te.end/te.size}const he={geometry:me,type:pe==="Polygon"||pe==="MultiPolygon"?3:pe==="LineString"||pe==="MultiLineString"?2:1,tags:ve};O.id!==null&&(he.id=O.id),ie.features.push(he)}}function Nt(ie,O,j,Z,te,pe){const me=Z*Z;if(Z>0&&O.size<(te?me:Z))return void(j.numPoints+=O.length/3);const ve=[];for(let he=0;he<O.length;he+=3)(Z===0||O[he+2]>me)&&(j.numSimplified++,ve.push(O[he],O[he+1])),j.numPoints++;te&&function(he,Ie){let Be=0;for(let Ae=0,He=he.length,xt=He-2;Ae<He;xt=Ae,Ae+=2)Be+=(he[Ae]-he[xt])*(he[Ae+1]+he[xt+1]);if(Be>0===Ie)for(let Ae=0,He=he.length;Ae<He/2;Ae+=2){const xt=he[Ae],It=he[Ae+1];he[Ae]=he[He-2-Ae],he[Ae+1]=he[He-1-Ae],he[He-2-Ae]=xt,he[He-1-Ae]=It}}(ve,pe),ie.push(ve)}const Pt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Gn{constructor(O,j){const Z=(j=this.options=function(pe,me){for(const ve in me)pe[ve]=me[ve];return pe}(Object.create(Pt),j)).debug;if(Z&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");let te=function(pe,me){const ve=[];if(pe.type==="FeatureCollection")for(let he=0;he<pe.features.length;he++)ht(ve,pe.features[he],me,he);else ht(ve,pe.type==="Feature"?pe:{geometry:pe},me);return ve}(O,j);this.tiles={},this.tileCoords=[],Z&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(pe,me){const ve=me.buffer/me.extent;let he=pe;const Ie=Xt(pe,1,-1-ve,ve,0,-1,2,me),Be=Xt(pe,1,1-ve,2+ve,0,-1,2,me);return(Ie||Be)&&(he=Xt(pe,1,-ve,1+ve,0,-1,2,me)||[],Ie&&(he=Ue(Ie,1).concat(he)),Be&&(he=he.concat(Ue(Be,-1)))),he}(te,j),te.length&&this.splitTile(te,0,0,0),Z&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(O,j,Z,te,pe,me,ve){const he=[O,j,Z,te],Ie=this.options,Be=Ie.debug;for(;he.length;){te=he.pop(),Z=he.pop(),j=he.pop(),O=he.pop();const Ae=1<<j,He=vr(j,Z,te);let xt=this.tiles[He];if(!xt&&(Be>1&&console.time("creation"),xt=this.tiles[He]=zn(O,j,Z,te,Ie),this.tileCoords.push({z:j,x:Z,y:te}),Be)){Be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,Z,te,xt.numFeatures,xt.numPoints,xt.numSimplified),console.timeEnd("creation"));const hr=`z${j}`;this.stats[hr]=(this.stats[hr]||0)+1,this.total++}if(xt.source=O,pe==null){if(j===Ie.indexMaxZoom||xt.numPoints<=Ie.indexMaxPoints)continue}else{if(j===Ie.maxZoom||j===pe)continue;if(pe!=null){const hr=pe-j;if(Z!==me>>hr||te!==ve>>hr)continue}}if(xt.source=null,O.length===0)continue;Be>1&&console.time("clipping");const It=.5*Ie.buffer/Ie.extent,nn=.5-It,Vt=.5+It,rn=1+It;let Yt=null,nr=null,Bn=null,Gt=null,mn=Xt(O,Ae,Z-It,Z+Vt,0,xt.minX,xt.maxX,Ie),Rn=Xt(O,Ae,Z+nn,Z+rn,0,xt.minX,xt.maxX,Ie);O=null,mn&&(Yt=Xt(mn,Ae,te-It,te+Vt,1,xt.minY,xt.maxY,Ie),nr=Xt(mn,Ae,te+nn,te+rn,1,xt.minY,xt.maxY,Ie),mn=null),Rn&&(Bn=Xt(Rn,Ae,te-It,te+Vt,1,xt.minY,xt.maxY,Ie),Gt=Xt(Rn,Ae,te+nn,te+rn,1,xt.minY,xt.maxY,Ie),Rn=null),Be>1&&console.timeEnd("clipping"),he.push(Yt||[],j+1,2*Z,2*te),he.push(nr||[],j+1,2*Z,2*te+1),he.push(Bn||[],j+1,2*Z+1,2*te),he.push(Gt||[],j+1,2*Z+1,2*te+1)}}getTile(O,j,Z){O=+O,j=+j,Z=+Z;const te=this.options,{extent:pe,debug:me}=te;if(O<0||O>24)return null;const ve=1<<O,he=vr(O,j=j+ve&ve-1,Z);if(this.tiles[he])return hn(this.tiles[he],pe);me>1&&console.log("drilling down to z%d-%d-%d",O,j,Z);let Ie,Be=O,Ae=j,He=Z;for(;!Ie&&Be>0;)Be--,Ae>>=1,He>>=1,Ie=this.tiles[vr(Be,Ae,He)];return Ie&&Ie.source?(me>1&&(console.log("found parent tile z%d-%d-%d",Be,Ae,He),console.time("drilling down")),this.splitTile(Ie.source,Be,Ae,He,O,j,Z),me>1&&console.timeEnd("drilling down"),this.tiles[he]?hn(this.tiles[he],pe):null):null}}function vr(ie,O,j){return 32*((1<<ie)*j+O)+ie}function zt(ie,O){return O?ie.properties[O]:ie.id}function pt(ie,O){if(ie==null)return!0;if(ie.type==="Feature")return zt(ie,O)!=null;if(ie.type==="FeatureCollection"){const j=new Set;for(const Z of ie.features){const te=zt(Z,O);if(te==null||j.has(te))return!1;j.add(te)}return!0}return!1}function Ht(ie,O){const j=new Map;if(ie!=null)if(ie.type==="Feature")j.set(zt(ie,O),ie);else for(const Z of ie.features)j.set(zt(Z,O),Z);return j}class Kt extends T{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(O,j){return p._(this,void 0,void 0,function*(){const Z=O.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const te=this._geoJSONIndex.getTile(Z.z,Z.x,Z.y);if(!te)return null;const pe=new class{constructor(ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.X,this.length=ve.length,this._features=ve}feature(ve){return new class{constructor(he){this._feature=he,this.extent=p.X,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const Ie of this._feature.geometry)he.push([new p.P(Ie[0],Ie[1])]);return he}{const he=[];for(const Ie of this._feature.geometry){const Be=[];for(const Ae of Ie)Be.push(new p.P(Ae[0],Ae[1]));he.push(Be)}return he}}toGeoJSON(he,Ie,Be){return ne.call(this,he,Ie,Be)}}(this._features[ve])}}(te.features);let me=je(pe);return me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),{vectorTile:pe,rawData:me.buffer}})}loadData(O){return p._(this,void 0,void 0,function*(){var j;(j=this._pendingRequest)===null||j===void 0||j.abort();const Z=!!(O&&O.request&&O.request.collectResourceTiming)&&new p.bv(O.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(O,this._pendingRequest),this._geoJSONIndex=O.cluster?new ft(function({superclusterOptions:me,clusterProperties:ve}){if(!ve||!me)return me;const he={},Ie={},Be={accumulated:null,zoom:0},Ae={properties:null},He=Object.keys(ve);for(const xt of He){const[It,nn]=ve[xt],Vt=p.bC(nn),rn=p.bC(typeof It=="string"?[It,["accumulated"],["get",xt]]:It);he[xt]=Vt.value,Ie[xt]=rn.value}return me.map=xt=>{Ae.properties=xt;const It={};for(const nn of He)It[nn]=he[nn].evaluate(Be,Ae);return It},me.reduce=(xt,It)=>{Ae.properties=It;for(const nn of He)Be.accumulated=xt[nn],xt[nn]=Ie[nn].evaluate(Be,Ae)},me}(O)).load((yield this._pendingData).features):(te=yield this._pendingData,new Gn(te,O.geojsonVtOptions)),this.loaded={};const pe={};if(Z){const me=Z.finish();me&&(pe.resourceTiming={},pe.resourceTiming[O.source]=JSON.parse(JSON.stringify(me)))}return pe}catch(pe){if(delete this._pendingRequest,p.bB(pe))return{abandoned:!0};throw pe}var te})}getData(){return p._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(O){const j=this.loaded;return j&&j[O.uid]?super.reloadTile(O):this.loadTile(O)}loadAndProcessGeoJSON(O,j){return p._(this,void 0,void 0,function*(){let Z=yield this.loadGeoJSON(O,j);if(delete this._pendingRequest,typeof Z!="object")throw new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`);if(G(Z,!0),O.filter){const te=p.bC(O.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(te.result==="error")throw new Error(te.value.map(me=>`${me.key}: ${me.message}`).join(", "));Z={type:"FeatureCollection",features:Z.features.filter(me=>te.value.evaluate({zoom:0},me))}}return Z})}loadGeoJSON(O,j){return p._(this,void 0,void 0,function*(){const{promoteId:Z}=O;if(O.request){const te=yield p.h(O.request,j);return this._dataUpdateable=pt(te.data,Z)?Ht(te.data,Z):void 0,te.data}if(typeof O.data=="string")try{const te=JSON.parse(O.data);return this._dataUpdateable=pt(te,Z)?Ht(te,Z):void 0,te}catch{throw new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`)}if(!O.dataDiff)throw new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${O.source}`);return function(te,pe,me){var ve,he,Ie,Be;if(pe.removeAll&&te.clear(),pe.remove)for(const Ae of pe.remove)te.delete(Ae);if(pe.add)for(const Ae of pe.add){const He=zt(Ae,me);He!=null&&te.set(He,Ae)}if(pe.update)for(const Ae of pe.update){let He=te.get(Ae.id);if(He==null)continue;const xt=!Ae.removeAllProperties&&(((ve=Ae.removeProperties)===null||ve===void 0?void 0:ve.length)>0||((he=Ae.addOrUpdateProperties)===null||he===void 0?void 0:he.length)>0);if((Ae.newGeometry||Ae.removeAllProperties||xt)&&(He=Object.assign({},He),te.set(Ae.id,He),xt&&(He.properties=Object.assign({},He.properties))),Ae.newGeometry&&(He.geometry=Ae.newGeometry),Ae.removeAllProperties)He.properties={};else if(((Ie=Ae.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0)for(const It of Ae.removeProperties)Object.prototype.hasOwnProperty.call(He.properties,It)&&delete He.properties[It];if(((Be=Ae.addOrUpdateProperties)===null||Be===void 0?void 0:Be.length)>0)for(const{key:It,value:nn}of Ae.addOrUpdateProperties)He.properties[It]=nn}}(this._dataUpdateable,O.dataDiff,Z),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(O){return p._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(O){return this._geoJSONIndex.getClusterExpansionZoom(O.clusterId)}getClusterChildren(O){return this._geoJSONIndex.getChildren(O.clusterId)}getClusterLeaves(O){return this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset)}}class jt{constructor(O){this.self=O,this.actor=new p.F(O),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(j,Z)=>{if(this.externalWorkerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.externalWorkerSourceTypes[j]=Z},this.self.addProtocol=p.bi,this.self.removeProtocol=p.bj,this.self.registerRTLTextPlugin=j=>{if(p.bD.isParsed())throw new Error("RTL text plugin already registered.");p.bD.setMethods(j)},this.actor.registerMessageHandler("LDT",(j,Z)=>this._getDEMWorkerSource(j,Z.source).loadTile(Z)),this.actor.registerMessageHandler("RDT",(j,Z)=>p._(this,void 0,void 0,function*(){this._getDEMWorkerSource(j,Z.source).removeTile(Z)})),this.actor.registerMessageHandler("GCEZ",(j,Z)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(j,Z.type,Z.source).getClusterExpansionZoom(Z)})),this.actor.registerMessageHandler("GCC",(j,Z)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(j,Z.type,Z.source).getClusterChildren(Z)})),this.actor.registerMessageHandler("GCL",(j,Z)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(j,Z.type,Z.source).getClusterLeaves(Z)})),this.actor.registerMessageHandler("LD",(j,Z)=>this._getWorkerSource(j,Z.type,Z.source).loadData(Z)),this.actor.registerMessageHandler("GD",(j,Z)=>this._getWorkerSource(j,Z.type,Z.source).getData()),this.actor.registerMessageHandler("LT",(j,Z)=>this._getWorkerSource(j,Z.type,Z.source).loadTile(Z)),this.actor.registerMessageHandler("RT",(j,Z)=>this._getWorkerSource(j,Z.type,Z.source).reloadTile(Z)),this.actor.registerMessageHandler("AT",(j,Z)=>this._getWorkerSource(j,Z.type,Z.source).abortTile(Z)),this.actor.registerMessageHandler("RMT",(j,Z)=>this._getWorkerSource(j,Z.type,Z.source).removeTile(Z)),this.actor.registerMessageHandler("RS",(j,Z)=>p._(this,void 0,void 0,function*(){if(!this.workerSources[j]||!this.workerSources[j][Z.type]||!this.workerSources[j][Z.type][Z.source])return;const te=this.workerSources[j][Z.type][Z.source];delete this.workerSources[j][Z.type][Z.source],te.removeSource!==void 0&&te.removeSource(Z)})),this.actor.registerMessageHandler("RM",j=>p._(this,void 0,void 0,function*(){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j]})),this.actor.registerMessageHandler("SR",(j,Z)=>p._(this,void 0,void 0,function*(){this.referrer=Z})),this.actor.registerMessageHandler("SRPS",(j,Z)=>this._syncRTLPluginState(j,Z)),this.actor.registerMessageHandler("IS",(j,Z)=>p._(this,void 0,void 0,function*(){this.self.importScripts(Z)})),this.actor.registerMessageHandler("SI",(j,Z)=>this._setImages(j,Z)),this.actor.registerMessageHandler("UL",(j,Z)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(j).update(Z.layers,Z.removedIds)})),this.actor.registerMessageHandler("SL",(j,Z)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(j).replace(Z)}))}_setImages(O,j){return p._(this,void 0,void 0,function*(){this.availableImages[O]=j;for(const Z in this.workerSources[O]){const te=this.workerSources[O][Z];for(const pe in te)te[pe].availableImages=j}})}_syncRTLPluginState(O,j){return p._(this,void 0,void 0,function*(){if(p.bD.isParsed())return p.bD.getState();if(j.pluginStatus!=="loading")return p.bD.setState(j),j;const Z=j.pluginURL;if(this.self.importScripts(Z),p.bD.isParsed()){const te={pluginStatus:"loaded",pluginURL:Z};return p.bD.setState(te),te}throw p.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Z}`)})}_getAvailableImages(O){let j=this.availableImages[O];return j||(j=[]),j}_getLayerIndex(O){let j=this.layerIndexes[O];return j||(j=this.layerIndexes[O]=new c),j}_getWorkerSource(O,j,Z){if(this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][j]||(this.workerSources[O][j]={}),!this.workerSources[O][j][Z]){const te={sendAsync:(pe,me)=>(pe.targetMapId=O,this.actor.sendAsync(pe,me))};switch(j){case"vector":this.workerSources[O][j][Z]=new T(te,this._getLayerIndex(O),this._getAvailableImages(O));break;case"geojson":this.workerSources[O][j][Z]=new Kt(te,this._getLayerIndex(O),this._getAvailableImages(O));break;default:this.workerSources[O][j][Z]=new this.externalWorkerSourceTypes[j](te,this._getLayerIndex(O),this._getAvailableImages(O))}}return this.workerSources[O][j][Z]}_getDEMWorkerSource(O,j){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][j]||(this.demWorkerSources[O][j]=new A),this.demWorkerSources[O][j]}}return p.i(self)&&(self.worker=new jt(self)),jt}),h("index",["exports","./shared"],function(p,c){var S="4.7.1";let E,P;const T={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((n,l)=>{const d=requestAnimationFrame(n);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),l(c.c())})}),getImageData(_,n=0){return this.getImageCanvasContext(_).getImageData(-n,-n,_.width+2*n,_.height+2*n)},getImageCanvasContext(_){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=_.width,n.height=_.height,l.drawImage(_,0,0,_.width,_.height),l},resolveURL:_=>(E||(E=document.createElement("a")),E.href=_,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(P==null&&(P=matchMedia("(prefers-reduced-motion: reduce)")),P.matches)}};class A{static testProp(n){if(!A.docStyle)return n[0];for(let l=0;l<n.length;l++)if(n[l]in A.docStyle)return n[l];return n[0]}static create(n,l,d){const f=window.document.createElement(n);return l!==void 0&&(f.className=l),d&&d.appendChild(f),f}static createNS(n,l){return window.document.createElementNS(n,l)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(n,l){n.style[A.transformProp]=l}static addEventListener(n,l,d,f={}){n.addEventListener(l,d,"passive"in f?f:f.capture)}static removeEventListener(n,l,d,f={}){n.removeEventListener(l,d,"passive"in f?f:f.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(n){const l=n.getBoundingClientRect();return{x:l.width/n.offsetWidth||1,y:l.height/n.offsetHeight||1,boundingClientRect:l}}static getPoint(n,l,d){const f=l.boundingClientRect;return new c.P((d.clientX-f.left)/l.x-n.clientLeft,(d.clientY-f.top)/l.y-n.clientTop)}static mousePos(n,l){const d=A.getScale(n);return A.getPoint(n,d,l)}static touchPos(n,l){const d=[],f=A.getScale(n);for(let y=0;y<l.length;y++)d.push(A.getPoint(n,f,l[y]));return d}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const $={supported:!1,testSupport:function(_){!ne&&G&&(F?V(_):X=_)}};let X,G,ne=!1,F=!1;function V(_){const n=_.createTexture();_.bindTexture(_.TEXTURE_2D,n);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,G),_.isContextLost())return;$.supported=!0}catch{}_.deleteTexture(n),ne=!0}var H;typeof document<"u"&&(G=document.createElement("img"),G.onload=()=>{X&&V(X),X=null,F=!0},G.onerror=()=>{ne=!0,X=null},G.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let n,l,d,f;_.resetRequestQueue=()=>{n=[],l=0,d=0,f={}},_.addThrottleControl=I=>{const z=d++;return f[z]=I,z},_.removeThrottleControl=I=>{delete f[I],w()},_.getImage=(I,z,L=!0)=>new Promise((B,W)=>{$.supported&&(I.headers||(I.headers={}),I.headers.accept="image/webp,*/*"),c.e(I,{type:"image"}),n.push({abortController:z,requestParameters:I,supportImageRefresh:L,state:"queued",onError:J=>{W(J)},onSuccess:J=>{B(J)}}),w()});const y=I=>c._(this,void 0,void 0,function*(){I.state="running";const{requestParameters:z,supportImageRefresh:L,onError:B,onSuccess:W,abortController:J}=I,Q=L===!1&&!c.i(self)&&!c.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((de,ge)=>de&&ge==="accept",!0));l++;const ae=Q?C(z,J):c.m(z,J);try{const de=yield ae;delete I.abortController,I.state="completed",de.data instanceof HTMLImageElement||c.b(de.data)?W(de):de.data&&W({data:yield(ue=de.data,typeof createImageBitmap=="function"?c.d(ue):c.f(ue)),cacheControl:de.cacheControl,expires:de.expires})}catch(de){delete I.abortController,B(de)}finally{l--,w()}var ue}),w=()=>{const I=(()=>{for(const z of Object.keys(f))if(f[z]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=l;z<I&&n.length>0;z++){const L=n.shift();L.abortController.signal.aborted?z--:y(L)}},C=(I,z)=>new Promise((L,B)=>{const W=new Image,J=I.url,Q=I.credentials;Q&&Q==="include"?W.crossOrigin="use-credentials":(Q&&Q==="same-origin"||!c.s(J))&&(W.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{W.src="",B(c.c())}),W.fetchPriority="high",W.onload=()=>{W.onerror=W.onload=null,L({data:W})},W.onerror=()=>{W.onerror=W.onload=null,z.signal.aborted||B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},W.src=J})}(H||(H={})),H.resetRequestQueue();class ee{constructor(n){this._transformRequestFn=n}transformRequest(n,l){return this._transformRequestFn&&this._transformRequestFn(n,l)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function ye(_){var n=new c.A(3);return n[0]=_[0],n[1]=_[1],n[2]=_[2],n}var be,fe=function(_,n,l){return _[0]=n[0]-l[0],_[1]=n[1]-l[1],_[2]=n[2]-l[2],_};be=new c.A(3),c.A!=Float32Array&&(be[0]=0,be[1]=0,be[2]=0);var le=function(_){var n=_[0],l=_[1];return n*n+l*l};function we(_){const n=[];if(typeof _=="string")n.push({id:"default",url:_});else if(_&&_.length>0){const l=[];for(const{id:d,url:f}of _){const y=`${d}${f}`;l.indexOf(y)===-1&&(l.push(y),n.push({id:d,url:f}))}}return n}function Le(_,n,l){const d=_.split("?");return d[0]+=`${n}${l}`,d.join("?")}(function(){var _=new c.A(2);c.A!=Float32Array&&(_[0]=0,_[1]=0)})();class ze{constructor(n,l,d,f){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(l,f)}update(n,l,d){const{width:f,height:y}=n,w=!(this.size&&this.size[0]===f&&this.size[1]===y||d),{context:C}=this,{gl:I}=C;if(this.useMipmap=!!(l&&l.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!l||l.premultiply!==!1)),w)this.size=[f,y],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.b(n)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,n):I.texImage2D(I.TEXTURE_2D,0,this.format,f,y,0,this.format,I.UNSIGNED_BYTE,n.data);else{const{x:z,y:L}=d||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.b(n)?I.texSubImage2D(I.TEXTURE_2D,0,z,L,I.RGBA,I.UNSIGNED_BYTE,n):I.texSubImage2D(I.TEXTURE_2D,0,z,L,f,y,I.RGBA,I.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(n,l,d){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),n!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,n),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||n),this.filter=n),l!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,l),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function Ne(_){const{userImage:n}=_;return!!(n&&n.render&&n.render())&&(_.data.replace(new Uint8Array(n.data.buffer)),!0)}class De extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:l,promiseResolve:d}of this.requestors)d(this._getImagesForIds(l));this.requestors=[]}}getImage(n){const l=this.images[n];if(l&&!l.data&&l.spriteData){const d=l.spriteData;l.data=new c.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),l.spriteData=null}return l}addImage(n,l){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,l)&&(this.images[n]=l)}_validate(n,l){let d=!0;const f=l.data||l.spriteData;return this._validateStretch(l.stretchX,f&&f.width)||(this.fire(new c.j(new Error(`Image "${n}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,f&&f.height)||(this.fire(new c.j(new Error(`Image "${n}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new c.j(new Error(`Image "${n}" has invalid "content" value`))),d=!1),d}_validateStretch(n,l){if(!n)return!0;let d=0;for(const f of n){if(f[0]<d||f[1]<f[0]||l<f[1])return!1;d=f[1]}return!0}_validateContent(n,l){if(!n)return!0;if(n.length!==4)return!1;const d=l.spriteData,f=d&&d.width||l.data.width,y=d&&d.height||l.data.height;return!(n[0]<0||f<n[0]||n[1]<0||y<n[1]||n[2]<0||f<n[2]||n[3]<0||y<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,l,d=!0){const f=this.getImage(n);if(d&&(f.data.width!==l.data.width||f.data.height!==l.data.height))throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=f.version+1,this.images[n]=l,this.updatedImages[n]=!0}removeImage(n){const l=this.images[n];delete this.images[n],delete this.patterns[n],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((l,d)=>{let f=!0;if(!this.isLoaded())for(const y of n)this.images[y]||(f=!1);this.isLoaded()||f?l(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:l})})}_getImagesForIds(n){const l={};for(const d of n){let f=this.getImage(d);f||(this.fire(new c.k("styleimagemissing",{id:d})),f=this.getImage(d)),f?l[d]={data:f.data.clone(),pixelRatio:f.pixelRatio,sdf:f.sdf,version:f.version,stretchX:f.stretchX,stretchY:f.stretchY,content:f.content,textFitWidth:f.textFitWidth,textFitHeight:f.textFitHeight,hasRenderCallback:!!(f.userImage&&f.userImage.render)}:c.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:n,height:l}=this.atlasImage;return{width:n,height:l}}getPattern(n){const l=this.patterns[n],d=this.getImage(n);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{const f={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new c.I(f,d);this.patterns[n]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const l=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ze(n,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const y in this.patterns)n.push(this.patterns[y].bin);const{w:l,h:d}=c.p(n),f=this.atlasImage;f.resize({width:l||1,height:d||1});for(const y in this.patterns){const{bin:w}=this.patterns[y],C=w.x+1,I=w.y+1,z=this.getImage(y).data,L=z.width,B=z.height;c.R.copy(z,f,{x:0,y:0},{x:C,y:I},{width:L,height:B}),c.R.copy(z,f,{x:0,y:B-1},{x:C,y:I-1},{width:L,height:1}),c.R.copy(z,f,{x:0,y:0},{x:C,y:I+B},{width:L,height:1}),c.R.copy(z,f,{x:L-1,y:0},{x:C-1,y:I},{width:1,height:B}),c.R.copy(z,f,{x:0,y:0},{x:C+L,y:I},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const l of n){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const d=this.getImage(l);d||c.w(`Image with ID: "${l}" was not found`),Ne(d)&&this.updateImage(l,d)}}}const Ke=1e20;function nt(_,n,l,d,f,y,w,C,I){for(let z=n;z<n+d;z++)Ze(_,l*y+z,y,f,w,C,I);for(let z=l;z<l+f;z++)Ze(_,z*y+n,1,d,w,C,I)}function Ze(_,n,l,d,f,y,w){y[0]=0,w[0]=-Ke,w[1]=Ke,f[0]=_[n];for(let C=1,I=0,z=0;C<d;C++){f[C]=_[n+C*l];const L=C*C;do{const B=y[I];z=(f[C]-f[B]+L-B*B)/(C-B)/2}while(z<=w[I]&&--I>-1);I++,y[I]=C,w[I]=z,w[I+1]=Ke}for(let C=0,I=0;C<d;C++){for(;w[I+1]<C;)I++;const z=y[I],L=C-z;_[n+C*l]=f[z]+L*L}}class je{constructor(n,l){this.requestManager=n,this.localIdeographFontFamily=l,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return c._(this,void 0,void 0,function*(){const l=[];for(const y in n)for(const w of n[y])l.push(this._getAndCacheGlyphsPromise(y,w));const d=yield Promise.all(l),f={};for(const{stack:y,id:w,glyph:C}of d)f[y]||(f[y]={}),f[y][w]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return f})}_getAndCacheGlyphsPromise(n,l){return c._(this,void 0,void 0,function*(){let d=this.entries[n];d||(d=this.entries[n]={glyphs:{},requests:{},ranges:{}});let f=d.glyphs[l];if(f!==void 0)return{stack:n,id:l,glyph:f};if(f=this._tinySDF(d,n,l),f)return d.glyphs[l]=f,{stack:n,id:l,glyph:f};const y=Math.floor(l/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:n,id:l,glyph:f};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){const C=je.loadGlyphRange(n,y,this.url,this.requestManager);d.requests[y]=C}const w=yield d.requests[y];for(const C in w)this._doesCharSupportLocalGlyph(+C)||(d.glyphs[+C]=w[+C]);return d.ranges[y]=!0,{stack:n,id:l,glyph:w[l]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(n))}_tinySDF(n,l,d){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let y=n.tinySDF;if(!y){let C="400";/bold/i.test(l)?C="900":/medium/i.test(l)?C="500":/light/i.test(l)&&(C="200"),y=n.tinySDF=new je.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:C})}const w=y.draw(String.fromCharCode(d));return{id:d,bitmap:new c.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}je.loadGlyphRange=function(_,n,l,d){return c._(this,void 0,void 0,function*(){const f=256*n,y=f+255,w=d.transformRequest(l.replace("{fontstack}",_).replace("{range}",`${f}-${y}`),"Glyphs"),C=yield c.l(w,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${n}, ${f}-${y}`);const I={};for(const z of c.n(C.data))I[z.id]=z;return I})},je.TinySDF=class{constructor({fontSize:_=24,buffer:n=3,radius:l=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:w="normal"}={}){this.buffer=n,this.cutoff=d,this.radius=l;const C=this.size=_+4*n,I=this._createCanvas(C),z=this.ctx=I.getContext("2d",{willReadFrequently:!0});z.font=`${w} ${y} ${_}px ${f}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(_){const n=document.createElement("canvas");return n.width=n.height=_,n}draw(_){const{width:n,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(_),w=Math.ceil(l),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-f))),I=Math.min(this.size-this.buffer,w+Math.ceil(d)),z=C+2*this.buffer,L=I+2*this.buffer,B=Math.max(z*L,0),W=new Uint8ClampedArray(B),J={data:W,width:z,height:L,glyphWidth:C,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:n};if(C===0||I===0)return J;const{ctx:Q,buffer:ae,gridInner:ue,gridOuter:de}=this;Q.clearRect(ae,ae,C,I),Q.fillText(_,ae,ae+w);const ge=Q.getImageData(ae,ae,C,I);de.fill(Ke,0,B),ue.fill(0,0,B);for(let se=0;se<I;se++)for(let xe=0;xe<C;xe++){const Se=ge.data[4*(se*C+xe)+3]/255;if(Se===0)continue;const Ee=(se+ae)*z+xe+ae;if(Se===1)de[Ee]=0,ue[Ee]=Ke;else{const Oe=.5-Se;de[Ee]=Oe>0?Oe*Oe:0,ue[Ee]=Oe<0?Oe*Oe:0}}nt(de,0,0,z,L,z,this.f,this.v,this.z),nt(ue,ae,ae,C,I,z,this.f,this.v,this.z);for(let se=0;se<B;se++){const xe=Math.sqrt(de[se])-Math.sqrt(ue[se]);W[se]=Math.round(255-255*(xe/this.radius+this.cutoff))}return J}};class Te{constructor(){this.specification=c.v.light.position}possiblyEvaluate(n,l){return c.x(n.expression.evaluate(l))}interpolate(n,l,d){return{x:c.y.number(n.x,l.x,d),y:c.y.number(n.y,l.y,d),z:c.y.number(n.z,l.z,d)}}}let $e;class qe extends c.E{constructor(n){super(),$e=$e||new c.q({anchor:new c.D(c.v.light.anchor),position:new Te,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T($e),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,l={}){if(!this._validate(c.r,n,l))for(const d in n){const f=n[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,d){return(!d||d.validate!==!1)&&c.t(this,n.call(c.u,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}const yt=new c.q({"sky-color":new c.D(c.v.sky["sky-color"]),"horizon-color":new c.D(c.v.sky["horizon-color"]),"fog-color":new c.D(c.v.sky["fog-color"]),"fog-ground-blend":new c.D(c.v.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.v.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.v.sky["atmosphere-blend"])});class Dt extends c.E{constructor(n){super(),this._transitionable=new c.T(yt),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.z(0))}setSky(n,l={}){if(!this._validate(c.B,n,l)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in n){const f=n[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,d={}){return(d==null?void 0:d.validate)!==!1&&c.t(this,n.call(c.u,c.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class at{constructor(n,l){this.width=n,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,l){const d=n.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(n,l)),this.dashEntry[d]}getDashRanges(n,l,d){const f=[];let y=n.length%2==1?-n[n.length-1]*d:0,w=n[0]*d,C=!0;f.push({left:y,right:w,isDash:C,zeroLength:n[0]===0});let I=n[0];for(let z=1;z<n.length;z++){C=!C;const L=n[z];y=I*d,I+=L,w=I*d,f.push({left:y,right:w,isDash:C,zeroLength:L===0})}return f}addRoundDash(n,l,d){const f=l/2;for(let y=-d;y<=d;y++){const w=this.width*(this.nextRow+d+y);let C=0,I=n[C];for(let z=0;z<this.width;z++){z/I.right>1&&(I=n[++C]);const L=Math.abs(z-I.left),B=Math.abs(z-I.right),W=Math.min(L,B);let J;const Q=y/d*(f+1);if(I.isDash){const ae=f-Math.abs(Q);J=Math.sqrt(W*W+ae*ae)}else J=f-Math.sqrt(W*W+Q*Q);this.data[w+z]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(n){for(let C=n.length-1;C>=0;--C){const I=n[C],z=n[C+1];I.zeroLength?n.splice(C,1):z&&z.isDash===I.isDash&&(z.left=I.left,n.splice(C,1))}const l=n[0],d=n[n.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);const f=this.width*this.nextRow;let y=0,w=n[y];for(let C=0;C<this.width;C++){C/w.right>1&&(w=n[++y]);const I=Math.abs(C-w.left),z=Math.abs(C-w.right),L=Math.min(I,z);this.data[f+C]=Math.max(0,Math.min(255,(w.isDash?L:-L)+128))}}addDash(n,l){const d=l?7:0,f=2*d+1;if(this.nextRow+f>this.height)return c.w("LineAtlas out of space"),null;let y=0;for(let C=0;C<n.length;C++)y+=n[C];if(y!==0){const C=this.width/y,I=this.getDashRanges(n,this.width,C);l?this.addRoundDash(I,C,d):this.addRegularDash(I)}const w={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=f,this.dirty=!0,w}bind(n){const l=n.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const ft="maplibre_preloaded_worker_pool";class Rt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Rt.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ft]}numActive(){return Object.keys(this.active).length}}const qt=Math.floor(T.hardwareConcurrency/2);let St,Et;function cn(){return St||(St=new Rt),St}Rt.workerCount=c.C(globalThis)?Math.max(Math.min(qt,3),1):1;class on{constructor(n,l){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=l;const d=this.workerPool.acquire(l);for(let f=0;f<d.length;f++){const y=new c.F(d[f],l);y.name=`Worker ${f}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,l){const d=[];for(const f of this.actors)d.push(f.sendAsync({type:n,data:l}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,l){for(const d of this.actors)d.registerMessageHandler(n,l)}}function Ut(){return Et||(Et=new on(cn(),c.G),Et.registerMessageHandler("GR",(_,n,l)=>c.m(n,l))),Et}function it(_,n){const l=c.H();return c.J(l,l,[1,1,0]),c.K(l,l,[.5*_.width,.5*_.height,1]),c.L(l,l,_.calculatePosMatrix(n.toUnwrapped()))}function Zt(_,n,l,d,f,y){const w=function(B,W,J){if(B)for(const Q of B){const ae=W[Q];if(ae&&ae.source===J&&ae.type==="fill-extrusion")return!0}else for(const Q in W){const ae=W[Q];if(ae.source===J&&ae.type==="fill-extrusion")return!0}return!1}(f&&f.layers,n,_.id),C=y.maxPitchScaleFactor(),I=_.tilesIn(d,C,w);I.sort(ht);const z=[];for(const B of I)z.push({wrappedTileID:B.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(n,l,_._state,B.queryGeometry,B.cameraQueryGeometry,B.scale,f,y,C,it(_.transform,B.tileID))});const L=function(B){const W={},J={};for(const Q of B){const ae=Q.queryResults,ue=Q.wrappedTileID,de=J[ue]=J[ue]||{};for(const ge in ae){const se=ae[ge],xe=de[ge]=de[ge]||{},Se=W[ge]=W[ge]||[];for(const Ee of se)xe[Ee.featureIndex]||(xe[Ee.featureIndex]=!0,Se.push(Ee))}}return W}(z);for(const B in L)L[B].forEach(W=>{const J=W.feature,Q=_.getFeatureState(J.layer["source-layer"],J.id);J.source=J.layer.source,J.layer["source-layer"]&&(J.sourceLayer=J.layer["source-layer"]),J.state=Q});return L}function ht(_,n){const l=_.tileID,d=n.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}function wn(_,n,l){return c._(this,void 0,void 0,function*(){let d=_;if(_.url?d=(yield c.h(n.transformRequest(_.url,"Source"),l)).data:yield T.frameAsync(l),!d)return null;const f=c.M(c.e(d,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(f.vectorLayerIds=d.vector_layers.map(y=>y.id)),f})}class Pe{constructor(n,l){n&&(l?this.setSouthWest(n).setNorthEast(l):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof c.N?new c.N(n.lng,n.lat):c.N.convert(n),this}setSouthWest(n){return this._sw=n instanceof c.N?new c.N(n.lng,n.lat):c.N.convert(n),this}extend(n){const l=this._sw,d=this._ne;let f,y;if(n instanceof c.N)f=n,y=n;else{if(!(n instanceof Pe))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Pe.convert(n)):this.extend(c.N.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(c.N.convert(n)):this;if(f=n._sw,y=n._ne,!f||!y)return this}return l||d?(l.lng=Math.min(f.lng,l.lng),l.lat=Math.min(f.lat,l.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new c.N(f.lng,f.lat),this._ne=new c.N(y.lng,y.lat)),this}getCenter(){return new c.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.N(this.getWest(),this.getNorth())}getSouthEast(){return new c.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:l,lat:d}=c.N.convert(n);let f=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(n){return n instanceof Pe?n:n&&new Pe(n)}static fromLngLat(n,l=0){const d=360*l/40075017,f=d/Math.cos(Math.PI/180*n.lat);return new Pe(new c.N(n.lng-f,n.lat-d),new c.N(n.lng+f,n.lat+d))}adjustAntiMeridian(){const n=new c.N(this._sw.lng,this._sw.lat),l=new c.N(this._ne.lng,this._ne.lat);return new Pe(n,n.lng>l.lng?new c.N(l.lng+360,l.lat):l)}}class Sn{constructor(n,l,d){this.bounds=Pe.convert(this.validateBounds(n)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const l=Math.pow(2,n.z),d=Math.floor(c.O(this.bounds.getWest())*l),f=Math.floor(c.Q(this.bounds.getNorth())*l),y=Math.ceil(c.O(this.bounds.getEast())*l),w=Math.ceil(c.Q(this.bounds.getSouth())*l);return n.x>=d&&n.x<y&&n.y>=f&&n.y<w}}class ur extends c.E{constructor(n,l,d,f){if(super(),this.id=n,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.M(l,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield wn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(c.e(this,n),n.bounds&&(this.tileBounds=new Sn(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new c.j(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(n){return c._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(l,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let f="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((y,w)=>{n.reloadPromise={resolve:y,reject:w}})}else n.actor=this.dispatcher.getActor(),f="LT";n.abortController=new AbortController;try{const y=yield n.actor.sendAsync({type:f,data:d},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,y)}catch(y){if(delete n.abortController,n.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,l){if(l&&l.resourceTiming&&(n.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&n.setExpiryData(l),n.loadVectorData(l,this.map.painter),n.reloadPromise){const d=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(d.resolve).catch(d.reject)}}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Lt extends c.E{constructor(n,l,d,f){super(),this.id=n,this.dispatcher=d,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},l),c.e(this,c.M(l,["url","scheme","tileSize"]))}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield wn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(c.e(this,n),n.bounds&&(this.tileBounds=new Sn(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new c.j(n))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return c.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return c._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const d=yield H.getImage(this.map._requestManager.transformRequest(l,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&n.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const f=this.map.painter.context,y=f.gl,w=d.data;n.texture=this.map.painter.getTileTexture(w.width),n.texture?n.texture.update(w,{useMipmap:!0}):(n.texture=new ze(f,w,y.RGBA,{useMipmap:!0}),n.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(d){if(delete n.abortController,n.aborted)n.state="unloaded";else if(d)throw n.state="errored",d}})}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class Xt extends Lt{constructor(n,l,d,f){super(n,l,d,f),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(n){return c._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(l,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const f=yield H.getImage(d,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(f&&f.data){const y=f.data;this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&n.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const w=c.b(y)&&c.U()?y:yield this.readImageNow(y),C={type:this.type,uid:n.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const I=yield n.actor.sendAsync({type:"LDT",data:C});n.dem=I,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(f){if(delete n.abortController,n.aborted)n.state="unloaded";else if(f)throw n.state="errored",f}})}readImageNow(n){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.V()){const l=n.width+2,d=n.height+2;try{return new c.R({width:l,height:d},yield c.W(n,-1,-1,l,d))}catch{}}return T.getImageData(n,1)})}_getNeighboringTiles(n){const l=n.canonical,d=Math.pow(2,l.z),f=(l.x-1+d)%d,y=l.x===0?n.wrap-1:n.wrap,w=(l.x+1+d)%d,C=l.x+1===d?n.wrap+1:n.wrap,I={};return I[new c.S(n.overscaledZ,y,l.z,f,l.y).key]={backfilled:!1},I[new c.S(n.overscaledZ,C,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(I[new c.S(n.overscaledZ,y,l.z,f,l.y-1).key]={backfilled:!1},I[new c.S(n.overscaledZ,n.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},I[new c.S(n.overscaledZ,C,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<d&&(I[new c.S(n.overscaledZ,y,l.z,f,l.y+1).key]={backfilled:!1},I[new c.S(n.overscaledZ,n.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},I[new c.S(n.overscaledZ,C,l.z,w,l.y+1).key]={backfilled:!1}),I}unloadTile(n){return c._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class Pr extends c.E{constructor(n,l,d,f){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(f),this._data=l.data,this._options=c.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const y=c.X/this.tileSize;l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*y,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*y,extent:c.X,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:c.X,radius:(l.clusterRadius||50)*y,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return c._(this,void 0,void 0,function*(){const n=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,l,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:l,offset:d}})}_updateWorkerData(n){return c._(this,void 0,void 0,function*(){const l=c.e({type:this.type},this.workerOptions);n?l.dataDiff=n:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(T.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let f=null;d.resourceTiming&&d.resourceTiming[this.id]&&(f=d.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&f&&f.length>0&&c.e(y,{resourceTiming:f}),this.fire(new c.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new c.k("dataabort",{dataType:"source"}));this.fire(new c.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(n){return c._(this,void 0,void 0,function*(){const l=n.actor?"RT":"LT";n.actor=this.actor;const d={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.abortController=new AbortController;const f=yield this.actor.sendAsync({type:l,data:d},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(f,this.map.painter,l==="RT")})}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var xn=c.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class En extends c.E{constructor(n,l,d,f){super(),this.id=n,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=l}load(n){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,n&&(this.coordinates=n),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new c.j(l))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const l=n.map(c.Z.fromLngLat);this.tileID=function(f){let y=1/0,w=1/0,C=-1/0,I=-1/0;for(const W of f)y=Math.min(y,W.x),w=Math.min(w,W.y),C=Math.max(C,W.x),I=Math.max(I,W.y);const z=Math.max(C-y,I-w),L=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),B=Math.pow(2,L);return new c.a1(L,Math.floor((y+C)/2*B),Math.floor((w+I)/2*B))}(l),this.minzoom=this.maxzoom=this.tileID.z;const d=l.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new c.$,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,c.X,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,c.X),this._boundsArray.emplaceBack(d[2].x,d[2].y,c.X,c.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,l=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,xn.members)),this.boundsSegments||(this.boundsSegments=c.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ze(n,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class li extends En{constructor(n,l,d,f){super(n,l,d,f),this.roundZoom=!0,this.type="video",this.options=l}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const l of n.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield c.a3(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new c.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const l=this.video.seekable;n<l.start(0)||n>l.end(0)?this.fire(new c.j(new c.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,l=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,xn.members)),this.boundsSegments||(this.boundsSegments=c.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new ze(n,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class er extends En{constructor(n,l,d,f){super(n,l,d,f),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(w=>typeof w!="number"))||this.fire(new c.j(new c.a2(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.a2(`sources.${n}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new c.j(new c.a2(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.a2(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.a2(`sources.${n}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,xn.members)),this.boundsSegments||(this.boundsSegments=c.a0.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ze(l,this.canvas,d.RGBA,{premultiply:!0});let f=!1;for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,f=!0)}f&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Zr={},ki=_=>{switch(_){case"geojson":return Pr;case"image":return En;case"raster":return Lt;case"raster-dem":return Xt;case"vector":return ur;case"video":return li;case"canvas":return er}return Zr[_]},Ue="RTLPluginLoaded";class tr extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ut()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return c._(this,arguments,void 0,function*(l,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=T.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.k(Ue))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let hn=null;function ar(){return hn||(hn=new tr),hn}class zn{constructor(n,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=c.a4(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const l=n+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(f,y){const w={};if(!y)return w;for(const C of f){const I=C.layerIds.map(z=>y.getLayer(z)).filter(Boolean);if(I.length!==0){C.layers=I,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(z=>I.filter(L=>L.id===z)[0]));for(const z of I)w[z.id]=C}}return w}(n.buckets,l.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const y=this.buckets[f];if(y instanceof c.a6){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const y=this.buckets[f];if(y instanceof c.a6&&y.hasRTLText){this.hasRTLText=!0,ar().lazyLoad();break}}this.queryPadding=0;for(const f in this.buckets){const y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(f).queryRadius(y))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new c.a5}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const d in this.buckets){const f=this.buckets[d];f.uploadPending()&&f.upload(n)}const l=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ze(n,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ze(n,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,l,d,f,y,w,C,I,z,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:y,scale:w,tileSize:this.tileSize,pixelPosMatrix:L,transform:I,params:C,queryPadding:this.queryPadding*z},n,l,d):{}}querySourceFeatures(n,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const f=d.loadVTLayers(),y=l&&l.sourceLayer?l.sourceLayer:"",w=f._geojsonTileLayer||f[y];if(!w)return;const C=c.a7(l&&l.filter),{z:I,x:z,y:L}=this.tileID.canonical,B={z:I,x:z,y:L};for(let W=0;W<w.length;W++){const J=w.feature(W);if(C.needGeometry){const ue=c.a8(J,!0);if(!C.filter(new c.z(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!C.filter(new c.z(this.tileID.overscaledZ),J))continue;const Q=d.getId(J,y),ae=new c.a9(J,I,z,L,Q);ae.tile=B,n.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const l=this.expirationTime;if(n.cacheControl){const d=c.aa(n.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const d=Date.now();let f=!1;if(this.expirationTime>d)f=!1;else if(l)if(this.expirationTime<l)f=!0;else{const y=this.expirationTime-l;y?this.expirationTime=d+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!l.style.hasLayer(f))continue;const y=this.buckets[f],w=y.layers[0].sourceLayer||"_geojsonTileLayer",C=d[w],I=n[w];if(!C||!I||Object.keys(I).length===0)continue;y.update(I,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=l&&l.style&&l.style.getLayer(f);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<T.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=T.now()+n}setDependencies(n,l){const d={};for(const f of l)d[f]=!0;this.dependencies[n]=d}hasDependency(n,l){for(const d of n){const f=this.dependencies[d];if(f){for(const y of l)if(f[y])return!0}}return!1}}class We{constructor(n,l){this.max=n,this.onRemove=l,this.reset()}reset(){for(const n in this.data)for(const l of this.data[n])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(n,l,d){const f=n.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const y={value:l,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(n,y)},d)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const l=this.data[n].shift();return l.timeout&&clearTimeout(l.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),l.value}getByKey(n){const l=this.data[n];return l?l[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,l){if(!this.has(n))return this;const d=n.wrapped().key,f=l===void 0?0:this.data[d].indexOf(l),y=this.data[d][f];return this.data[d].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(n){const l=[];for(const d in this.data)for(const f of this.data[d])n(f.value)||l.push(f);for(const d of l)this.remove(d.value.tileID,d)}}class Nt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,l,d){const f=String(l);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][f]=this.stateChanges[n][f]||{},c.e(this.stateChanges[n][f],d),this.deletedStates[n]===null){this.deletedStates[n]={};for(const y in this.state[n])y!==f&&(this.deletedStates[n][y]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][f]===null){this.deletedStates[n][f]={};for(const y in this.state[n][f])d[y]||(this.deletedStates[n][f][y]=null)}else for(const y in d)this.deletedStates[n]&&this.deletedStates[n][f]&&this.deletedStates[n][f][y]===null&&delete this.deletedStates[n][f][y]}removeFeatureState(n,l,d){if(this.deletedStates[n]===null)return;const f=String(l);if(this.deletedStates[n]=this.deletedStates[n]||{},d&&l!==void 0)this.deletedStates[n][f]!==null&&(this.deletedStates[n][f]=this.deletedStates[n][f]||{},this.deletedStates[n][f][d]=null);else if(l!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][f])for(d in this.deletedStates[n][f]={},this.stateChanges[n][f])this.deletedStates[n][f][d]=null;else this.deletedStates[n][f]=null;else this.deletedStates[n]=null}getState(n,l){const d=String(l),f=c.e({},(this.state[n]||{})[d],(this.stateChanges[n]||{})[d]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const y=this.deletedStates[n][l];if(y===null)return{};for(const w in y)delete f[w]}return f}initializeTileState(n,l){n.setFeatureState(this.state,l)}coalesceChanges(n,l){const d={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const y={};for(const w in this.stateChanges[f])this.state[f][w]||(this.state[f][w]={}),c.e(this.state[f][w],this.stateChanges[f][w]),y[w]=this.state[f][w];d[f]=y}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const y={};if(this.deletedStates[f]===null)for(const w in this.state[f])y[w]={},this.state[f][w]={};else for(const w in this.deletedStates[f]){if(this.deletedStates[f][w]===null)this.state[f][w]={};else for(const C of Object.keys(this.deletedStates[f][w]))delete this.state[f][w][C];y[w]=this.state[f][w]}d[f]=d[f]||{},c.e(d[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const f in n)n[f].setFeatureState(d,l)}}class Pt extends c.E{constructor(n,l,d){super(),this.id=n,this.dispatcher=d,this.on("data",f=>this._dataHandler(f)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((f,y,w,C)=>{const I=new(ki(y.type))(f,y,w,C);if(I.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${I.id}`);return I})(n,l,d,this),this._tiles={},this._cache=new We(0,f=>this._unloadTile(f)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Nt,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const l=this._tiles[n];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,l,d){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,l,d)}catch(f){n.state="errored",f.status!==404?this._source.fire(new c.j(f,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new c.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(n),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Gn).map(n=>n.key)}getRenderableIds(n){const l=[];for(const d in this._tiles)this._isIdRenderable(d,n)&&l.push(this._tiles[d]);return n?l.sort((d,f)=>{const y=d.tileID,w=f.tileID,C=new c.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),I=new c.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-w.overscaledZ||I.y-C.y||I.x-C.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(Gn).map(d=>d.key)}hasRenderableParent(n){const l=this.findLoadedParent(n,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(n,l){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(l||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,l){return c._(this,void 0,void 0,function*(){const d=this._tiles[n];d&&(d.state!=="loading"&&(d.state=l),yield this._loadTile(d,n,l))})}_tileLoaded(n,l,d){n.timeAdded=T.now(),d==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(l,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const l=this.getRenderableIds();for(let f=0;f<l.length;f++){const y=l[f];if(n.neighboringTiles&&n.neighboringTiles[y]){const w=this.getTileByID(y);d(n,w),d(w,n)}}function d(f,y){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let w=y.tileID.canonical.x-f.tileID.canonical.x;const C=y.tileID.canonical.y-f.tileID.canonical.y,I=Math.pow(2,f.tileID.canonical.z),z=y.tileID.key;w===0&&C===0||Math.abs(C)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,w,C),f.neighboringTiles&&f.neighboringTiles[z]&&(f.neighboringTiles[z].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,l,d,f){for(const y in this._tiles){let w=this._tiles[y];if(f[y]||!w.hasData()||w.tileID.overscaledZ<=l||w.tileID.overscaledZ>d)continue;let C=w.tileID;for(;w&&w.tileID.overscaledZ>l+1;){const z=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[z.key],w&&w.hasData()&&(C=z)}let I=C;for(;I.overscaledZ>l;)if(I=I.scaledTo(I.overscaledZ-1),n[I.key]){f[C.key]=C;break}}}findLoadedParent(n,l){if(n.key in this._loadedParentTiles){const d=this._loadedParentTiles[n.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=n.overscaledZ-1;d>=l;d--){const f=n.scaledTo(d),y=this._getLoadedTile(f);if(y)return y}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const l=this._tiles[n.key];return l&&l.hasData()?l:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const l=Math.ceil(n.width/this._source.tileSize)+1,d=Math.ceil(n.height/this._source.tileSize)+1,f=Math.floor(l*d*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(y)}handleWrapJump(n){const l=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,l){const d={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+l),d[y.tileID.key]=y}this._tiles=d;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}_updateCoveredAndRetainedTiles(n,l,d,f,y,w){const C={},I={},z=Object.keys(n),L=T.now();for(const B of z){const W=n[B],J=this._tiles[B];if(!J||J.fadeEndTime!==0&&J.fadeEndTime<=L)continue;const Q=this.findLoadedParent(W,l),ae=this.findLoadedSibling(W),ue=Q||ae||null;ue&&(this._addTile(ue.tileID),C[ue.tileID.key]=ue.tileID),I[B]=W}this._retainLoadedChildren(I,f,d,n);for(const B in C)n[B]||(this._coveredTiles[B]=!0,n[B]=C[B]);if(w){const B={},W={};for(const J of y)this._tiles[J.key].hasData()?B[J.key]=J:W[J.key]=J;for(const J in W){const Q=W[J].children(this._source.maxzoom);this._tiles[Q[0].key]&&this._tiles[Q[1].key]&&this._tiles[Q[2].key]&&this._tiles[Q[3].key]&&(B[Q[0].key]=n[Q[0].key]=Q[0],B[Q[1].key]=n[Q[1].key]=Q[1],B[Q[2].key]=n[Q[2].key]=Q[2],B[Q[3].key]=n[Q[3].key]=Q[3],delete W[J])}for(const J in W){const Q=W[J],ae=this.findLoadedParent(Q,this._source.minzoom),ue=this.findLoadedSibling(Q),de=ae||ue||null;if(de){B[de.tileID.key]=n[de.tileID.key]=de.tileID;for(const ge in B)B[ge].isChildOf(de.tileID)&&delete B[ge]}}for(const J in this._tiles)B[J]||(this._coveredTiles[J]=!0)}}update(n,l){if(!this._sourceLoaded||this._paused)return;let d;this.transform=n,this.terrain=l,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new c.S(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(d=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(d=d.filter(L=>this._source.hasTile(L)))):d=[];const f=n.coveringZoomLevel(this._source),y=Math.max(f-Pt.maxOverzooming,this._source.minzoom),w=Math.max(f+Pt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const B of d)if(B.canonical.z>this._source.minzoom){const W=B.scaledTo(B.canonical.z-1);L[W.key]=W;const J=B.scaledTo(Math.max(this._source.minzoom,Math.min(B.canonical.z,5)));L[J.key]=J}d=d.concat(Object.values(L))}const C=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=this._updateRetainedTiles(d,f);vr(this._source.type)&&this._updateCoveredAndRetainedTiles(I,y,w,f,d,l);for(const L in I)this._tiles[L].clearFadeHold();const z=c.ab(this._tiles,I);for(const L of z){const B=this._tiles[L];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,l){var d;const f={},y={},w=Math.max(l-Pt.maxOverzooming,this._source.minzoom),C=Math.max(l+Pt.maxUnderzooming,this._source.minzoom),I={};for(const z of n){const L=this._addTile(z);f[z.key]=z,L.hasData()||l<this._source.maxzoom&&(I[z.key]=z)}this._retainLoadedChildren(I,l,C,f);for(const z of n){let L=this._tiles[z.key];if(L.hasData())continue;if(l+1>this._source.maxzoom){const W=z.children(this._source.maxzoom)[0],J=this.getTile(W);if(J&&J.hasData()){f[W.key]=W;continue}}else{const W=z.children(this._source.maxzoom);if(f[W[0].key]&&f[W[1].key]&&f[W[2].key]&&f[W[3].key])continue}let B=L.wasRequested();for(let W=z.overscaledZ-1;W>=w;--W){const J=z.scaledTo(W);if(y[J.key])break;if(y[J.key]=!0,L=this.getTile(J),!L&&B&&(L=this._addTile(J)),L){const Q=L.hasData();if((Q||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||B)&&(f[J.key]=J),B=L.wasRequested(),Q)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const l=[];let d,f=this._tiles[n].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}l.push(f.key);const y=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;f=y}for(const y of l)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const l=this._tiles[n].tileID,d=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=d}}_addTile(n){let l=this._tiles[n.key];if(l)return l;l=this._cache.getAndRemove(n),l&&(this._setTileReloadTimer(n.key,l),l.tileID=n,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,l)));const d=l;return l||(l=new zn(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(l,n.key,l.state)),l.uses++,this._tiles[n.key]=l,d||this._source.fire(new c.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(n,l){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const d=l.getExpiryTimeout();d&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},d))}_removeTile(n){const l=this._tiles[n];l&&(l.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(n){const l=n.sourceDataType;n.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&l==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,l,d){const f=[],y=this.transform;if(!y)return f;const w=d?y.getCameraQueryGeometry(n):n,C=n.map(Q=>y.pointCoordinate(Q,this.terrain)),I=w.map(Q=>y.pointCoordinate(Q,this.terrain)),z=this.getIds();let L=1/0,B=1/0,W=-1/0,J=-1/0;for(const Q of I)L=Math.min(L,Q.x),B=Math.min(B,Q.y),W=Math.max(W,Q.x),J=Math.max(J,Q.y);for(let Q=0;Q<z.length;Q++){const ae=this._tiles[z[Q]];if(ae.holdingForFade())continue;const ue=ae.tileID,de=Math.pow(2,y.zoom-ae.tileID.overscaledZ),ge=l*ae.queryPadding*c.X/ae.tileSize/de,se=[ue.getTilePoint(new c.Z(L,B)),ue.getTilePoint(new c.Z(W,J))];if(se[0].x-ge<c.X&&se[0].y-ge<c.X&&se[1].x+ge>=0&&se[1].y+ge>=0){const xe=C.map(Ee=>ue.getTilePoint(Ee)),Se=I.map(Ee=>ue.getTilePoint(Ee));f.push({tile:ae,tileID:ue,queryGeometry:xe,cameraQueryGeometry:Se,scale:de})}}return f}getVisibleCoordinates(n){const l=this.getRenderableIds(n).map(d=>this._tiles[d].tileID);for(const d of l)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(vr(this._source.type)){const n=T.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=n)return!0}return!1}setFeatureState(n,l,d){this._state.updateState(n=n||"_geojsonTileLayer",l,d)}removeFeatureState(n,l,d){this._state.removeFeatureState(n=n||"_geojsonTileLayer",l,d)}getFeatureState(n,l){return this._state.getState(n=n||"_geojsonTileLayer",l)}setDependencies(n,l,d){const f=this._tiles[n];f&&f.setDependencies(l,d)}reloadTilesForDependencies(n,l){for(const d in this._tiles)this._tiles[d].hasDependency(n,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(n,l))}}function Gn(_,n){const l=Math.abs(2*_.wrap)-+(_.wrap<0),d=Math.abs(2*n.wrap)-+(n.wrap<0);return _.overscaledZ-n.overscaledZ||d-l||n.canonical.y-_.canonical.y||n.canonical.x-_.canonical.x}function vr(_){return _==="raster"||_==="image"||_==="video"}Pt.maxOverzooming=10,Pt.maxUnderzooming=3;class zt{constructor(n,l){this.reset(n,l)}reset(n,l){this.points=n||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.ac(n,0,1);let l=1,d=this._distances[l];const f=n*this.paddedLength+this.padding;for(;d<f&&l<this._distances.length;)d=this._distances[++l];const y=l-1,w=this._distances[y],C=d-w,I=C>0?(f-w)/C:0;return this.points[y].mult(1-I).add(this.points[l].mult(I))}}function pt(_,n){let l=!0;return _==="always"||_!=="never"&&n!=="never"||(l=!1),l}class Ht{constructor(n,l,d){const f=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(n/d),this.yCellCount=Math.ceil(l/d);for(let w=0;w<this.xCellCount*this.yCellCount;w++)f.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=l,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,l,d,f,y){this._forEachCell(l,d,f,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(y)}insertCircle(n,l,d,f){this._forEachCell(l-f,d-f,l+f,d+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(l),this.circles.push(d),this.circles.push(f)}_insertBoxCell(n,l,d,f,y,w){this.boxCells[y].push(w)}_insertCircleCell(n,l,d,f,y,w){this.circleCells[y].push(w)}_query(n,l,d,f,y,w,C){if(d<0||n>this.width||f<0||l>this.height)return[];const I=[];if(n<=0&&l<=0&&this.width<=d&&this.height<=f){if(y)return[{key:null,x1:n,y1:l,x2:d,y2:f}];for(let z=0;z<this.boxKeys.length;z++)I.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const L=this.circles[3*z],B=this.circles[3*z+1],W=this.circles[3*z+2];I.push({key:this.circleKeys[z],x1:L-W,y1:B-W,x2:L+W,y2:B+W})}}else this._forEachCell(n,l,d,f,this._queryCell,I,{hitTest:y,overlapMode:w,seenUids:{box:{},circle:{}}},C);return I}query(n,l,d,f){return this._query(n,l,d,f,!1,null)}hitTest(n,l,d,f,y,w){return this._query(n,l,d,f,!0,y,w).length>0}hitTestCircle(n,l,d,f,y){const w=n-d,C=n+d,I=l-d,z=l+d;if(C<0||w>this.width||z<0||I>this.height)return!1;const L=[];return this._forEachCell(w,I,C,z,this._queryCellCircle,L,{hitTest:!0,overlapMode:f,circle:{x:n,y:l,radius:d},seenUids:{box:{},circle:{}}},y),L.length>0}_queryCell(n,l,d,f,y,w,C,I){const{seenUids:z,hitTest:L,overlapMode:B}=C,W=this.boxCells[y];if(W!==null){const Q=this.bboxes;for(const ae of W)if(!z.box[ae]){z.box[ae]=!0;const ue=4*ae,de=this.boxKeys[ae];if(n<=Q[ue+2]&&l<=Q[ue+3]&&d>=Q[ue+0]&&f>=Q[ue+1]&&(!I||I(de))&&(!L||!pt(B,de.overlapMode))&&(w.push({key:de,x1:Q[ue],y1:Q[ue+1],x2:Q[ue+2],y2:Q[ue+3]}),L))return!0}}const J=this.circleCells[y];if(J!==null){const Q=this.circles;for(const ae of J)if(!z.circle[ae]){z.circle[ae]=!0;const ue=3*ae,de=this.circleKeys[ae];if(this._circleAndRectCollide(Q[ue],Q[ue+1],Q[ue+2],n,l,d,f)&&(!I||I(de))&&(!L||!pt(B,de.overlapMode))){const ge=Q[ue],se=Q[ue+1],xe=Q[ue+2];if(w.push({key:de,x1:ge-xe,y1:se-xe,x2:ge+xe,y2:se+xe}),L)return!0}}}return!1}_queryCellCircle(n,l,d,f,y,w,C,I){const{circle:z,seenUids:L,overlapMode:B}=C,W=this.boxCells[y];if(W!==null){const Q=this.bboxes;for(const ae of W)if(!L.box[ae]){L.box[ae]=!0;const ue=4*ae,de=this.boxKeys[ae];if(this._circleAndRectCollide(z.x,z.y,z.radius,Q[ue+0],Q[ue+1],Q[ue+2],Q[ue+3])&&(!I||I(de))&&!pt(B,de.overlapMode))return w.push(!0),!0}}const J=this.circleCells[y];if(J!==null){const Q=this.circles;for(const ae of J)if(!L.circle[ae]){L.circle[ae]=!0;const ue=3*ae,de=this.circleKeys[ae];if(this._circlesCollide(Q[ue],Q[ue+1],Q[ue+2],z.x,z.y,z.radius)&&(!I||I(de))&&!pt(B,de.overlapMode))return w.push(!0),!0}}}_forEachCell(n,l,d,f,y,w,C,I){const z=this._convertToXCellCoord(n),L=this._convertToYCellCoord(l),B=this._convertToXCellCoord(d),W=this._convertToYCellCoord(f);for(let J=z;J<=B;J++)for(let Q=L;Q<=W;Q++)if(y.call(this,n,l,d,f,this.xCellCount*Q+J,w,C,I))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,l,d,f,y,w){const C=f-n,I=y-l,z=d+w;return z*z>C*C+I*I}_circleAndRectCollide(n,l,d,f,y,w,C){const I=(w-f)/2,z=Math.abs(n-(f+I));if(z>I+d)return!1;const L=(C-y)/2,B=Math.abs(l-(y+L));if(B>L+d)return!1;if(z<=I||B<=L)return!0;const W=z-I,J=B-L;return W*W+J*J<=d*d}}function Kt(_,n,l,d,f){const y=c.H();return n?(c.K(y,y,[1/f,1/f,1]),l||c.ad(y,y,d.angle)):c.L(y,d.labelPlaneMatrix,_),y}function jt(_,n,l,d,f){if(n){const y=c.ae(_);return c.K(y,y,[f,f,1]),l||c.ad(y,y,-d.angle),y}return d.glCoordMatrix}function ie(_,n,l,d){let f;d?(f=[_,n,d(_,n),1],c.af(f,f,l)):(f=[_,n,0,1],nn(f,f,l));const y=f[3];return{point:new c.P(f[0]/y,f[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function O(_,n){return .5+_/n*.5}function j(_,n){return _.x>=-n[0]&&_.x<=n[0]&&_.y>=-n[1]&&_.y<=n[1]}function Z(_,n,l,d,f,y,w,C,I,z,L,B,W,J,Q){const ae=d?_.textSizeData:_.iconSizeData,ue=c.ag(ae,l.transform.zoom),de=[256/l.width*2+1,256/l.height*2+1],ge=d?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;ge.clear();const se=_.lineVertexArray,xe=d?_.text.placedSymbolArray:_.icon.placedSymbolArray,Se=l.transform.width/l.transform.height;let Ee=!1;for(let Oe=0;Oe<xe.length;Oe++){const Ge=xe.get(Oe);if(Ge.hidden||Ge.writingMode===c.ah.vertical&&!Ee){It(Ge.numGlyphs,ge);continue}Ee=!1;const tt=ie(Ge.anchorX,Ge.anchorY,n,Q);if(!j(tt.point,de)){It(Ge.numGlyphs,ge);continue}const lt=O(l.transform.cameraToCenterDistance,tt.signedDistanceFromCamera),Je=c.ai(ae,ue,Ge),Ye=w?Je/lt:Je*lt,gt={getElevation:Q,labelPlaneMatrix:f,lineVertexArray:se,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:z,tileAnchorPoint:new c.P(Ge.anchorX,Ge.anchorY),unwrappedTileID:L,width:B,height:W,translation:J},Ot=me(gt,Ge,Ye,!1,C,n,y,_.glyphOffsetArray,ge,Se,I);Ee=Ot.useVertical,(Ot.notEnoughRoom||Ee||Ot.needsFlipping&&me(gt,Ge,Ye,!0,C,n,y,_.glyphOffsetArray,ge,Se,I).notEnoughRoom)&&It(Ge.numGlyphs,ge)}d?_.text.dynamicLayoutVertexBuffer.updateData(ge):_.icon.dynamicLayoutVertexBuffer.updateData(ge)}function te(_,n,l,d,f,y,w,C){const I=y.glyphStartIndex+y.numGlyphs,z=y.lineStartIndex,L=y.lineStartIndex+y.lineLength,B=n.getoffsetX(y.glyphStartIndex),W=n.getoffsetX(I-1),J=He(_*B,l,d,f,y.segment,z,L,C,w);if(!J)return null;const Q=He(_*W,l,d,f,y.segment,z,L,C,w);return Q?C.projectionCache.anyProjectionOccluded?null:{first:J,last:Q}:null}function pe(_,n,l,d){return _===c.ah.horizontal&&Math.abs(l.y-n.y)>Math.abs(l.x-n.x)*d?{useVertical:!0}:(_===c.ah.vertical?n.y<l.y:n.x>l.x)?{needsFlipping:!0}:null}function me(_,n,l,d,f,y,w,C,I,z,L){const B=l/24,W=n.lineOffsetX*B,J=n.lineOffsetY*B;let Q;if(n.numGlyphs>1){const ae=n.glyphStartIndex+n.numGlyphs,ue=n.lineStartIndex,de=n.lineStartIndex+n.lineLength,ge=te(B,C,W,J,d,n,L,_);if(!ge)return{notEnoughRoom:!0};const se=ie(ge.first.point.x,ge.first.point.y,w,_.getElevation).point,xe=ie(ge.last.point.x,ge.last.point.y,w,_.getElevation).point;if(f&&!d){const Se=pe(n.writingMode,se,xe,z);if(Se)return Se}Q=[ge.first];for(let Se=n.glyphStartIndex+1;Se<ae-1;Se++)Q.push(He(B*C.getoffsetX(Se),W,J,d,n.segment,ue,de,_,L));Q.push(ge.last)}else{if(f&&!d){const ue=ie(_.tileAnchorPoint.x,_.tileAnchorPoint.y,y,_.getElevation).point,de=n.lineStartIndex+n.segment+1,ge=new c.P(_.lineVertexArray.getx(de),_.lineVertexArray.gety(de)),se=ie(ge.x,ge.y,y,_.getElevation),xe=se.signedDistanceFromCamera>0?se.point:function(Ee,Oe,Ge,tt,lt,Je){return ve(Ee,Oe,Ge,1,lt,Je)}(_.tileAnchorPoint,ge,ue,0,y,_),Se=pe(n.writingMode,ue,xe,z);if(Se)return Se}const ae=He(B*C.getoffsetX(n.glyphStartIndex),W,J,d,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,_,L);if(!ae||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Q=[ae]}for(const ae of Q)c.aj(I,ae.point,ae.angle);return{}}function ve(_,n,l,d,f,y){const w=_.add(_.sub(n)._unit()),C=f!==void 0?ie(w.x,w.y,f,y.getElevation).point:Ie(w.x,w.y,y).point,I=l.sub(C);return l.add(I._mult(d/I.mag()))}function he(_,n,l){const d=n.projectionCache;if(d.projections[_])return d.projections[_];const f=new c.P(n.lineVertexArray.getx(_),n.lineVertexArray.gety(_)),y=Ie(f.x,f.y,n);if(y.signedDistanceFromCamera>0)return d.projections[_]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;const w=_-l.direction;return function(C,I,z,L,B){return ve(C,I,z,L,void 0,B)}(l.distanceFromAnchor===0?n.tileAnchorPoint:new c.P(n.lineVertexArray.getx(w),n.lineVertexArray.gety(w)),f,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,n)}function Ie(_,n,l){const d=_+l.translation[0],f=n+l.translation[1];let y;return!l.pitchWithMap&&l.projection.useSpecialProjectionForSymbols?(y=l.projection.projectTileCoordinates(d,f,l.unwrappedTileID,l.getElevation),y.point.x=(.5*y.point.x+.5)*l.width,y.point.y=(.5*-y.point.y+.5)*l.height):(y=ie(d,f,l.labelPlaneMatrix,l.getElevation),y.isOccluded=!1),y}function Be(_,n,l){return _._unit()._perp()._mult(n*l)}function Ae(_,n,l,d,f,y,w,C,I){if(C.projectionCache.offsets[_])return C.projectionCache.offsets[_];const z=l.add(n);if(_+I.direction<d||_+I.direction>=f)return C.projectionCache.offsets[_]=z,z;const L=he(_+I.direction,C,I),B=Be(L.sub(l),w,I.direction),W=l.add(B),J=L.add(B);return C.projectionCache.offsets[_]=c.ak(y,z,W,J)||z,C.projectionCache.offsets[_]}function He(_,n,l,d,f,y,w,C,I){const z=d?_-n:_+n;let L=z>0?1:-1,B=0;d&&(L*=-1,B=Math.PI),L<0&&(B+=Math.PI);let W,J=L>0?y+f:y+f+1;C.projectionCache.cachedAnchorPoint?W=C.projectionCache.cachedAnchorPoint:(W=Ie(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=W);let Q,ae,ue=W,de=W,ge=0,se=0;const xe=Math.abs(z),Se=[];let Ee;for(;ge+se<=xe;){if(J+=L,J<y||J>=w)return null;ge+=se,de=ue,ae=Q;const tt={absOffsetX:xe,direction:L,distanceFromAnchor:ge,previousVertex:de};if(ue=he(J,C,tt),l===0)Se.push(de),Ee=ue.sub(de);else{let lt;const Je=ue.sub(de);lt=Je.mag()===0?Be(he(J+L,C,tt).sub(ue),l,L):Be(Je,l,L),ae||(ae=de.add(lt)),Q=Ae(J,lt,ue,y,w,ae,l,C,tt),Se.push(ae),Ee=Q.sub(ae)}se=Ee.mag()}const Oe=Ee._mult((xe-ge)/se)._add(ae||de),Ge=B+Math.atan2(ue.y-de.y,ue.x-de.x);return Se.push(Oe),{point:Oe,angle:I?Ge:0,path:Se}}const xt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function It(_,n){for(let l=0;l<_;l++){const d=n.length;n.resize(d+4),n.float32.set(xt,3*d)}}function nn(_,n,l){const d=n[0],f=n[1];return _[0]=l[0]*d+l[4]*f+l[12],_[1]=l[1]*d+l[5]*f+l[13],_[3]=l[3]*d+l[7]*f+l[15],_}const Vt=100;class rn{constructor(n,l,d=new Ht(n.width+200,n.height+200,25),f=new Ht(n.width+200,n.height+200,25)){this.transform=n,this.mapProjection=l,this.grid=d,this.ignoredGrid=f,this.pitchFactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Vt,this.screenBottomBoundary=n.height+Vt,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,l,d,f,y,w,C,I,z,L,B){const W=n.anchorPointX+I[0],J=n.anchorPointY+I[1],Q=this.projectAndGetPerspectiveRatio(f,W,J,y,L),ae=d*Q.perspectiveRatio;let ue;if(w||C)ue=this._projectCollisionBox(n,ae,f,y,w,C,I,Q,L,B);else{const Se=Q.point.x+(B?B.x*ae:0),Ee=Q.point.y+(B?B.y*ae:0);ue={allPointsOccluded:!1,box:[Se+n.x1*ae,Ee+n.y1*ae,Se+n.x2*ae,Ee+n.y2*ae]}}const[de,ge,se,xe]=ue.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?ue.allPointsOccluded:this.mapProjection.isOccluded(W,J,y))||Q.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(de,ge,se,xe)||l!=="always"&&this.grid.hitTest(de,ge,se,xe,l,z)?{box:[de,ge,se,xe],placeable:!1,offscreen:!1}:{box:[de,ge,se,xe],placeable:!0,offscreen:this.isOffscreen(de,ge,se,xe)}}placeCollisionCircles(n,l,d,f,y,w,C,I,z,L,B,W,J,Q,ae,ue){const de=[],ge=new c.P(l.anchorX,l.anchorY),se=this.getPerspectiveRatio(w,ge.x,ge.y,C,ue),xe=(B?y/se:y*se)/c.ap,Se={getElevation:ue,labelPlaneMatrix:I,lineVertexArray:d,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ge,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:ae},Ee=te(xe,f,l.lineOffsetX*xe,l.lineOffsetY*xe,!1,l,!1,Se);let Oe=!1,Ge=!1,tt=!0;if(Ee){const lt=.5*J*se+Q,Je=new c.P(-100,-100),Ye=new c.P(this.screenRightBoundary,this.screenBottomBoundary),gt=new zt,Ot=Ee.first,Qe=Ee.last;let st=[];for(let $t=Ot.path.length-1;$t>=1;$t--)st.push(Ot.path[$t]);for(let $t=1;$t<Qe.path.length;$t++)st.push(Qe.path[$t]);const Bt=2.5*lt;if(z){const $t=this.projectPathToScreenSpace(st,Se,z);st=$t.some(Jt=>Jt.signedDistanceFromCamera<=0)?[]:$t.map(Jt=>Jt.point)}let In=[];if(st.length>0){const $t=st[0].clone(),Jt=st[0].clone();for(let An=1;An<st.length;An++)$t.x=Math.min($t.x,st[An].x),$t.y=Math.min($t.y,st[An].y),Jt.x=Math.max(Jt.x,st[An].x),Jt.y=Math.max(Jt.y,st[An].y);In=$t.x>=Je.x&&Jt.x<=Ye.x&&$t.y>=Je.y&&Jt.y<=Ye.y?[st]:Jt.x<Je.x||$t.x>Ye.x||Jt.y<Je.y||$t.y>Ye.y?[]:c.al([st],Je.x,Je.y,Ye.x,Ye.y)}for(const $t of In){gt.reset($t,.25*lt);let Jt=0;Jt=gt.length<=.5*lt?1:Math.ceil(gt.paddedLength/Bt)+1;for(let An=0;An<Jt;An++){const Ar=An/Math.max(Jt-1,1),qi=gt.lerp(Ar),Mn=qi.x+Vt,Yr=qi.y+Vt;de.push(Mn,Yr,lt,0);const jr=Mn-lt,Mr=Yr-lt,Vr=Mn+lt,cs=Yr+lt;if(tt=tt&&this.isOffscreen(jr,Mr,Vr,cs),Ge=Ge||this.isInsideGrid(jr,Mr,Vr,cs),n!=="always"&&this.grid.hitTestCircle(Mn,Yr,lt,n,W)&&(Oe=!0,!L))return{circles:[],offscreen:!1,collisionDetected:Oe}}}}return{circles:!L&&Oe||!Ge||se<this.perspectiveRatioCutoff?[]:de,offscreen:tt,collisionDetected:Oe}}projectPathToScreenSpace(n,l,d){return n.map(f=>ie(f.x,f.y,d,l.getElevation))}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let d=1/0,f=1/0,y=-1/0,w=-1/0;for(const L of n){const B=new c.P(L.x+Vt,L.y+Vt);d=Math.min(d,B.x),f=Math.min(f,B.y),y=Math.max(y,B.x),w=Math.max(w,B.y),l.push(B)}const C=this.grid.query(d,f,y,w).concat(this.ignoredGrid.query(d,f,y,w)),I={},z={};for(const L of C){const B=L.key;if(I[B.bucketInstanceId]===void 0&&(I[B.bucketInstanceId]={}),I[B.bucketInstanceId][B.featureIndex])continue;const W=[new c.P(L.x1,L.y1),new c.P(L.x2,L.y1),new c.P(L.x2,L.y2),new c.P(L.x1,L.y2)];c.am(l,W)&&(I[B.bucketInstanceId][B.featureIndex]=!0,z[B.bucketInstanceId]===void 0&&(z[B.bucketInstanceId]=[]),z[B.bucketInstanceId].push(B.featureIndex))}return z}insertCollisionBox(n,l,d,f,y,w){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:y,collisionGroupID:w,overlapMode:l},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,l,d,f,y,w){const C=d?this.ignoredGrid:this.grid,I={bucketInstanceId:f,featureIndex:y,collisionGroupID:w,overlapMode:l};for(let z=0;z<n.length;z+=4)C.insertCircle(I,n[z],n[z+1],n[z+2])}projectAndGetPerspectiveRatio(n,l,d,f,y){let w;y?(w=[l,d,y(l,d),1],c.af(w,w,n)):(w=[l,d,0,1],nn(w,w,n));const C=w[3];return{point:new c.P((w[0]/C+1)/2*this.transform.width+Vt,(-w[1]/C+1)/2*this.transform.height+Vt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C*.5,isOccluded:!1,signedDistanceFromCamera:C}}getPerspectiveRatio(n,l,d,f,y){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(l,d,f,y):ie(l,d,n,y);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(n,l,d,f){return d<Vt||n>=this.screenRightBoundary||f<Vt||l>this.screenBottomBoundary}isInsideGrid(n,l,d,f){return d>=0&&n<this.gridRightBoundary&&f>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const n=c.an([]);return c.J(n,n,[-100,-100,0]),n}_projectCollisionBox(n,l,d,f,y,w,C,I,z,L){let B=new c.P(1,0),W=new c.P(0,1);const J=new c.P(n.anchorPointX+C[0],n.anchorPointY+C[1]);if(w&&!y){const tt=this.projectAndGetPerspectiveRatio(d,J.x+1,J.y,f,z).point.sub(I.point).unit(),lt=Math.atan(tt.y/tt.x)+(tt.x<0?Math.PI:0),Je=Math.sin(lt),Ye=Math.cos(lt);B=new c.P(Ye,Je),W=new c.P(-Je,Ye)}else if(!w&&y){const tt=-this.transform.angle,lt=Math.sin(tt),Je=Math.cos(tt);B=new c.P(Je,lt),W=new c.P(-lt,Je)}let Q=I.point,ae=l;if(y){Q=J;const tt=this.transform.zoom-Math.floor(this.transform.zoom);ae=Math.pow(2,-tt),ae*=this.mapProjection.getPitchedTextCorrection(this.transform,J,f),L||(ae*=c.ac(.5+I.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}L&&(Q=Q.add(B.mult(L.x*ae)).add(W.mult(L.y*ae)));const ue=n.x1*ae,de=n.x2*ae,ge=(ue+de)/2,se=n.y1*ae,xe=n.y2*ae,Se=(se+xe)/2,Ee=[{offsetX:ue,offsetY:se},{offsetX:ge,offsetY:se},{offsetX:de,offsetY:se},{offsetX:de,offsetY:Se},{offsetX:de,offsetY:xe},{offsetX:ge,offsetY:xe},{offsetX:ue,offsetY:xe},{offsetX:ue,offsetY:Se}];let Oe=[];for(const{offsetX:tt,offsetY:lt}of Ee)Oe.push(new c.P(Q.x+B.x*tt+W.x*lt,Q.y+B.y*tt+W.y*lt));let Ge=!1;if(y){const tt=Oe.map(lt=>this.projectAndGetPerspectiveRatio(d,lt.x,lt.y,f,z));Ge=tt.some(lt=>!lt.isOccluded),Oe=tt.map(lt=>lt.point)}else Ge=!0;return{box:c.ao(Oe),allPointsOccluded:!Ge}}}function Yt(_,n,l){return n*(c.X/(_.tileSize*Math.pow(2,l-_.tileID.overscaledZ)))}class nr{constructor(n,l,d,f){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?l:-l))):f&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Bn{constructor(n,l,d,f,y){this.text=new nr(n?n.text:null,l,d,y),this.icon=new nr(n?n.icon:null,l,f,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Gt{constructor(n,l,d){this.text=n,this.icon=l,this.skipFade=d}}class mn{constructor(){this.invProjMatrix=c.H(),this.viewportMatrix=c.H(),this.circles=[]}}class Rn{constructor(n,l,d,f,y){this.bucketInstanceId=n,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=f,this.tileID=y}}class hr{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const l=++this.maxGroupID;this.collisionGroups[n]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[n]}}function xr(_,n,l,d,f){const{horizontalAlign:y,verticalAlign:w}=c.au(_);return new c.P(-(y-.5)*n+d[0]*f,-(w-.5)*l+d[1]*f)}class Nr{constructor(n,l,d,f,y,w){this.transform=n.clone(),this.terrain=d,this.collisionIndex=new rn(this.transform,l),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new hr(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const l=this.terrain;return l?(d,f)=>l.getElevation(n,d,f):null}getBucketParts(n,l,d,f){const y=d.getBucket(l),w=d.latestFeatureIndex;if(!y||!w||l.id!==y.layerIds[0])return;const C=d.collisionBoxArray,I=y.layers[0].layout,z=y.layers[0].paint,L=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),B=d.tileSize/c.X,W=d.tileID.toUnwrapped(),J=this.transform.calculatePosMatrix(W),Q=I.get("text-pitch-alignment")==="map",ae=I.get("text-rotation-alignment")==="map",ue=Yt(d,1,this.transform.zoom),de=this.collisionIndex.mapProjection.translatePosition(this.transform,d,z.get("text-translate"),z.get("text-translate-anchor")),ge=this.collisionIndex.mapProjection.translatePosition(this.transform,d,z.get("icon-translate"),z.get("icon-translate-anchor")),se=Kt(J,Q,ae,this.transform,ue);let xe=null;if(Q){const Ee=jt(J,Q,ae,this.transform,ue);xe=c.L([],this.transform.labelPlaneMatrix,Ee)}this.retainedQueryData[y.bucketInstanceId]=new Rn(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,d.tileID);const Se={bucket:y,layout:I,translationText:de,translationIcon:ge,posMatrix:J,unwrappedTileID:W,textLabelPlaneMatrix:se,labelToScreenMatrix:xe,scale:L,textPixelRatio:B,holdingForFade:d.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:c.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(f)for(const Ee of y.sortKeyRanges){const{sortKey:Oe,symbolInstanceStart:Ge,symbolInstanceEnd:tt}=Ee;n.push({sortKey:Oe,symbolInstanceStart:Ge,symbolInstanceEnd:tt,parameters:Se})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(n,l,d,f,y,w,C,I,z,L,B,W,J,Q,ae,ue,de,ge,se){const xe=c.aq[n.textAnchor],Se=[n.textOffset0,n.textOffset1],Ee=xr(xe,d,f,Se,y),Oe=this.collisionIndex.placeCollisionBox(l,W,I,z,L,C,w,ue,B.predicate,se,Ee);if((!ge||this.collisionIndex.placeCollisionBox(ge,W,I,z,L,C,w,de,B.predicate,se,Ee).placeable)&&Oe.placeable){let Ge;if(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(Ge=this.prevPlacement.variableOffsets[J.crossTileID].anchor),J.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[J.crossTileID]={textOffset:Se,width:d,height:f,anchor:xe,textBoxScale:y,prevAnchor:Ge},this.markUsedJustification(Q,xe,J,ae),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,ae,J),this.placedOrientations[J.crossTileID]=ae),{shift:Ee,placedGlyphBoxes:Oe}}}placeLayerBucketPart(n,l,d){const{bucket:f,layout:y,translationText:w,translationIcon:C,posMatrix:I,unwrappedTileID:z,textLabelPlaneMatrix:L,labelToScreenMatrix:B,textPixelRatio:W,holdingForFade:J,collisionBoxArray:Q,partiallyEvaluatedTextSize:ae,collisionGroup:ue}=n.parameters,de=y.get("text-optional"),ge=y.get("icon-optional"),se=c.ar(y,"text-overlap","text-allow-overlap"),xe=se==="always",Se=c.ar(y,"icon-overlap","icon-allow-overlap"),Ee=Se==="always",Oe=y.get("text-rotation-alignment")==="map",Ge=y.get("text-pitch-alignment")==="map",tt=y.get("icon-text-fit")!=="none",lt=y.get("symbol-z-order")==="viewport-y",Je=xe&&(Ee||!f.hasIconData()||ge),Ye=Ee&&(xe||!f.hasTextData()||de);!f.collisionArrays&&Q&&f.deserializeCollisionBoxes(Q);const gt=this._getTerrainElevationFunc(this.retainedQueryData[f.bucketInstanceId].tileID),Ot=(Qe,st,Bt)=>{var In,$t;if(l[Qe.crossTileID])return;if(J)return void(this.placements[Qe.crossTileID]=new Gt(!1,!1,!1));let Jt=!1,An=!1,Ar=!0,qi=null,Mn={box:null,placeable:!1,offscreen:null},Yr={placeable:!1},jr=null,Mr=null,Vr=null,cs=0,na=0,pc=0;st.textFeatureIndex?cs=st.textFeatureIndex:Qe.useRuntimeCollisionCircles&&(cs=Qe.featureIndex),st.verticalTextFeatureIndex&&(na=st.verticalTextFeatureIndex);const ra=st.textBox;if(ra){const Ai=br=>{let Dr=c.ah.horizontal;if(f.allowVerticalPlacement&&!br&&this.prevPlacement){const pi=this.prevPlacement.placedOrientations[Qe.crossTileID];pi&&(this.placedOrientations[Qe.crossTileID]=pi,Dr=pi,this.markUsedOrientation(f,Dr,Qe))}return Dr},Mi=(br,Dr)=>{if(f.allowVerticalPlacement&&Qe.numVerticalGlyphVertices>0&&st.verticalTextBox){for(const pi of f.writingModes)if(pi===c.ah.vertical?(Mn=Dr(),Yr=Mn):Mn=br(),Mn&&Mn.placeable)break}else Mn=br()},Vs=Qe.textAnchorOffsetStartIndex,Zi=Qe.textAnchorOffsetEndIndex;if(Zi===Vs){const br=(Dr,pi)=>{const en=this.collisionIndex.placeCollisionBox(Dr,se,W,I,z,Ge,Oe,w,ue.predicate,gt);return en&&en.placeable&&(this.markUsedOrientation(f,pi,Qe),this.placedOrientations[Qe.crossTileID]=pi),en};Mi(()=>br(ra,c.ah.horizontal),()=>{const Dr=st.verticalTextBox;return f.allowVerticalPlacement&&Qe.numVerticalGlyphVertices>0&&Dr?br(Dr,c.ah.vertical):{box:null,offscreen:null}}),Ai(Mn&&Mn.placeable)}else{let br=c.aq[($t=(In=this.prevPlacement)===null||In===void 0?void 0:In.variableOffsets[Qe.crossTileID])===null||$t===void 0?void 0:$t.anchor];const Dr=(en,mo,ia)=>{const sa=en.x2-en.x1,Df=en.y2-en.y1,zg=Qe.textBoxScale,zf=tt&&Se==="never"?mo:null;let Us=null,Rf=se==="never"?1:2,gc="never";br&&Rf++;for(let ol=0;ol<Rf;ol++){for(let yc=Vs;yc<Zi;yc++){const _c=f.textAnchorOffsets.get(yc);if(br&&_c.textAnchor!==br)continue;const oa=this.attemptAnchorPlacement(_c,en,sa,Df,zg,Oe,Ge,W,I,z,ue,gc,Qe,f,ia,w,C,zf,gt);if(oa&&(Us=oa.placedGlyphBoxes,Us&&Us.placeable))return Jt=!0,qi=oa.shift,Us}br?br=null:gc=se}return d&&!Us&&(Us={box:this.collisionIndex.placeCollisionBox(ra,"always",W,I,z,Ge,Oe,w,ue.predicate,gt,new c.P(0,0)).box,offscreen:!1,placeable:!1}),Us};Mi(()=>Dr(ra,st.iconBox,c.ah.horizontal),()=>{const en=st.verticalTextBox;return f.allowVerticalPlacement&&(!Mn||!Mn.placeable)&&Qe.numVerticalGlyphVertices>0&&en?Dr(en,st.verticalIconBox,c.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Mn&&(Jt=Mn.placeable,Ar=Mn.offscreen);const pi=Ai(Mn&&Mn.placeable);if(!Jt&&this.prevPlacement){const en=this.prevPlacement.variableOffsets[Qe.crossTileID];en&&(this.variableOffsets[Qe.crossTileID]=en,this.markUsedJustification(f,en.anchor,Qe,pi))}}}if(jr=Mn,Jt=jr&&jr.placeable,Ar=jr&&jr.offscreen,Qe.useRuntimeCollisionCircles){const Ai=f.text.placedSymbolArray.get(Qe.centerJustifiedTextSymbolIndex),Mi=c.ai(f.textSizeData,ae,Ai),Vs=y.get("text-padding");Mr=this.collisionIndex.placeCollisionCircles(se,Ai,f.lineVertexArray,f.glyphOffsetArray,Mi,I,z,L,B,d,Ge,ue.predicate,Qe.collisionCircleDiameter,Vs,w,gt),Mr.circles.length&&Mr.collisionDetected&&!d&&c.w("Collisions detected, but collision boxes are not shown"),Jt=xe||Mr.circles.length>0&&!Mr.collisionDetected,Ar=Ar&&Mr.offscreen}if(st.iconFeatureIndex&&(pc=st.iconFeatureIndex),st.iconBox){const Ai=Mi=>this.collisionIndex.placeCollisionBox(Mi,Se,W,I,z,Ge,Oe,C,ue.predicate,gt,tt&&qi?qi:void 0);Yr&&Yr.placeable&&st.verticalIconBox?(Vr=Ai(st.verticalIconBox),An=Vr.placeable):(Vr=Ai(st.iconBox),An=Vr.placeable),Ar=Ar&&Vr.offscreen}const Ii=de||Qe.numHorizontalGlyphVertices===0&&Qe.numVerticalGlyphVertices===0,mc=ge||Qe.numIconVertices===0;Ii||mc?mc?Ii||(An=An&&Jt):Jt=An&&Jt:An=Jt=An&&Jt;const gh=An&&Vr.placeable;if(Jt&&jr.placeable&&this.collisionIndex.insertCollisionBox(jr.box,se,y.get("text-ignore-placement"),f.bucketInstanceId,Yr&&Yr.placeable&&na?na:cs,ue.ID),gh&&this.collisionIndex.insertCollisionBox(Vr.box,Se,y.get("icon-ignore-placement"),f.bucketInstanceId,pc,ue.ID),Mr&&Jt&&this.collisionIndex.insertCollisionCircles(Mr.circles,se,y.get("text-ignore-placement"),f.bucketInstanceId,cs,ue.ID),d&&this.storeCollisionData(f.bucketInstanceId,Bt,st,jr,Vr,Mr),Qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Qe.crossTileID]=new Gt(Jt||Je,An||Ye,Ar||f.justReloaded),l[Qe.crossTileID]=!0};if(lt){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Qe=f.getSortedSymbolIndexes(this.transform.angle);for(let st=Qe.length-1;st>=0;--st){const Bt=Qe[st];Ot(f.symbolInstances.get(Bt),f.collisionArrays[Bt],Bt)}}else for(let Qe=n.symbolInstanceStart;Qe<n.symbolInstanceEnd;Qe++)Ot(f.symbolInstances.get(Qe),f.collisionArrays[Qe],Qe);if(d&&f.bucketInstanceId in this.collisionCircleArrays){const Qe=this.collisionCircleArrays[f.bucketInstanceId];c.as(Qe.invProjMatrix,I),Qe.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}storeCollisionData(n,l,d,f,y,w){if(d.textBox||d.iconBox){let C,I;this.collisionBoxArrays.has(n)?C=this.collisionBoxArrays.get(n):(C=new Map,this.collisionBoxArrays.set(n,C)),C.has(l)?I=C.get(l):(I={text:null,icon:null},C.set(l,I)),d.textBox&&(I.text=f.box),d.iconBox&&(I.icon=y.box)}if(w){let C=this.collisionCircleArrays[n];C===void 0&&(C=this.collisionCircleArrays[n]=new mn);for(let I=0;I<w.circles.length;I+=4)C.circles.push(w.circles[I+0]),C.circles.push(w.circles[I+1]),C.circles.push(w.circles[I+2]),C.circles.push(w.collisionDetected?1:0)}}markUsedJustification(n,l,d,f){let y;y=f===c.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.at(l)];const w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const C of w)C>=0&&(n.text.placedSymbolArray.get(C).crossTileID=y>=0&&C!==y?0:d.crossTileID)}markUsedOrientation(n,l,d){const f=l===c.ah.horizontal||l===c.ah.horizontalOnly?l:0,y=l===c.ah.vertical?l:0,w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const C of w)n.text.placedSymbolArray.get(C).placedOrientation=f;d.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const f=l?l.symbolFadeChange(n):1,y=l?l.opacities:{},w=l?l.variableOffsets:{},C=l?l.placedOrientations:{};for(const I in this.placements){const z=this.placements[I],L=y[I];L?(this.opacities[I]=new Bn(L,f,z.text,z.icon),d=d||z.text!==L.text.placed||z.icon!==L.icon.placed):(this.opacities[I]=new Bn(null,f,z.text,z.icon,z.skipFade),d=d||z.text||z.icon)}for(const I in y){const z=y[I];if(!this.opacities[I]){const L=new Bn(z,f,!1,!1);L.isHidden()||(this.opacities[I]=L,d=d||z.text.placed||z.icon.placed)}}for(const I in w)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=w[I]);for(const I in C)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=C[I]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:n)}updateLayerOpacities(n,l){const d={};for(const f of l){const y=f.getBucket(n);y&&f.latestFeatureIndex&&n.id===y.layerIds[0]&&this.updateBucketOpacities(y,f.tileID,d,f.collisionBoxArray)}}updateBucketOpacities(n,l,d,f){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const y=n.layers[0],w=y.layout,C=new Bn(null,0,!1,!1,!0),I=w.get("text-allow-overlap"),z=w.get("icon-allow-overlap"),L=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),B=w.get("text-rotation-alignment")==="map",W=w.get("text-pitch-alignment")==="map",J=w.get("icon-text-fit")!=="none",Q=new Bn(null,0,I&&(z||!n.hasIconData()||w.get("icon-optional")),z&&(I||!n.hasTextData()||w.get("text-optional")),!0);!n.collisionArrays&&f&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(f);const ae=(de,ge,se)=>{for(let xe=0;xe<ge/4;xe++)de.opacityVertexArray.emplaceBack(se);de.hasVisibleVertices=de.hasVisibleVertices||se!==Bo},ue=this.collisionBoxArrays.get(n.bucketInstanceId);for(let de=0;de<n.symbolInstances.length;de++){const ge=n.symbolInstances.get(de),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:xe,crossTileID:Se}=ge;let Ee=this.opacities[Se];d[Se]?Ee=C:Ee||(Ee=Q,this.opacities[Se]=Ee),d[Se]=!0;const Oe=ge.numIconVertices>0,Ge=this.placedOrientations[ge.crossTileID],tt=Ge===c.ah.vertical,lt=Ge===c.ah.horizontal||Ge===c.ah.horizontalOnly;if(se>0||xe>0){const Ye=hi(Ee.text);ae(n.text,se,tt?Bo:Ye),ae(n.text,xe,lt?Bo:Ye);const gt=Ee.text.isHidden();[ge.rightJustifiedTextSymbolIndex,ge.centerJustifiedTextSymbolIndex,ge.leftJustifiedTextSymbolIndex].forEach(st=>{st>=0&&(n.text.placedSymbolArray.get(st).hidden=gt||tt?1:0)}),ge.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(ge.verticalPlacedTextSymbolIndex).hidden=gt||lt?1:0);const Ot=this.variableOffsets[ge.crossTileID];Ot&&this.markUsedJustification(n,Ot.anchor,ge,Ge);const Qe=this.placedOrientations[ge.crossTileID];Qe&&(this.markUsedJustification(n,"left",ge,Qe),this.markUsedOrientation(n,Qe,ge))}if(Oe){const Ye=hi(Ee.icon),gt=!(J&&ge.verticalPlacedIconSymbolIndex&&tt);ge.placedIconSymbolIndex>=0&&(ae(n.icon,ge.numIconVertices,gt?Ye:Bo),n.icon.placedSymbolArray.get(ge.placedIconSymbolIndex).hidden=Ee.icon.isHidden()),ge.verticalPlacedIconSymbolIndex>=0&&(ae(n.icon,ge.numVerticalIconVertices,gt?Bo:Ye),n.icon.placedSymbolArray.get(ge.verticalPlacedIconSymbolIndex).hidden=Ee.icon.isHidden())}const Je=ue&&ue.has(de)?ue.get(de):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Ye=n.collisionArrays[de];if(Ye){let gt=new c.P(0,0);if(Ye.textBox||Ye.verticalTextBox){let Ot=!0;if(L){const Qe=this.variableOffsets[Se];Qe?(gt=xr(Qe.anchor,Qe.width,Qe.height,Qe.textOffset,Qe.textBoxScale),B&&gt._rotate(W?this.transform.angle:-this.transform.angle)):Ot=!1}if(Ye.textBox||Ye.verticalTextBox){let Qe;Ye.textBox&&(Qe=tt),Ye.verticalTextBox&&(Qe=lt),Lo(n.textCollisionBox.collisionVertexArray,Ee.text.placed,!Ot||Qe,Je.text,gt.x,gt.y)}}if(Ye.iconBox||Ye.verticalIconBox){const Ot=!!(!lt&&Ye.verticalIconBox);let Qe;Ye.iconBox&&(Qe=Ot),Ye.verticalIconBox&&(Qe=!Ot),Lo(n.iconCollisionBox.collisionVertexArray,Ee.icon.placed,Qe,Je.icon,J?gt.x:0,J?gt.y:0)}}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const de=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=de.invProjMatrix,n.placementViewportMatrix=de.viewportMatrix,n.collisionCircleArray=de.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,l){const d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>n}setStale(){this.stale=!0}}function Lo(_,n,l,d,f,y){d&&d.length!==0||(d=[0,0,0,0]);const w=d[0]-Vt,C=d[1]-Vt,I=d[2]-Vt,z=d[3]-Vt;_.emplaceBack(n?1:0,l?1:0,f||0,y||0,w,C),_.emplaceBack(n?1:0,l?1:0,f||0,y||0,I,C),_.emplaceBack(n?1:0,l?1:0,f||0,y||0,I,z),_.emplaceBack(n?1:0,l?1:0,f||0,y||0,w,z)}const gn=Math.pow(2,25),Eu=Math.pow(2,24),Pu=Math.pow(2,17),ci=Math.pow(2,16),ui=Math.pow(2,9),ag=Math.pow(2,8),Ti=Math.pow(2,1);function hi(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const n=_.placed?1:0,l=Math.floor(127*_.opacity);return l*gn+n*Eu+l*Pu+n*ci+l*ui+n*ag+l*Ti+n}const Bo=0;function no(){return{isOccluded:(_,n,l)=>!1,getPitchedTextCorrection:(_,n,l)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,n,l,d){throw new Error("Not implemented.")},translatePosition:(_,n,l,d)=>function(f,y,w,C,I=!1){if(!w[0]&&!w[1])return[0,0];const z=I?C==="map"?f.angle:0:C==="viewport"?-f.angle:0;if(z){const L=Math.sin(z),B=Math.cos(z);w=[w[0]*B-w[1]*L,w[0]*L+w[1]*B]}return[I?w[0]:Yt(y,w[0],f.zoom),I?w[1]:Yt(y,w[1],f.zoom)]}(_,n,l,d),getCircleRadiusCorrection:_=>1}}class rr{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,l,d,f,y){const w=this._bucketParts;for(;this._currentTileIndex<n.length;)if(l.getBucketParts(w,f,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((C,I)=>C.sortKey-I.sortKey));this._currentPartIndex<w.length;)if(l.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class Va{constructor(n,l,d,f,y,w,C,I){this.placement=new Nr(n,no(),l,w,C,I),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(n,l,d){const f=T.now(),y=()=>!this._forceFullPlacement&&T.now()-f>2;for(;this._currentPlacementIndex>=0;){const w=l[n[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=C)&&(!w.maxzoom||w.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new rr(w)),this._inProgressLayer.continuePlacement(d[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Ui=512/c.X/2;class Wn{constructor(n,l,d){this.tileID=n,this.bucketInstanceId=d,this._symbolsByKey={};const f=new Map;for(let y=0;y<l.length;y++){const w=l.get(y),C=w.key,I=f.get(C);I?I.push(w):f.set(C,[w])}for(const[y,w]of f){const C={positions:w.map(I=>({x:Math.floor(I.anchorX*Ui),y:Math.floor(I.anchorY*Ui)})),crossTileIDs:w.map(I=>I.crossTileID)};if(C.positions.length>128){const I=new c.av(C.positions.length,16,Uint16Array);for(const{x:z,y:L}of C.positions)I.add(z,L);I.finish(),delete C.positions,C.index=I}this._symbolsByKey[y]=C}}getScaledCoordinates(n,l){const{x:d,y:f,z:y}=this.tileID.canonical,{x:w,y:C,z:I}=l.canonical,z=Ui/Math.pow(2,I-y),L=(C*c.X+n.anchorY)*z,B=f*c.X*Ui;return{x:Math.floor((w*c.X+n.anchorX)*z-d*c.X*Ui),y:Math.floor(L-B)}}findMatches(n,l,d){const f=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let y=0;y<n.length;y++){const w=n.get(y);if(w.crossTileID)continue;const C=this._symbolsByKey[w.key];if(!C)continue;const I=this.getScaledCoordinates(w,l);if(C.index){const z=C.index.range(I.x-f,I.y-f,I.x+f,I.y+f).sort();for(const L of z){const B=C.crossTileIDs[L];if(!d[B]){d[B]=!0,w.crossTileID=B;break}}}else if(C.positions)for(let z=0;z<C.positions.length;z++){const L=C.positions[z],B=C.crossTileIDs[z];if(Math.abs(L.x-I.x)<=f&&Math.abs(L.y-I.y)<=f&&!d[B]){d[B]=!0,w.crossTileID=B;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class Fl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class $i{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const l=Math.round((n-this.lng)/360);if(l!==0)for(const d in this.indexes){const f=this.indexes[d],y={};for(const w in f){const C=f[w];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+l),y[C.tileID.key]=C}this.indexes[d]=y}this.lng=n}addBucket(n,l,d){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let y=0;y<l.symbolInstances.length;y++)l.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const f=this.usedCrossTileIDs[n.overscaledZ];for(const y in this.indexes){const w=this.indexes[y];if(Number(y)>n.overscaledZ)for(const C in w){const I=w[C];I.tileID.isChildOf(n)&&I.findMatches(l.symbolInstances,n,f)}else{const C=w[n.scaledTo(Number(y)).key];C&&C.findMatches(l.symbolInstances,n,f)}}for(let y=0;y<l.symbolInstances.length;y++){const w=l.symbolInstances.get(y);w.crossTileID||(w.crossTileID=d.generate(),f[w.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Wn(n,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(n,l){for(const d of l.getCrossTileIDsLists())for(const f of d)delete this.usedCrossTileIDs[n][f]}removeStaleBuckets(n){let l=!1;for(const d in this.indexes){const f=this.indexes[d];for(const y in f)n[f[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,f[y]),delete f[y],l=!0)}return l}}class Iu{constructor(){this.layerIndexes={},this.crossTileIDs=new Fl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,l,d){let f=this.layerIndexes[n.id];f===void 0&&(f=this.layerIndexes[n.id]=new $i);let y=!1;const w={};f.handleWrapJump(d);for(const C of l){const I=C.getBucket(n);I&&n.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(C.tileID,I,this.crossTileIDs)&&(y=!0),w[I.bucketInstanceId]=!0)}return f.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(n){const l={};n.forEach(d=>{l[d]=!0});for(const d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}const Hi=(_,n)=>c.t(_,n&&n.filter(l=>l.identifier!=="source.canvas")),lg=c.aw();class Ol extends c.E{constructor(n,l={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const f=this.sourceCaches[d].getSource().type;f!=="vector"&&f!=="geojson"||this.sourceCaches[d].reload()}},this.map=n,this.dispatcher=new on(cn(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,f)=>this.getGlyphs(d,f)),this.dispatcher.registerMessageHandler("GI",(d,f)=>this.getImages(d,f)),this.imageManager=new De,this.imageManager.setEventedParent(this),this.glyphManager=new je(n._requestManager,l.localIdeographFontFamily),this.lineAtlas=new at(256,512),this.crossTileSymbolIndex=new Iu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",c.ay()),ar().on(Ue,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const f=this.sourceCaches[d.sourceId];if(!f)return;const y=f.getSource();if(y&&y.vectorLayerIds)for(const w in this._layers){const C=this._layers[w];C.source===y.id&&this._validateLayer(C)}})}loadURL(n,l={},d){this.fire(new c.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const f=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;c.h(f,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,l,d)}).catch(w=>{this._loadStyleRequest=null,w&&!y.signal.aborted&&this.fire(new c.j(w))})}loadJSON(n,l={},d){this.fire(new c.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(n,l,d)}).catch(()=>{})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(lg,{validate:!1})}_load(n,l,d){var f;const y=l.transformStyle?l.transformStyle(d,n):n;if(!l.validate||!Hi(this,c.u(y))){this._loaded=!0,this.stylesheet=y;for(const w in y.sources)this.addSource(w,y.sources[w],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new qe(this.stylesheet.light),this.sky=new Dt(this.stylesheet.sky),this.map.setTerrain((f=this.stylesheet.terrain)!==null&&f!==void 0?f:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const n=c.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of n){const d=c.aA(l);d.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=d}}_loadSprite(n,l=!1,d=void 0){let f;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,w,C,I){return c._(this,void 0,void 0,function*(){const z=we(y),L=C>1?"@2x":"",B={},W={};for(const{id:J,url:Q}of z){const ae=w.transformRequest(Le(Q,L,".json"),"SpriteJSON");B[J]=c.h(ae,I);const ue=w.transformRequest(Le(Q,L,".png"),"SpriteImage");W[J]=H.getImage(ue,I)}return yield Promise.all([...Object.values(B),...Object.values(W)]),function(J,Q){return c._(this,void 0,void 0,function*(){const ae={};for(const ue in J){ae[ue]={};const de=T.getImageCanvasContext((yield Q[ue]).data),ge=(yield J[ue]).data;for(const se in ge){const{width:xe,height:Se,x:Ee,y:Oe,sdf:Ge,pixelRatio:tt,stretchX:lt,stretchY:Je,content:Ye,textFitWidth:gt,textFitHeight:Ot}=ge[se];ae[ue][se]={data:null,pixelRatio:tt,sdf:Ge,stretchX:lt,stretchY:Je,content:Ye,textFitWidth:gt,textFitHeight:Ot,spriteData:{width:xe,height:Se,x:Ee,y:Oe,context:de}}}}return ae})}(B,W)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const w in y){this._spritesImagesIds[w]=[];const C=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(I=>!(I in y)):[];for(const I of C)this.imageManager.removeImage(I),this._changedImages[I]=!0;for(const I in y[w]){const z=w==="default"?I:`${w}:${I}`;this._spritesImagesIds[w].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,y[w][I],!1):this.imageManager.addImage(z,y[w][I]),l&&(this._changedImages[z]=!0)}}}).catch(y=>{this._spriteRequest=null,f=y,this.fire(new c.j(f))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),d&&d(f)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(n){const l=this.sourceCaches[n.source];if(!l)return;const d=n.sourceLayer;if(!d)return;const f=l.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.j(new Error(`Source layer "${d}" does not exist on source "${f.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,l=!1){const d=this._serializedAllLayers();if(!n||n.length===0)return Object.values(l?c.aB(d):d);const f=[];for(const y of n)if(d[y]){const w=l?c.aB(d[y]):d[y];f.push(w)}return f}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const l=Object.keys(this._layers);for(const d of l){const f=this._layers[d];f.type!=="custom"&&(n[d]=f.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const l=this._changed;if(l){const f=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(f.length||y.length)&&this._updateWorkerLayers(f,y);for(const w in this._updatedSources){const C=this._updatedSources[w];if(C==="reload")this._reloadSource(w);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const d={};for(const f in this.sourceCaches){const y=this.sourceCaches[f];d[f]=y.used,y.used=!1}for(const f of this._order){const y=this._layers[f];y.recalculate(n,this._availableImages),!y.isHidden(n.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const f in d){const y=this.sourceCaches[f];!!d[f]!=!!y.used&&y.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(n),this.sky.recalculate(n),this.z=n.zoom,l&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,l={}){var d;this._checkLoaded();const f=this.serialize();if(n=l.transformStyle?l.transformStyle(f,n):n,((d=l.validate)===null||d===void 0||d)&&Hi(this,c.u(n)))return!1;(n=c.aB(n)).layers=c.az(n.layers);const y=c.aC(f,n),w=this._getOperationsToPerform(y);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const C of w.operations)C();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const l=[],d=[];for(const f of n)switch(f.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,f.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,f.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,f.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,f.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,f.args));break;case"addSource":l.push(()=>this.addSource.apply(this,f.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,f.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,f.args));break;case"setLight":l.push(()=>this.setLight.apply(this,f.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,f.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,f.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,f.args));break;case"setSky":l.push(()=>this.setSky.apply(this,f.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,f.args));break;case"setTransition":l.push(()=>{});break;default:d.push(f.command)}return{operations:l,unimplemented:d}}addImage(n,l){if(this.getImage(n))return this.fire(new c.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,l),this._afterImageUpdated(n)}updateImage(n,l){this.imageManager.updateImage(n,l)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,l,d={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(c.u.source,`sources.${n}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const f=this.sourceCaches[n]=new Pt(n,l,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:f.loaded(),source:f.serialize(),sourceId:n})),f.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===n)return this.fire(new c.j(new Error(`Source "${n}" cannot be removed while layer "${d}" is using it.`)));const l=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],l.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,l){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const d=this.sourceCaches[n].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,l,d={}){this._checkLoaded();const f=n.id;if(this.getLayer(f))return void this.fire(new c.j(new Error(`Layer "${f}" already exists on this map.`)));let y;if(n.type==="custom"){if(Hi(this,c.aD(n)))return;y=c.aA(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(f,n.source),n=c.aB(n),n=c.e(n,{source:f})),this._validate(c.u.layer,`layers.${f}`,n,{arrayIndex:-1},d))return;y=c.aA(n),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}})}const w=l?this._order.indexOf(l):this._order.length;if(l&&w===-1)this.fire(new c.j(new Error(`Cannot add layer "${f}" before non-existing layer "${l}".`)));else{if(this._order.splice(w,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&y.type!=="custom"){const C=this._removedLayers[f];delete this._removedLayers[f],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(n,l){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===l)return;const d=this._order.indexOf(n);this._order.splice(d,1);const f=l?this._order.indexOf(l):this._order.length;l&&f===-1?this.fire(new c.j(new Error(`Cannot move layer "${n}" before non-existing layer "${l}".`))):(this._order.splice(f,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const l=this._layers[n];if(!l)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${n}".`)));l.setEventedParent(null);const d=this._order.indexOf(n);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=l,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],l.onRemove&&l.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,l,d){this._checkLoaded();const f=this.getLayer(n);f?f.minzoom===l&&f.maxzoom===d||(l!=null&&(f.minzoom=l),d!=null&&(f.maxzoom=d),this._updateLayer(f)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,l,d={}){this._checkLoaded();const f=this.getLayer(n);if(f){if(!c.aE(f.filter,l))return l==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(c.u.filter,`layers.${f.id}.filter`,l,null,d)||(f.filter=c.aB(l),this._updateLayer(f)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.aB(this.getLayer(n).filter)}setLayoutProperty(n,l,d,f={}){this._checkLoaded();const y=this.getLayer(n);y?c.aE(y.getLayoutProperty(l),d)||(y.setLayoutProperty(l,d,f),this._updateLayer(y)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,l){const d=this.getLayer(n);if(d)return d.getLayoutProperty(l);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,l,d,f={}){this._checkLoaded();const y=this.getLayer(n);y?c.aE(y.getPaintProperty(l),d)||(y.setPaintProperty(l,d,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new c.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,l){return this.getLayer(n).getPaintProperty(l)}setFeatureState(n,l){this._checkLoaded();const d=n.source,f=n.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new c.j(new Error(`The source '${d}' does not exist in the map's style.`)));const w=y.getSource().type;w==="geojson"&&f?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||f?(n.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,n.id,l)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,l){this._checkLoaded();const d=n.source,f=this.sourceCaches[d];if(f===void 0)return void this.fire(new c.j(new Error(`The source '${d}' does not exist in the map's style.`)));const y=f.getSource().type,w=y==="vector"?n.sourceLayer:void 0;y!=="vector"||w?l&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(w,n.id,l):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const l=n.source,d=n.sourceLayer,f=this.sourceCaches[l];if(f!==void 0)return f.getSource().type!=="vector"||d?(n.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),f.getFeatureState(d,n.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=c.aF(this.sourceCaches,y=>y.serialize()),l=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,f=this.stylesheet;return c.aG({version:f.version,name:f.name,metadata:f.metadata,light:f.light,sky:f.sky,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:n,layers:l,terrain:d},y=>y!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const l=w=>this._layers[w].type==="fill-extrusion",d={},f=[];for(let w=this._order.length-1;w>=0;w--){const C=this._order[w];if(l(C)){d[C]=w;for(const I of n){const z=I[C];if(z)for(const L of z)f.push(L)}}}f.sort((w,C)=>C.intersectionZ-w.intersectionZ);const y=[];for(let w=this._order.length-1;w>=0;w--){const C=this._order[w];if(l(C))for(let I=f.length-1;I>=0;I--){const z=f[I].feature;if(d[z.layer.id]<w)break;y.push(z),f.pop()}else for(const I of n){const z=I[C];if(z)for(const L of z)y.push(L.feature)}}return y}queryRenderedFeatures(n,l,d){l&&l.filter&&this._validate(c.u.filter,"queryRenderedFeatures.filter",l.filter,null,l);const f={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const C of l.layers){const I=this._layers[C];if(!I)return this.fire(new c.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];f[I.source]=!0}}const y=[];l.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const C in this.sourceCaches)l.layers&&!f[C]||y.push(Zt(this.sourceCaches[C],this._layers,w,n,l,d));return this.placement&&y.push(function(C,I,z,L,B,W,J){const Q={},ae=W.queryRenderedSymbols(L),ue=[];for(const de of Object.keys(ae).map(Number))ue.push(J[de]);ue.sort(ht);for(const de of ue){const ge=de.featureIndex.lookupSymbolFeatures(ae[de.bucketInstanceId],I,de.bucketIndex,de.sourceLayerIndex,B.filter,B.layers,B.availableImages,C);for(const se in ge){const xe=Q[se]=Q[se]||[],Se=ge[se];Se.sort((Ee,Oe)=>{const Ge=de.featureSortOrder;if(Ge){const tt=Ge.indexOf(Ee.featureIndex);return Ge.indexOf(Oe.featureIndex)-tt}return Oe.featureIndex-Ee.featureIndex});for(const Ee of Se)xe.push(Ee)}}for(const de in Q)Q[de].forEach(ge=>{const se=ge.feature,xe=z[C[de].source].getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=xe});return Q}(this._layers,w,this.sourceCaches,n,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(n,l){l&&l.filter&&this._validate(c.u.filter,"querySourceFeatures.filter",l.filter,null,l);const d=this.sourceCaches[n];return d?function(f,y){const w=f.getRenderableIds().map(z=>f.getTileByID(z)),C=[],I={};for(let z=0;z<w.length;z++){const L=w[z],B=L.tileID.canonical.key;I[B]||(I[B]=!0,L.querySourceFeatures(C,y))}return C}(d,l):[]}getLight(){return this.light.getLight()}setLight(n,l={}){this._checkLoaded();const d=this.light.getLight();let f=!1;for(const w in n)if(!c.aE(n[w],d[w])){f=!0;break}if(!f)return;const y={now:T.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,l),this.light.updateTransitions(y)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,l={}){const d=this.getSky();let f=!1;if(!n&&!d)return;if(n&&!d)f=!0;else if(!n&&d)f=!0;else for(const w in n)if(!c.aE(n[w],d[w])){f=!0;break}if(!f)return;const y={now:T.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,l),this.sky.updateTransitions(y)}_validate(n,l,d,f,y={}){return(!y||y.validate!==!1)&&Hi(this,n.call(c.u,c.e({key:l,style:this.serialize(),value:d,styleSpec:c.v},f)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ar().off(Ue,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const l in this.sourceCaches)this.sourceCaches[l].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,l,d,f,y=!1){let w=!1,C=!1;const I={};for(const z of this._order){const L=this._layers[z];if(L.type!=="symbol")continue;if(!I[L.source]){const W=this.sourceCaches[L.source];I[L.source]=W.getRenderableIds(!0).map(J=>W.getTileByID(J)).sort((J,Q)=>Q.tileID.overscaledZ-J.tileID.overscaledZ||(J.tileID.isLessThan(Q.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(L,I[L.source],n.center.lng);w=w||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(T.now(),n.zoom))&&(this.pauseablePlacement=new Va(n,this.map.terrain,this._order,y,l,d,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(T.now()),C=!0),w&&this.pauseablePlacement.placement.setStale()),C||w)for(const z of this._order){const L=this._layers[z];L.type==="symbol"&&this.placement.updateLayerOpacities(L,I[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(T.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,l){return c._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const f=this.sourceCaches[l.source];return f&&f.setDependencies(l.tileID.key,l.type,l.icons),d})}getGlyphs(n,l){return c._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(l.stacks),f=this.sourceCaches[l.source];return f&&f.setDependencies(l.tileID.key,l.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,l={}){this._checkLoaded(),n&&this._validate(c.u.glyphs,"glyphs",n,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,l,d={},f){this._checkLoaded();const y=[{id:n,url:l}],w=[...we(this.stylesheet.sprite),...y];this._validate(c.u.sprite,"sprite",w,null,d)||(this.stylesheet.sprite=w,this._loadSprite(y,!0,f))}removeSprite(n){this._checkLoaded();const l=we(this.stylesheet.sprite);if(l.find(d=>d.id===n)){if(this._spritesImagesIds[n])for(const d of this._spritesImagesIds[n])this.imageManager.removeImage(d),this._changedImages[d]=!0;l.splice(l.findIndex(d=>d.id===n),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return we(this.stylesheet.sprite)}setSprite(n,l={},d){this._checkLoaded(),n&&this._validate(c.u.sprite,"sprite",n,null,l)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,d):(this._unloadSprite(),d&&d(null)))}}var ro=c.Y([{name:"a_pos",type:"Int16",components:2}]);const Ns={prelude:un(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:un(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:un(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:un(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:un("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:un(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:un(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:un("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:un("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:un("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:un(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:un(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:un(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:un(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:un(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:un(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:un(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:un(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:un(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:un(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:un(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:un(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:un(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:un(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:un(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:un(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:un("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:un("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:un("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:un("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function un(_,n){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=n.match(/attribute ([\w]+) ([\w]+)/g),f=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=y?y.concat(f):f,C={};return{fragmentSource:_=_.replace(l,(I,z,L,B,W)=>(C[W]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${W}
varying ${L} ${B} ${W};
#else
uniform ${L} ${B} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${L} ${B} ${W} = u_${W};
#endif
`)),vertexSource:n=n.replace(l,(I,z,L,B,W)=>{const J=B==="float"?"vec2":"vec4",Q=W.match(/color/)?"color":J;return C[W]?z==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${L} ${J} a_${W};
varying ${L} ${B} ${W};
#else
uniform ${L} ${B} u_${W};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${L} ${B} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${Q}(a_${W}, u_${W}_t);
#else
    ${L} ${B} ${W} = u_${W};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${L} ${J} a_${W};
#else
uniform ${L} ${B} u_${W};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${L} ${B} ${W} = a_${W};
#else
    ${L} ${B} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${L} ${B} ${W} = unpack_mix_${Q}(a_${W}, u_${W}_t);
#else
    ${L} ${B} ${W} = u_${W};
#endif
`}),staticAttributes:d,staticUniforms:w}}class Au{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,l,d,f,y,w,C,I,z){this.context=n;let L=this.boundPaintVertexBuffers.length!==f.length;for(let B=0;!L&&B<f.length;B++)this.boundPaintVertexBuffers[B]!==f[B]&&(L=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==d||L||this.boundIndexBuffer!==y||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==I||this.boundDynamicVertexBuffer3!==z?this.freshBind(l,d,f,y,w,C,I,z):(n.bindVertexArray.set(this.vao),C&&C.bind(),y&&y.dynamicDraw&&y.bind(),I&&I.bind(),z&&z.bind())}freshBind(n,l,d,f,y,w,C,I){const z=n.numAttributes,L=this.context,B=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=f,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=I,l.enableAttributes(B,n);for(const W of d)W.enableAttributes(B,n);w&&w.enableAttributes(B,n),C&&C.enableAttributes(B,n),I&&I.enableAttributes(B,n),l.bind(),l.setVertexAttribPointers(B,n,y);for(const W of d)W.bind(),W.setVertexAttribPointers(B,n,y);w&&(w.bind(),w.setVertexAttribPointers(B,n,y)),f&&f.bind(),C&&(C.bind(),C.setVertexAttribPointers(B,n,y)),I&&(I.bind(),I.setVertexAttribPointers(B,n,y)),L.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Mu=(_,n,l,d,f)=>({u_matrix:_,u_texture:0,u_ele_delta:n,u_fog_matrix:l,u_fog_color:d?d.properties.get("fog-color"):c.aM.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?d.calculateFogBlendOpacity(f):0,u_horizon_color:d?d.properties.get("horizon-color"):c.aM.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1});function Fo(_){const n=[];for(let l=0;l<_.length;l++){if(_[l]===null)continue;const d=_[l].split(" ");n.push(d.pop())}return n}class Du{constructor(n,l,d,f,y,w){const C=n.gl;this.program=C.createProgram();const I=Fo(l.staticAttributes),z=d?d.getBinderAttributes():[],L=I.concat(z),B=Ns.prelude.staticUniforms?Fo(Ns.prelude.staticUniforms):[],W=l.staticUniforms?Fo(l.staticUniforms):[],J=d?d.getBinderUniforms():[],Q=B.concat(W).concat(J),ae=[];for(const Ee of Q)ae.indexOf(Ee)<0&&ae.push(Ee);const ue=d?d.defines():[];y&&ue.push("#define OVERDRAW_INSPECTOR;"),w&&ue.push("#define TERRAIN3D;");const de=ue.concat(Ns.prelude.fragmentSource,l.fragmentSource).join(`
`),ge=ue.concat(Ns.prelude.vertexSource,l.vertexSource).join(`
`),se=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(se,de),C.compileShader(se),!C.getShaderParameter(se,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(se)}`);C.attachShader(this.program,se);const xe=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(xe,ge),C.compileShader(xe),!C.getShaderParameter(xe,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(xe)}`);C.attachShader(this.program,xe),this.attributes={};const Se={};this.numAttributes=L.length;for(let Ee=0;Ee<this.numAttributes;Ee++)L[Ee]&&(C.bindAttribLocation(this.program,Ee,L[Ee]),this.attributes[L[Ee]]=Ee);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(xe),C.deleteShader(se);for(let Ee=0;Ee<ae.length;Ee++){const Oe=ae[Ee];if(Oe&&!Se[Oe]){const Ge=C.getUniformLocation(this.program,Oe);Ge&&(Se[Oe]=Ge)}}this.fixedUniforms=f(n,Se),this.terrainUniforms=((Ee,Oe)=>({u_depth:new c.aH(Ee,Oe.u_depth),u_terrain:new c.aH(Ee,Oe.u_terrain),u_terrain_dim:new c.aI(Ee,Oe.u_terrain_dim),u_terrain_matrix:new c.aJ(Ee,Oe.u_terrain_matrix),u_terrain_unpack:new c.aK(Ee,Oe.u_terrain_unpack),u_terrain_exaggeration:new c.aI(Ee,Oe.u_terrain_exaggeration)}))(n,Se),this.binderUniforms=d?d.getUniforms(n,Se):[]}draw(n,l,d,f,y,w,C,I,z,L,B,W,J,Q,ae,ue,de,ge){const se=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(d),n.setStencilMode(f),n.setColorMode(y),n.setCullFace(w),I){n.activeTexture.set(se.TEXTURE2),se.bindTexture(se.TEXTURE_2D,I.depthTexture),n.activeTexture.set(se.TEXTURE3),se.bindTexture(se.TEXTURE_2D,I.texture);for(const Se in this.terrainUniforms)this.terrainUniforms[Se].set(I[Se])}for(const Se in this.fixedUniforms)this.fixedUniforms[Se].set(C[Se]);ae&&ae.setUniforms(n,this.binderUniforms,J,{zoom:Q});let xe=0;switch(l){case se.LINES:xe=2;break;case se.TRIANGLES:xe=3;break;case se.LINE_STRIP:xe=1}for(const Se of W.get()){const Ee=Se.vaos||(Se.vaos={});(Ee[z]||(Ee[z]=new Au)).bind(n,this,L,ae?ae.getPaintVertexBuffers():[],B,Se.vertexOffset,ue,de,ge),se.drawElements(l,Se.primitiveLength*xe,se.UNSIGNED_SHORT,Se.primitiveOffset*xe*2)}}}function Nl(_,n,l){const d=1/Yt(l,1,n.transform.tileZoom),f=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,n.transform.tileZoom)/f,w=y*(l.tileID.canonical.x+l.tileID.wrap*f),C=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[w>>16,C>>16],u_pixel_coord_lower:[65535&w,65535&C]}}const Ua=(_,n,l,d)=>{const f=n.style.light,y=f.properties.get("position"),w=[y.x,y.y,y.z],C=function(){var z=new c.A(9);return c.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();f.properties.get("anchor")==="viewport"&&function(z,L){var B=Math.sin(L),W=Math.cos(L);z[0]=W,z[1]=B,z[2]=0,z[3]=-B,z[4]=W,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(C,-n.transform.angle),function(z,L,B){var W=L[0],J=L[1],Q=L[2];z[0]=W*B[0]+J*B[3]+Q*B[6],z[1]=W*B[1]+J*B[4]+Q*B[7],z[2]=W*B[2]+J*B[5]+Q*B[8]}(w,w,C);const I=f.properties.get("color");return{u_matrix:_,u_lightpos:w,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+l,u_opacity:d}},jl=(_,n,l,d,f,y,w)=>c.e(Ua(_,n,l,d),Nl(y,n,w),{u_height_factor:-Math.pow(2,f.overscaledZ)/w.tileSize/8}),Oo=_=>({u_matrix:_}),Jd=(_,n,l,d)=>c.e(Oo(_),Nl(l,n,d)),cg=(_,n)=>({u_matrix:_,u_world:n}),Qd=(_,n,l,d,f)=>c.e(Jd(_,n,l,d),{u_world:f}),ug=(_,n,l,d)=>{const f=_.transform;let y,w;if(d.paint.get("circle-pitch-alignment")==="map"){const C=Yt(l,1,f.zoom);y=!0,w=[C,C]}else y=!1,w=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(n.posMatrix,l,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:w}},io=(_,n,l)=>({u_matrix:_,u_inv_matrix:n,u_camera_to_center_distance:l.cameraToCenterDistance,u_viewport_size:[l.width,l.height]}),$a=(_,n,l=1)=>({u_matrix:_,u_color:n,u_overlay:0,u_overlay_scale:l}),Xr=_=>({u_matrix:_}),Kr=(_,n,l,d)=>({u_matrix:_,u_extrude_scale:Yt(n,1,l),u_intensity:d}),Vl=(_,n,l,d)=>{const f=c.H();c.aP(f,0,_.width,_.height,0,0,1);const y=_.context.gl;return{u_matrix:f,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:l,u_color_ramp:d,u_opacity:n.paint.get("heatmap-opacity")}};function Ul(_,n){const l=Math.pow(2,n.canonical.z),d=n.canonical.y;return[new c.Z(0,d/l).toLngLat().lat,new c.Z(0,(d+1)/l).toLngLat().lat]}const $l=(_,n,l,d)=>{const f=_.transform;return{u_matrix:nf(_,n,l,d),u_ratio:1/Yt(n,1,f.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},ef=(_,n,l,d,f)=>c.e($l(_,n,l,f),{u_image:0,u_image_height:d}),No=(_,n,l,d,f)=>{const y=_.transform,w=tf(n,y);return{u_matrix:nf(_,n,l,f),u_texsize:n.imageAtlasTexture.size,u_ratio:1/Yt(n,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},hg=(_,n,l,d,f,y)=>{const w=_.lineAtlas,C=tf(n,_.transform),I=l.layout.get("line-cap")==="round",z=w.getDash(d.from,I),L=w.getDash(d.to,I),B=z.width*f.fromScale,W=L.width*f.toScale;return c.e($l(_,n,l,y),{u_patternscale_a:[C/B,-z.height/2],u_patternscale_b:[C/W,-L.height/2],u_sdfgamma:w.width/(256*Math.min(B,W)*_.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:L.y,u_mix:f.t})};function tf(_,n){return 1/Yt(_,1,n.tileZoom)}function nf(_,n,l,d){return _.translatePosMatrix(d?d.posMatrix:n.tileID.posMatrix,n,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const dg=(_,n,l,d,f)=>{return{u_matrix:_,u_tl_parent:n,u_scale_parent:l,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(w=f.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(y=f.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:fg(f.paint.get("raster-hue-rotate"))};var y,w};function fg(_){_*=Math.PI/180;const n=Math.sin(_),l=Math.cos(_);return[(2*l+1)/3,(-Math.sqrt(3)*n-l+1)/3,(Math.sqrt(3)*n-l+1)/3]}const rf=(_,n,l,d,f,y,w,C,I,z,L,B,W,J)=>{const Q=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Q.width/Q.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:I,u_coord_matrix:z,u_is_text:+B,u_pitch_with_map:+d,u_is_along_line:f,u_is_variable_anchor:y,u_texsize:W,u_texture:0,u_translation:L,u_pitched_scale:J}},Ha=(_,n,l,d,f,y,w,C,I,z,L,B,W,J,Q)=>{const ae=w.transform;return c.e(rf(_,n,l,d,f,y,w,C,I,z,L,B,W,Q),{u_gamma_scale:d?Math.cos(ae._pitch)*ae.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},zu=(_,n,l,d,f,y,w,C,I,z,L,B,W,J)=>c.e(Ha(_,n,l,d,f,y,w,C,I,z,L,!0,B,!0,J),{u_texsize_icon:W,u_texture_icon:1}),Hl=(_,n,l)=>({u_matrix:_,u_opacity:n,u_color:l}),Ru=(_,n,l,d,f,y)=>c.e(function(w,C,I,z){const L=I.imageManager.getPattern(w.from.toString()),B=I.imageManager.getPattern(w.to.toString()),{width:W,height:J}=I.imageManager.getPixelSize(),Q=Math.pow(2,z.tileID.overscaledZ),ae=z.tileSize*Math.pow(2,I.transform.tileZoom)/Q,ue=ae*(z.tileID.canonical.x+z.tileID.wrap*Q),de=ae*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[W,J],u_mix:C.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/Yt(z,1,I.transform.tileZoom),u_pixel_coord_upper:[ue>>16,de>>16],u_pixel_coord_lower:[65535&ue,65535&de]}}(d,y,l,f),{u_matrix:_,u_opacity:n}),Lu={fillExtrusion:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_lightpos:new c.aN(_,n.u_lightpos),u_lightintensity:new c.aI(_,n.u_lightintensity),u_lightcolor:new c.aN(_,n.u_lightcolor),u_vertical_gradient:new c.aI(_,n.u_vertical_gradient),u_opacity:new c.aI(_,n.u_opacity)}),fillExtrusionPattern:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_lightpos:new c.aN(_,n.u_lightpos),u_lightintensity:new c.aI(_,n.u_lightintensity),u_lightcolor:new c.aN(_,n.u_lightcolor),u_vertical_gradient:new c.aI(_,n.u_vertical_gradient),u_height_factor:new c.aI(_,n.u_height_factor),u_image:new c.aH(_,n.u_image),u_texsize:new c.aO(_,n.u_texsize),u_pixel_coord_upper:new c.aO(_,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(_,n.u_pixel_coord_lower),u_scale:new c.aN(_,n.u_scale),u_fade:new c.aI(_,n.u_fade),u_opacity:new c.aI(_,n.u_opacity)}),fill:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix)}),fillPattern:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_image:new c.aH(_,n.u_image),u_texsize:new c.aO(_,n.u_texsize),u_pixel_coord_upper:new c.aO(_,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(_,n.u_pixel_coord_lower),u_scale:new c.aN(_,n.u_scale),u_fade:new c.aI(_,n.u_fade)}),fillOutline:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_world:new c.aO(_,n.u_world)}),fillOutlinePattern:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_world:new c.aO(_,n.u_world),u_image:new c.aH(_,n.u_image),u_texsize:new c.aO(_,n.u_texsize),u_pixel_coord_upper:new c.aO(_,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(_,n.u_pixel_coord_lower),u_scale:new c.aN(_,n.u_scale),u_fade:new c.aI(_,n.u_fade)}),circle:(_,n)=>({u_camera_to_center_distance:new c.aI(_,n.u_camera_to_center_distance),u_scale_with_map:new c.aH(_,n.u_scale_with_map),u_pitch_with_map:new c.aH(_,n.u_pitch_with_map),u_extrude_scale:new c.aO(_,n.u_extrude_scale),u_device_pixel_ratio:new c.aI(_,n.u_device_pixel_ratio),u_matrix:new c.aJ(_,n.u_matrix)}),collisionBox:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_pixel_extrude_scale:new c.aO(_,n.u_pixel_extrude_scale)}),collisionCircle:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_inv_matrix:new c.aJ(_,n.u_inv_matrix),u_camera_to_center_distance:new c.aI(_,n.u_camera_to_center_distance),u_viewport_size:new c.aO(_,n.u_viewport_size)}),debug:(_,n)=>({u_color:new c.aL(_,n.u_color),u_matrix:new c.aJ(_,n.u_matrix),u_overlay:new c.aH(_,n.u_overlay),u_overlay_scale:new c.aI(_,n.u_overlay_scale)}),clippingMask:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix)}),heatmap:(_,n)=>({u_extrude_scale:new c.aI(_,n.u_extrude_scale),u_intensity:new c.aI(_,n.u_intensity),u_matrix:new c.aJ(_,n.u_matrix)}),heatmapTexture:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_world:new c.aO(_,n.u_world),u_image:new c.aH(_,n.u_image),u_color_ramp:new c.aH(_,n.u_color_ramp),u_opacity:new c.aI(_,n.u_opacity)}),hillshade:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_image:new c.aH(_,n.u_image),u_latrange:new c.aO(_,n.u_latrange),u_light:new c.aO(_,n.u_light),u_shadow:new c.aL(_,n.u_shadow),u_highlight:new c.aL(_,n.u_highlight),u_accent:new c.aL(_,n.u_accent)}),hillshadePrepare:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_image:new c.aH(_,n.u_image),u_dimension:new c.aO(_,n.u_dimension),u_zoom:new c.aI(_,n.u_zoom),u_unpack:new c.aK(_,n.u_unpack)}),line:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_ratio:new c.aI(_,n.u_ratio),u_device_pixel_ratio:new c.aI(_,n.u_device_pixel_ratio),u_units_to_pixels:new c.aO(_,n.u_units_to_pixels)}),lineGradient:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_ratio:new c.aI(_,n.u_ratio),u_device_pixel_ratio:new c.aI(_,n.u_device_pixel_ratio),u_units_to_pixels:new c.aO(_,n.u_units_to_pixels),u_image:new c.aH(_,n.u_image),u_image_height:new c.aI(_,n.u_image_height)}),linePattern:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_texsize:new c.aO(_,n.u_texsize),u_ratio:new c.aI(_,n.u_ratio),u_device_pixel_ratio:new c.aI(_,n.u_device_pixel_ratio),u_image:new c.aH(_,n.u_image),u_units_to_pixels:new c.aO(_,n.u_units_to_pixels),u_scale:new c.aN(_,n.u_scale),u_fade:new c.aI(_,n.u_fade)}),lineSDF:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_ratio:new c.aI(_,n.u_ratio),u_device_pixel_ratio:new c.aI(_,n.u_device_pixel_ratio),u_units_to_pixels:new c.aO(_,n.u_units_to_pixels),u_patternscale_a:new c.aO(_,n.u_patternscale_a),u_patternscale_b:new c.aO(_,n.u_patternscale_b),u_sdfgamma:new c.aI(_,n.u_sdfgamma),u_image:new c.aH(_,n.u_image),u_tex_y_a:new c.aI(_,n.u_tex_y_a),u_tex_y_b:new c.aI(_,n.u_tex_y_b),u_mix:new c.aI(_,n.u_mix)}),raster:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_tl_parent:new c.aO(_,n.u_tl_parent),u_scale_parent:new c.aI(_,n.u_scale_parent),u_buffer_scale:new c.aI(_,n.u_buffer_scale),u_fade_t:new c.aI(_,n.u_fade_t),u_opacity:new c.aI(_,n.u_opacity),u_image0:new c.aH(_,n.u_image0),u_image1:new c.aH(_,n.u_image1),u_brightness_low:new c.aI(_,n.u_brightness_low),u_brightness_high:new c.aI(_,n.u_brightness_high),u_saturation_factor:new c.aI(_,n.u_saturation_factor),u_contrast_factor:new c.aI(_,n.u_contrast_factor),u_spin_weights:new c.aN(_,n.u_spin_weights)}),symbolIcon:(_,n)=>({u_is_size_zoom_constant:new c.aH(_,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(_,n.u_is_size_feature_constant),u_size_t:new c.aI(_,n.u_size_t),u_size:new c.aI(_,n.u_size),u_camera_to_center_distance:new c.aI(_,n.u_camera_to_center_distance),u_pitch:new c.aI(_,n.u_pitch),u_rotate_symbol:new c.aH(_,n.u_rotate_symbol),u_aspect_ratio:new c.aI(_,n.u_aspect_ratio),u_fade_change:new c.aI(_,n.u_fade_change),u_matrix:new c.aJ(_,n.u_matrix),u_label_plane_matrix:new c.aJ(_,n.u_label_plane_matrix),u_coord_matrix:new c.aJ(_,n.u_coord_matrix),u_is_text:new c.aH(_,n.u_is_text),u_pitch_with_map:new c.aH(_,n.u_pitch_with_map),u_is_along_line:new c.aH(_,n.u_is_along_line),u_is_variable_anchor:new c.aH(_,n.u_is_variable_anchor),u_texsize:new c.aO(_,n.u_texsize),u_texture:new c.aH(_,n.u_texture),u_translation:new c.aO(_,n.u_translation),u_pitched_scale:new c.aI(_,n.u_pitched_scale)}),symbolSDF:(_,n)=>({u_is_size_zoom_constant:new c.aH(_,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(_,n.u_is_size_feature_constant),u_size_t:new c.aI(_,n.u_size_t),u_size:new c.aI(_,n.u_size),u_camera_to_center_distance:new c.aI(_,n.u_camera_to_center_distance),u_pitch:new c.aI(_,n.u_pitch),u_rotate_symbol:new c.aH(_,n.u_rotate_symbol),u_aspect_ratio:new c.aI(_,n.u_aspect_ratio),u_fade_change:new c.aI(_,n.u_fade_change),u_matrix:new c.aJ(_,n.u_matrix),u_label_plane_matrix:new c.aJ(_,n.u_label_plane_matrix),u_coord_matrix:new c.aJ(_,n.u_coord_matrix),u_is_text:new c.aH(_,n.u_is_text),u_pitch_with_map:new c.aH(_,n.u_pitch_with_map),u_is_along_line:new c.aH(_,n.u_is_along_line),u_is_variable_anchor:new c.aH(_,n.u_is_variable_anchor),u_texsize:new c.aO(_,n.u_texsize),u_texture:new c.aH(_,n.u_texture),u_gamma_scale:new c.aI(_,n.u_gamma_scale),u_device_pixel_ratio:new c.aI(_,n.u_device_pixel_ratio),u_is_halo:new c.aH(_,n.u_is_halo),u_translation:new c.aO(_,n.u_translation),u_pitched_scale:new c.aI(_,n.u_pitched_scale)}),symbolTextAndIcon:(_,n)=>({u_is_size_zoom_constant:new c.aH(_,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(_,n.u_is_size_feature_constant),u_size_t:new c.aI(_,n.u_size_t),u_size:new c.aI(_,n.u_size),u_camera_to_center_distance:new c.aI(_,n.u_camera_to_center_distance),u_pitch:new c.aI(_,n.u_pitch),u_rotate_symbol:new c.aH(_,n.u_rotate_symbol),u_aspect_ratio:new c.aI(_,n.u_aspect_ratio),u_fade_change:new c.aI(_,n.u_fade_change),u_matrix:new c.aJ(_,n.u_matrix),u_label_plane_matrix:new c.aJ(_,n.u_label_plane_matrix),u_coord_matrix:new c.aJ(_,n.u_coord_matrix),u_is_text:new c.aH(_,n.u_is_text),u_pitch_with_map:new c.aH(_,n.u_pitch_with_map),u_is_along_line:new c.aH(_,n.u_is_along_line),u_is_variable_anchor:new c.aH(_,n.u_is_variable_anchor),u_texsize:new c.aO(_,n.u_texsize),u_texsize_icon:new c.aO(_,n.u_texsize_icon),u_texture:new c.aH(_,n.u_texture),u_texture_icon:new c.aH(_,n.u_texture_icon),u_gamma_scale:new c.aI(_,n.u_gamma_scale),u_device_pixel_ratio:new c.aI(_,n.u_device_pixel_ratio),u_is_halo:new c.aH(_,n.u_is_halo),u_translation:new c.aO(_,n.u_translation),u_pitched_scale:new c.aI(_,n.u_pitched_scale)}),background:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_opacity:new c.aI(_,n.u_opacity),u_color:new c.aL(_,n.u_color)}),backgroundPattern:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_opacity:new c.aI(_,n.u_opacity),u_image:new c.aH(_,n.u_image),u_pattern_tl_a:new c.aO(_,n.u_pattern_tl_a),u_pattern_br_a:new c.aO(_,n.u_pattern_br_a),u_pattern_tl_b:new c.aO(_,n.u_pattern_tl_b),u_pattern_br_b:new c.aO(_,n.u_pattern_br_b),u_texsize:new c.aO(_,n.u_texsize),u_mix:new c.aI(_,n.u_mix),u_pattern_size_a:new c.aO(_,n.u_pattern_size_a),u_pattern_size_b:new c.aO(_,n.u_pattern_size_b),u_scale_a:new c.aI(_,n.u_scale_a),u_scale_b:new c.aI(_,n.u_scale_b),u_pixel_coord_upper:new c.aO(_,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aO(_,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aI(_,n.u_tile_units_to_pixels)}),terrain:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_texture:new c.aH(_,n.u_texture),u_ele_delta:new c.aI(_,n.u_ele_delta),u_fog_matrix:new c.aJ(_,n.u_fog_matrix),u_fog_color:new c.aL(_,n.u_fog_color),u_fog_ground_blend:new c.aI(_,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.aI(_,n.u_fog_ground_blend_opacity),u_horizon_color:new c.aL(_,n.u_horizon_color),u_horizon_fog_blend:new c.aI(_,n.u_horizon_fog_blend)}),terrainDepth:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_ele_delta:new c.aI(_,n.u_ele_delta)}),terrainCoords:(_,n)=>({u_matrix:new c.aJ(_,n.u_matrix),u_texture:new c.aH(_,n.u_texture),u_terrain_coords_id:new c.aI(_,n.u_terrain_coords_id),u_ele_delta:new c.aI(_,n.u_ele_delta)}),sky:(_,n)=>({u_sky_color:new c.aL(_,n.u_sky_color),u_horizon_color:new c.aL(_,n.u_horizon_color),u_horizon:new c.aI(_,n.u_horizon),u_sky_horizon_blend:new c.aI(_,n.u_sky_horizon_blend)})};class os{constructor(n,l,d){this.context=n;const f=n.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pg={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Bu{constructor(n,l,d,f){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=f,this.context=n;const y=n.gl;this.buffer=y.createBuffer(),n.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,l){for(let d=0;d<this.attributes.length;d++){const f=l.attributes[this.attributes[d].name];f!==void 0&&n.enableVertexAttribArray(f)}}setVertexAttribPointers(n,l,d){for(let f=0;f<this.attributes.length;f++){const y=this.attributes[f],w=l.attributes[y.name];w!==void 0&&n.vertexAttribPointer(w,y.components,n[pg[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const so=new WeakMap;function js(_){var n;if(so.has(_))return so.get(_);{const l=(n=_.getParameter(_.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return so.set(_,l),l}}class dn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Gl extends dn{getDefault(){return c.aM.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class mg extends dn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class jo extends dn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class gg extends dn{getDefault(){return[!0,!0,!0,!0]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class sf extends dn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class yg extends dn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class of extends dn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const l=this.current;(n.func!==l.func||n.ref!==l.ref||n.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Fu extends dn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class af extends dn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=n,this.dirty=!1}}class lf extends dn{getDefault(){return[0,1]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class cf extends dn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=n,this.dirty=!1}}class uf extends dn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class oo extends dn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.BLEND):l.disable(l.BLEND),this.current=n,this.dirty=!1}}class hf extends dn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class _g extends dn{getDefault(){return c.aM.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class df extends dn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Ga extends dn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=n,this.dirty=!1}}class vg extends dn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Wl extends dn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class xg extends dn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class bg extends dn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class ff extends dn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class pf extends dn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class mf extends dn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ou extends dn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class gf extends dn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class ql extends dn{getDefault(){return null}set(n){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class ws extends dn{getDefault(){return null}set(n){var l;if(n===this.current&&!this.dirty)return;const d=this.gl;js(d)?d.bindVertexArray(n):(l=d.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Nu extends dn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class ju extends dn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Vu extends dn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Zl extends dn{constructor(n,l){super(n),this.context=n,this.parent=l}getDefault(){return null}}class Uu extends Zl{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class ao extends Zl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class $u extends Zl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class wg{constructor(n,l,d,f,y){this.context=n,this.width=l,this.height=d;const w=n.gl,C=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new Uu(n,C),f)this.depthAttachment=y?new $u(n,C):new ao(n,C);else if(y)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,l=this.colorAttachment.get();if(l&&n.deleteTexture(l),this.depthAttachment){const d=this.depthAttachment.get();d&&n.deleteRenderbuffer(d)}n.deleteFramebuffer(this.framebuffer)}}class Vn{constructor(n,l,d){this.blendFunction=n,this.blendColor=l,this.mask=d}}Vn.Replace=[1,0],Vn.disabled=new Vn(Vn.Replace,c.aM.transparent,[!1,!1,!1,!1]),Vn.unblended=new Vn(Vn.Replace,c.aM.transparent,[!0,!0,!0,!0]),Vn.alphaBlended=new Vn([1,771],c.aM.transparent,[!0,!0,!0,!0]);class Sg{constructor(n){var l,d;if(this.gl=n,this.clearColor=new Gl(this),this.clearDepth=new mg(this),this.clearStencil=new jo(this),this.colorMask=new gg(this),this.depthMask=new sf(this),this.stencilMask=new yg(this),this.stencilFunc=new of(this),this.stencilOp=new Fu(this),this.stencilTest=new af(this),this.depthRange=new lf(this),this.depthTest=new cf(this),this.depthFunc=new uf(this),this.blend=new oo(this),this.blendFunc=new hf(this),this.blendColor=new _g(this),this.blendEquation=new df(this),this.cullFace=new Ga(this),this.cullFaceSide=new vg(this),this.frontFace=new Wl(this),this.program=new xg(this),this.activeTexture=new bg(this),this.viewport=new ff(this),this.bindFramebuffer=new pf(this),this.bindRenderbuffer=new mf(this),this.bindTexture=new Ou(this),this.bindVertexBuffer=new gf(this),this.bindElementBuffer=new ql(this),this.bindVertexArray=new ws(this),this.pixelStoreUnpack=new Nu(this),this.pixelStoreUnpackPremultiplyAlpha=new ju(this),this.pixelStoreUnpackFlipY=new Vu(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),js(n)){this.HALF_FLOAT=n.HALF_FLOAT;const f=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=n.RGBA16F)!==null&&l!==void 0?l:f==null?void 0:f.RGBA16F_EXT,this.RGB16F=(d=n.RGB16F)!==null&&d!==void 0?d:f==null?void 0:f.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const f=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=f==null?void 0:f.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,l){return new os(this,n,l)}createVertexBuffer(n,l,d){return new Bu(this,n,l,d)}createRenderbuffer(n,l,d){const f=this.gl,y=f.createRenderbuffer();return this.bindRenderbuffer.set(y),f.renderbufferStorage(f.RENDERBUFFER,n,l,d),this.bindRenderbuffer.set(null),y}createFramebuffer(n,l,d,f){return new wg(this,n,l,d,f)}clear({color:n,depth:l,stencil:d}){const f=this.gl;let y=0;n&&(y|=f.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(y|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d!==void 0&&(y|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),f.clear(y)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){c.aE(n.blendFunction,Vn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return js(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var l;return js(this.gl)?this.gl.deleteVertexArray(n):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class Wt{constructor(n,l,d){this.func=n,this.mask=l,this.range=d}}Wt.ReadOnly=!1,Wt.ReadWrite=!0,Wt.disabled=new Wt(519,Wt.ReadOnly,[0,1]);const Xl=7680;class kn{constructor(n,l,d,f,y,w){this.test=n,this.ref=l,this.mask=d,this.fail=f,this.depthFail=y,this.pass=w}}kn.disabled=new kn({func:519,mask:0},0,0,Xl,Xl,Xl);class yn{constructor(n,l,d){this.enable=n,this.mode=l,this.frontFace=d}}let lo;function Wa(_,n,l,d,f){const y=_.context,w=y.gl,C=_.useProgram("collisionBox"),I=[];let z=0,L=0;for(let de=0;de<d.length;de++){const ge=d[de],se=n.getTile(ge).getBucket(l);if(!se)continue;const xe=f?se.textCollisionBox:se.iconCollisionBox,Se=se.collisionCircleArray;if(Se.length>0){const Ee=c.H();c.aQ(Ee,se.placementInvProjMatrix,_.transform.glCoordMatrix),c.aQ(Ee,Ee,se.placementViewportMatrix),I.push({circleArray:Se,circleOffset:L,transform:ge.posMatrix,invTransform:Ee,coord:ge}),z+=Se.length/4,L=z}xe&&C.draw(y,w.LINES,Wt.disabled,kn.disabled,_.colorModeForRenderPass(),yn.disabled,{u_matrix:ge.posMatrix,u_pixel_extrude_scale:[1/(B=_.transform).width,1/B.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(ge),l.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,null,_.transform.zoom,null,null,xe.collisionVertexBuffer)}var B;if(!f||!I.length)return;const W=_.useProgram("collisionCircle"),J=new c.aR;J.resize(4*z),J._trim();let Q=0;for(const de of I)for(let ge=0;ge<de.circleArray.length/4;ge++){const se=4*ge,xe=de.circleArray[se+0],Se=de.circleArray[se+1],Ee=de.circleArray[se+2],Oe=de.circleArray[se+3];J.emplace(Q++,xe,Se,Ee,Oe,0),J.emplace(Q++,xe,Se,Ee,Oe,1),J.emplace(Q++,xe,Se,Ee,Oe,2),J.emplace(Q++,xe,Se,Ee,Oe,3)}(!lo||lo.length<2*z)&&(lo=function(de){const ge=2*de,se=new c.aT;se.resize(ge),se._trim();for(let xe=0;xe<ge;xe++){const Se=6*xe;se.uint16[Se+0]=4*xe+0,se.uint16[Se+1]=4*xe+1,se.uint16[Se+2]=4*xe+2,se.uint16[Se+3]=4*xe+2,se.uint16[Se+4]=4*xe+3,se.uint16[Se+5]=4*xe+0}return se}(z));const ae=y.createIndexBuffer(lo,!0),ue=y.createVertexBuffer(J,c.aS.members,!0);for(const de of I){const ge=io(de.transform,de.invTransform,_.transform);W.draw(y,w.TRIANGLES,Wt.disabled,kn.disabled,_.colorModeForRenderPass(),yn.disabled,ge,_.style.map.terrain&&_.style.map.terrain.getTerrainData(de.coord),l.id,ue,ae,c.a0.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,_.transform.zoom,null,null,null)}ue.destroy(),ae.destroy()}yn.disabled=new yn(!1,1029,2305),yn.backCCW=new yn(!0,1029,2305);const qa=c.an(new Float32Array(16));function Hu(_,n,l,d,f,y){const{horizontalAlign:w,verticalAlign:C}=c.au(_);return new c.P((-(w-.5)*n/f+d[0])*y,(-(C-.5)*l/f+d[1])*y)}function co(_,n,l,d,f,y){const w=n.tileAnchorPoint.add(new c.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let C=d.mult(y);l||(C=C.rotate(-f));const I=w.add(C);return ie(I.x,I.y,n.labelPlaneMatrix,n.getElevation).point}if(l){const C=Ie(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(_),I=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return _.add(d.rotate(I))}return _.add(d)}function Vo(_,n,l,d,f,y,w,C,I,z,L,B,W,J){const Q=_.text.placedSymbolArray,ae=_.text.dynamicLayoutVertexArray,ue=_.icon.dynamicLayoutVertexArray,de={};ae.clear();for(let ge=0;ge<Q.length;ge++){const se=Q.get(ge),xe=se.hidden||!se.crossTileID||_.allowVerticalPlacement&&!se.placedOrientation?null:d[se.crossTileID];if(xe){const Se=new c.P(se.anchorX,se.anchorY),Ee={getElevation:J,width:f.width,height:f.height,labelPlaneMatrix:y,pitchWithMap:l,projection:L,tileAnchorPoint:Se,translation:B,unwrappedTileID:W},Oe=l?ie(Se.x,Se.y,w,J):Ie(Se.x,Se.y,Ee),Ge=O(f.cameraToCenterDistance,Oe.signedDistanceFromCamera);let tt=c.ai(_.textSizeData,I,se)*Ge/c.ap;l&&(tt*=_.tilePixelRatio/C);const{width:lt,height:Je,anchor:Ye,textOffset:gt,textBoxScale:Ot}=xe,Qe=Hu(Ye,lt,Je,gt,Ot,tt),st=L.getPitchedTextCorrection(f,Se.add(new c.P(B[0],B[1])),W),Bt=co(Oe.point,Ee,n,Qe,f.angle,st),In=_.allowVerticalPlacement&&se.placedOrientation===c.ah.vertical?Math.PI/2:0;for(let $t=0;$t<se.numGlyphs;$t++)c.aj(ae,Bt,In);z&&se.associatedIconIndex>=0&&(de[se.associatedIconIndex]={shiftedAnchor:Bt,angle:In})}else It(se.numGlyphs,ae)}if(z){ue.clear();const ge=_.icon.placedSymbolArray;for(let se=0;se<ge.length;se++){const xe=ge.get(se);if(xe.hidden)It(xe.numGlyphs,ue);else{const Se=de[se];if(Se)for(let Ee=0;Ee<xe.numGlyphs;Ee++)c.aj(ue,Se.shiftedAnchor,Se.angle);else It(xe.numGlyphs,ue)}}_.icon.dynamicLayoutVertexBuffer.updateData(ue)}_.text.dynamicLayoutVertexBuffer.updateData(ae)}function Ci(_,n,l){return l.iconsInText&&n?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Gu(_,n,l,d,f,y,w,C,I,z,L,B){const W=_.context,J=W.gl,Q=_.transform,ae=no(),ue=C==="map",de=I==="map",ge=C!=="viewport"&&l.layout.get("symbol-placement")!=="point",se=ue&&!de&&!ge,xe=!de&&ge,Se=!l.layout.get("symbol-sort-key").isConstant();let Ee=!1;const Oe=_.depthModeForSublayer(0,Wt.ReadOnly),Ge=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),tt=[],lt=ae.getCircleRadiusCorrection(Q);for(const Je of d){const Ye=n.getTile(Je),gt=Ye.getBucket(l);if(!gt)continue;const Ot=f?gt.text:gt.icon;if(!Ot||!Ot.segments.get().length||!Ot.hasVisibleVertices)continue;const Qe=Ot.programConfigurations.get(l.id),st=f||gt.sdfIcons,Bt=f?gt.textSizeData:gt.iconSizeData,In=de||Q.pitch!==0,$t=_.useProgram(Ci(st,f,gt),Qe),Jt=c.ag(Bt,Q.zoom),An=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Je);let Ar,qi,Mn,Yr,jr=[0,0],Mr=null;if(f)qi=Ye.glyphAtlasTexture,Mn=J.LINEAR,Ar=Ye.glyphAtlasTexture.size,gt.iconsInText&&(jr=Ye.imageAtlasTexture.size,Mr=Ye.imageAtlasTexture,Yr=In||_.options.rotating||_.options.zooming||Bt.kind==="composite"||Bt.kind==="camera"?J.LINEAR:J.NEAREST);else{const en=l.layout.get("icon-size").constantOr(0)!==1||gt.iconsNeedLinear;qi=Ye.imageAtlasTexture,Mn=st||_.options.rotating||_.options.zooming||en||In?J.LINEAR:J.NEAREST,Ar=Ye.imageAtlasTexture.size}const Vr=Yt(Ye,1,_.transform.zoom),cs=xe?Je.posMatrix:qa,na=Kt(cs,de,ue,_.transform,Vr),pc=jt(cs,de,ue,_.transform,Vr),ra=jt(Je.posMatrix,de,ue,_.transform,Vr),Ii=ae.translatePosition(_.transform,Ye,y,w),mc=Ge&&gt.hasTextData(),gh=l.layout.get("icon-text-fit")!=="none"&&mc&&gt.hasIconData();if(ge){const en=_.style.map.terrain?(ia,sa)=>_.style.map.terrain.getElevation(Je,ia,sa):null,mo=l.layout.get("text-rotation-alignment")==="map";Z(gt,Je.posMatrix,_,f,na,ra,de,z,mo,ae,Je.toUnwrapped(),Q.width,Q.height,Ii,en)}const Ai=Je.posMatrix,Mi=f&&Ge||gh,Vs=ge||Mi?qa:na,Zi=pc,br=st&&l.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Dr;Dr=st?gt.iconsInText?zu(Bt.kind,Jt,se,de,ge,Mi,_,Ai,Vs,Zi,Ii,Ar,jr,lt):Ha(Bt.kind,Jt,se,de,ge,Mi,_,Ai,Vs,Zi,Ii,f,Ar,!0,lt):rf(Bt.kind,Jt,se,de,ge,Mi,_,Ai,Vs,Zi,Ii,f,Ar,lt);const pi={program:$t,buffers:Ot,uniformValues:Dr,atlasTexture:qi,atlasTextureIcon:Mr,atlasInterpolation:Mn,atlasInterpolationIcon:Yr,isSDF:st,hasHalo:br};if(Se&&gt.canOverlap){Ee=!0;const en=Ot.segments.get();for(const mo of en)tt.push({segments:new c.a0([mo]),sortKey:mo.sortKey,state:pi,terrainData:An})}else tt.push({segments:Ot.segments,sortKey:0,state:pi,terrainData:An})}Ee&&tt.sort((Je,Ye)=>Je.sortKey-Ye.sortKey);for(const Je of tt){const Ye=Je.state;if(W.activeTexture.set(J.TEXTURE0),Ye.atlasTexture.bind(Ye.atlasInterpolation,J.CLAMP_TO_EDGE),Ye.atlasTextureIcon&&(W.activeTexture.set(J.TEXTURE1),Ye.atlasTextureIcon&&Ye.atlasTextureIcon.bind(Ye.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),Ye.isSDF){const gt=Ye.uniformValues;Ye.hasHalo&&(gt.u_is_halo=1,Wu(Ye.buffers,Je.segments,l,_,Ye.program,Oe,L,B,gt,Je.terrainData)),gt.u_is_halo=0}Wu(Ye.buffers,Je.segments,l,_,Ye.program,Oe,L,B,Ye.uniformValues,Je.terrainData)}}function Wu(_,n,l,d,f,y,w,C,I,z){const L=d.context;f.draw(L,L.gl.TRIANGLES,y,w,C,yn.disabled,I,z,l.id,_.layoutVertexBuffer,_.indexBuffer,n,l.paint,d.transform.zoom,_.programConfigurations.get(l.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function qu(_,n,l,d){const f=_.context,y=f.gl,w=kn.disabled,C=new Vn([y.ONE,y.ONE],c.aM.transparent,[!0,!0,!0,!0]),I=n.getBucket(l);if(!I)return;const z=d.key;let L=l.heatmapFbos.get(z);L||(L=Za(f,n.tileSize,n.tileSize),l.heatmapFbos.set(z,L)),f.bindFramebuffer.set(L.framebuffer),f.viewport.set([0,0,n.tileSize,n.tileSize]),f.clear({color:c.aM.transparent});const B=I.programConfigurations.get(l.id),W=_.useProgram("heatmap",B),J=_.style.map.terrain.getTerrainData(d);W.draw(f,y.TRIANGLES,Wt.disabled,w,C,yn.disabled,Kr(d.posMatrix,n,_.transform.zoom,l.paint.get("heatmap-intensity")),J,l.id,I.layoutVertexBuffer,I.indexBuffer,I.segments,l.paint,_.transform.zoom,B)}function uo(_,n,l){const d=_.context,f=d.gl;d.setColorMode(_.colorModeForRenderPass());const y=Xa(d,n),w=l.key,C=n.heatmapFbos.get(w);C&&(d.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,C.colorAttachment.get()),d.activeTexture.set(f.TEXTURE1),y.bind(f.LINEAR,f.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(d,f.TRIANGLES,Wt.disabled,kn.disabled,_.colorModeForRenderPass(),yn.disabled,Vl(_,n,0,1),null,n.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,n.paint,_.transform.zoom),C.destroy(),n.heatmapFbos.delete(w))}function Za(_,n,l){var d,f;const y=_.gl,w=y.createTexture();y.bindTexture(y.TEXTURE_2D,w),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const C=(d=_.HALF_FLOAT)!==null&&d!==void 0?d:y.UNSIGNED_BYTE,I=(f=_.RGBA16F)!==null&&f!==void 0?f:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,I,n,l,0,y.RGBA,C,null);const z=_.createFramebuffer(n,l,!1,!1);return z.colorAttachment.set(w),z}function Xa(_,n){return n.colorRampTexture||(n.colorRampTexture=new ze(_,n.colorRamp,_.gl.RGBA)),n.colorRampTexture}function Uo(_,n,l,d,f){if(!l||!d||!d.imageAtlas)return;const y=d.imageAtlas.patternPositions;let w=y[l.to.toString()],C=y[l.from.toString()];if(!w&&C&&(w=C),!C&&w&&(C=w),!w||!C){const I=f.getPaintProperty(n);w=y[I],C=y[I]}w&&C&&_.setConstantPatternPositions(w,C)}function Ka(_,n,l,d,f,y,w){const C=_.context.gl,I="fill-pattern",z=l.paint.get(I),L=z&&z.constantOr(1),B=l.getCrossfadeParameters();let W,J,Q,ae,ue;w?(J=L&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",W=C.LINES):(J=L?"fillPattern":"fill",W=C.TRIANGLES);const de=z.constantOr(null);for(const ge of d){const se=n.getTile(ge);if(L&&!se.patternsLoaded())continue;const xe=se.getBucket(l);if(!xe)continue;const Se=xe.programConfigurations.get(l.id),Ee=_.useProgram(J,Se),Oe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ge);L&&(_.context.activeTexture.set(C.TEXTURE0),se.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Se.updatePaintBuffers(B)),Uo(Se,I,de,se,l);const Ge=Oe?ge:null,tt=_.translatePosMatrix(Ge?Ge.posMatrix:ge.posMatrix,se,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(w){ae=xe.indexBuffer2,ue=xe.segments2;const lt=[C.drawingBufferWidth,C.drawingBufferHeight];Q=J==="fillOutlinePattern"&&L?Qd(tt,_,B,se,lt):cg(tt,lt)}else ae=xe.indexBuffer,ue=xe.segments,Q=L?Jd(tt,_,B,se):Oo(tt);Ee.draw(_.context,W,f,_.stencilModeForClipping(ge),y,yn.disabled,Q,Oe,l.id,xe.layoutVertexBuffer,ae,ue,l.paint,_.transform.zoom,Se)}}function Kl(_,n,l,d,f,y,w){const C=_.context,I=C.gl,z="fill-extrusion-pattern",L=l.paint.get(z),B=L.constantOr(1),W=l.getCrossfadeParameters(),J=l.paint.get("fill-extrusion-opacity"),Q=L.constantOr(null);for(const ae of d){const ue=n.getTile(ae),de=ue.getBucket(l);if(!de)continue;const ge=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae),se=de.programConfigurations.get(l.id),xe=_.useProgram(B?"fillExtrusionPattern":"fillExtrusion",se);B&&(_.context.activeTexture.set(I.TEXTURE0),ue.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),se.updatePaintBuffers(W)),Uo(se,z,Q,ue,l);const Se=_.translatePosMatrix(ae.posMatrix,ue,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Ee=l.paint.get("fill-extrusion-vertical-gradient"),Oe=B?jl(Se,_,Ee,J,ae,W,ue):Ua(Se,_,Ee,J);xe.draw(C,C.gl.TRIANGLES,f,y,w,yn.backCCW,Oe,ge,l.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,l.paint,_.transform.zoom,se,_.style.map.terrain&&de.centroidVertexBuffer)}}function $o(_,n,l,d,f,y,w){const C=_.context,I=C.gl,z=l.fbo;if(!z)return;const L=_.useProgram("hillshade"),B=_.style.map.terrain&&_.style.map.terrain.getTerrainData(n);C.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,z.colorAttachment.get()),L.draw(C,I.TRIANGLES,f,y,w,yn.disabled,((W,J,Q,ae)=>{const ue=Q.paint.get("hillshade-shadow-color"),de=Q.paint.get("hillshade-highlight-color"),ge=Q.paint.get("hillshade-accent-color");let se=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(se-=W.transform.angle);const xe=!W.options.moving;return{u_matrix:ae?ae.posMatrix:W.transform.calculatePosMatrix(J.tileID.toUnwrapped(),xe),u_image:0,u_latrange:Ul(0,J.tileID),u_light:[Q.paint.get("hillshade-exaggeration"),se],u_shadow:ue,u_highlight:de,u_accent:ge}})(_,l,d,B?n:null),B,d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function Ho(_,n,l,d,f,y){const w=_.context,C=w.gl,I=n.dem;if(I&&I.data){const z=I.dim,L=I.stride,B=I.getPixels();if(w.activeTexture.set(C.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||_.getTileTexture(L),n.demTexture){const J=n.demTexture;J.update(B,{premultiply:!1}),J.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else n.demTexture=new ze(w,B,C.RGBA,{premultiply:!1}),n.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);w.activeTexture.set(C.TEXTURE0);let W=n.fbo;if(!W){const J=new ze(w,{width:z,height:z,data:null},C.RGBA);J.bind(C.LINEAR,C.CLAMP_TO_EDGE),W=n.fbo=w.createFramebuffer(z,z,!0,!1),W.colorAttachment.set(J.texture)}w.bindFramebuffer.set(W.framebuffer),w.viewport.set([0,0,z,z]),_.useProgram("hillshadePrepare").draw(w,C.TRIANGLES,d,f,y,yn.disabled,((J,Q)=>{const ae=Q.stride,ue=c.H();return c.aP(ue,0,c.X,-c.X,0,0,1),c.J(ue,ue,[0,-c.X,0]),{u_matrix:ue,u_image:1,u_dimension:[ae,ae],u_zoom:J.overscaledZ,u_unpack:Q.getUnpackVector()}})(n.tileID,I),null,l.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function yf(_,n,l,d,f,y){const w=d.paint.get("raster-fade-duration");if(!y&&w>0){const C=T.now(),I=(C-_.timeAdded)/w,z=n?(C-n.timeAdded)/w:-1,L=l.getSource(),B=f.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),W=!n||Math.abs(n.tileID.overscaledZ-B)>Math.abs(_.tileID.overscaledZ-B),J=W&&_.refreshedUponExpiration?1:c.ac(W?I:1-z,0,1);return _.refreshedUponExpiration&&I>=1&&(_.refreshedUponExpiration=!1),n?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}const Zu=new c.aM(1,0,0,1),an=new c.aM(0,1,0,1),Yl=new c.aM(0,0,1,1),kg=new c.aM(1,0,1,1),_f=new c.aM(0,1,1,1);function Go(_,n,l,d){Jl(_,0,n+l/2,_.transform.width,l,d)}function vf(_,n,l,d){Jl(_,n-l/2,0,l,_.transform.height,d)}function Jl(_,n,l,d,f,y){const w=_.context,C=w.gl;C.enable(C.SCISSOR_TEST),C.scissor(n*_.pixelRatio,l*_.pixelRatio,d*_.pixelRatio,f*_.pixelRatio),w.clear({color:y}),C.disable(C.SCISSOR_TEST)}function xf(_,n,l){const d=_.context,f=d.gl,y=l.posMatrix,w=_.useProgram("debug"),C=Wt.disabled,I=kn.disabled,z=_.colorModeForRenderPass(),L="$debug",B=_.style.map.terrain&&_.style.map.terrain.getTerrainData(l);d.activeTexture.set(f.TEXTURE0);const W=n.getTileByID(l.key).latestRawTileData,J=Math.floor((W&&W.byteLength||0)/1024),Q=n.getTile(l).tileSize,ae=512/Math.min(Q,512)*(l.overscaledZ/_.transform.zoom)*.5;let ue=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(ue+=` => ${l.overscaledZ}`),function(de,ge){de.initDebugOverlayCanvas();const se=de.debugOverlayCanvas,xe=de.context.gl,Se=de.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,se.width,se.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(ge,5,5),Se.strokeText(ge,5,5),de.debugOverlayTexture.update(se),de.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(_,`${ue} ${J}kB`),w.draw(d,f.TRIANGLES,C,I,Vn.alphaBlended,yn.disabled,$a(y,c.aM.transparent,ae),null,L,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),w.draw(d,f.LINE_STRIP,C,I,z,yn.disabled,$a(y,c.aM.red),B,L,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function bf(_,n,l){const d=_.context,f=d.gl,y=_.colorModeForRenderPass(),w=new Wt(f.LEQUAL,Wt.ReadWrite,_.depthRangeFor3D),C=_.useProgram("terrain"),I=n.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,_.width,_.height]);for(const z of l){const L=_.renderToTexture.getTexture(z),B=n.getTerrainData(z.tileID);d.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,L.texture);const W=_.transform.calculatePosMatrix(z.tileID.toUnwrapped()),J=n.getMeshFrameDelta(_.transform.zoom),Q=_.transform.calculateFogMatrix(z.tileID.toUnwrapped()),ae=Mu(W,J,Q,_.style.sky,_.transform.pitch);C.draw(d,f.TRIANGLES,w,kn.disabled,y,yn.backCCW,ae,B,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}}class Ql{constructor(n,l,d){this.vertexBuffer=n,this.indexBuffer=l,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class ec{constructor(n,l){this.context=new Sg(n),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Pt.maxUnderzooming+Pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Iu}resize(n,l,d){if(this.width=Math.floor(n*d),this.height=Math.floor(l*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const n=this.context,l=new c.aX;l.emplaceBack(0,0),l.emplaceBack(c.X,0),l.emplaceBack(0,c.X),l.emplaceBack(c.X,c.X),this.tileExtentBuffer=n.createVertexBuffer(l,ro.members),this.tileExtentSegments=c.a0.simpleSegment(0,0,4,2);const d=new c.aX;d.emplaceBack(0,0),d.emplaceBack(c.X,0),d.emplaceBack(0,c.X),d.emplaceBack(c.X,c.X),this.debugBuffer=n.createVertexBuffer(d,ro.members),this.debugSegments=c.a0.simpleSegment(0,0,4,5);const f=new c.$;f.emplaceBack(0,0,0,0),f.emplaceBack(c.X,0,c.X,0),f.emplaceBack(0,c.X,0,c.X),f.emplaceBack(c.X,c.X,c.X,c.X),this.rasterBoundsBuffer=n.createVertexBuffer(f,xn.members),this.rasterBoundsSegments=c.a0.simpleSegment(0,0,4,2);const y=new c.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(y,ro.members),this.viewportSegments=c.a0.simpleSegment(0,0,4,2);const w=new c.aZ;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(w);const C=new c.aY;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(C);const I=this.context.gl;this.stencilClearMode=new kn({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const n=this.context,l=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.H();c.aP(d,0,this.width,this.height,0,0,1),c.K(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,l.TRIANGLES,Wt.disabled,this.stencilClearMode,Vn.disabled,yn.disabled,Xr(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,l){if(this.currentStencilSource===n.source||!n.isTileClipped()||!l||!l.length)return;this.currentStencilSource=n.source;const d=this.context,f=d.gl;this.nextStencilID+l.length>256&&this.clearStencil(),d.setColorMode(Vn.disabled),d.setDepthMode(Wt.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of l){const C=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,I=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);y.draw(d,f.TRIANGLES,Wt.disabled,new kn({func:f.ALWAYS,mask:0},C,255,f.KEEP,f.KEEP,f.REPLACE),Vn.disabled,yn.disabled,Xr(w.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,l=this.context.gl;return new kn({func:l.NOTEQUAL,mask:255},n,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(n){const l=this.context.gl;return new kn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(n){const l=this.context.gl,d=n.sort((w,C)=>C.overscaledZ-w.overscaledZ),f=d[d.length-1].overscaledZ,y=d[0].overscaledZ-f+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const w={};for(let C=0;C<y;C++)w[C+f]=new kn({func:l.GEQUAL,mask:255},C+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=y,[w,d]}return[{[f]:kn.disabled},d]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Vn([n.CONSTANT_COLOR,n.ONE],new c.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Vn.unblended:Vn.alphaBlended}depthModeForSublayer(n,l,d){if(!this.opaquePassEnabledForLayer())return Wt.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Wt(d||this.context.gl.LEQUAL,l,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,l){this.style=n,this.options=l,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(T.now()),this.imageManager.beginFrame();const d=this.style._order,f=this.style.sourceCaches,y={},w={},C={};for(const I in f){const z=f[I];z.used&&z.prepare(this.context),y[I]=z.getVisibleCoordinates(),w[I]=y[I].slice().reverse(),C[I]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<d.length;I++)if(this.style._layers[d[I]].is3D()){this.opaquePassCutoff=I;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const I of d){const z=this.style._layers[I];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const L=w[z.source];(z.type==="custom"||L.length)&&this.renderLayer(this,f[z.source],z,L)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?c.aM.black:c.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(I,z){const L=I.context,B=L.gl,W=((de,ge,se)=>({u_sky_color:de.properties.get("sky-color"),u_horizon_color:de.properties.get("horizon-color"),u_horizon:(ge.height/2+ge.getHorizon())*se,u_sky_horizon_blend:de.properties.get("sky-horizon-blend")*ge.height/2*se}))(z,I.style.map.transform,I.pixelRatio),J=new Wt(B.LEQUAL,Wt.ReadWrite,[0,1]),Q=kn.disabled,ae=I.colorModeForRenderPass(),ue=I.useProgram("sky");if(!z.mesh){const de=new c.aX;de.emplaceBack(-1,-1),de.emplaceBack(1,-1),de.emplaceBack(1,1),de.emplaceBack(-1,1);const ge=new c.aY;ge.emplaceBack(0,1,2),ge.emplaceBack(0,2,3),z.mesh=new Ql(L.createVertexBuffer(de,ro.members),L.createIndexBuffer(ge),c.a0.simpleSegment(0,0,de.length,ge.length))}ue.draw(L,B.TRIANGLES,J,Q,ae,yn.disabled,W,void 0,"sky",z.mesh.vertexBuffer,z.mesh.indexBuffer,z.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[d[this.currentLayer]],z=f[I.source],L=y[I.source];this._renderTileClippingMasks(I,L),this.renderLayer(this,z,I,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const I=this.style._layers[d[this.currentLayer]],z=f[I.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(I))continue;const L=(I.type==="symbol"?C:w)[I.source];this._renderTileClippingMasks(I,y[I.source]),this.renderLayer(this,z,I,L)}if(this.options.showTileBoundaries){const I=function(z,L){let B=null;const W=Object.values(z._layers).flatMap(ue=>ue.source&&!ue.isHidden(L)?[z.sourceCaches[ue.source]]:[]),J=W.filter(ue=>ue.getSource().type==="vector"),Q=W.filter(ue=>ue.getSource().type!=="vector"),ae=ue=>{(!B||B.getSource().maxzoom<ue.getSource().maxzoom)&&(B=ue)};return J.forEach(ue=>ae(ue)),B||Q.forEach(ue=>ae(ue)),B}(this.style,this.transform.zoom);I&&function(z,L,B){for(let W=0;W<B.length;W++)xf(z,L,B[W])}(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const z=I.transform.padding;Go(I,I.transform.height-(z.top||0),3,Zu),Go(I,z.bottom||0,3,an),vf(I,z.left||0,3,Yl),vf(I,I.transform.width-(z.right||0),3,kg);const L=I.transform.centerPoint;(function(B,W,J,Q){Jl(B,W-1,J-10,2,20,Q),Jl(B,W-10,J-1,20,2,Q)})(I,L.x,I.transform.height-L.y,_f)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let f=this.terrainFacilitator.dirty;f||(f=n?!c.a_(l,d):!c.a$(l,d)),f||(f=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),f&&(c.b0(l,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,w){const C=y.context,I=C.gl,z=Vn.unblended,L=new Wt(I.LEQUAL,Wt.ReadWrite,[0,1]),B=w.getTerrainMesh(),W=w.sourceCache.getRenderableTiles(),J=y.useProgram("terrainDepth");C.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:c.aM.transparent,depth:1});for(const Q of W){const ae=w.getTerrainData(Q.tileID),ue={u_matrix:y.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(y.transform.zoom)};J.draw(C,I.TRIANGLES,L,kn.disabled,z,yn.backCCW,ue,ae,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,w){const C=y.context,I=C.gl,z=Vn.unblended,L=new Wt(I.LEQUAL,Wt.ReadWrite,[0,1]),B=w.getTerrainMesh(),W=w.getCoordsTexture(),J=w.sourceCache.getRenderableTiles(),Q=y.useProgram("terrainCoords");C.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:c.aM.transparent,depth:1}),w.coordsIndex=[];for(const ae of J){const ue=w.getTerrainData(ae.tileID);C.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,W.texture);const de={u_matrix:y.transform.calculatePosMatrix(ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(y.transform.zoom)};Q.draw(C,I.TRIANGLES,L,kn.disabled,z,yn.backCCW,de,ue,"terrain",B.vertexBuffer,B.indexBuffer,B.segments),w.coordsIndex.push(ae.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(n,l,d,f){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(f||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(y,w,C,I,z){if(y.renderPass!=="translucent")return;const L=kn.disabled,B=y.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(W,J,Q,ae,ue,de,ge,se,xe){const Se=J.transform,Ee=no(),Oe=ue==="map",Ge=de==="map";for(const tt of W){const lt=ae.getTile(tt),Je=lt.getBucket(Q);if(!Je||!Je.text||!Je.text.segments.get().length)continue;const Ye=c.ag(Je.textSizeData,Se.zoom),gt=Yt(lt,1,J.transform.zoom),Ot=Kt(tt.posMatrix,Ge,Oe,J.transform,gt),Qe=Q.layout.get("icon-text-fit")!=="none"&&Je.hasIconData();if(Ye){const st=Math.pow(2,Se.zoom-lt.tileID.overscaledZ),Bt=J.style.map.terrain?($t,Jt)=>J.style.map.terrain.getElevation(tt,$t,Jt):null,In=Ee.translatePosition(Se,lt,ge,se);Vo(Je,Oe,Ge,xe,Se,Ot,tt.posMatrix,st,Ye,Qe,Ee,In,tt.toUnwrapped(),Bt)}}}(I,y,C,w,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),z),C.paint.get("icon-opacity").constantOr(1)!==0&&Gu(y,w,C,I,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),L,B),C.paint.get("text-opacity").constantOr(1)!==0&&Gu(y,w,C,I,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),L,B),w.map.showCollisionBoxes&&(Wa(y,w,C,I,!0),Wa(y,w,C,I,!1))})(n,l,d,f,this.style.placement.variableOffsets);break;case"circle":(function(y,w,C,I){if(y.renderPass!=="translucent")return;const z=C.paint.get("circle-opacity"),L=C.paint.get("circle-stroke-width"),B=C.paint.get("circle-stroke-opacity"),W=!C.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(L.constantOr(1)===0||B.constantOr(1)===0))return;const J=y.context,Q=J.gl,ae=y.depthModeForSublayer(0,Wt.ReadOnly),ue=kn.disabled,de=y.colorModeForRenderPass(),ge=[];for(let se=0;se<I.length;se++){const xe=I[se],Se=w.getTile(xe),Ee=Se.getBucket(C);if(!Ee)continue;const Oe=Ee.programConfigurations.get(C.id),Ge=y.useProgram("circle",Oe),tt=Ee.layoutVertexBuffer,lt=Ee.indexBuffer,Je=y.style.map.terrain&&y.style.map.terrain.getTerrainData(xe),Ye={programConfiguration:Oe,program:Ge,layoutVertexBuffer:tt,indexBuffer:lt,uniformValues:ug(y,xe,Se,C),terrainData:Je};if(W){const gt=Ee.segments.get();for(const Ot of gt)ge.push({segments:new c.a0([Ot]),sortKey:Ot.sortKey,state:Ye})}else ge.push({segments:Ee.segments,sortKey:0,state:Ye})}W&&ge.sort((se,xe)=>se.sortKey-xe.sortKey);for(const se of ge){const{programConfiguration:xe,program:Se,layoutVertexBuffer:Ee,indexBuffer:Oe,uniformValues:Ge,terrainData:tt}=se.state;Se.draw(J,Q.TRIANGLES,ae,ue,de,yn.disabled,Ge,tt,C.id,Ee,Oe,se.segments,C.paint,y.transform.zoom,xe)}})(n,l,d,f);break;case"heatmap":(function(y,w,C,I){if(C.paint.get("heatmap-opacity")===0)return;const z=y.context;if(y.style.map.terrain){for(const L of I){const B=w.getTile(L);w.hasRenderableParent(L)||(y.renderPass==="offscreen"?qu(y,B,C,L):y.renderPass==="translucent"&&uo(y,C,L))}z.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(L,B,W,J){const Q=L.context,ae=Q.gl,ue=kn.disabled,de=new Vn([ae.ONE,ae.ONE],c.aM.transparent,[!0,!0,!0,!0]);(function(ge,se,xe){const Se=ge.gl;ge.activeTexture.set(Se.TEXTURE1),ge.viewport.set([0,0,se.width/4,se.height/4]);let Ee=xe.heatmapFbos.get(c.aU);Ee?(Se.bindTexture(Se.TEXTURE_2D,Ee.colorAttachment.get()),ge.bindFramebuffer.set(Ee.framebuffer)):(Ee=Za(ge,se.width/4,se.height/4),xe.heatmapFbos.set(c.aU,Ee))})(Q,L,W),Q.clear({color:c.aM.transparent});for(let ge=0;ge<J.length;ge++){const se=J[ge];if(B.hasRenderableParent(se))continue;const xe=B.getTile(se),Se=xe.getBucket(W);if(!Se)continue;const Ee=Se.programConfigurations.get(W.id),Oe=L.useProgram("heatmap",Ee),{zoom:Ge}=L.transform;Oe.draw(Q,ae.TRIANGLES,Wt.disabled,ue,de,yn.disabled,Kr(se.posMatrix,xe,Ge,W.paint.get("heatmap-intensity")),null,W.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,W.paint,L.transform.zoom,Ee)}Q.viewport.set([0,0,L.width,L.height])}(y,w,C,I):y.renderPass==="translucent"&&function(L,B){const W=L.context,J=W.gl;W.setColorMode(L.colorModeForRenderPass());const Q=B.heatmapFbos.get(c.aU);Q&&(W.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,Q.colorAttachment.get()),W.activeTexture.set(J.TEXTURE1),Xa(W,B).bind(J.LINEAR,J.CLAMP_TO_EDGE),L.useProgram("heatmapTexture").draw(W,J.TRIANGLES,Wt.disabled,kn.disabled,L.colorModeForRenderPass(),yn.disabled,Vl(L,B,0,1),null,B.id,L.viewportBuffer,L.quadTriangleIndexBuffer,L.viewportSegments,B.paint,L.transform.zoom))}(y,C)})(n,l,d,f);break;case"line":(function(y,w,C,I){if(y.renderPass!=="translucent")return;const z=C.paint.get("line-opacity"),L=C.paint.get("line-width");if(z.constantOr(1)===0||L.constantOr(1)===0)return;const B=y.depthModeForSublayer(0,Wt.ReadOnly),W=y.colorModeForRenderPass(),J=C.paint.get("line-dasharray"),Q=C.paint.get("line-pattern"),ae=Q.constantOr(1),ue=C.paint.get("line-gradient"),de=C.getCrossfadeParameters(),ge=ae?"linePattern":J?"lineSDF":ue?"lineGradient":"line",se=y.context,xe=se.gl;let Se=!0;for(const Ee of I){const Oe=w.getTile(Ee);if(ae&&!Oe.patternsLoaded())continue;const Ge=Oe.getBucket(C);if(!Ge)continue;const tt=Ge.programConfigurations.get(C.id),lt=y.context.program.get(),Je=y.useProgram(ge,tt),Ye=Se||Je.program!==lt,gt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ee),Ot=Q.constantOr(null);if(Ot&&Oe.imageAtlas){const Bt=Oe.imageAtlas,In=Bt.patternPositions[Ot.to.toString()],$t=Bt.patternPositions[Ot.from.toString()];In&&$t&&tt.setConstantPatternPositions(In,$t)}const Qe=gt?Ee:null,st=ae?No(y,Oe,C,de,Qe):J?hg(y,Oe,C,J,de,Qe):ue?ef(y,Oe,C,Ge.lineClipsArray.length,Qe):$l(y,Oe,C,Qe);if(ae)se.activeTexture.set(xe.TEXTURE0),Oe.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),tt.updatePaintBuffers(de);else if(J&&(Ye||y.lineAtlas.dirty))se.activeTexture.set(xe.TEXTURE0),y.lineAtlas.bind(se);else if(ue){const Bt=Ge.gradients[C.id];let In=Bt.texture;if(C.gradientVersion!==Bt.version){let $t=256;if(C.stepInterpolant){const Jt=w.getSource().maxzoom,An=Ee.canonical.z===Jt?Math.ceil(1<<y.transform.maxZoom-Ee.canonical.z):1;$t=c.ac(c.aV(Ge.maxLineLength/c.X*1024*An),256,se.maxTextureSize)}Bt.gradient=c.aW({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:$t,image:Bt.gradient||void 0,clips:Ge.lineClipsArray}),Bt.texture?Bt.texture.update(Bt.gradient):Bt.texture=new ze(se,Bt.gradient,xe.RGBA),Bt.version=C.gradientVersion,In=Bt.texture}se.activeTexture.set(xe.TEXTURE0),In.bind(C.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}Je.draw(se,xe.TRIANGLES,B,y.stencilModeForClipping(Ee),W,yn.disabled,st,gt,C.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,C.paint,y.transform.zoom,tt,Ge.layoutVertexBuffer2),Se=!1}})(n,l,d,f);break;case"fill":(function(y,w,C,I){const z=C.paint.get("fill-color"),L=C.paint.get("fill-opacity");if(L.constantOr(1)===0)return;const B=y.colorModeForRenderPass(),W=C.paint.get("fill-pattern"),J=y.opaquePassEnabledForLayer()&&!W.constantOr(1)&&z.constantOr(c.aM.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===J){const Q=y.depthModeForSublayer(1,y.renderPass==="opaque"?Wt.ReadWrite:Wt.ReadOnly);Ka(y,w,C,I,Q,B,!1)}if(y.renderPass==="translucent"&&C.paint.get("fill-antialias")){const Q=y.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,Wt.ReadOnly);Ka(y,w,C,I,Q,B,!0)}})(n,l,d,f);break;case"fill-extrusion":(function(y,w,C,I){const z=C.paint.get("fill-extrusion-opacity");if(z!==0&&y.renderPass==="translucent"){const L=new Wt(y.context.gl.LEQUAL,Wt.ReadWrite,y.depthRangeFor3D);if(z!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))Kl(y,w,C,I,L,kn.disabled,Vn.disabled),Kl(y,w,C,I,L,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const B=y.colorModeForRenderPass();Kl(y,w,C,I,L,kn.disabled,B)}}})(n,l,d,f);break;case"hillshade":(function(y,w,C,I){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const z=y.context,L=y.depthModeForSublayer(0,Wt.ReadOnly),B=y.colorModeForRenderPass(),[W,J]=y.renderPass==="translucent"?y.stencilConfigForOverlap(I):[{},I];for(const Q of J){const ae=w.getTile(Q);ae.needsHillshadePrepare!==void 0&&ae.needsHillshadePrepare&&y.renderPass==="offscreen"?Ho(y,ae,C,L,kn.disabled,B):y.renderPass==="translucent"&&$o(y,Q,ae,C,L,W[Q.overscaledZ],B)}z.viewport.set([0,0,y.width,y.height])})(n,l,d,f);break;case"raster":(function(y,w,C,I){if(y.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!I.length)return;const z=y.context,L=z.gl,B=w.getSource(),W=y.useProgram("raster"),J=y.colorModeForRenderPass(),[Q,ae]=B instanceof En?[{},I]:y.stencilConfigForOverlap(I),ue=ae[ae.length-1].overscaledZ,de=!y.options.moving;for(const ge of ae){const se=y.depthModeForSublayer(ge.overscaledZ-ue,C.paint.get("raster-opacity")===1?Wt.ReadWrite:Wt.ReadOnly,L.LESS),xe=w.getTile(ge);xe.registerFadeDuration(C.paint.get("raster-fade-duration"));const Se=w.findLoadedParent(ge,0),Ee=w.findLoadedSibling(ge),Oe=yf(xe,Se||Ee||null,w,C,y.transform,y.style.map.terrain);let Ge,tt;const lt=C.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;z.activeTexture.set(L.TEXTURE0),xe.texture.bind(lt,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(L.TEXTURE1),Se?(Se.texture.bind(lt,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),Ge=Math.pow(2,Se.tileID.overscaledZ-xe.tileID.overscaledZ),tt=[xe.tileID.canonical.x*Ge%1,xe.tileID.canonical.y*Ge%1]):xe.texture.bind(lt,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),xe.texture.useMipmap&&z.extTextureFilterAnisotropic&&y.transform.pitch>20&&L.texParameterf(L.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const Je=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ge),Ye=Je?ge:null,gt=Ye?Ye.posMatrix:y.transform.calculatePosMatrix(ge.toUnwrapped(),de),Ot=dg(gt,tt||[0,0],Ge||1,Oe,C);B instanceof En?W.draw(z,L.TRIANGLES,se,kn.disabled,J,yn.disabled,Ot,Je,C.id,B.boundsBuffer,y.quadTriangleIndexBuffer,B.boundsSegments):W.draw(z,L.TRIANGLES,se,Q[ge.overscaledZ],J,yn.disabled,Ot,Je,C.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(n,l,d,f);break;case"background":(function(y,w,C,I){const z=C.paint.get("background-color"),L=C.paint.get("background-opacity");if(L===0)return;const B=y.context,W=B.gl,J=y.transform,Q=J.tileSize,ae=C.paint.get("background-pattern");if(y.isPatternMissing(ae))return;const ue=!ae&&z.a===1&&L===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ue)return;const de=kn.disabled,ge=y.depthModeForSublayer(0,ue==="opaque"?Wt.ReadWrite:Wt.ReadOnly),se=y.colorModeForRenderPass(),xe=y.useProgram(ae?"backgroundPattern":"background"),Se=I||J.coveringTiles({tileSize:Q,terrain:y.style.map.terrain});ae&&(B.activeTexture.set(W.TEXTURE0),y.imageManager.bind(y.context));const Ee=C.getCrossfadeParameters();for(const Oe of Se){const Ge=I?Oe.posMatrix:y.transform.calculatePosMatrix(Oe.toUnwrapped()),tt=ae?Ru(Ge,L,y,ae,{tileID:Oe,tileSize:Q},Ee):Hl(Ge,L,z),lt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Oe);xe.draw(B,W.TRIANGLES,ge,de,se,yn.disabled,tt,lt,C.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(n,0,d,f);break;case"custom":(function(y,w,C){const I=y.context,z=C.implementation;if(y.renderPass==="offscreen"){const L=z.prerender;L&&(y.setCustomLayerDefaults(),I.setColorMode(y.colorModeForRenderPass()),L.call(z,I.gl,y.transform.customLayerMatrix()),I.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),I.setColorMode(y.colorModeForRenderPass()),I.setStencilMode(kn.disabled);const L=z.renderingMode==="3d"?new Wt(y.context.gl.LEQUAL,Wt.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Wt.ReadOnly);I.setDepthMode(L),z.render(I.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),I.setDirty(),y.setBaseState(),I.bindFramebuffer.set(null)}})(n,0,d)}}translatePosMatrix(n,l,d,f,y){if(!d[0]&&!d[1])return n;const w=y?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(w){const z=Math.sin(w),L=Math.cos(w);d=[d[0]*L-d[1]*z,d[0]*z+d[1]*L]}const C=[y?d[0]:Yt(l,d[0],this.transform.zoom),y?d[1]:Yt(l,d[1],this.transform.zoom),0],I=new Float32Array(16);return c.J(I,n,C),I}saveTileTexture(n){const l=this._tileTextures[n.size[0]];l?l.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const l=this._tileTextures[n];return l&&l.length>0?l.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const l=this.imageManager.getPattern(n.from.toString()),d=this.imageManager.getPattern(n.to.toString());return!l||!d}useProgram(n,l){this.cache=this.cache||{};const d=n+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new Du(this.context,Ns[n],l,Lu[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ze(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:l}=this.context.gl;return this.width!==n||this.height!==l}}class Wo{constructor(n,l){this.points=n,this.planes=l}static fromInvProjectionMatrix(n,l,d){const f=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const I=1/(C=c.af([],C,n))[3]/l*f;return c.b1(C,C,[I,I,1/C[3],I])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const I=function(W,J){var Q=J[0],ae=J[1],ue=J[2],de=Q*Q+ae*ae+ue*ue;return de>0&&(de=1/Math.sqrt(de)),W[0]=J[0]*de,W[1]=J[1]*de,W[2]=J[2]*de,W}([],function(W,J,Q){var ae=J[0],ue=J[1],de=J[2],ge=Q[0],se=Q[1],xe=Q[2];return W[0]=ue*xe-de*se,W[1]=de*ge-ae*xe,W[2]=ae*se-ue*ge,W}([],fe([],y[C[0]],y[C[1]]),fe([],y[C[2]],y[C[1]]))),z=-((L=I)[0]*(B=y[C[1]])[0]+L[1]*B[1]+L[2]*B[2]);var L,B;return I.concat(z)});return new Wo(y,w)}}class qo{constructor(n,l){this.min=n,this.max=l,this.center=function(d,f,y){return d[0]=.5*f[0],d[1]=.5*f[1],d[2]=.5*f[2],d}([],function(d,f,y){return d[0]=f[0]+y[0],d[1]=f[1]+y[1],d[2]=f[2]+y[2],d}([],this.min,this.max))}quadrant(n){const l=[n%2==0,n<2],d=ye(this.min),f=ye(this.max);for(let y=0;y<l.length;y++)d[y]=l[y]?this.min[y]:this.center[y],f[y]=l[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new qo(d,f)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let f=0;f<n.planes.length;f++){const y=n.planes[f];let w=0;for(let C=0;C<l.length;C++)c.b2(y,l[C])>=0&&w++;if(w===0)return 0;w!==l.length&&(d=!1)}if(d)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let C=0;C<n.points.length;C++){const I=n.points[C][f]-this.min[f];y=Math.min(y,I),w=Math.max(w,I)}if(w<0||y>this.max[f]-this.min[f])return 0}return 1}}class Zo{constructor(n=0,l=0,d=0,f=0){if(isNaN(n)||n<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=l,this.left=d,this.right=f}interpolate(n,l,d){return l.top!=null&&n.top!=null&&(this.top=c.y.number(n.top,l.top,d)),l.bottom!=null&&n.bottom!=null&&(this.bottom=c.y.number(n.bottom,l.bottom,d)),l.left!=null&&n.left!=null&&(this.left=c.y.number(n.left,l.left,d)),l.right!=null&&n.right!=null&&(this.right=c.y.number(n.right,l.right,d)),this}getCenter(n,l){const d=c.ac((this.left+n-this.right)/2,0,n),f=c.ac((this.top+l-this.bottom)/2,0,l);return new c.P(d,f)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Zo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Xu=85.051129;class Xo{constructor(n,l,d,f,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=n||0,this._maxZoom=l||22,this._minPitch=d??0,this._maxPitch=f??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Zo,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const n=new Xo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.lngRange=n.lngRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const l=-c.b3(n,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var d=new c.A(4);return c.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,f,y){var w=f[0],C=f[1],I=f[2],z=f[3],L=Math.sin(y),B=Math.cos(y);d[0]=w*B+I*L,d[1]=C*B+z*L,d[2]=w*-L+I*B,d[3]=C*-L+z*B}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const l=c.ac(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const l=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,l,d){this._unmodified=!1,this._edgeInsets.interpolate(n,l,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const l=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(n){const l=[new c.b4(0,n)];if(this._renderWorldCopies){const d=this.pointCoordinate(new c.P(0,0)),f=this.pointCoordinate(new c.P(this.width,0)),y=this.pointCoordinate(new c.P(this.width,this.height)),w=this.pointCoordinate(new c.P(0,this.height)),C=Math.floor(Math.min(d.x,f.x,y.x,w.x)),I=Math.floor(Math.max(d.x,f.x,y.x,w.x)),z=1;for(let L=C-z;L<=I+z;L++)L!==0&&l.push(new c.b4(L,n))}return l}coveringTiles(n){var l,d;let f=this.coveringZoomLevel(n);const y=f;if(n.minzoom!==void 0&&f<n.minzoom)return[];n.maxzoom!==void 0&&f>n.maxzoom&&(f=n.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),C=c.Z.fromLngLat(this.center),I=Math.pow(2,f),z=[I*w.x,I*w.y,0],L=[I*C.x,I*C.y,0],B=Wo.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,f);let W=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(W=f);const J=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Q=se=>({aabb:new qo([se*I,0,0],[(se+1)*I,I,0]),zoom:0,x:0,y:0,wrap:se,fullyVisible:!1}),ae=[],ue=[],de=f,ge=n.reparseOverscaled?y:f;if(this._renderWorldCopies)for(let se=1;se<=3;se++)ae.push(Q(-se)),ae.push(Q(se));for(ae.push(Q(0));ae.length>0;){const se=ae.pop(),xe=se.x,Se=se.y;let Ee=se.fullyVisible;if(!Ee){const Je=se.aabb.intersects(B);if(Je===0)continue;Ee=Je===2}const Oe=n.terrain?z:L,Ge=se.aabb.distanceX(Oe),tt=se.aabb.distanceY(Oe),lt=Math.max(Math.abs(Ge),Math.abs(tt));if(se.zoom===de||lt>J+(1<<de-se.zoom)-2&&se.zoom>=W){const Je=de-se.zoom,Ye=z[0]-.5-(xe<<Je),gt=z[1]-.5-(Se<<Je);ue.push({tileID:new c.S(se.zoom===de?ge:se.zoom,se.wrap,se.zoom,xe,Se),distanceSq:le([L[0]-.5-xe,L[1]-.5-Se]),tileDistanceToCamera:Math.sqrt(Ye*Ye+gt*gt)})}else for(let Je=0;Je<4;Je++){const Ye=(xe<<1)+Je%2,gt=(Se<<1)+(Je>>1),Ot=se.zoom+1;let Qe=se.aabb.quadrant(Je);if(n.terrain){const st=new c.S(Ot,se.wrap,Ot,Ye,gt),Bt=n.terrain.getMinMaxElevation(st),In=(l=Bt.minElevation)!==null&&l!==void 0?l:this.elevation,$t=(d=Bt.maxElevation)!==null&&d!==void 0?d:this.elevation;Qe=new qo([Qe.min[0],Qe.min[1],In],[Qe.max[0],Qe.max[1],$t])}ae.push({aabb:Qe,zoom:Ot,x:Ye,y:gt,wrap:se.wrap,fullyVisible:Ee})}}return ue.sort((se,xe)=>se.distanceSq-xe.distanceSq).map(se=>se.tileID)}resize(n,l){this.width=n,this.height=l,this.pixelsToGLUnits=[2/n,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const l=c.ac(n.lat,-85.051129,Xu);return new c.P(c.O(n.lng)*this.worldSize,c.Q(l)*this.worldSize)}unproject(n){return new c.Z(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const l=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,f=this.pointLocation(this.centerPoint,n),y=n.getElevationForLngLatZoom(f,this.tileZoom);if(!(this.elevation-y))return;const w=d+l-y,C=Math.cos(this._pitch)*this.cameraToCenterDistance/w/c.b5(1,f.lat),I=this.scaleZoom(C/this.tileSize);this._elevation=y,this._center=f,this.zoom=I}setLocationAtPoint(n,l){const d=this.pointCoordinate(l),f=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(n),w=new c.Z(y.x-(d.x-f.x),y.y-(d.y-f.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,l){return l?this.coordinatePoint(this.locationCoordinate(n),l.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,l){return this.coordinateLocation(this.pointCoordinate(n,l))}locationCoordinate(n){return c.Z.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,l){if(l){const W=l.pointCoordinate(n);if(W!=null)return W}const d=[n.x,n.y,0,1],f=[n.x,n.y,1,1];c.af(d,d,this.pixelMatrixInverse),c.af(f,f,this.pixelMatrixInverse);const y=d[3],w=f[3],C=d[1]/y,I=f[1]/w,z=d[2]/y,L=f[2]/w,B=z===L?0:(0-z)/(L-z);return new c.Z(c.y.number(d[0]/y,f[0]/w,B)/this.worldSize,c.y.number(C,I,B)/this.worldSize)}coordinatePoint(n,l=0,d=this.pixelMatrix){const f=[n.x*this.worldSize,n.y*this.worldSize,l,1];return c.af(f,f,d),new c.P(f[0]/f[3],f[1]/f[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new Pe().extend(this.pointLocation(new c.P(0,n))).extend(this.pointLocation(new c.P(this.width,n))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Xu])}calculateTileMatrix(n){const l=n.canonical,d=this.worldSize/this.zoomScale(l.z),f=l.x+Math.pow(2,l.z)*n.wrap,y=c.an(new Float64Array(16));return c.J(y,y,[f*d,l.y*d,0]),c.K(y,y,[d/c.X,d/c.X,1]),y}calculatePosMatrix(n,l=!1){const d=n.key,f=l?this._alignedPosMatrixCache:this._posMatrixCache;if(f[d])return f[d];const y=this.calculateTileMatrix(n);return c.L(y,l?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),f[d]=new Float32Array(y),f[d]}calculateFogMatrix(n){const l=n.key,d=this._fogMatrixCache;if(d[l])return d[l];const f=this.calculateTileMatrix(n);return c.L(f,this.fogMatrix,f),d[l]=new Float32Array(f),d[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(n,l){l=c.ac(+l,this.minZoom,this.maxZoom);const d={center:new c.N(n.lng,n.lat),zoom:l};let f=this.lngRange;if(!this._renderWorldCopies&&f===null){const se=179.9999999999;f=[-se,se]}const y=this.tileSize*this.zoomScale(d.zoom);let w=0,C=y,I=0,z=y,L=0,B=0;const{x:W,y:J}=this.size;if(this.latRange){const se=this.latRange;w=c.Q(se[1])*y,C=c.Q(se[0])*y,C-w<J&&(L=J/(C-w))}f&&(I=c.b3(c.O(f[0])*y,0,y),z=c.b3(c.O(f[1])*y,0,y),z<I&&(z+=y),z-I<W&&(B=W/(z-I)));const{x:Q,y:ae}=this.project.call({worldSize:y},n);let ue,de;const ge=Math.max(B||0,L||0);if(ge){const se=new c.P(B?(z+I)/2:Q,L?(C+w)/2:ae);return d.center=this.unproject.call({worldSize:y},se).wrap(),d.zoom+=this.scaleZoom(ge),d}if(this.latRange){const se=J/2;ae-se<w&&(de=w+se),ae+se>C&&(de=C-se)}if(f){const se=(I+z)/2;let xe=Q;this._renderWorldCopies&&(xe=c.b3(Q,se-y/2,se+y/2));const Se=W/2;xe-Se<I&&(ue=I+Se),xe+Se>z&&(ue=z-Se)}if(ue!==void 0||de!==void 0){const se=new c.P(ue??Q,de??ae);d.center=this.unproject.call({worldSize:y},se).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:l,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=d,this._unmodified=n,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,l=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b5(1,this.center.lat)*this.worldSize;let f=c.an(new Float64Array(16));c.K(f,f,[this.width/2,-this.height/2,1]),c.J(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=c.an(new Float64Array(16)),c.K(f,f,[1,-1,1]),c.J(f,f,[-1,-1,0]),c.K(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),C=y-w*this._pixelPerMeter/Math.cos(this._pitch),I=w<0?C:y,z=Math.PI/2+this._pitch,L=this._fov*(.5+n.y/this.height),B=Math.sin(L)*I/Math.sin(c.ac(Math.PI-z-L,.01,Math.PI-.01)),W=this.getHorizon(),J=2*Math.atan(W/this.cameraToCenterDistance)*(.5+n.y/(2*W)),Q=Math.sin(J)*I/Math.sin(c.ac(Math.PI-z-J,.01,Math.PI-.01)),ae=Math.min(B,Q);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+I),this.nearZ=this.height/50,f=new Float64Array(16),c.b6(f,this._fov,this.width/this.height,this.nearZ,this.farZ),f[8]=2*-n.x/this.width,f[9]=2*n.y/this.height,this.projectionMatrix=c.ae(f),c.K(f,f,[1,-1,1]),c.J(f,f,[0,0,-this.cameraToCenterDistance]),c.b7(f,f,this._pitch),c.ad(f,f,this.angle),c.J(f,f,[-l,-d,0]),this.mercatorMatrix=c.K([],f,[this.worldSize,this.worldSize,this.worldSize]),c.K(f,f,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.L(new Float64Array(16),this.labelPlaneMatrix,f),c.J(f,f,[0,0,-this.elevation]),this.modelViewProjectionMatrix=f,this.invModelViewProjectionMatrix=c.as([],f),this.fogMatrix=new Float64Array(16),c.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-n.x/this.width,this.fogMatrix[9]=2*n.y/this.height,c.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),c.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),c.b7(this.fogMatrix,this.fogMatrix,this._pitch),c.ad(this.fogMatrix,this.fogMatrix,this.angle),c.J(this.fogMatrix,this.fogMatrix,[-l,-d,0]),c.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),c.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=c.L(new Float64Array(16),this.labelPlaneMatrix,f);const ue=this.width%2/2,de=this.height%2/2,ge=Math.cos(this.angle),se=Math.sin(this.angle),xe=l-Math.round(l)+ge*ue+se*de,Se=d-Math.round(d)+ge*de+se*ue,Ee=new Float64Array(f);if(c.J(Ee,Ee,[xe>.5?xe-1:xe,Se>.5?Se-1:Se,0]),this.alignedModelViewProjectionMatrix=Ee,f=c.as(new Float64Array(16),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new c.P(0,0)),l=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.af(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,n))}getCameraQueryGeometry(n){const l=this.getCameraPoint();if(n.length===1)return[n[0],l];{let d=l.x,f=l.y,y=l.x,w=l.y;for(const C of n)d=Math.min(d,C.x),f=Math.min(f,C.y),y=Math.max(y,C.x),w=Math.max(w,C.y);return[new c.P(d,f),new c.P(y,f),new c.P(y,w),new c.P(d,w),new c.P(d,f)]}}lngLatToCameraDepth(n,l){const d=this.locationCoordinate(n),f=[d.x*this.worldSize,d.y*this.worldSize,l,1];return c.af(f,f,this.modelViewProjectionMatrix),f[2]/f[3]}}function Ya(_,n){let l,d=!1,f=null,y=null;const w=()=>{f=null,d&&(_.apply(y,l),f=setTimeout(w,n),d=!1)};return(...C)=>(d=!0,y=this,l=C,f||w(),f)}class tc{constructor(n){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(d=f)}),(d&&d[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{const l=this._getCurrentHash();if(l.length===0)return;const d=l.join("/");let f=d;f.split("&").length>0&&(f=f.split("&")[0]),this._hashName&&(f=`${this._hashName}=${d}`);let y=window.location.hash.replace(f,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let w=window.location.href.replace(/(#.+)?$/,y);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=Ya(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,f=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,f),w=Math.round(l.lng*y)/y,C=Math.round(l.lat*y)/y,I=this._map.getBearing(),z=this._map.getPitch();let L="";if(L+=n?`/${w}/${C}/${d}`:`${d}/${C}/${w}`,(I||z)&&(L+="/"+Math.round(10*I)/10),z&&(L+=`/${Math.round(z)}`),this._hashName){const B=this._hashName;let W=!1;const J=window.location.hash.slice(1).split("&").map(Q=>{const ae=Q.split("=")[0];return ae===B?(W=!0,`${ae}=${L}`):Q}).filter(Q=>Q);return W||J.push(`${B}=${L}`),`#${J.join("&")}`}return`#${L}`}}const nc={linearity:.3,easing:c.b8(0,0,.3,1)},Ku=c.e({deceleration:2500,maxSpeed:1400},nc),Tg=c.e({deceleration:20,maxSpeed:1400},nc),wf=c.e({deceleration:1e3,maxSpeed:360},nc),rc=c.e({deceleration:1e3,maxSpeed:90},nc);class Yu{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:T.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,l=T.now();for(;n.length>0&&l-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)l.zoom+=y.zoomDelta||0,l.bearing+=y.bearingDelta||0,l.pitch+=y.pitchDelta||0,y.panDelta&&l.pan._add(y.panDelta),y.around&&(l.around=y.around),y.pinchAround&&(l.pinchAround=y.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(l.pan.mag()){const y=Qa(l.pan.mag(),d,c.e({},Ku,n||{}));f.offset=l.pan.mult(y.amount/l.pan.mag()),f.center=this._map.transform.center,Ja(f,y)}if(l.zoom){const y=Qa(l.zoom,d,Tg);f.zoom=this._map.transform.zoom+y.amount,Ja(f,y)}if(l.bearing){const y=Qa(l.bearing,d,wf);f.bearing=this._map.transform.bearing+c.ac(y.amount,-179,179),Ja(f,y)}if(l.pitch){const y=Qa(l.pitch,d,rc);f.pitch=this._map.transform.pitch+y.amount,Ja(f,y)}if(f.zoom||f.bearing){const y=l.pinchAround===void 0?l.around:l.pinchAround;f.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),c.e(f,{noMoveStart:!0})}}function Ja(_,n){(!_.duration||_.duration<n.duration)&&(_.duration=n.duration,_.easing=n.easing)}function Qa(_,n,l){const{maxSpeed:d,linearity:f,deceleration:y}=l,w=c.ac(_*f/(n/1e3),-d,d),C=Math.abs(w)/(y*f);return{easing:l.easing,duration:1e3*C,amount:w*(C/2)}}class Ir extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,d,f={}){const y=A.mousePos(l.getCanvas(),d),w=l.unproject(y);super(n,c.e({point:y,lngLat:w,originalEvent:d},f)),this._defaultPrevented=!1,this.target=l}}class ho extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,d){const f=n==="touchend"?d.changedTouches:d.touches,y=A.touchPos(l.getCanvasContainer(),f),w=y.map(I=>l.unproject(I)),C=y.reduce((I,z,L,B)=>I.add(z.div(B.length)),new c.P(0,0));super(n,{points:y,point:C,lngLats:w,lngLat:l.unproject(C),originalEvent:d}),this._defaultPrevented=!1}}class Sf extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,d){super(n,{originalEvent:d}),this._defaultPrevented=!1}}class kf{constructor(n,l){this._map=n,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Sf(n.type,this._map,n))}mousedown(n,l){return this._mousedownPos=l,this._firePreventable(new Ir(n.type,this._map,n))}mouseup(n){this._map.fire(new Ir(n.type,this._map,n))}click(n,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new Ir(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Ir(n.type,this._map,n))}mouseover(n){this._map.fire(new Ir(n.type,this._map,n))}mouseout(n){this._map.fire(new Ir(n.type,this._map,n))}touchstart(n){return this._firePreventable(new ho(n.type,this._map,n))}touchmove(n){this._map.fire(new ho(n.type,this._map,n))}touchend(n){this._map.fire(new ho(n.type,this._map,n))}touchcancel(n){this._map.fire(new ho(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Un{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Ir(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ir("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new Ir(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gi{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(c.P.convert(n),this._map.terrain)}}class di{constructor(n,l){this._map=n,this._tr=new Gi(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,l){this.isEnabled()&&n.shiftKey&&n.button===0&&(A.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(n,l){if(!this._active)return;const d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=d,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const y=Math.min(f.x,d.x),w=Math.max(f.x,d.x),C=Math.min(f.y,d.y),I=Math.max(f.y,d.y);A.setTransform(this._box,`translate(${y}px,${C}px)`),this._box.style.width=w-y+"px",this._box.style.height=I-C+"px"}mouseupWindow(n,l){if(!this._active||n.button!==0)return;const d=this._startPos,f=l;if(this.reset(),A.suppressClick(),d.x!==f.x||d.y!==f.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:n})),{cameraAnimation:y=>y.fitScreenCoordinates(d,f,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,l){return this._map.fire(new c.k(n,{originalEvent:l}))}}function el(_,n){if(_.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${n.length}`);const l={};for(let d=0;d<_.length;d++)l[_[d].identifier]=n[d];return l}class Ju{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),d.length===this.numTouches&&(this.centroid=function(f){const y=new c.P(0,0);for(const w of f)y._add(w);return y.div(f.length)}(l),this.touches=el(d,l)))}touchmove(n,l,d){if(this.aborted||!this.centroid)return;const f=el(d,l);for(const y in this.touches){const w=f[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(n,l,d){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class ic{constructor(n){this.singleTap=new Ju(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,l,d){this.singleTap.touchstart(n,l,d)}touchmove(n,l,d){this.singleTap.touchmove(n,l,d)}touchend(n,l,d){const f=this.singleTap.touchend(n,l,d);if(f){const y=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(f)<30;if(y&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class Ko{constructor(n){this._tr=new Gi(n),this._zoomIn=new ic({numTouches:1,numTaps:2}),this._zoomOut=new ic({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,l,d){this._zoomIn.touchstart(n,l,d),this._zoomOut.touchstart(n,l,d)}touchmove(n,l,d){this._zoomIn.touchmove(n,l,d),this._zoomOut.touchmove(n,l,d)}touchend(n,l,d){const f=this._zoomIn.touchend(n,l,d),y=this._zoomOut.touchend(n,l,d),w=this._tr;return f?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(f)},{originalEvent:n})}):y?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(y)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ss{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const l=this._moveFunction(...n);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(n,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,l){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const f=l.length?l[0]:l;return!this._moved&&f.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=f,this._move(d,f))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&A.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Qu={0:1,2:2};class sc{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const l=A.mouseButton(n);this._eventButton=l}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(l,d){const f=Qu[d];return l.buttons===void 0||(l.buttons&f)!==f}(n,this._eventButton)}isValidEndEvent(n){return A.mouseButton(n)===this._eventButton}}class eh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const oc=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=n=>{n.preventDefault()}},th=({enable:_,clickTolerance:n,bearingDegreesPerPixelMoved:l=.8})=>{const d=new sc({checkCorrectEvent:f=>A.mouseButton(f)===0&&f.ctrlKey||A.mouseButton(f)===2});return new Ss({clickTolerance:n,move:(f,y)=>({bearingDelta:(y.x-f.x)*l}),moveStateManager:d,enable:_,assignEvents:oc})},nh=({enable:_,clickTolerance:n,pitchDegreesPerPixelMoved:l=-.5})=>{const d=new sc({checkCorrectEvent:f=>A.mouseButton(f)===0&&f.ctrlKey||A.mouseButton(f)===2});return new Ss({clickTolerance:n,move:(f,y)=>({pitchDelta:(y.y-f.y)*l}),moveStateManager:d,enable:_,assignEvents:oc})};class fo{constructor(n,l){this._clickTolerance=n.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,l,d){return this._calculateTransform(n,l,d)}touchmove(n,l,d){if(this._active){if(!this._shouldBePrevented(d.length))return n.preventDefault(),this._calculateTransform(n,l,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,l,d){this._calculateTransform(n,l,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,l,d){d.length>0&&(this._active=!0);const f=el(d,l),y=new c.P(0,0),w=new c.P(0,0);let C=0;for(const z in f){const L=f[z],B=this._touches[z];B&&(y._add(L),w._add(L.sub(B)),C++,f[z]=L)}if(this._touches=f,this._shouldBePrevented(C)||!w.mag())return;const I=w.div(C);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(C),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ac{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(n,l,d){if(!this._firstTwoTouches)return;n.preventDefault();const[f,y]=this._firstTwoTouches,w=tl(d,l,f),C=tl(d,l,y);if(!w||!C)return;const I=this._aroundCenter?null:w.add(C).div(2);return this._move([w,C],I,n)}touchend(n,l,d){if(!this._firstTwoTouches)return;const[f,y]=this._firstTwoTouches,w=tl(d,l,f),C=tl(d,l,y);w&&C||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function tl(_,n,l){for(let d=0;d<_.length;d++)if(_[d].identifier===l)return n[d]}function rh(_,n){return Math.log(_/n)/Math.LN2}class ih extends ac{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,l){const d=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(rh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:rh(this._distance,d),pinchAround:l}}}function sh(_,n){return 180*_.angleWith(n)/Math.PI}class oh extends ac{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,l,d){const f=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:sh(this._vector,f),pinchAround:l}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const l=25/(Math.PI*this._minDiameter)*360,d=sh(n,this._startVector);return Math.abs(d)<l}}function lc(_){return Math.abs(_.y)>Math.abs(_.x)}class nl extends ac{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,l,d){super.touchstart(n,l,d),this._currentTouchCount=d.length}_start(n){this._lastPoints=n,lc(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,l,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const f=n[0].sub(this._lastPoints[0]),y=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,y,d.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(f.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(n,l,d){if(this._valid!==void 0)return this._valid;const f=n.mag()>=2,y=l.mag()>=2;if(!f&&!y)return;if(!f||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const w=n.y>0==l.y>0;return lc(n)&&lc(l)&&w}}const Tf={panStep:100,bearingStep:15,pitchStep:10};class Ei{constructor(n){this._tr=new Gi(n);const l=Tf;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let l=0,d=0,f=0,y=0,w=0;switch(n.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:n.shiftKey?d=-1:(n.preventDefault(),y=-1);break;case 39:n.shiftKey?d=1:(n.preventDefault(),y=1);break;case 38:n.shiftKey?f=1:(n.preventDefault(),w=-1);break;case 40:n.shiftKey?f=-1:(n.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(d=0,f=0),{cameraAnimation:C=>{const I=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:as,zoom:l?Math.round(I.zoom)+l*(n.shiftKey?2:1):I.zoom,bearing:I.bearing+d*this._bearingStep,pitch:I.pitch+f*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:I.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function as(_){return _*(2-_)}const ah=4.000244140625;class Wi{constructor(n,l){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=n,this._tr=new Gi(n),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let l=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const d=T.now(),f=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%ah==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(f*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),n.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=n,this._delta-=l,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=A.mousePos(this._map.getCanvas(),n),d=this._tr;this._around=l.y>d.transform.height/2-d.transform.getHorizon()?c.N.convert(this._aroundCenter?d.center:d.unproject(l)):c.N.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>ah?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&z!==0&&(z=1/z);const L=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(L*z))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,d=this._startZoom,f=this._easing;let y,w=!1;const C=T.now()-this._lastWheelEventTime;if(this._type==="wheel"&&d&&f&&C){const I=Math.min(C/200,1),z=f(I);y=c.y.number(d,l,z),I<1?this._frameId||(this._frameId=!0):w=!0}else y=l,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:y-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let l=c.b9;if(this._prevEase){const d=this._prevEase,f=(T.now()-d.start)/d.duration,y=d.easing(f+.01)-d.easing(f),w=.27/Math.sqrt(y*y+1e-4)*.01,C=Math.sqrt(.0729-w*w);l=c.b8(w,C,.25,1)}return this._prevEase={start:T.now(),duration:n,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class po{constructor(n,l){this._clickZoom=n,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Cg{constructor(n){this._tr=new Gi(n),this.reset()}reset(){this._active=!1}dblclick(n,l){return n.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Eg{constructor(){this._tap=new ic({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,l,d){if(!this._swipePoint)if(this._tapTime){const f=l[0],y=n.timeStamp-this._tapTime<500,w=this._tapPoint.dist(f)<30;y&&w?d.length>0&&(this._swipePoint=f,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(n,l,d)}touchmove(n,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const f=l[0],y=f.y-this._swipePoint.y;return this._swipePoint=f,n.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(n,l,d)}touchend(n,l,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const f=this._tap.touchend(n,l,d);f&&(this._tapTime=n.timeStamp,this._tapPoint=f)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cf{constructor(n,l,d){this._el=n,this._mousePan=l,this._touchPan=d}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ef{constructor(n,l,d){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=l,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class lh{constructor(n,l,d,f){this._el=n,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Yo{constructor(n,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",n);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),f=document.createElement("div");f.className="maplibregl-desktop-message",f.textContent=l,this._container.appendChild(f);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,l){this._enabled&&(this._map.fire(new c.k("cooperativegestureprevented",{gestureType:n,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Pi=_=>_.zoom||_.drag||_.pitch||_.rotate;class ut extends c.k{}function cc(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class ch{constructor(n,l){this.handleWindowEvent=f=>{this.handleEvent(f,`${f.type}Window`)},this.handleEvent=(f,y)=>{if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=f.type==="renderFrame"?void 0:f,C={needsRenderFrame:!1},I={},z={},L=f.touches,B=L?this._getMapTouches(L):void 0,W=B?A.touchPos(this._map.getCanvas(),B):A.mousePos(this._map.getCanvas(),f);for(const{handlerName:ae,handler:ue,allowed:de}of this._handlers){if(!ue.isEnabled())continue;let ge;this._blockedByActive(z,de,ae)?ue.reset():ue[y||f.type]&&(ge=ue[y||f.type](f,W,B),this.mergeHandlerResult(C,I,ge,ae,w),ge&&ge.needsRenderFrame&&this._triggerRenderFrame()),(ge||ue.isActive())&&(z[ae]=ue)}const J={};for(const ae in this._previousActiveHandlers)z[ae]||(J[ae]=w);this._previousActiveHandlers=z,(Object.keys(J).length||cc(C))&&(this._changes.push([C,I,J]),this._triggerRenderFrame()),(Object.keys(z).length||cc(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Q}=C;Q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Q(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yu(n),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,y,w]of this._listeners)A.addEventListener(f,y,f===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[n,l,d]of this._listeners)A.removeEventListener(n,l,n===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(n){const l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new kf(l,n));const f=l.boxZoom=new di(l,n);this._add("boxZoom",f),n.interactive&&n.boxZoom&&f.enable();const y=l.cooperativeGestures=new Yo(l,n.cooperativeGestures);this._add("cooperativeGestures",y),n.cooperativeGestures&&y.enable();const w=new Ko(l),C=new Cg(l);l.doubleClickZoom=new po(C,w),this._add("tapZoom",w),this._add("clickZoom",C),n.interactive&&n.doubleClickZoom&&l.doubleClickZoom.enable();const I=new Eg;this._add("tapDragZoom",I);const z=l.touchPitch=new nl(l);this._add("touchPitch",z),n.interactive&&n.touchPitch&&l.touchPitch.enable(n.touchPitch);const L=th(n),B=nh(n);l.dragRotate=new Ef(n,L,B),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]),n.interactive&&n.dragRotate&&l.dragRotate.enable();const W=(({enable:ge,clickTolerance:se})=>{const xe=new sc({checkCorrectEvent:Se=>A.mouseButton(Se)===0&&!Se.ctrlKey});return new Ss({clickTolerance:se,move:(Se,Ee)=>({around:Ee,panDelta:Ee.sub(Se)}),activateOnStart:!0,moveStateManager:xe,enable:ge,assignEvents:oc})})(n),J=new fo(n,l);l.dragPan=new Cf(d,W,J),this._add("mousePan",W),this._add("touchPan",J,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&l.dragPan.enable(n.dragPan);const Q=new oh,ae=new ih;l.touchZoomRotate=new lh(d,ae,Q,I),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&l.touchZoomRotate.enable(n.touchZoomRotate);const ue=l.scrollZoom=new Wi(l,()=>this._triggerRenderFrame());this._add("scrollZoom",ue,["mousePan"]),n.interactive&&n.scrollZoom&&l.scrollZoom.enable(n.scrollZoom);const de=l.keyboard=new Ei(l);this._add("keyboard",de),n.interactive&&n.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new Un(l))}_add(n,l,d){this._handlers.push({handlerName:n,handler:l,allowed:d}),this._handlersById[n]=l}stop(n){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Pi(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,l,d){for(const f in n)if(f!==d&&(!l||l.indexOf(f)<0))return!0;return!1}_getMapTouches(n){const l=[];for(const d of n)this._el.contains(d.target)&&l.push(d);return l}mergeHandlerResult(n,l,d,f,y){if(!d)return;c.e(n,d);const w={handlerName:f,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(l.zoom=w),d.panDelta!==void 0&&(l.drag=w),d.pitchDelta!==void 0&&(l.pitch=w),d.bearingDelta!==void 0&&(l.rotate=w)}_applyChanges(){const n={},l={},d={};for(const[f,y,w]of this._changes)f.panDelta&&(n.panDelta=(n.panDelta||new c.P(0,0))._add(f.panDelta)),f.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(n.around=f.around),f.pinchAround!==void 0&&(n.pinchAround=f.pinchAround),f.noInertia&&(n.noInertia=f.noInertia),c.e(l,y),c.e(d,w);this._updateMapTransform(n,l,d),this._changes=[]}_updateMapTransform(n,l,d){const f=this._map,y=f._getTransformForUpdate(),w=f.terrain;if(!(cc(n)||w&&this._terrainMovement))return this._fireEvents(l,d,!0);let{panDelta:C,zoomDelta:I,bearingDelta:z,pitchDelta:L,around:B,pinchAround:W}=n;W!==void 0&&(B=W),f._stop(!0),B=B||f.transform.centerPoint;const J=y.pointLocation(C?B.sub(C):B);z&&(y.bearing+=z),L&&(y.pitch+=L),I&&(y.zoom+=I),w?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(C)):y.setLocationAtPoint(J,B):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(J,B)):y.setLocationAtPoint(J,B),f._applyUpdatedTransform(y),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(l,d,!0)}_fireEvents(n,l,d){const f=Pi(this._eventsInProgress),y=Pi(n),w={};for(const B in n){const{originalEvent:W}=n[B];this._eventsInProgress[B]||(w[`${B}start`]=W),this._eventsInProgress[B]=n[B]}!f&&y&&this._fireEvent("movestart",y.originalEvent);for(const B in w)this._fireEvent(B,w[B]);y&&this._fireEvent("move",y.originalEvent);for(const B in n){const{originalEvent:W}=n[B];this._fireEvent(B,W)}const C={};let I;for(const B in this._eventsInProgress){const{handlerName:W,originalEvent:J}=this._eventsInProgress[B];this._handlersById[W].isActive()||(delete this._eventsInProgress[B],I=l[W]||J,C[`${B}end`]=I)}for(const B in C)this._fireEvent(B,C[B]);const z=Pi(this._eventsInProgress),L=(f||y)&&!z;if(L&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const B=this._map._getTransformForUpdate();B.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(B)}if(d&&L){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;!B||!B.essential&&T.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:I})),W(this._map.getBearing())&&this._map.resetNorth()):(W(B.bearing||this._map.getBearing())&&(B.bearing=0),B.freezeElevation=!0,this._map.easeTo(B,{originalEvent:I})),this._updatingCamera=!1}}_fireEvent(n,l){this._map.fire(new c.k(n,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new ut("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Pf extends c.E{constructor(n,l){super(),this._renderFrameCallback=()=>{const d=Math.min((T.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.N(this.transform.center.lng,this.transform.center.lat)}setCenter(n,l){return this.jumpTo({center:n},l)}panBy(n,l,d){return n=c.P.convert(n).mult(-1),this.panTo(this.transform.center,c.e({offset:n},l),d)}panTo(n,l,d){return this.easeTo(c.e({center:n},l),d)}getZoom(){return this.transform.zoom}setZoom(n,l){return this.jumpTo({zoom:n},l),this}zoomTo(n,l,d){return this.easeTo(c.e({zoom:n},l),d)}zoomIn(n,l){return this.zoomTo(this.getZoom()+1,n,l),this}zoomOut(n,l){return this.zoomTo(this.getZoom()-1,n,l),this}getBearing(){return this.transform.bearing}setBearing(n,l){return this.jumpTo({bearing:n},l),this}getPadding(){return this.transform.padding}setPadding(n,l){return this.jumpTo({padding:n},l),this}rotateTo(n,l,d){return this.easeTo(c.e({bearing:n},l),d)}resetNorth(n,l){return this.rotateTo(0,c.e({duration:1e3},n),l),this}resetNorthPitch(n,l){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},n),l),this}snapToNorth(n,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,l):this}getPitch(){return this.transform.pitch}setPitch(n,l){return this.jumpTo({pitch:n},l),this}cameraForBounds(n,l){n=Pe.convert(n).adjustAntiMeridian();const d=l&&l.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),d,l)}_cameraForBoxAndBearing(n,l,d,f){const y={top:0,bottom:0,right:0,left:0};if(typeof(f=c.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const Je=f.padding;f.padding={top:Je,bottom:Je,right:Je,left:Je}}f.padding=c.e(y,f.padding);const w=this.transform,C=w.padding,I=new Pe(n,l),z=w.project(I.getNorthWest()),L=w.project(I.getNorthEast()),B=w.project(I.getSouthEast()),W=w.project(I.getSouthWest()),J=c.ba(-d),Q=z.rotate(J),ae=L.rotate(J),ue=B.rotate(J),de=W.rotate(J),ge=new c.P(Math.max(Q.x,ae.x,de.x,ue.x),Math.max(Q.y,ae.y,de.y,ue.y)),se=new c.P(Math.min(Q.x,ae.x,de.x,ue.x),Math.min(Q.y,ae.y,de.y,ue.y)),xe=ge.sub(se),Se=(w.width-(C.left+C.right+f.padding.left+f.padding.right))/xe.x,Ee=(w.height-(C.top+C.bottom+f.padding.top+f.padding.bottom))/xe.y;if(Ee<0||Se<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Oe=Math.min(w.scaleZoom(w.scale*Math.min(Se,Ee)),f.maxZoom),Ge=c.P.convert(f.offset),tt=new c.P((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(c.ba(d)),lt=Ge.add(tt).mult(w.scale/w.zoomScale(Oe));return{center:w.unproject(z.add(B).div(2).sub(lt)),zoom:Oe,bearing:d}}fitBounds(n,l,d){return this._fitInternal(this.cameraForBounds(n,l),l,d)}fitScreenCoordinates(n,l,d,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(n)),this.transform.pointLocation(c.P.convert(l)),d,f),f,y)}_fitInternal(n,l,d){return n?(delete(l=c.e(n,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(n,l){this.stop();const d=this._getTransformForUpdate();let f=!1,y=!1,w=!1;return"zoom"in n&&d.zoom!==+n.zoom&&(f=!0,d.zoom=+n.zoom),n.center!==void 0&&(d.center=c.N.convert(n.center)),"bearing"in n&&d.bearing!==+n.bearing&&(y=!0,d.bearing=+n.bearing),"pitch"in n&&d.pitch!==+n.pitch&&(w=!0,d.pitch=+n.pitch),n.padding==null||d.isPaddingEqual(n.padding)||(d.padding=n.padding),this._applyUpdatedTransform(d),this.fire(new c.k("movestart",l)).fire(new c.k("move",l)),f&&this.fire(new c.k("zoomstart",l)).fire(new c.k("zoom",l)).fire(new c.k("zoomend",l)),y&&this.fire(new c.k("rotatestart",l)).fire(new c.k("rotate",l)).fire(new c.k("rotateend",l)),w&&this.fire(new c.k("pitchstart",l)).fire(new c.k("pitch",l)).fire(new c.k("pitchend",l)),this.fire(new c.k("moveend",l))}calculateCameraOptionsFromTo(n,l,d,f=0){const y=c.Z.fromLngLat(n,l),w=c.Z.fromLngLat(d,f),C=w.x-y.x,I=w.y-y.y,z=w.z-y.z,L=Math.hypot(C,I,z);if(L===0)throw new Error("Can't calculate camera options with same From and To");const B=Math.hypot(C,I),W=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),J=180*Math.atan2(C,-I)/Math.PI;let Q=180*Math.acos(B/L)/Math.PI;return Q=z<0?90-Q:90+Q,{center:w.toLngLat(),zoom:W,pitch:Q,bearing:J}}easeTo(n,l){var d;this._stop(!1,n.easeId),((n=c.e({offset:[0,0],duration:500,easing:c.b9},n)).animate===!1||!n.essential&&T.prefersReducedMotion)&&(n.duration=0);const f=this._getTransformForUpdate(),y=f.zoom,w=f.bearing,C=f.pitch,I=f.padding,z="bearing"in n?this._normalizeBearing(n.bearing,w):w,L="pitch"in n?+n.pitch:C,B="padding"in n?n.padding:f.padding,W=c.P.convert(n.offset);let J=f.centerPoint.add(W);const Q=f.pointLocation(J),{center:ae,zoom:ue}=f.getConstrained(c.N.convert(n.center||Q),(d=n.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(ae,f);const de=f.project(Q),ge=f.project(ae).sub(de),se=f.zoomScale(ue-y);let xe,Se;n.around&&(xe=c.N.convert(n.around),Se=f.locationPoint(xe));const Ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ue!==y,this._rotating=this._rotating||w!==z,this._pitching=this._pitching||L!==C,this._padding=!f.isPaddingEqual(B),this._easeId=n.easeId,this._prepareEase(l,n.noMoveStart,Ee),this.terrain&&this._prepareElevation(ae),this._ease(Oe=>{if(this._zooming&&(f.zoom=c.y.number(y,ue,Oe)),this._rotating&&(f.bearing=c.y.number(w,z,Oe)),this._pitching&&(f.pitch=c.y.number(C,L,Oe)),this._padding&&(f.interpolatePadding(I,B,Oe),J=f.centerPoint.add(W)),this.terrain&&!n.freezeElevation&&this._updateElevation(Oe),xe)f.setLocationAtPoint(xe,Se);else{const Ge=f.zoomScale(f.zoom-y),tt=ue>y?Math.min(2,se):Math.max(.5,se),lt=Math.pow(tt,1-Oe),Je=f.unproject(de.add(ge.mult(Oe*lt)).mult(Ge));f.setLocationAtPoint(f.renderWorldCopies?Je.wrap():Je,J)}this._applyUpdatedTransform(f),this._fireMoveEvents(l)},Oe=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l,Oe)},n),this}_prepareEase(n,l,d={}){this._moving=!0,l||d.moving||this.fire(new c.k("movestart",n)),this._zooming&&!d.zooming&&this.fire(new c.k("zoomstart",n)),this._rotating&&!d.rotating&&this.fire(new c.k("rotatestart",n)),this._pitching&&!d.pitching&&this.fire(new c.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&l!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(d-(l-(d*n+this._elevationStart))/(1-n)),this._elevationTarget=l}this.transform.elevation=c.y.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){const l=n.getCameraPosition(),d=this.terrain.getElevationForLngLatZoom(l.lngLat,n.zoom);if(l.altitude<d){const f=this.calculateCameraOptionsFromTo(l.lngLat,d,n.center,n.elevation);return{pitch:f.pitch,zoom:f.zoom}}return{}}_applyUpdatedTransform(n){const l=[];if(this.terrain&&l.push(f=>this._elevateCameraIfInsideTerrain(f)),this.transformCameraUpdate&&l.push(f=>this.transformCameraUpdate(f)),!l.length)return;const d=n.clone();for(const f of l){const y=d.clone(),{center:w,zoom:C,pitch:I,bearing:z,elevation:L}=f(y);w&&(y.center=w),C!==void 0&&(y.zoom=C),I!==void 0&&(y.pitch=I),z!==void 0&&(y.bearing=z),L!==void 0&&(y.elevation=L),d.apply(y)}this.transform.apply(d)}_fireMoveEvents(n){this.fire(new c.k("move",n)),this._zooming&&this.fire(new c.k("zoom",n)),this._rotating&&this.fire(new c.k("rotate",n)),this._pitching&&this.fire(new c.k("pitch",n))}_afterEase(n,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const d=this._zooming,f=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new c.k("zoomend",n)),f&&this.fire(new c.k("rotateend",n)),y&&this.fire(new c.k("pitchend",n)),this.fire(new c.k("moveend",n))}flyTo(n,l){var d;if(!n.essential&&T.prefersReducedMotion){const st=c.M(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(st,l)}this.stop(),n=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.b9},n);const f=this._getTransformForUpdate(),y=f.zoom,w=f.bearing,C=f.pitch,I=f.padding,z="bearing"in n?this._normalizeBearing(n.bearing,w):w,L="pitch"in n?+n.pitch:C,B="padding"in n?n.padding:f.padding,W=c.P.convert(n.offset);let J=f.centerPoint.add(W);const Q=f.pointLocation(J),{center:ae,zoom:ue}=f.getConstrained(c.N.convert(n.center||Q),(d=n.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(ae,f);const de=f.zoomScale(ue-y),ge=f.project(Q),se=f.project(ae).sub(ge);let xe=n.curve;const Se=Math.max(f.width,f.height),Ee=Se/de,Oe=se.mag();if("minZoom"in n){const st=c.ac(Math.min(n.minZoom,y,ue),f.minZoom,f.maxZoom),Bt=Se/f.zoomScale(st-y);xe=Math.sqrt(Bt/Oe*2)}const Ge=xe*xe;function tt(st){const Bt=(Ee*Ee-Se*Se+(st?-1:1)*Ge*Ge*Oe*Oe)/(2*(st?Ee:Se)*Ge*Oe);return Math.log(Math.sqrt(Bt*Bt+1)-Bt)}function lt(st){return(Math.exp(st)-Math.exp(-st))/2}function Je(st){return(Math.exp(st)+Math.exp(-st))/2}const Ye=tt(!1);let gt=function(st){return Je(Ye)/Je(Ye+xe*st)},Ot=function(st){return Se*((Je(Ye)*(lt(Bt=Ye+xe*st)/Je(Bt))-lt(Ye))/Ge)/Oe;var Bt},Qe=(tt(!0)-Ye)/xe;if(Math.abs(Oe)<1e-6||!isFinite(Qe)){if(Math.abs(Se-Ee)<1e-6)return this.easeTo(n,l);const st=Ee<Se?-1:1;Qe=Math.abs(Math.log(Ee/Se))/xe,Ot=()=>0,gt=Bt=>Math.exp(st*xe*Bt)}return n.duration="duration"in n?+n.duration:1e3*Qe/("screenSpeed"in n?+n.screenSpeed/xe:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=w!==z,this._pitching=L!==C,this._padding=!f.isPaddingEqual(B),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(ae),this._ease(st=>{const Bt=st*Qe,In=1/gt(Bt);f.zoom=st===1?ue:y+f.scaleZoom(In),this._rotating&&(f.bearing=c.y.number(w,z,st)),this._pitching&&(f.pitch=c.y.number(C,L,st)),this._padding&&(f.interpolatePadding(I,B,st),J=f.centerPoint.add(W)),this.terrain&&!n.freezeElevation&&this._updateElevation(st);const $t=st===1?ae:f.unproject(ge.add(se.mult(Ot(Bt))).mult(In));f.setLocationAtPoint(f.renderWorldCopies?$t.wrap():$t,J),this._applyUpdatedTransform(f),this._fireMoveEvents(l)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,l){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,l)}return n||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(n,l,d){d.animate===!1||d.duration===0?(n(1),l()):(this._easeStart=T.now(),this._easeOptions=d,this._onEaseFrame=n,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,l){n=c.b3(n,-180,180);const d=Math.abs(n-l);return Math.abs(n-360-l)<d&&(n-=360),Math.abs(n+360-l)<d&&(n+=360),n}_normalizeCenter(n,l){if(!l.renderWorldCopies||l.lngRange)return;const d=n.lng-l.center.lng;n.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(c.N.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}const Jo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Qo{constructor(n=Jo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,l){const d=this._map._getUIString(`AttributionControl.${l}`);n.title=d,n.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const l=this._map.style.sourceCaches;for(const f in l){const y=l[f];if(y.used||y.usedForTerrain){const w=y.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n=n.filter(f=>String(f).trim()),n.sort((f,y)=>f.length-y.length),n=n.filter((f,y)=>{for(let w=y+1;w<n.length;w++)if(n[w].indexOf(f)>=0)return!1;return!0});const d=n.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,n.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class uh{constructor(n={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const l=A.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Qt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const l=++this._id;return this._queue.push({callback:n,id:l,cancelled:!1}),l}remove(n){const l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(const f of d)if(f.id===n)return void(f.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const d of l)if(!d.cancelled&&(d.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var hh=c.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Pg extends c.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,l){this.sourceCache.update(n,l),this._renderableTilesKeys=[];const d={};for(const f of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))d[f.key]=!0,this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.posMatrix=new Float64Array(16),c.aP(f.posMatrix,0,c.X,0,c.X,0,1),this._tiles[f.key]=new zn(f,this.tileSize));for(const f in this._tiles)d[f]||delete this._tiles[f]}freeRtt(n){for(const l in this._tiles){const d=this._tiles[l];(!n||d.tileID.equals(n)||d.tileID.isChildOf(n)||n.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const l={};for(const d of this._renderableTilesKeys){const f=this._tiles[d].tileID;if(f.canonical.equals(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16),c.aP(y.posMatrix,0,c.X,0,c.X,0,1),l[d]=y}else if(f.canonical.isChildOf(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const w=f.canonical.z-n.canonical.z,C=f.canonical.x-(f.canonical.x>>w<<w),I=f.canonical.y-(f.canonical.y>>w<<w),z=c.X>>w;c.aP(y.posMatrix,0,z,0,z,0,1),c.J(y.posMatrix,y.posMatrix,[-C*z,-I*z,0]),l[d]=y}else if(n.canonical.isChildOf(f.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const w=n.canonical.z-f.canonical.z,C=n.canonical.x-(n.canonical.x>>w<<w),I=n.canonical.y-(n.canonical.y>>w<<w),z=c.X>>w;c.aP(y.posMatrix,0,c.X,0,c.X,0,1),c.J(y.posMatrix,y.posMatrix,[C*z,I*z,0]),c.K(y.posMatrix,y.posMatrix,[1/2**w,1/2**w,0]),l[d]=y}}return l}getSourceTile(n,l){const d=this.sourceCache._source;let f=n.overscaledZ-this.deltaZoom;if(f>d.maxzoom&&(f=d.maxzoom),f<d.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(f).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!y||!y.dem)&&l)for(;f>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(n.scaledTo(f--).key);return y}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=n)}}class dh{constructor(n,l,d){this.painter=n,this.sourceCache=new Pg(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,l,d,f=c.X){var y;if(!(l>=0&&l<f&&d>=0&&d<f))return 0;const w=this.getTerrainData(n),C=(y=w.tile)===null||y===void 0?void 0:y.dem;if(!C)return 0;const I=function(Q,ae,ue){var de=ae[0],ge=ae[1];return Q[0]=ue[0]*de+ue[4]*ge+ue[12],Q[1]=ue[1]*de+ue[5]*ge+ue[13],Q}([],[l/f*c.X,d/f*c.X],w.u_terrain_matrix),z=[I[0]*C.dim,I[1]*C.dim],L=Math.floor(z[0]),B=Math.floor(z[1]),W=z[0]-L,J=z[1]-B;return C.get(L,B)*(1-W)*(1-J)+C.get(L+1,B)*W*(1-J)+C.get(L,B+1)*(1-W)*J+C.get(L+1,B+1)*W*J}getElevationForLngLatZoom(n,l){if(!c.bb(l,n.wrap()))return 0;const{tileID:d,mercatorX:f,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(n,l);return this.getElevation(d,f%c.X,y%c.X,c.X)}getElevation(n,l,d,f=c.X){return this.getDEMElevation(n,l,d,f)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const f=this.painter.context,y=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ze(f,y,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ze(f,new c.R({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.an([])}const l=this.sourceCache.getSourceTile(n,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const f=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new ze(f,l.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),l.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const d=l&&l+l.tileID.key+n.key;if(d&&!this._demMatrixCache[d]){const f=this.sourceCache.sourceCache._source.maxzoom;let y=n.canonical.z-l.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=f?y=n.canonical.z-f:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=n.canonical.x-(n.canonical.x>>y<<y),C=n.canonical.y-(n.canonical.y>>y<<y),I=c.bc(new Float64Array(16),[1/(c.X<<y),1/(c.X<<y),0]);c.J(I,I,[w*c.X,C*c.X,0]),this._demMatrixCache[n.key]={matrix:I,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(n){const l=this.painter,d=l.width/devicePixelRatio,f=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ze(l.context,{width:d,height:f,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ze(l.context,{width:d,height:f,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,f,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,f))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,w=0;y<this._coordsTextureSize;y++)for(let C=0;C<this._coordsTextureSize;C++,w+=4)l[w+0]=255&C,l[w+1]=255&y,l[w+2]=C>>8<<4|y>>8,l[w+3]=0;const d=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),f=new ze(n,d,n.gl.RGBA,{premultiply:!1});return f.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),d=this.painter.context,f=d.gl,y=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),f.readPixels(y,C-w-1,1,1,f.RGBA,f.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null);const I=l[0]+(l[2]>>4<<8),z=l[1]+((15&l[2])<<8),L=this.coordsIndex[255-l[3]],B=L&&this.sourceCache.getTileByID(L);if(!B)return null;const W=this._coordsTextureSize,J=(1<<B.tileID.canonical.z)*W;return new c.Z((B.tileID.canonical.x*W+I)/J+B.tileID.wrap,(B.tileID.canonical.y*W+z)/J,this.getElevation(B.tileID,I,z,W))}depthAtPoint(n){const l=new Uint8Array(4),d=this.painter.context,f=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),f.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,f.RGBA,f.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,l=new c.bd,d=new c.aY,f=this.meshSize,y=c.X/f,w=f*f;for(let B=0;B<=f;B++)for(let W=0;W<=f;W++)l.emplaceBack(W*y,B*y,0);for(let B=0;B<w;B+=f+1)for(let W=0;W<f;W++)d.emplaceBack(W+B,f+W+B+1,f+W+B+2),d.emplaceBack(W+B,f+W+B+2,W+B+1);const C=l.length,I=C+2*(f+1);for(const B of[0,1])for(let W=0;W<=f;W++)for(const J of[0,1])l.emplaceBack(W*y,B*c.X,J);for(let B=0;B<2*f;B+=2)d.emplaceBack(I+B,I+B+1,I+B+3),d.emplaceBack(I+B,I+B+3,I+B+2),d.emplaceBack(C+B,C+B+3,C+B+1),d.emplaceBack(C+B,C+B+2,C+B+3);const z=l.length,L=z+2*(f+1);for(const B of[0,1])for(let W=0;W<=f;W++)for(const J of[0,1])l.emplaceBack(B*c.X,W*y,J);for(let B=0;B<2*f;B+=2)d.emplaceBack(z+B,z+B+1,z+B+3),d.emplaceBack(z+B,z+B+3,z+B+2),d.emplaceBack(L+B,L+B+3,L+B+1),d.emplaceBack(L+B,L+B+2,L+B+3);return this._mesh=new Ql(n.createVertexBuffer(l,hh.members),n.createIndexBuffer(d),c.a0.simpleSegment(0,0,l.length,d.length)),this._mesh}getMeshFrameDelta(n){return 2*Math.PI*c.be/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,l){var d;const{tileID:f}=this._getOverscaledTileIDFromLngLatZoom(n,l);return(d=this.getMinMaxElevation(f).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(n){const l=this.getTerrainData(n).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=l.dem.min*this.exaggeration,d.maxElevation=l.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(n,l){const d=c.Z.fromLngLat(n.wrap()),f=(1<<l)*c.X,y=d.x*f,w=d.y*f,C=Math.floor(y/c.X),I=Math.floor(w/c.X);return{tileID:new c.S(l,0,l,C,I),mercatorX:y,mercatorY:w}}}class Ig{constructor(n,l,d){this._context=n,this._size=l,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new ze(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(d.texture),{id:n,fbo:l,texture:d,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>n.id!==l),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const ea={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class If{constructor(n,l){this.painter=n,this.terrain=l,this.pool=new Ig(n.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(d=>!n._layers[d].isHidden(l)),this._coordsDescendingInv={};for(const d in n.sourceCaches){this._coordsDescendingInv[d]={};const f=n.sourceCaches[d].getVisibleCoordinates();for(const y of f){const w=this.terrain.sourceCache.getTerrainCoords(y);for(const C in w)this._coordsDescendingInv[d][C]||(this._coordsDescendingInv[d][C]=[]),this._coordsDescendingInv[d][C].push(w[C])}}this._coordsDescendingInvStr={};for(const d of n._order){const f=n._layers[d],y=f.source;if(ea[f.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const w in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][w]=this._coordsDescendingInv[y][w].map(C=>C.key).sort().join()}}for(const d of this._renderableTiles)for(const f in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[f][d.tileID.key];y&&y!==d.rttCoords[f]&&(d.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const l=n.type,d=this.painter,f=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(ea[l]&&(this._prevType&&ea[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(n.id),!f))return!0;if(ea[this._prevType]||ea[l]&&f){this._prevType=l;const y=this._stacks.length-1,w=this._stacks[y]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(bf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[y]){const z=this.pool.getObjectForId(C.rtt[y].id);if(z.stamp===C.rtt[y].stamp){this.pool.useObject(z);continue}}const I=this.pool.getOrCreateFreeObject();this.pool.useObject(I),this.pool.stampObject(I),C.rtt[y]={id:I.id,stamp:I.stamp},d.context.bindFramebuffer.set(I.fbo.framebuffer),d.context.clear({color:c.aM.transparent,stencil:0}),d.currentStencilSource=void 0;for(let z=0;z<w.length;z++){const L=d.style._layers[w[z]],B=L.source?this._coordsDescendingInv[L.source][C.tileID.key]:[C.tileID];d.context.viewport.set([0,0,I.fbo.width,I.fbo.height]),d._renderTileClippingMasks(L,B),d.renderLayer(d,d.style.sourceCaches[L.source],L,B),L.source&&(C.rttCoords[L.source]=this._coordsDescendingInvStr[L.source][C.tileID.key])}}return bf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ea[l]}return!1}}const fh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Af=S,Ag={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Jo,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},ph=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},Mg={showCompass:!0,showZoom:!0,visualizePitch:!1};class Dg{constructor(n,l,d=!1){this.mousedown=w=>{this.startMouse(c.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),A.mousePos(this.element,w)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,A.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const f=n.dragRotate._mouseRotate.getClickTolerance(),y=n.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=th({clickTolerance:f,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:C,bearingDegreesPerPixelMoved:I=.8})=>{const z=new eh;return new Ss({clickTolerance:C,move:(L,B)=>({bearingDelta:(B.x-L.x)*I}),moveStateManager:z,enable:w,assignEvents:ph})})({clickTolerance:f,enable:!0}),this.map=n,d&&(this.mousePitch=nh({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:C,pitchDegreesPerPixelMoved:I=-.5})=>{const z=new eh;return new Ss({clickTolerance:C,move:(L,B)=>({pitchDelta:(B.y-L.y)*I}),moveStateManager:z,enable:w,assignEvents:ph})})({clickTolerance:y,enable:!0})),A.addEventListener(l,"mousedown",this.mousedown),A.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(l,"touchcancel",this.reset)}startMouse(n,l){this.mouseRotate.dragStart(n,l),this.mousePitch&&this.mousePitch.dragStart(n,l),A.disableDrag()}startTouch(n,l){this.touchRotate.dragStart(n,l),this.touchPitch&&this.touchPitch.dragStart(n,l),A.disableDrag()}moveMouse(n,l){const d=this.map,{bearingDelta:f}=this.mouseRotate.dragMove(n,l)||{};if(f&&d.setBearing(d.getBearing()+f),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(n,l)||{};y&&d.setPitch(d.getPitch()+y)}}moveTouch(n,l){const d=this.map,{bearingDelta:f}=this.touchRotate.dragMove(n,l)||{};if(f&&d.setBearing(d.getBearing()+f),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(n,l)||{};y&&d.setPitch(d.getPitch()+y)}}off(){const n=this.element;A.removeEventListener(n,"mousedown",this.mousedown),A.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let fi;function Pn(_,n,l){const d=new c.N(_.lng,_.lat);if(_=new c.N(_.lng,_.lat),n){const f=new c.N(_.lng-360,_.lat),y=new c.N(_.lng+360,_.lat),w=l.locationPoint(_).distSqr(n);l.locationPoint(f).distSqr(n)<w?_=f:l.locationPoint(y).distSqr(n)<w&&(_=y)}for(;Math.abs(_.lng-l.center.lng)>180;){const f=l.locationPoint(_);if(f.x>=0&&f.y>=0&&f.x<=l.width&&f.y<=l.height)break;_.lng>l.center.lng?_.lng-=360:_.lng+=360}return _.lng!==d.lng&&l.locationPoint(_).y>l.height/2-l.getHorizon()?_:d}const ta={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function uc(_,n,l){const d=_.classList;for(const f in ta)d.remove(`maplibregl-${l}-anchor-${f}`);d.add(`maplibregl-${l}-anchor-${n}`)}class hc extends c.E{constructor(n){if(super(),this._onKeyPress=l=>{const d=l.code,f=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&f!==32&&f!==13||this.togglePopup()},this._onMapClick=l=>{const d=l.originalEvent.target,f=this._element;this._popup&&(d===f||f.contains(d))&&this.togglePopup()},this._update=l=>{var d;if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Pn(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${ta[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${y}`),T.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=c.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div");const l=A.createNS("http://www.w3.org/2000/svg","svg"),d=41,f=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${d}px`),l.setAttributeNS(null,"width",`${f}px`),l.setAttributeNS(null,"viewBox",`0 0 ${f} ${d}`);const y=A.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const w=A.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const C=A.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const de of I){const ge=A.createNS("http://www.w3.org/2000/svg","ellipse");ge.setAttributeNS(null,"opacity","0.04"),ge.setAttributeNS(null,"cx","10.5"),ge.setAttributeNS(null,"cy","5.80029008"),ge.setAttributeNS(null,"rx",de.rx),ge.setAttributeNS(null,"ry",de.ry),C.appendChild(ge)}const z=A.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const L=A.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(L);const B=A.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"opacity","0.25"),B.setAttributeNS(null,"fill","#000000");const W=A.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),B.appendChild(W);const J=A.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");const Q=A.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ae=A.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");const ue=A.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),Q.appendChild(ae),Q.appendChild(ue),w.appendChild(C),w.appendChild(z),w.appendChild(B),w.appendChild(J),w.appendChild(Q),l.appendChild(w),l.setAttributeNS(null,"height",d*this._scale+"px"),l.setAttributeNS(null,"width",f*this._scale+"px"),this._element.appendChild(l),this._offset=c.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),uc(this._element,this._anchor,"marker"),n&&n.className)for(const l of n.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.N.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const f=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var l,d;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const f=this._map,y=f.terrain.depthAtPoint(this._pos),w=f.terrain.getElevationForLngLatZoom(this._lngLat,f.transform.tileZoom);if(f.transform.lngLatToCameraDepth(this._lngLat,w)-y<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/f.transform._pixelPerMeter,I=Math.sin(f.getPitch()*Math.PI/180)*C,z=f.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),L=f.transform.lngLatToCameraDepth(this._lngLat,w+I)-z>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&L&&this._popup.remove(),this._element.style.opacity=L?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=c.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,l){return n===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const Mf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let rl=0,il=!1;const ls={maxWidth:100,unit:"metric"};function sl(_,n,l){const d=l&&l.maxWidth||100,f=_._container.clientHeight/2,y=_.unproject([0,f]),w=_.unproject([d,f]),C=y.distanceTo(w);if(l&&l.unit==="imperial"){const I=3.2808*C;I>5280?mt(n,d,I/5280,_._getUIString("ScaleControl.Miles")):mt(n,d,I,_._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?mt(n,d,C/1852,_._getUIString("ScaleControl.NauticalMiles")):C>=1e3?mt(n,d,C/1e3,_._getUIString("ScaleControl.Kilometers")):mt(n,d,C,_._getUIString("ScaleControl.Meters"))}function mt(_,n,l,d){const f=function(y){const w=Math.pow(10,`${Math.floor(y)}`.length-1);let C=y/w;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(I){const z=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*z)/z}(C),w*C}(l);_.style.width=n*(f/l)+"px",_.innerHTML=`${f}&nbsp;${d}`}const Mt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},dc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fc(_){if(_){if(typeof _=="number"){const n=Math.round(Math.abs(_)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,_),"top-left":new c.P(n,n),"top-right":new c.P(-n,n),bottom:new c.P(0,-_),"bottom-left":new c.P(n,-n),"bottom-right":new c.P(-n,-n),left:new c.P(_,0),right:new c.P(-_,0)}}if(_ instanceof c.P||Array.isArray(_)){const n=c.P.convert(_);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.P.convert(_.center||[0,0]),top:c.P.convert(_.top||[0,0]),"top-left":c.P.convert(_["top-left"]||[0,0]),"top-right":c.P.convert(_["top-right"]||[0,0]),bottom:c.P.convert(_.bottom||[0,0]),"bottom-left":c.P.convert(_["bottom-left"]||[0,0]),"bottom-right":c.P.convert(_["bottom-right"]||[0,0]),left:c.P.convert(_.left||[0,0]),right:c.P.convert(_.right||[0,0])}}return fc(new c.P(0,0))}const mh=S;p.AJAXError=c.bh,p.Evented=c.E,p.LngLat=c.N,p.MercatorCoordinate=c.Z,p.Point=c.P,p.addProtocol=c.bi,p.config=c.a,p.removeProtocol=c.bj,p.AttributionControl=Qo,p.BoxZoomHandler=di,p.CanvasSource=er,p.CooperativeGesturesHandler=Yo,p.DoubleClickZoomHandler=po,p.DragPanHandler=Cf,p.DragRotateHandler=Ef,p.EdgeInsets=Zo,p.FullscreenControl=class extends c.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var n;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=l==null?void 0:l.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},p.GeoJSONSource=Pr,p.GeolocateControl=class extends c.E{constructor(_){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const l=new c.N(n.coords.longitude,n.coords.latitude),d=n.coords.accuracy,f=this._map.getBearing(),y=c.e({bearing:f},this.options.fitBoundsOptions),w=Pe.fromLngLat(l,d);this._map.fitBounds(w,y,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const l=new c.N(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&il)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new hc({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new hc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")),this.fire(new c.k("userlocationlostfocus")))})}},this.options=c.e({},Mf,_)}onAdd(_){return this._map=_,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return c._(this,arguments,void 0,function*(n=!1){if(fi!==void 0&&!n)return fi;if(window.navigator.permissions===void 0)return fi=!!window.navigator.geolocation,fi;try{fi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{fi=!!window.navigator.geolocation}return fi})}().then(n=>this._finishSetupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,rl=0,il=!1}_isOutOfMapMaxBounds(_){const n=this._map.getMaxBounds(),l=_.coords;return n&&(l.longitude<n.getWest()||l.longitude>n.getEast()||l.latitude<n.getSouth()||l.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),n=_.getSouthEast(),l=_.getNorthEast(),d=n.distanceTo(l),f=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":rl--,il=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart")),this.fire(new c.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),rl++,rl>1?(_={maximumAge:6e5,timeout:0},il=!0):(_=this.options.positionOptions,il=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},p.Hash=tc,p.ImageSource=En,p.KeyboardHandler=Ei,p.LngLatBounds=Pe,p.LogoControl=uh,p.Map=class extends Pf{constructor(_){c.bf.mark(c.bg.create);const n=Object.assign(Object.assign({},Ag),_);if(n.minZoom!=null&&n.maxZoom!=null&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(n.minPitch!=null&&n.maxPitch!=null&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(n.minPitch!=null&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(n.maxPitch!=null&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Xo(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Qt,this._controls=[],this._mapId=c.a4(),this._contextLost=l=>{l.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.k("webglcontextlost",{originalEvent:l}))},this._contextRestored=l=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:l}))},this._onMapScroll=l=>{if(l.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=n.preserveDrawingBuffer===!0,this._antialias=n.antialias===!0,this._trackResize=n.trackResize===!0,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles===!0,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions===!0,this._collectResourceTiming=n.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},fh),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=n.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=H.addThrottleControl(()=>this.isMoving()),this._requestManager=new ee(n.transformRequest),typeof n.container=="string"){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let l=!1;const d=Ya(f=>{this._trackResize&&!this._removed&&(this.resize(f),this.redraw())},50);this._resizeObserver=new ResizeObserver(f=>{l?d(f):l=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ch(this,n),this._hash=n.hash&&new tc(typeof n.hash=="string"&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,c.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Qo(typeof n.attributionControl=="boolean"?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new uh,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new c.k(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new c.k(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new c.k("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(_,n){if(n===void 0&&(n=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=_.onAdd(this);this._controls.push(_);const d=this._controlPositions[n];return n.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(_);return n>-1&&this._controls.splice(n,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,n,l,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,n,l,d)}resize(_){var n;const l=this._containerDimensions(),d=l[0],f=l[1],y=this._getClampedPixelRatio(d,f);if(this._resizeCanvas(d,f,y),this.painter.resize(d,f,y),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const I=this._getClampedPixelRatio(d,f);this._resizeCanvas(d,f,I),this.painter.resize(d,f,I)}this.transform.resize(d,f),(n=this._requestedCameraState)===null||n===void 0||n.resize(d,f);const w=!this._moving;return w&&(this.stop(),this.fire(new c.k("movestart",_)).fire(new c.k("move",_))),this.fire(new c.k("resize",_)),w&&this.fire(new c.k("moveend",_)),this}_getClampedPixelRatio(_,n){const{0:l,1:d}=this._maxCanvasSize,f=this.getPixelRatio(),y=_*f,w=n*f;return Math.min(y>l?l/y:1,w>d?d/w:1)*f}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Pe.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(c.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(c.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,n,l){if(_==="mouseenter"||_==="mouseover"){let d=!1;return{layers:n,listener:l,delegates:{mousemove:y=>{const w=n.filter(I=>this.getLayer(I)),C=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];C.length?d||(d=!0,l.call(this,new Ir(_,this,y.originalEvent,{features:C}))):d=!1},mouseout:()=>{d=!1}}}}if(_==="mouseleave"||_==="mouseout"){let d=!1;return{layers:n,listener:l,delegates:{mousemove:w=>{const C=n.filter(I=>this.getLayer(I));(C.length!==0?this.queryRenderedFeatures(w.point,{layers:C}):[]).length?d=!0:d&&(d=!1,l.call(this,new Ir(_,this,w.originalEvent)))},mouseout:w=>{d&&(d=!1,l.call(this,new Ir(_,this,w.originalEvent)))}}}}{const d=f=>{const y=n.filter(C=>this.getLayer(C)),w=y.length!==0?this.queryRenderedFeatures(f.point,{layers:y}):[];w.length&&(f.features=w,l.call(this,f),delete f.features)};return{layers:n,listener:l,delegates:{[_]:d}}}}_saveDelegatedListener(_,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(n)}_removeDelegatedListener(_,n,l){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const d=this._delegatedListeners[_];for(let f=0;f<d.length;f++){const y=d[f];if(y.listener===l&&y.layers.length===n.length&&y.layers.every(w=>n.includes(w))){for(const w in y.delegates)this.off(w,y.delegates[w]);return void d.splice(f,1)}}}on(_,n,l){if(l===void 0)return super.on(_,n);const d=this._createDelegatedListener(_,typeof n=="string"?[n]:n,l);this._saveDelegatedListener(_,d);for(const f in d.delegates)this.on(f,d.delegates[f]);return this}once(_,n,l){if(l===void 0)return super.once(_,n);const d=typeof n=="string"?[n]:n,f=this._createDelegatedListener(_,d,l);for(const y in f.delegates){const w=f.delegates[y];f.delegates[y]=(...C)=>{this._removeDelegatedListener(_,d,l),w(...C)}}this._saveDelegatedListener(_,f);for(const y in f.delegates)this.once(y,f.delegates[y]);return this}off(_,n,l){return l===void 0?super.off(_,n):(this._removeDelegatedListener(_,typeof n=="string"?[n]:n,l),this)}queryRenderedFeatures(_,n){if(!this.style)return[];let l;const d=_ instanceof c.P||Array.isArray(_),f=d?_:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(d?{}:_)||{},f instanceof c.P||typeof f[0]=="number")l=[c.P.convert(f)];else{const y=c.P.convert(f[0]),w=c.P.convert(f[1]);l=[y,new c.P(w.x,y.y),w,new c.P(y.x,w.y),y]}return this.style.queryRenderedFeatures(l,n,this.transform)}querySourceFeatures(_,n){return this.style.querySourceFeatures(_,n)}setStyle(_,n){return(n=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(_,n))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const n=this._locale[_];if(n==null)throw new Error(`Missing UI string '${_}'`);return n}_updateStyle(_,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,n));const l=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Ol(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,n,l):this.style.loadJSON(_,n,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ol(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,n){if(typeof _=="string"){const l=this._requestManager.transformRequest(_,"Style");c.h(l,new AbortController).then(d=>{this._updateDiff(d.data,n)}).catch(d=>{d&&this.fire(new c.j(d))})}else typeof _=="object"&&this._updateDiff(_,n)}_updateDiff(_,n){try{this.style.setState(_,n)&&this._update(!0)}catch(l){c.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(_,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(_,n){return this._lazyInitEmptyStyle(),this.style.addSource(_,n),this._update(!0)}isSourceLoaded(_){const n=this.style&&this.style.sourceCaches[_];if(n!==void 0)return n.loaded();this.fire(new c.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const n=this.style.sourceCaches[_.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&n.reload();for(const l in this.style._layers){const d=this.style._layers[l];d.type==="hillshade"&&d.source===_.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new dh(this.painter,n,_),this.painter.renderToTexture=new If(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:_})),this}getTerrain(){var _,n;return(n=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const n in _){const l=_[n]._tiles;for(const d in l){const f=l[d];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,n,l={}){const{pixelRatio:d=1,sdf:f=!1,stretchX:y,stretchY:w,content:C,textFitWidth:I,textFitHeight:z}=l;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||c.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:L,height:B,data:W}=n,J=n;return this.style.addImage(_,{data:new c.R({width:L,height:B},new Uint8Array(W)),pixelRatio:d,stretchX:y,stretchY:w,content:C,textFitWidth:I,textFitHeight:z,sdf:f,version:0,userImage:J}),J.onAdd&&J.onAdd(this,_),this}}{const{width:L,height:B,data:W}=T.getImageData(n);this.style.addImage(_,{data:new c.R({width:L,height:B},W),pixelRatio:d,stretchX:y,stretchY:w,content:C,textFitWidth:I,textFitHeight:z,sdf:f,version:0})}}updateImage(_,n){const l=this.style.getImage(_);if(!l)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=n instanceof HTMLImageElement||c.b(n)?T.getImageData(n):n,{width:f,height:y,data:w}=d;if(f===void 0||y===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==l.data.width||y!==l.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(n instanceof HTMLImageElement||c.b(n));return l.data.replace(w,C),this.style.updateImage(_,l),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return H.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,n){return this._lazyInitEmptyStyle(),this.style.addLayer(_,n),this._update(!0)}moveLayer(_,n){return this.style.moveLayer(_,n),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,n,l){return this.style.setLayerZoomRange(_,n,l),this._update(!0)}setFilter(_,n,l={}){return this.style.setFilter(_,n,l),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,n,l,d={}){return this.style.setPaintProperty(_,n,l,d),this._update(!0)}getPaintProperty(_,n){return this.style.getPaintProperty(_,n)}setLayoutProperty(_,n,l,d={}){return this.style.setLayoutProperty(_,n,l,d),this._update(!0)}getLayoutProperty(_,n){return this.style.getLayoutProperty(_,n)}setGlyphs(_,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,n,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,n,l,d=>{d||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,n,l=>{l||this._update(!0)}),this}setLight(_,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,n){return this.style.setFeatureState(_,n),this._update()}removeFeatureState(_,n){return this.style.removeFeatureState(_,n),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,n=0;return this._container&&(_=this._container.clientWidth||400,n=this._container.clientHeight||300),[_,n]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const n=this._canvasContainer=A.create("div","maplibregl-canvas-container",_);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),d=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],d);const f=this._controlContainer=A.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{y[w]=A.create("div",`maplibregl-ctrl-${w} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,n,l){this._canvas.width=Math.floor(l*_),this._canvas.height=Math.floor(l*n),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{n={requestedAttributes:_},d&&(n.statusMessage=d.statusMessage,n.type=d.type)},{once:!0});const l=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!l){const d="Failed to initialize WebGL";throw n?(n.message=d,new Error(JSON.stringify(n))):new Error(d)}this.painter=new ec(l,this.transform),$.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const f=this.transform.zoom,y=T.now();this.style.zoomHistory.update(f,y);const w=new c.z(f,{now:y,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=w.crossFadingFactor();C===1&&C===this._crossFadingFactor||(l=!0,this._crossFadingFactor=C),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bf.mark(c.bg.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,c.bf.mark(c.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),c.bf.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(_=>{c.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return Af}getCameraTargetElevation(){return this.transform.elevation}},p.MapMouseEvent=Ir,p.MapTouchEvent=ho,p.MapWheelEvent=Sf,p.Marker=hc,p.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const n=this._map.getZoom(),l=n===this._map.getMaxZoom(),d=n===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,l)=>{const d=this._map._getUIString(`NavigationControl.${l}`);n.title=d,n.setAttribute("aria-label",d)},this.options=c.e({},Mg,_),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Dg(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,n){const l=A.create("button",_,this._container);return l.type="button",l.addEventListener("click",n),l}},p.Popup=class extends c.E{constructor(_){super(),this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.k("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Pn(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!n)return;const d=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationPoint(this._lngLat));let f=this.options.anchor;const y=fc(this.options.offset);if(!f){const C=this._container.offsetWidth,I=this._container.offsetHeight;let z;z=d.y+y.bottom.y<I?["top"]:d.y>this._map.transform.height-I?["bottom"]:[],d.x<C/2?z.push("left"):d.x>this._map.transform.width-C/2&&z.push("right"),f=z.length===0?"bottom":z.join("-")}let w=d.add(y[f]);this.options.subpixelPositioning||(w=w.round()),A.setTransform(this._container,`${ta[f]} translate(${w.x}px,${w.y}px)`),uc(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Mt),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=c.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const n=document.createDocumentFragment(),l=document.createElement("body");let d;for(l.innerHTML=_;d=l.firstChild,d;)n.appendChild(d);return this.setDOMContent(n)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(dc);_&&_.focus()}},p.RasterDEMTileSource=Xt,p.RasterTileSource=Lt,p.ScaleControl=class{constructor(_){this._onMove=()=>{sl(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,sl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ls),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},p.ScrollZoomHandler=Wi,p.Style=Ol,p.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},p.TwoFingersTouchPitchHandler=nl,p.TwoFingersTouchRotateHandler=oh,p.TwoFingersTouchZoomHandler=ih,p.TwoFingersTouchZoomRotateHandler=lh,p.VectorTileSource=ur,p.VideoSource=li,p.addSourceType=(_,n)=>c._(void 0,void 0,void 0,function*(){if(ki(_))throw new Error(`A source type called "${_}" already exists.`);((l,d)=>{Zr[l]=d})(_,n)}),p.clearPrewarmedResources=function(){const _=St;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(ft),St=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},p.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},p.getRTLTextPluginStatus=function(){return ar().getRTLTextPluginStatus()},p.getVersion=function(){return mh},p.getWorkerCount=function(){return Rt.workerCount},p.getWorkerUrl=function(){return c.a.WORKER_URL},p.importScriptInWorkers=function(_){return Ut().broadcast("IS",_)},p.prewarm=function(){cn().acquire(ft)},p.setMaxParallelImageRequests=function(_){c.a.MAX_PARALLEL_IMAGE_REQUESTS=_},p.setRTLTextPlugin=function(_,n){return ar().setRTLTextPlugin(_,n)},p.setWorkerCount=function(_){Rt.workerCount=_},p.setWorkerUrl=function(_){c.a.WORKER_URL=_}});var g=i;return g})})(NP);var pN=NP.exports;const Dp=Yv(pN),VP=K.createContext({theme:"system",setTheme:()=>null});function mN({children:e,defaultTheme:t="system",storageKey:i="vite-ui-theme",...a}){const[h,g]=K.useState(()=>localStorage.getItem(i)||t);K.useEffect(()=>{const c=window.document.documentElement;if(c.classList.remove("light","dark"),h==="system"){const S=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c.classList.add(S);return}c.classList.add(h)},[h]);const p={theme:h,setTheme:c=>{localStorage.setItem(i,c),g(c)}};return re.jsx(VP.Provider,{...a,value:p,children:e})}const Ox=()=>{const e=K.useContext(VP);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Bc=16,wS="https://api.maptiler.com/maps/019b9cbc-2b55-70b4-b89b-4b390bcfb112/style.json?key=f0f0aibL2C05fTzSrqHq",gN=K.forwardRef(({selectedRecord:e,onSelectRecord:t,currentYear:i,disabledCategories:a,is1883Mode:h,isFortWallVisible:g,is3DBuildingsVisible:p,onMapLoad:c},S)=>{const E=K.useRef(null),P=K.useRef(null),T=K.useRef({}),A=K.useRef({click:null,mouseenter:null,mouseleave:null}),[$,X]=K.useState(!1),[G,ne]=K.useState(null),[F,V]=K.useState(window.innerWidth<=768),{theme:H}=Ox(),ee=K.useRef({is1883Mode:h,disabledCategories:a,currentYear:i,isFortWallVisible:g,is3DBuildingsVisible:p,theme:H});K.useEffect(()=>{const we=()=>V(window.innerWidth<=768);return window.addEventListener("resize",we),()=>window.removeEventListener("resize",we)},[]),K.useEffect(()=>{ee.current={is1883Mode:h,disabledCategories:a,currentYear:i,isFortWallVisible:g,is3DBuildingsVisible:p,theme:H}},[h,a,i,g,p,H]),K.useImperativeHandle(S,()=>({zoomIn:()=>{var we;return(we=P.current)==null?void 0:we.zoomIn()},zoomOut:()=>{var we;return(we=P.current)==null?void 0:we.zoomOut()},resetNorth:()=>{var we;return(we=P.current)==null?void 0:we.resetNorth()},resetView:()=>{var we;(we=P.current)==null||we.flyTo({center:mr.startCenter,zoom:mr.initialZoom,pitch:45,bearing:-15,duration:1e3})},flyTo:(we,Le)=>{var ze;return(ze=P.current)==null?void 0:ze.flyTo({center:we,zoom:Le||P.current.getZoom(),duration:1e3})},locate:()=>{navigator.geolocation.getCurrentPosition(we=>{var Le;(Le=P.current)==null||Le.flyTo({center:[we.coords.longitude,we.coords.latitude],zoom:17,duration:1e3})})}}));const ye=K.useCallback(()=>{if(!P.current)return;const{is1883Mode:we,disabledCategories:Le,currentYear:ze,isFortWallVisible:Ne,is3DBuildingsVisible:De,theme:Ke}=ee.current;P.current.getLayer("layer-1883")&&P.current.removeLayer("layer-1883"),P.current.getSource("source-1883")&&P.current.removeSource("source-1883"),P.current.getLayer("3d-buildings")&&P.current.removeLayer("3d-buildings"),P.current.getLayer("fort-wall-layer")&&P.current.removeLayer("fort-wall-layer"),P.current.getSource("fort-wall")&&P.current.removeSource("fort-wall"),P.current.getLayer("clusters")&&P.current.removeLayer("clusters"),P.current.getLayer("unclustered-point")&&P.current.removeLayer("unclustered-point"),P.current.getLayer("cluster-count")&&P.current.removeLayer("cluster-count"),P.current.getSource("heritage-clusters")&&P.current.removeSource("heritage-clusters"),P.current.addSource("source-1883",{type:"image",url:"/kalaghoda/images/fort-1883.jpg",coordinates:[[72.8228,18.9435],[72.8492,18.9435],[72.8492,18.9235],[72.8228,18.9235]]}),P.current.addLayer({id:"layer-1883",type:"raster",source:"source-1883",paint:{"raster-fade-duration":0},layout:{visibility:we?"visible":"none"}}),P.current.getSource("openmaptiles")&&P.current.addLayer({id:"3d-buildings",source:"openmaptiles","source-layer":"building",type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":Ke==="dark"?"#222":"#f0f0f0","fill-extrusion-height":["get","render_height"],"fill-extrusion-base":["get","render_min_height"],"fill-extrusion-opacity":Ke==="dark"?.6:.9},layout:{visibility:De&&!we?"visible":"none"}});const nt={type:"Feature",geometry:{type:"LineString",coordinates:[[72.8312,18.9278],[72.8318,18.9276],[72.8325,18.9273],[72.8335,18.9268],[72.8342,18.9265]]}};P.current.addSource("fort-wall",{type:"geojson",data:nt}),P.current.addLayer({id:"fort-wall-layer",type:"line",source:"fort-wall",layout:{"line-join":"round","line-cap":"round",visibility:Ne?"visible":"none"},paint:{"line-color":"#c0392b","line-width":4,"line-dasharray":[2,4]}});const Ze=we?[]:fd.filter(qe=>{const Dt=fs(qe).some(ft=>!Le.includes(ft)),at=wp(qe.year)<=ze;return Dt&&at}).map(qe=>{const Dt=fs(qe)[0];return{type:"Feature",properties:{id:qe.id,title:qe.title,category:Dt,color:mr.colors[Dt]||"#333"},geometry:{type:"Point",coordinates:qe.location.center}}});P.current.addSource("heritage-clusters",{type:"geojson",data:{type:"FeatureCollection",features:Ze},cluster:!0,clusterMaxZoom:Bc,clusterRadius:50}),P.current.addLayer({id:"unclustered-point",type:"circle",source:"heritage-clusters",filter:["!",["has","point_count"]],maxzoom:Bc,paint:{"circle-color":["get","color"],"circle-radius":10,"circle-stroke-width":2,"circle-stroke-color":Ke==="dark"?"#111":"#fff","circle-opacity":1,"circle-stroke-opacity":1},layout:{visibility:we?"none":"visible"}}),P.current.addLayer({id:"clusters",type:"circle",source:"heritage-clusters",filter:["has","point_count"],maxzoom:Bc,paint:{"circle-color":["step",["get","point_count"],"#2980b9",10,"#8e44ad",25,"#c0392b"],"circle-radius":["step",["get","point_count"],18,10,24,25,30],"circle-stroke-width":3,"circle-stroke-color":Ke==="dark"?"#111":"#fff","circle-opacity":1,"circle-stroke-opacity":1},layout:{visibility:we?"none":"visible"}}),P.current.addLayer({id:"cluster-count",type:"symbol",source:"heritage-clusters",filter:["has","point_count"],maxzoom:Bc,layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12,visibility:we?"none":"visible"},paint:{"text-color":"#ffffff"}}),A.current.click&&P.current.off("click","clusters",A.current.click),A.current.mouseenter&&P.current.off("mouseenter","clusters",A.current.mouseenter),A.current.mouseleave&&P.current.off("mouseleave","clusters",A.current.mouseleave);const je=async qe=>{const yt=P.current.queryRenderedFeatures(qe.point,{layers:["clusters"]});if(!yt.length)return;const Dt=yt[0].properties.cluster_id,at=yt[0].geometry.coordinates.slice(),ft=P.current.getSource("heritage-clusters");if(ft){const Rt=await ft.getClusterExpansionZoom(Dt);P.current.flyTo({center:at,zoom:Math.min(Rt+.5,18),duration:500})}},Te=()=>{P.current&&(P.current.getCanvas().style.cursor="pointer")},$e=()=>{P.current&&(P.current.getCanvas().style.cursor="")};A.current={click:je,mouseenter:Te,mouseleave:$e},P.current.on("click","clusters",je),P.current.on("mouseenter","clusters",Te),P.current.on("mouseleave","clusters",$e),P.current.getLayer("unclustered-point")&&P.current.moveLayer("unclustered-point"),P.current.getLayer("clusters")&&P.current.moveLayer("clusters"),P.current.getLayer("cluster-count")&&P.current.moveLayer("cluster-count")},[]);K.useEffect(()=>{if(P.current)return;const Le={top:0,bottom:window.innerWidth<768?0:300,left:0,right:0};return P.current=new Dp.Map({container:E.current,style:H==="dark"?wS:mr.style,center:mr.startCenter,zoom:mr.initialZoom,minZoom:14.5,maxBounds:[[72.81,18.91],[72.85,18.945]],pitch:45,bearing:-15,antialias:!0,attributionControl:!1,padding:Le}),P.current.addControl(new Dp.AttributionControl({compact:!0}),"bottom-right"),P.current.addControl(new Dp.ScaleControl({maxWidth:100,unit:"metric"}),"bottom-left"),P.current.on("load",()=>{ye(),fd.forEach(ze=>{const Ne=fs(ze),De=Ne[0],Ke=mr.colors[De]||"#333",nt=mr.icons[De]||"fa-location-dot",Ze=Ne.length>1,je=document.createElement("div");if(je.className="marker"+(Ze?" marker-multi":""),je.style.backgroundColor=Ke,je.style.display="none",je.innerHTML=`<i class="fa-solid ${nt}"></i>`,Ze){const $e=Ne[1],qe=mr.colors[$e]||"#333";je.style.setProperty("--ring-color",qe)}je.addEventListener("click",()=>t(ze));const Te=new Dp.Marker({element:je}).setLngLat(ze.location.center).addTo(P.current);T.current[ze.id]={marker:Te,element:je,record:ze,categories:Ne}}),X(!0),c==null||c()}),()=>{P.current&&(P.current.remove(),P.current=null)}},[t,ye]),K.useEffect(()=>{if(!P.current||!$)return;const Le=P.current.getZoom()>=Bc;h?Object.values(T.current).forEach(({element:De})=>{De.style.display="none"}):Object.values(T.current).forEach(({element:De,categories:Ke,record:nt})=>{const Ze=Ke.some(qe=>!a.includes(qe)),je=wp(nt.year)<=i,Te=(e==null?void 0:e.id)===nt.id,$e=Te&&!F;Te?De.classList.add("selected"):De.classList.remove("selected"),!$e&&(Le||Te)&&Ze&&je?(De.style.display="flex",De.style.opacity="1"):De.style.display="none"});const ze=h?[]:fd.filter(De=>{const nt=fs(De).some(je=>!a.includes(je)),Ze=wp(De.year)<=i;return nt&&Ze}).map(De=>{const nt=fs(De)[0];return{type:"Feature",properties:{id:De.id,title:De.title,category:nt,color:mr.colors[nt]||"#333"},geometry:{type:"Point",coordinates:De.location.center}}}),Ne=P.current.getSource("heritage-clusters");Ne&&P.current.isStyleLoaded()&&Ne.setData({type:"FeatureCollection",features:ze}),P.current.getLayer("layer-1883")&&(P.current.setLayoutProperty("layer-1883","visibility",h?"visible":"none"),h&&P.current.moveLayer("layer-1883")),P.current.getLayer("fort-wall-layer")&&P.current.setLayoutProperty("fort-wall-layer","visibility",g?"visible":"none"),P.current.getLayer("3d-buildings")&&P.current.setLayoutProperty("3d-buildings","visibility",p&&!h?"visible":"none"),P.current.getLayer("unclustered-point")&&P.current.setLayoutProperty("unclustered-point","visibility",h?"none":"visible"),P.current.getLayer("clusters")&&P.current.setLayoutProperty("clusters","visibility",h?"none":"visible"),P.current.getLayer("cluster-count")&&P.current.setLayoutProperty("cluster-count","visibility",h?"none":"visible")},[i,a,h,g,p,e,$,H]);const be=K.useRef(H);K.useEffect(()=>{if(!P.current||!$||be.current===H)return;be.current=H;const we=H==="dark"?wS:mr.style;P.current.setStyle(we);const Le=()=>{P.current.isStyleLoaded()&&(ye(),P.current.off("styledata",Le))};return P.current.on("styledata",Le),()=>{P.current&&P.current.off("styledata",Le)}},[H,$,ye]);const fe=K.useRef(h);K.useEffect(()=>{!P.current||!$||(h&&!fe.current&&P.current.fitBounds([[72.8228,18.9235],[72.8492,18.9435]],{padding:100,pitch:0,bearing:0}),fe.current=h)},[h,$]);const le=K.useRef(g);return K.useEffect(()=>{!P.current||!$||(g&&!le.current&&P.current.fitBounds([[72.8312,18.9265],[72.8342,18.9278]],{padding:150,pitch:45,bearing:-15,duration:2e3}),le.current=g)},[g,$]),K.useEffect(()=>{!P.current||!$||h||P.current.easeTo({pitch:p?45:0,duration:1e3})},[p,h,$]),K.useEffect(()=>{if(!P.current||!$)return;const we=()=>{if(h)return;const Le=P.current.getZoom()>=Bc;Object.values(T.current).forEach(({element:ze,categories:Ne,record:De})=>{const Ke=(e==null?void 0:e.id)===De.id,Ze=!(Ke&&!F)&&(Le||Ke)&&Ne.some(je=>!a.includes(je))&&wp(De.year)<=i;ze.style.display=Ze?"flex":"none",Ke?ze.classList.add("selected"):ze.classList.remove("selected")})};return P.current.on("zoom",we),()=>{P.current&&P.current.off("zoom",we)}},[$,a,i,e,h]),K.useEffect(()=>{if(!P.current||!e||F||!$){ne(null);return}const we=()=>{if(!P.current||!e)return;const Le=P.current.project(e.location.center);ne({x:Le.x,y:Le.y})};return we(),P.current.on("move",we),P.current.on("zoom",we),P.current.on("rotate",we),P.current.on("pitch",we),()=>{P.current&&(P.current.off("move",we),P.current.off("zoom",we),P.current.off("rotate",we),P.current.off("pitch",we))}},[e,F,$]),re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"map-wrapper",style:{width:"100%",height:"100vh",position:"fixed",top:0,left:0,zIndex:1},children:re.jsx("div",{ref:E,id:"map",style:{width:"100%",height:"100%"}})}),G&&e&&!F&&re.jsx("div",{className:"floating-focused-marker",style:{left:G.x,top:G.y,backgroundColor:mr.colors[fs(e)[0]]||"#333",position:"fixed",zIndex:2e3},children:re.jsx("i",{className:`fa-solid ${mr.icons[fs(e)[0]]||"fa-location-dot"}`})})]})}),Gv=K.forwardRef(({className:e,type:t,...i},a)=>re.jsx("input",{type:t,className:fn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...i}));Gv.displayName="Input";const yN=({disabledCategories:e,onToggle:t,onSolo:i,onReset:a,isFortWallVisible:h,onToggleFortWall:g})=>{const p=K.useRef(null),c=Object.keys(mr.colors),[S,E]=K.useState(!1);K.useEffect(()=>{const T=p.current;if(!T)return;const A=()=>{const $=T.scrollLeft+T.clientWidth>=T.scrollWidth-10;T.parentElement.classList.toggle("scrolled-end",$)};return T.addEventListener("scroll",A),()=>T.removeEventListener("scroll",A)},[]),K.useEffect(()=>{if(h){const T=document.getElementById("wall-info");T&&setTimeout(()=>{T.scrollIntoView({behavior:"smooth",block:"nearest"})},100)}},[h]);const P=T=>{const A=e.includes(T),$=mr.colors[T],X=mr.icons[T];return!e.includes(T)&&c.every(G=>G===T||e.includes(G)),re.jsxs(Kp,{variant:"outline",className:fn("rounded-full px-3.5 py-2 text-xs font-bold uppercase tracking-wide cursor-pointer transition-all duration-200 select-none flex items-center gap-1.5 shrink-0 border",A?"opacity-70 bg-muted text-muted-foreground border-border":"text-white shadow-sm"),onClick:()=>t(T),onContextMenu:G=>{G.preventDefault(),i(T)},style:{backgroundColor:A?void 0:$,borderColor:A?void 0:$},children:[re.jsx("i",{className:fn(`fa-solid ${X}`,A?"text-neutral-500":"text-white")}),T]},T)};return re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"chip-filter-wrapper",children:re.jsxs("div",{id:"chip-filter-bar",ref:p,className:"flex gap-2 overflow-x-auto px-5 py-2 items-center no-scrollbar",children:[re.jsx(Kp,{variant:"secondary",className:"rounded-full px-3.5 py-2 text-xs font-bold uppercase tracking-wide cursor-pointer shrink-0 bg-neutral-800 text-white hover:bg-neutral-700",onClick:a,children:"All"}),c.map(P),re.jsxs(Kp,{variant:"outline",className:fn("rounded-full px-3.5 py-2 text-xs font-bold uppercase tracking-wide cursor-pointer shrink-0 gap-1.5 flex items-center transition-colors shadow-sm",h?"bg-[#c0392b] text-white border-[#c0392b]":"bg-background text-[#c0392b] border-[#c0392b]","mr-5"),onClick:g,children:[re.jsx("i",{className:"fa-solid fa-archway"})," Toggle 1860 Fort Wall"]})]})}),re.jsxs("div",{id:"console",children:[re.jsxs("div",{id:"layers-header",onClick:()=>E(!S),className:"cursor-pointer",children:[re.jsxs("span",{children:[re.jsx("i",{className:"fa-solid fa-layer-group"})," Filter Layers"]}),re.jsx("i",{id:"layers-arrow",className:`fa-solid fa-chevron-down ${S?"rotated":""}`})]}),re.jsx(mu,{children:S&&re.jsx(Bi.div,{id:"layers-content-panel",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:350,damping:30},style:{overflow:"hidden"},className:"flex flex-col gap-2",children:re.jsxs("div",{className:"flex flex-col gap-2",children:[re.jsx(zs,{variant:"default",className:"w-full text-xs font-bold uppercase tracking-widest bg-primary text-primary-foreground hover:bg-primary/90 h-8 shadow-sm shrink-0",onClick:a,children:"RESET ALL LAYERS"}),re.jsxs("div",{className:"max-h-[50vh] overflow-y-auto custom-scrollbar flex flex-col gap-2 p-1",children:[c.map(T=>{const A=e.includes(T),$=!e.includes(T)&&c.every(ne=>ne===T||e.includes(ne)),X=mr.colors[T],G=mr.icons[T];return re.jsxs("div",{className:"flex items-center gap-2 shrink-0 h-8",children:[re.jsxs("div",{className:fn("flex-1 flex items-center justify-start h-full px-3 rounded-md cursor-pointer transition-all shadow-sm",A?"bg-muted text-muted-foreground":"text-white hover:opacity-90"),style:{backgroundColor:A?void 0:X},onClick:()=>t(T),children:[re.jsx("i",{className:fn(`fa-solid ${G} text-sm w-4 text-center mr-2.5`,A?"text-neutral-400":"text-white")}),re.jsx("span",{className:"text-[11px] font-extrabold uppercase tracking-wide",children:T})]}),re.jsxs("div",{className:"flex items-center gap-1",children:[re.jsx(zs,{variant:$?"default":"outline",size:"sm",className:fn("h-8 w-12 px-0 text-[10px] font-black",$?"bg-sky-600 hover:bg-sky-700 text-white border-sky-600":"text-muted-foreground hover:text-foreground border-border dark:text-gray-300 dark:hover:text-white dark:bg-transparent dark:hover:bg-neutral-800"),onClick:ne=>{ne.stopPropagation(),i(T)},title:"Show Only This Layer",children:"ONLY"}),re.jsx(zs,{variant:"outline",size:"sm",className:fn("h-7 w-12 px-0 text-[10px] font-black",A?"bg-neutral-500 text-white border-neutral-500 hover:bg-neutral-600 dark:bg-primary dark:text-primary-foreground dark:border-primary dark:hover:bg-primary/90":"text-muted-foreground hover:text-foreground border-border dark:text-gray-300 dark:hover:text-white dark:bg-transparent dark:hover:bg-neutral-800"),onClick:()=>t(T),title:"Toggle Visibility",children:A?"SHOW":"HIDE"})]})]},T)}),re.jsx("div",{className:"h-px bg-border my-2 w-full shrink-0"}),re.jsxs(zs,{variant:"outline",className:fn("w-full h-8 flex items-center justify-start gap-2.5 px-3 mb-4 border transition-all shrink-0",h?"bg-red-950/20 text-red-700 border-red-200 dark:border-red-900 hover:bg-red-950/30":"bg-background text-red-700 border-border hover:bg-muted"),onClick:g,children:[re.jsx("i",{className:"fa-solid fa-archway text-red-700"}),re.jsx("span",{className:"text-[11px] font-extrabold uppercase tracking-wide text-red-700",children:"1860 Fort Wall"})]})]})]})})})]})]})},_N=({onSelectRecord:e,disabledCategories:t,onToggle:i,onSolo:a,onReset:h,isFortWallVisible:g,onToggleFortWall:p})=>{const[c,S]=K.useState(""),[E,P]=K.useState([]),[T,A]=K.useState(!1),$=V=>{const H=V.target.value;if(S(H),H.length<1){P([]);return}const ee=H.toLowerCase(),ye=fd.filter(be=>{const fe=be.title.toLowerCase().includes(ee),le=be.description.toLowerCase().includes(ee),Le=fs(be).some(ze=>ze.toLowerCase().includes(ee));return fe||le||Le}).sort((be,fe)=>{const le=be.title.toLowerCase().startsWith(ee),we=fe.title.toLowerCase().startsWith(ee);if(le&&!we)return-1;if(!le&&we)return 1;const Le=be.title.toLowerCase().includes(ee),ze=fe.title.toLowerCase().includes(ee);if(Le&&!ze)return-1;if(!Le&&ze)return 1;const Ne=fs(be),De=fs(fe),Ke=Ne.some(Ze=>Ze.toLowerCase().includes(ee)),nt=De.some(Ze=>Ze.toLowerCase().includes(ee));return Ke&&!nt?-1:!Ke&&nt?1:0}).slice(0,10);P(ye)},X=V=>{e(V),S(""),P([]),A(!1)},G={type:"spring",stiffness:350,damping:30,mass:.8},ne={hidden:{opacity:0,y:-8},visible:{opacity:1,y:0,transition:{...G,staggerChildren:.04,delayChildren:.05}},exit:{opacity:0,y:-8,transition:{duration:.2,ease:[.4,0,.2,1]}}},F={hidden:{opacity:0,x:-12},visible:{opacity:1,x:0,transition:G}};return re.jsxs("header",{id:"header",className:"fade-on-move",children:[re.jsxs("div",{className:"flex items-start justify-between px-5 pt-5",children:[re.jsx("div",{className:"flex-1",children:re.jsxs("h1",{className:"p-0 m-0",children:[re.jsx("span",{className:"title-sub block",children:"Visual Audit"}),re.jsx("span",{className:"title-main block",children:"Kala Ghoda"})]})}),re.jsx("div",{className:"flex items-start",children:re.jsx("a",{href:"about.html",className:fn(FE({variant:"ghost",size:"icon"}),"info-icon-btn rounded-full -mr-2"),title:"About This Project",children:re.jsx("i",{className:"fa-solid fa-circle-info text-2xl"})})})]}),re.jsxs("div",{id:"mobile-title",children:[re.jsx("span",{className:"m-sub",children:"Visual Audit"}),re.jsx("span",{className:"m-main",children:"Kala Ghoda"})]}),re.jsxs("div",{id:"search-container",className:`fade-on-move ${T?"expanded":""}`,children:[re.jsxs("div",{className:"search-wrapper",children:[re.jsx("i",{className:"fa-solid fa-search search-icon"}),re.jsx(Gv,{type:"text",id:"search-input-desktop",className:"search-input-field pl-10",placeholder:"Search buildings, styles...",value:c,onChange:$,onFocus:()=>A(!0),onBlur:()=>setTimeout(()=>A(!1),200),autoComplete:"off"})]}),re.jsxs("div",{className:"mobile-header-pills",children:[re.jsx(mu,{children:!T&&re.jsxs(Bi.a,{href:"about.html",className:"brand-pill",initial:{width:0,opacity:0,paddingLeft:0,paddingRight:0,marginRight:0,borderWidth:0},animate:{width:"auto",opacity:1,paddingLeft:20,paddingRight:20,marginRight:10,borderWidth:"1px"},exit:{width:0,opacity:0,paddingLeft:0,paddingRight:0,marginRight:0,borderWidth:0},transition:{type:"spring",stiffness:300,damping:30},style:{overflow:"hidden"},children:[re.jsxs("div",{className:"brand-text",children:[re.jsx("span",{className:"brand-sub",children:"Visual Audit"}),re.jsx("span",{className:"brand-main",children:"Kala Ghoda"})]}),re.jsx("div",{className:"brand-info-btn",children:re.jsx("i",{className:"fa-solid fa-circle-info"})})]})}),re.jsxs(Bi.div,{className:"search-pill",children:[re.jsx("i",{className:"fa-solid fa-search"}),re.jsx(Gv,{type:"text",id:"search-input",className:"border-none shadow-none focus-visible:ring-0 focus-visible:ring-offset-0 h-full p-0 text-base bg-transparent placeholder:text-neutral-400",placeholder:"Search...",value:c,onChange:$,onFocus:()=>A(!0),onBlur:()=>setTimeout(()=>A(!1),200),autoComplete:"off"})]})]}),re.jsx(mu,{children:E.length>0&&re.jsx(Bi.div,{id:"search-results",variants:ne,initial:"hidden",animate:"visible",exit:"exit",children:E.map(V=>re.jsxs(Bi.div,{className:"search-result-item",onClick:()=>X(V),variants:F,children:[re.jsx("div",{className:"result-title",children:V.title}),re.jsxs("div",{className:"result-meta",children:[V.year,"  ",fs(V).join("  ")]})]},V.id))})})]}),re.jsx(yN,{disabledCategories:t,onToggle:i,onSolo:a,onReset:h,isFortWallVisible:g,onToggleFortWall:p})]})};function UP(e,[t,i]){return Math.min(i,Math.max(t,e))}var vN=K.createContext(void 0);function xN(e){const t=K.useContext(vN);return e||t||"ltr"}function bN(e){const t=K.useRef({value:e,previous:e});return K.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function wN(e){const[t,i]=K.useState(void 0);return yu(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(h=>{if(!Array.isArray(h)||!h.length)return;const g=h[0];let p,c;if("borderBoxSize"in g){const S=g.borderBoxSize,E=Array.isArray(S)?S[0]:S;p=E.inlineSize,c=E.blockSize}else p=e.offsetWidth,c=e.offsetHeight;i({width:p,height:c})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else i(void 0)},[e]),t}function SN(e){const t=e+"CollectionProvider",[i,a]=Ex(t),[h,g]=i(t,{collectionRef:{current:null},itemMap:new Map}),p=G=>{const{scope:ne,children:F}=G,V=Me.useRef(null),H=Me.useRef(new Map).current;return re.jsx(h,{scope:ne,itemMap:H,collectionRef:V,children:F})};p.displayName=t;const c=e+"CollectionSlot",S=Am(c),E=Me.forwardRef((G,ne)=>{const{scope:F,children:V}=G,H=g(c,F),ee=bi(ne,H.collectionRef);return re.jsx(S,{ref:ee,children:V})});E.displayName=c;const P=e+"CollectionItemSlot",T="data-radix-collection-item",A=Am(P),$=Me.forwardRef((G,ne)=>{const{scope:F,children:V,...H}=G,ee=Me.useRef(null),ye=bi(ne,ee),be=g(P,F);return Me.useEffect(()=>(be.itemMap.set(ee,{ref:ee,...H}),()=>void be.itemMap.delete(ee))),re.jsx(A,{[T]:"",ref:ye,children:V})});$.displayName=P;function X(G){const ne=g(e+"CollectionConsumer",G);return Me.useCallback(()=>{const V=ne.collectionRef.current;if(!V)return[];const H=Array.from(V.querySelectorAll(`[${T}]`));return Array.from(ne.itemMap.values()).sort((be,fe)=>H.indexOf(be.ref.current)-H.indexOf(fe.ref.current))},[ne.collectionRef,ne.itemMap])}return[{Provider:p,Slot:E,ItemSlot:$},X,a]}var $P=["PageUp","PageDown"],HP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],GP={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Cu="Slider",[Wv,kN,TN]=SN(Cu),[WP]=Ex(Cu,[TN]),[CN,og]=WP(Cu),qP=K.forwardRef((e,t)=>{const{name:i,min:a=0,max:h=100,step:g=1,orientation:p="horizontal",disabled:c=!1,minStepsBetweenThumbs:S=0,defaultValue:E=[a],value:P,onValueChange:T=()=>{},onValueCommit:A=()=>{},inverted:$=!1,form:X,...G}=e,ne=K.useRef(new Set),F=K.useRef(0),H=p==="horizontal"?EN:PN,[ee=[],ye]=NE({prop:P,defaultProp:E,onChange:ze=>{var De;(De=[...ne.current][F.current])==null||De.focus(),T(ze)}}),be=K.useRef(ee);function fe(ze){const Ne=zN(ee,ze);Le(ze,Ne)}function le(ze){Le(ze,F.current)}function we(){const ze=be.current[F.current];ee[F.current]!==ze&&A(ee)}function Le(ze,Ne,{commit:De}={commit:!1}){const Ke=FN(g),nt=ON(Math.round((ze-a)/g)*g+a,Ke),Ze=UP(nt,[a,h]);ye((je=[])=>{const Te=MN(je,Ze,Ne);if(BN(Te,S*g)){F.current=Te.indexOf(Ze);const $e=String(Te)!==String(je);return $e&&De&&A(Te),$e?Te:je}else return je})}return re.jsx(CN,{scope:e.__scopeSlider,name:i,disabled:c,min:a,max:h,valueIndexToChangeRef:F,thumbs:ne.current,values:ee,orientation:p,form:X,children:re.jsx(Wv.Provider,{scope:e.__scopeSlider,children:re.jsx(Wv.Slot,{scope:e.__scopeSlider,children:re.jsx(H,{"aria-disabled":c,"data-disabled":c?"":void 0,...G,ref:t,onPointerDown:Fi(G.onPointerDown,()=>{c||(be.current=ee)}),min:a,max:h,inverted:$,onSlideStart:c?void 0:fe,onSlideMove:c?void 0:le,onSlideEnd:c?void 0:we,onHomeKeyDown:()=>!c&&Le(a,0,{commit:!0}),onEndKeyDown:()=>!c&&Le(h,ee.length-1,{commit:!0}),onStepKeyDown:({event:ze,direction:Ne})=>{if(!c){const nt=$P.includes(ze.key)||ze.shiftKey&&HP.includes(ze.key)?10:1,Ze=F.current,je=ee[Ze],Te=g*nt*Ne;Le(je+Te,Ze,{commit:!0})}}})})})})});qP.displayName=Cu;var[ZP,XP]=WP(Cu,{startEdge:"left",endEdge:"right",size:"width",direction:1}),EN=K.forwardRef((e,t)=>{const{min:i,max:a,dir:h,inverted:g,onSlideStart:p,onSlideMove:c,onSlideEnd:S,onStepKeyDown:E,...P}=e,[T,A]=K.useState(null),$=bi(t,H=>A(H)),X=K.useRef(void 0),G=xN(h),ne=G==="ltr",F=ne&&!g||!ne&&g;function V(H){const ee=X.current||T.getBoundingClientRect(),ye=[0,ee.width],fe=Nx(ye,F?[i,a]:[a,i]);return X.current=ee,fe(H-ee.left)}return re.jsx(ZP,{scope:e.__scopeSlider,startEdge:F?"left":"right",endEdge:F?"right":"left",direction:F?1:-1,size:"width",children:re.jsx(KP,{dir:G,"data-orientation":"horizontal",...P,ref:$,style:{...P.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:H=>{const ee=V(H.clientX);p==null||p(ee)},onSlideMove:H=>{const ee=V(H.clientX);c==null||c(ee)},onSlideEnd:()=>{X.current=void 0,S==null||S()},onStepKeyDown:H=>{const ye=GP[F?"from-left":"from-right"].includes(H.key);E==null||E({event:H,direction:ye?-1:1})}})})}),PN=K.forwardRef((e,t)=>{const{min:i,max:a,inverted:h,onSlideStart:g,onSlideMove:p,onSlideEnd:c,onStepKeyDown:S,...E}=e,P=K.useRef(null),T=bi(t,P),A=K.useRef(void 0),$=!h;function X(G){const ne=A.current||P.current.getBoundingClientRect(),F=[0,ne.height],H=Nx(F,$?[a,i]:[i,a]);return A.current=ne,H(G-ne.top)}return re.jsx(ZP,{scope:e.__scopeSlider,startEdge:$?"bottom":"top",endEdge:$?"top":"bottom",size:"height",direction:$?1:-1,children:re.jsx(KP,{"data-orientation":"vertical",...E,ref:T,style:{...E.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:G=>{const ne=X(G.clientY);g==null||g(ne)},onSlideMove:G=>{const ne=X(G.clientY);p==null||p(ne)},onSlideEnd:()=>{A.current=void 0,c==null||c()},onStepKeyDown:G=>{const F=GP[$?"from-bottom":"from-top"].includes(G.key);S==null||S({event:G,direction:F?-1:1})}})})}),KP=K.forwardRef((e,t)=>{const{__scopeSlider:i,onSlideStart:a,onSlideMove:h,onSlideEnd:g,onHomeKeyDown:p,onEndKeyDown:c,onStepKeyDown:S,...E}=e,P=og(Cu,i);return re.jsx(Vi.span,{...E,ref:t,onKeyDown:Fi(e.onKeyDown,T=>{T.key==="Home"?(p(T),T.preventDefault()):T.key==="End"?(c(T),T.preventDefault()):$P.concat(HP).includes(T.key)&&(S(T),T.preventDefault())}),onPointerDown:Fi(e.onPointerDown,T=>{const A=T.target;A.setPointerCapture(T.pointerId),T.preventDefault(),P.thumbs.has(A)?A.focus():a(T)}),onPointerMove:Fi(e.onPointerMove,T=>{T.target.hasPointerCapture(T.pointerId)&&h(T)}),onPointerUp:Fi(e.onPointerUp,T=>{const A=T.target;A.hasPointerCapture(T.pointerId)&&(A.releasePointerCapture(T.pointerId),g(T))})})}),YP="SliderTrack",JP=K.forwardRef((e,t)=>{const{__scopeSlider:i,...a}=e,h=og(YP,i);return re.jsx(Vi.span,{"data-disabled":h.disabled?"":void 0,"data-orientation":h.orientation,...a,ref:t})});JP.displayName=YP;var qv="SliderRange",QP=K.forwardRef((e,t)=>{const{__scopeSlider:i,...a}=e,h=og(qv,i),g=XP(qv,i),p=K.useRef(null),c=bi(t,p),S=h.values.length,E=h.values.map(A=>nI(A,h.min,h.max)),P=S>1?Math.min(...E):0,T=100-Math.max(...E);return re.jsx(Vi.span,{"data-orientation":h.orientation,"data-disabled":h.disabled?"":void 0,...a,ref:c,style:{...e.style,[g.startEdge]:P+"%",[g.endEdge]:T+"%"}})});QP.displayName=qv;var Zv="SliderThumb",eI=K.forwardRef((e,t)=>{const i=kN(e.__scopeSlider),[a,h]=K.useState(null),g=bi(t,c=>h(c)),p=K.useMemo(()=>a?i().findIndex(c=>c.ref.current===a):-1,[i,a]);return re.jsx(IN,{...e,ref:g,index:p})}),IN=K.forwardRef((e,t)=>{const{__scopeSlider:i,index:a,name:h,...g}=e,p=og(Zv,i),c=XP(Zv,i),[S,E]=K.useState(null),P=bi(t,V=>E(V)),T=S?p.form||!!S.closest("form"):!0,A=wN(S),$=p.values[a],X=$===void 0?0:nI($,p.min,p.max),G=DN(a,p.values.length),ne=A==null?void 0:A[c.size],F=ne?RN(ne,X,c.direction):0;return K.useEffect(()=>{if(S)return p.thumbs.add(S),()=>{p.thumbs.delete(S)}},[S,p.thumbs]),re.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${X}% + ${F}px)`},children:[re.jsx(Wv.ItemSlot,{scope:e.__scopeSlider,children:re.jsx(Vi.span,{role:"slider","aria-label":e["aria-label"]||G,"aria-valuemin":p.min,"aria-valuenow":$,"aria-valuemax":p.max,"aria-orientation":p.orientation,"data-orientation":p.orientation,"data-disabled":p.disabled?"":void 0,tabIndex:p.disabled?void 0:0,...g,ref:P,style:$===void 0?{display:"none"}:e.style,onFocus:Fi(e.onFocus,()=>{p.valueIndexToChangeRef.current=a})})}),T&&re.jsx(tI,{name:h??(p.name?p.name+(p.values.length>1?"[]":""):void 0),form:p.form,value:$},a)]})});eI.displayName=Zv;var AN="RadioBubbleInput",tI=K.forwardRef(({__scopeSlider:e,value:t,...i},a)=>{const h=K.useRef(null),g=bi(h,a),p=bN(t);return K.useEffect(()=>{const c=h.current;if(!c)return;const S=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(S,"value").set;if(p!==t&&P){const T=new Event("input",{bubbles:!0});P.call(c,t),c.dispatchEvent(T)}},[p,t]),re.jsx(Vi.input,{style:{display:"none"},...i,ref:g,defaultValue:t})});tI.displayName=AN;function MN(e=[],t,i){const a=[...e];return a[i]=t,a.sort((h,g)=>h-g)}function nI(e,t,i){const g=100/(i-t)*(e-t);return UP(g,[0,100])}function DN(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function zN(e,t){if(e.length===1)return 0;const i=e.map(h=>Math.abs(h-t)),a=Math.min(...i);return i.indexOf(a)}function RN(e,t,i){const a=e/2,g=Nx([0,50],[0,a]);return(a-g(t)*i)*i}function LN(e){return e.slice(0,-1).map((t,i)=>e[i+1]-t)}function BN(e,t){if(t>0){const i=LN(e);return Math.min(...i)>=t}return!0}function Nx(e,t){return i=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(i-e[0])}}function FN(e){return(String(e).split(".")[1]||"").length}function ON(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}var rI=qP,NN=JP,jN=QP,VN=eI;const iI=K.forwardRef(({className:e,...t},i)=>re.jsxs(rI,{ref:i,className:fn("relative flex w-full touch-none select-none items-center",e),...t,children:[re.jsx(NN,{className:"relative h-[3px] w-full grow overflow-hidden rounded-full bg-neutral-300",children:re.jsx(jN,{className:"absolute h-full bg-neutral-300"})}),re.jsx(VN,{className:"block h-6 w-6 rounded-full border-2 border-white bg-[#d4af37] shadow-md ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#d4af37]/50 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 cursor-pointer"})]}));iI.displayName=rI.displayName;const UN=({currentYear:e,onChange:t,onClose:i})=>{const g=p=>{t(p[0])};return re.jsxs(re.Fragment,{children:[re.jsx(Bi.div,{className:"fixed inset-0 bg-black/20 z-[115] md:hidden",onClick:i,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),re.jsx(Bi.div,{className:"fixed bottom-10 left-1/2 z-[120] w-[90%] max-w-[400px]",initial:{y:100,opacity:0,x:"-50%"},animate:{y:0,opacity:1,x:"-50%"},exit:{y:100,opacity:0,x:"-50%"},transition:{type:"spring",stiffness:300,damping:30},children:re.jsxs(Qm,{className:"border-0 shadow-2xl bg-background/80 backdrop-blur-md",children:[re.jsx(zs,{variant:"ghost",size:"icon",className:"absolute top-3 right-3 h-8 w-8 text-muted-foreground hover:text-foreground md:hidden",onClick:i,children:re.jsx(Fx,{className:"h-5 w-5"})}),re.jsxs(eg,{className:"pt-6 pb-5 px-8",children:[re.jsx("div",{className:"text-center mb-4",children:re.jsx("h2",{className:"text-2xl font-normal text-[#c0392b]",style:{fontFamily:"'Labrada', serif"},children:e===2025?"Present Day":`Year: ${e}`})}),re.jsx(iI,{value:[e],onValueChange:g,min:1850,max:2025,step:1,className:"py-4"}),re.jsxs("div",{className:"flex justify-between text-xs font-bold text-muted-foreground mt-1 px-1",children:[re.jsx("span",{children:1850}),re.jsx("span",{children:"Present"})]})]})]})})]})};function $N(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}const HN=e=>{switch(e){case"success":return qN;case"info":return XN;case"warning":return ZN;case"error":return KN;default:return null}},GN=Array(12).fill(0),WN=({visible:e,className:t})=>Me.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Me.createElement("div",{className:"sonner-spinner"},GN.map((i,a)=>Me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),qN=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ZN=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),XN=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),KN=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),YN=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),JN=()=>{const[e,t]=Me.useState(document.hidden);return Me.useEffect(()=>{const i=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e};let Xv=1;class QN{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const i=this.subscribers.indexOf(t);this.subscribers.splice(i,1)}),this.publish=t=>{this.subscribers.forEach(i=>i(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var i;const{message:a,...h}=t,g=typeof(t==null?void 0:t.id)=="number"||((i=t.id)==null?void 0:i.length)>0?t.id:Xv++,p=this.toasts.find(S=>S.id===g),c=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(g)&&this.dismissedToasts.delete(g),p?this.toasts=this.toasts.map(S=>S.id===g?(this.publish({...S,...t,id:g,title:a}),{...S,...t,id:g,dismissible:c,title:a}):S):this.addToast({title:a,...h,dismissible:c,id:g}),g},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:t,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(a=>a({id:i.id,dismiss:!0}))}),t),this.message=(t,i)=>this.create({...i,message:t}),this.error=(t,i)=>this.create({...i,message:t,type:"error"}),this.success=(t,i)=>this.create({...i,type:"success",message:t}),this.info=(t,i)=>this.create({...i,type:"info",message:t}),this.warning=(t,i)=>this.create({...i,type:"warning",message:t}),this.loading=(t,i)=>this.create({...i,type:"loading",message:t}),this.promise=(t,i)=>{if(!i)return;let a;i.loading!==void 0&&(a=this.create({...i,promise:t,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const h=Promise.resolve(t instanceof Function?t():t);let g=a!==void 0,p;const c=h.then(async E=>{if(p=["resolve",E],Me.isValidElement(E))g=!1,this.create({id:a,type:"default",message:E});else if(t8(E)&&!E.ok){g=!1;const T=typeof i.error=="function"?await i.error(`HTTP error! status: ${E.status}`):i.error,A=typeof i.description=="function"?await i.description(`HTTP error! status: ${E.status}`):i.description,X=typeof T=="object"&&!Me.isValidElement(T)?T:{message:T};this.create({id:a,type:"error",description:A,...X})}else if(E instanceof Error){g=!1;const T=typeof i.error=="function"?await i.error(E):i.error,A=typeof i.description=="function"?await i.description(E):i.description,X=typeof T=="object"&&!Me.isValidElement(T)?T:{message:T};this.create({id:a,type:"error",description:A,...X})}else if(i.success!==void 0){g=!1;const T=typeof i.success=="function"?await i.success(E):i.success,A=typeof i.description=="function"?await i.description(E):i.description,X=typeof T=="object"&&!Me.isValidElement(T)?T:{message:T};this.create({id:a,type:"success",description:A,...X})}}).catch(async E=>{if(p=["reject",E],i.error!==void 0){g=!1;const P=typeof i.error=="function"?await i.error(E):i.error,T=typeof i.description=="function"?await i.description(E):i.description,$=typeof P=="object"&&!Me.isValidElement(P)?P:{message:P};this.create({id:a,type:"error",description:T,...$})}}).finally(()=>{g&&(this.dismiss(a),a=void 0),i.finally==null||i.finally.call(i)}),S=()=>new Promise((E,P)=>c.then(()=>p[0]==="reject"?P(p[1]):E(p[1])).catch(P));return typeof a!="string"&&typeof a!="number"?{unwrap:S}:Object.assign(a,{unwrap:S})},this.custom=(t,i)=>{const a=(i==null?void 0:i.id)||Xv++;return this.create({jsx:t(a),id:a,...i}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const zi=new QN,e8=(e,t)=>{const i=(t==null?void 0:t.id)||Xv++;return zi.addToast({title:e,...t,id:i}),i},t8=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",n8=e8,r8=()=>zi.toasts,i8=()=>zi.getActiveToasts(),Kv=Object.assign(n8,{success:zi.success,info:zi.info,warning:zi.warning,error:zi.error,custom:zi.custom,message:zi.message,promise:zi.promise,dismiss:zi.dismiss,loading:zi.loading},{getHistory:r8,getToasts:i8});$N("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function zp(e){return e.label!==void 0}const s8=3,o8="24px",a8="16px",SS=4e3,l8=356,c8=14,u8=45,h8=200;function Zs(...e){return e.filter(Boolean).join(" ")}function d8(e){const[t,i]=e.split("-"),a=[];return t&&a.push(t),i&&a.push(i),a}const f8=e=>{var t,i,a,h,g,p,c,S,E;const{invert:P,toast:T,unstyled:A,interacting:$,setHeights:X,visibleToasts:G,heights:ne,index:F,toasts:V,expanded:H,removeToast:ee,defaultRichColors:ye,closeButton:be,style:fe,cancelButtonStyle:le,actionButtonStyle:we,className:Le="",descriptionClassName:ze="",duration:Ne,position:De,gap:Ke,expandByDefault:nt,classNames:Ze,icons:je,closeButtonAriaLabel:Te="Close toast"}=e,[$e,qe]=Me.useState(null),[yt,Dt]=Me.useState(null),[at,ft]=Me.useState(!1),[Rt,qt]=Me.useState(!1),[St,Et]=Me.useState(!1),[cn,on]=Me.useState(!1),[Ut,it]=Me.useState(!1),[Zt,ht]=Me.useState(0),[wn,Pe]=Me.useState(0),Sn=Me.useRef(T.duration||Ne||SS),ur=Me.useRef(null),Lt=Me.useRef(null),Xt=F===0,Pr=F+1<=G,xn=T.type,En=T.dismissible!==!1,li=T.className||"",er=T.descriptionClassName||"",Zr=Me.useMemo(()=>ne.findIndex(O=>O.toastId===T.id)||0,[ne,T.id]),ki=Me.useMemo(()=>{var O;return(O=T.closeButton)!=null?O:be},[T.closeButton,be]),Ue=Me.useMemo(()=>T.duration||Ne||SS,[T.duration,Ne]),tr=Me.useRef(0),hn=Me.useRef(0),ar=Me.useRef(0),zn=Me.useRef(null),[We,Nt]=De.split("-"),Pt=Me.useMemo(()=>ne.reduce((O,j,Z)=>Z>=Zr?O:O+j.height,0),[ne,Zr]),Gn=JN(),vr=T.invert||P,zt=xn==="loading";hn.current=Me.useMemo(()=>Zr*Ke+Pt,[Zr,Pt]),Me.useEffect(()=>{Sn.current=Ue},[Ue]),Me.useEffect(()=>{ft(!0)},[]),Me.useEffect(()=>{const O=Lt.current;if(O){const j=O.getBoundingClientRect().height;return Pe(j),X(Z=>[{toastId:T.id,height:j,position:T.position},...Z]),()=>X(Z=>Z.filter(te=>te.toastId!==T.id))}},[X,T.id]),Me.useLayoutEffect(()=>{if(!at)return;const O=Lt.current,j=O.style.height;O.style.height="auto";const Z=O.getBoundingClientRect().height;O.style.height=j,Pe(Z),X(te=>te.find(me=>me.toastId===T.id)?te.map(me=>me.toastId===T.id?{...me,height:Z}:me):[{toastId:T.id,height:Z,position:T.position},...te])},[at,T.title,T.description,X,T.id,T.jsx,T.action,T.cancel]);const pt=Me.useCallback(()=>{qt(!0),ht(hn.current),X(O=>O.filter(j=>j.toastId!==T.id)),setTimeout(()=>{ee(T)},h8)},[T,ee,X,hn]);Me.useEffect(()=>{if(T.promise&&xn==="loading"||T.duration===1/0||T.type==="loading")return;let O;return H||$||Gn?(()=>{if(ar.current<tr.current){const te=new Date().getTime()-tr.current;Sn.current=Sn.current-te}ar.current=new Date().getTime()})():(()=>{Sn.current!==1/0&&(tr.current=new Date().getTime(),O=setTimeout(()=>{T.onAutoClose==null||T.onAutoClose.call(T,T),pt()},Sn.current))})(),()=>clearTimeout(O)},[H,$,T,xn,Gn,pt]),Me.useEffect(()=>{T.delete&&(pt(),T.onDismiss==null||T.onDismiss.call(T,T))},[pt,T.delete]);function Ht(){var O;if(je!=null&&je.loading){var j;return Me.createElement("div",{className:Zs(Ze==null?void 0:Ze.loader,T==null||(j=T.classNames)==null?void 0:j.loader,"sonner-loader"),"data-visible":xn==="loading"},je.loading)}return Me.createElement(WN,{className:Zs(Ze==null?void 0:Ze.loader,T==null||(O=T.classNames)==null?void 0:O.loader),visible:xn==="loading"})}const Kt=T.icon||(je==null?void 0:je[xn])||HN(xn);var jt,ie;return Me.createElement("li",{tabIndex:0,ref:Lt,className:Zs(Le,li,Ze==null?void 0:Ze.toast,T==null||(t=T.classNames)==null?void 0:t.toast,Ze==null?void 0:Ze.default,Ze==null?void 0:Ze[xn],T==null||(i=T.classNames)==null?void 0:i[xn]),"data-sonner-toast":"","data-rich-colors":(jt=T.richColors)!=null?jt:ye,"data-styled":!(T.jsx||T.unstyled||A),"data-mounted":at,"data-promise":!!T.promise,"data-swiped":Ut,"data-removed":Rt,"data-visible":Pr,"data-y-position":We,"data-x-position":Nt,"data-index":F,"data-front":Xt,"data-swiping":St,"data-dismissible":En,"data-type":xn,"data-invert":vr,"data-swipe-out":cn,"data-swipe-direction":yt,"data-expanded":!!(H||nt&&at),"data-testid":T.testId,style:{"--index":F,"--toasts-before":F,"--z-index":V.length-F,"--offset":`${Rt?Zt:hn.current}px`,"--initial-height":nt?"auto":`${wn}px`,...fe,...T.style},onDragEnd:()=>{Et(!1),qe(null),zn.current=null},onPointerDown:O=>{O.button!==2&&(zt||!En||(ur.current=new Date,ht(hn.current),O.target.setPointerCapture(O.pointerId),O.target.tagName!=="BUTTON"&&(Et(!0),zn.current={x:O.clientX,y:O.clientY})))},onPointerUp:()=>{var O,j,Z;if(cn||!En)return;zn.current=null;const te=Number(((O=Lt.current)==null?void 0:O.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pe=Number(((j=Lt.current)==null?void 0:j.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),me=new Date().getTime()-((Z=ur.current)==null?void 0:Z.getTime()),ve=$e==="x"?te:pe,he=Math.abs(ve)/me;if(Math.abs(ve)>=u8||he>.11){ht(hn.current),T.onDismiss==null||T.onDismiss.call(T,T),Dt($e==="x"?te>0?"right":"left":pe>0?"down":"up"),pt(),on(!0);return}else{var Ie,Be;(Ie=Lt.current)==null||Ie.style.setProperty("--swipe-amount-x","0px"),(Be=Lt.current)==null||Be.style.setProperty("--swipe-amount-y","0px")}it(!1),Et(!1),qe(null)},onPointerMove:O=>{var j,Z,te;if(!zn.current||!En||((j=window.getSelection())==null?void 0:j.toString().length)>0)return;const me=O.clientY-zn.current.y,ve=O.clientX-zn.current.x;var he;const Ie=(he=e.swipeDirections)!=null?he:d8(De);!$e&&(Math.abs(ve)>1||Math.abs(me)>1)&&qe(Math.abs(ve)>Math.abs(me)?"x":"y");let Be={x:0,y:0};const Ae=He=>1/(1.5+Math.abs(He)/20);if($e==="y"){if(Ie.includes("top")||Ie.includes("bottom"))if(Ie.includes("top")&&me<0||Ie.includes("bottom")&&me>0)Be.y=me;else{const He=me*Ae(me);Be.y=Math.abs(He)<Math.abs(me)?He:me}}else if($e==="x"&&(Ie.includes("left")||Ie.includes("right")))if(Ie.includes("left")&&ve<0||Ie.includes("right")&&ve>0)Be.x=ve;else{const He=ve*Ae(ve);Be.x=Math.abs(He)<Math.abs(ve)?He:ve}(Math.abs(Be.x)>0||Math.abs(Be.y)>0)&&it(!0),(Z=Lt.current)==null||Z.style.setProperty("--swipe-amount-x",`${Be.x}px`),(te=Lt.current)==null||te.style.setProperty("--swipe-amount-y",`${Be.y}px`)}},ki&&!T.jsx&&xn!=="loading"?Me.createElement("button",{"aria-label":Te,"data-disabled":zt,"data-close-button":!0,onClick:zt||!En?()=>{}:()=>{pt(),T.onDismiss==null||T.onDismiss.call(T,T)},className:Zs(Ze==null?void 0:Ze.closeButton,T==null||(a=T.classNames)==null?void 0:a.closeButton)},(ie=je==null?void 0:je.close)!=null?ie:YN):null,(xn||T.icon||T.promise)&&T.icon!==null&&((je==null?void 0:je[xn])!==null||T.icon)?Me.createElement("div",{"data-icon":"",className:Zs(Ze==null?void 0:Ze.icon,T==null||(h=T.classNames)==null?void 0:h.icon)},T.promise||T.type==="loading"&&!T.icon?T.icon||Ht():null,T.type!=="loading"?Kt:null):null,Me.createElement("div",{"data-content":"",className:Zs(Ze==null?void 0:Ze.content,T==null||(g=T.classNames)==null?void 0:g.content)},Me.createElement("div",{"data-title":"",className:Zs(Ze==null?void 0:Ze.title,T==null||(p=T.classNames)==null?void 0:p.title)},T.jsx?T.jsx:typeof T.title=="function"?T.title():T.title),T.description?Me.createElement("div",{"data-description":"",className:Zs(ze,er,Ze==null?void 0:Ze.description,T==null||(c=T.classNames)==null?void 0:c.description)},typeof T.description=="function"?T.description():T.description):null),Me.isValidElement(T.cancel)?T.cancel:T.cancel&&zp(T.cancel)?Me.createElement("button",{"data-button":!0,"data-cancel":!0,style:T.cancelButtonStyle||le,onClick:O=>{zp(T.cancel)&&En&&(T.cancel.onClick==null||T.cancel.onClick.call(T.cancel,O),pt())},className:Zs(Ze==null?void 0:Ze.cancelButton,T==null||(S=T.classNames)==null?void 0:S.cancelButton)},T.cancel.label):null,Me.isValidElement(T.action)?T.action:T.action&&zp(T.action)?Me.createElement("button",{"data-button":!0,"data-action":!0,style:T.actionButtonStyle||we,onClick:O=>{zp(T.action)&&(T.action.onClick==null||T.action.onClick.call(T.action,O),!O.defaultPrevented&&pt())},className:Zs(Ze==null?void 0:Ze.actionButton,T==null||(E=T.classNames)==null?void 0:E.actionButton)},T.action.label):null)};function kS(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function p8(e,t){const i={};return[e,t].forEach((a,h)=>{const g=h===1,p=g?"--mobile-offset":"--offset",c=g?a8:o8;function S(E){["top","right","bottom","left"].forEach(P=>{i[`${p}-${P}`]=typeof E=="number"?`${E}px`:E})}typeof a=="number"||typeof a=="string"?S(a):typeof a=="object"?["top","right","bottom","left"].forEach(E=>{a[E]===void 0?i[`${p}-${E}`]=c:i[`${p}-${E}`]=typeof a[E]=="number"?`${a[E]}px`:a[E]}):S(c)}),i}const m8=Me.forwardRef(function(t,i){const{id:a,invert:h,position:g="bottom-right",hotkey:p=["altKey","KeyT"],expand:c,closeButton:S,className:E,offset:P,mobileOffset:T,theme:A="light",richColors:$,duration:X,style:G,visibleToasts:ne=s8,toastOptions:F,dir:V=kS(),gap:H=c8,icons:ee,containerAriaLabel:ye="Notifications"}=t,[be,fe]=Me.useState([]),le=Me.useMemo(()=>a?be.filter(at=>at.toasterId===a):be.filter(at=>!at.toasterId),[be,a]),we=Me.useMemo(()=>Array.from(new Set([g].concat(le.filter(at=>at.position).map(at=>at.position)))),[le,g]),[Le,ze]=Me.useState([]),[Ne,De]=Me.useState(!1),[Ke,nt]=Me.useState(!1),[Ze,je]=Me.useState(A!=="system"?A:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Te=Me.useRef(null),$e=p.join("+").replace(/Key/g,"").replace(/Digit/g,""),qe=Me.useRef(null),yt=Me.useRef(!1),Dt=Me.useCallback(at=>{fe(ft=>{var Rt;return(Rt=ft.find(qt=>qt.id===at.id))!=null&&Rt.delete||zi.dismiss(at.id),ft.filter(({id:qt})=>qt!==at.id)})},[]);return Me.useEffect(()=>zi.subscribe(at=>{if(at.dismiss){requestAnimationFrame(()=>{fe(ft=>ft.map(Rt=>Rt.id===at.id?{...Rt,delete:!0}:Rt))});return}setTimeout(()=>{OT.flushSync(()=>{fe(ft=>{const Rt=ft.findIndex(qt=>qt.id===at.id);return Rt!==-1?[...ft.slice(0,Rt),{...ft[Rt],...at},...ft.slice(Rt+1)]:[at,...ft]})})})}),[be]),Me.useEffect(()=>{if(A!=="system"){je(A);return}if(A==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?je("dark"):je("light")),typeof window>"u")return;const at=window.matchMedia("(prefers-color-scheme: dark)");try{at.addEventListener("change",({matches:ft})=>{je(ft?"dark":"light")})}catch{at.addListener(({matches:Rt})=>{try{je(Rt?"dark":"light")}catch(qt){console.error(qt)}})}},[A]),Me.useEffect(()=>{be.length<=1&&De(!1)},[be]),Me.useEffect(()=>{const at=ft=>{var Rt;if(p.every(Et=>ft[Et]||ft.code===Et)){var St;De(!0),(St=Te.current)==null||St.focus()}ft.code==="Escape"&&(document.activeElement===Te.current||(Rt=Te.current)!=null&&Rt.contains(document.activeElement))&&De(!1)};return document.addEventListener("keydown",at),()=>document.removeEventListener("keydown",at)},[p]),Me.useEffect(()=>{if(Te.current)return()=>{qe.current&&(qe.current.focus({preventScroll:!0}),qe.current=null,yt.current=!1)}},[Te.current]),Me.createElement("section",{ref:i,"aria-label":`${ye} ${$e}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},we.map((at,ft)=>{var Rt;const[qt,St]=at.split("-");return le.length?Me.createElement("ol",{key:at,dir:V==="auto"?kS():V,tabIndex:-1,ref:Te,className:E,"data-sonner-toaster":!0,"data-sonner-theme":Ze,"data-y-position":qt,"data-x-position":St,style:{"--front-toast-height":`${((Rt=Le[0])==null?void 0:Rt.height)||0}px`,"--width":`${l8}px`,"--gap":`${H}px`,...G,...p8(P,T)},onBlur:Et=>{yt.current&&!Et.currentTarget.contains(Et.relatedTarget)&&(yt.current=!1,qe.current&&(qe.current.focus({preventScroll:!0}),qe.current=null))},onFocus:Et=>{Et.target instanceof HTMLElement&&Et.target.dataset.dismissible==="false"||yt.current||(yt.current=!0,qe.current=Et.relatedTarget)},onMouseEnter:()=>De(!0),onMouseMove:()=>De(!0),onMouseLeave:()=>{Ke||De(!1)},onDragEnd:()=>De(!1),onPointerDown:Et=>{Et.target instanceof HTMLElement&&Et.target.dataset.dismissible==="false"||nt(!0)},onPointerUp:()=>nt(!1)},le.filter(Et=>!Et.position&&ft===0||Et.position===at).map((Et,cn)=>{var on,Ut;return Me.createElement(f8,{key:Et.id,icons:ee,index:cn,toast:Et,defaultRichColors:$,duration:(on=F==null?void 0:F.duration)!=null?on:X,className:F==null?void 0:F.className,descriptionClassName:F==null?void 0:F.descriptionClassName,invert:h,visibleToasts:ne,closeButton:(Ut=F==null?void 0:F.closeButton)!=null?Ut:S,interacting:Ke,position:at,style:F==null?void 0:F.style,unstyled:F==null?void 0:F.unstyled,classNames:F==null?void 0:F.classNames,cancelButtonStyle:F==null?void 0:F.cancelButtonStyle,actionButtonStyle:F==null?void 0:F.actionButtonStyle,closeButtonAriaLabel:F==null?void 0:F.closeButtonAriaLabel,removeToast:Dt,toasts:le.filter(it=>it.position==Et.position),heights:Le.filter(it=>it.position==Et.position),setHeights:ze,expandByDefault:c,gap:H,expanded:Ne,swipeDirections:t.swipeDirections})})):null}))}),g8=({id:e,onClick:t,iconClass:i,label:a,isActive:h,disabled:g,className:p,hideLabel:c=!1,isMobile:S=!1})=>{const[E,P]=K.useState(!1);return re.jsxs(zs,{variant:"ghost",size:"icon",id:e,onClick:t,disabled:g,className:fn("v-control-btn border transition-all duration-300",h&&"active",g&&"opacity-40 cursor-not-allowed",!c&&!S&&"hover:w-auto",S&&"!w-10 !max-w-10 !min-w-10",p),onMouseEnter:()=>!S&&P(!0),onMouseLeave:()=>!S&&P(!1),children:[re.jsx("div",{className:"v-control-icon-wrapper",children:re.jsx("i",{className:fn("fa-solid",i)})}),!c&&!S&&re.jsx("span",{className:fn("whitespace-nowrap text-[11px] font-extrabold uppercase tracking-widest overflow-hidden transition-all duration-300 ease-out",!E&&"max-w-0 p-0 opacity-0",E&&"max-w-[200px] px-3 opacity-100"),children:a})]})},y8=({onZoomIn:e,onZoomOut:t,onResetNorth:i,onToggleTime:a,isTimeActive:h,is1883Mode:g,onToggle1883:p,is3DVisible:c,onToggle3D:S,onResetView:E,onLocate:P})=>{const[T,A]=K.useState(!1),{theme:$,setTheme:X}=Ox();K.useEffect(()=>{const ee=()=>A(window.innerWidth<=768);return ee(),window.addEventListener("resize",ee),()=>window.removeEventListener("resize",ee)},[]);const G={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},ne={hidden:{opacity:0,x:20},visible:{opacity:1,x:0}},F=(ee,ye)=>{T&&ee&&Kv(ee,{duration:1500}),ye()},V=g,H=[{id:"zoom-in-btn",onClick:e,icon:"fa-plus",label:"Zoom In",hideLabel:!0},{id:"zoom-out-btn",onClick:t,icon:"fa-minus",label:"Zoom Out",hideLabel:!0},{id:"compass-btn",onClick:()=>F("Reset North",i),icon:"fa-arrow-up",label:"Reset North"},{id:"time-travel-btn",onClick:a,icon:"fa-clock-rotate-left",label:"Time Travel",isActive:h,disabled:g},{id:"map-1883-btn",onClick:()=>g?p():F("1883 Map",p),icon:"fa-map-location-dot",label:"1883 Map",isActive:g,overrideDim:!0},{id:"view-3d-btn",onClick:()=>F("3D View",S),icon:"fa-cube",label:"3D View",isActive:c,disabled:g},{id:"reset-view-btn",onClick:()=>F("Reset View",E),icon:"fa-compress",label:"Reset View"},{id:"locate-btn",onClick:()=>F("My Location",P),icon:"fa-location-crosshairs",label:"My Location"},{id:"theme-toggle-btn",onClick:()=>X($==="dark"?"light":"dark"),icon:$==="dark"?"fa-sun":"fa-moon",label:$==="dark"?"Light Mode":"Dark Mode",overrideDim:!0}];return re.jsx(Bi.div,{id:"vertical-controls",className:"fixed right-5 bottom-8 flex flex-col items-end gap-2 z-[95] overflow-visible !max-h-none !h-auto",variants:G,initial:"hidden",animate:"visible",children:H.map(ee=>re.jsx(Bi.div,{variants:ne,children:re.jsx(g8,{id:ee.id,onClick:ee.onClick,iconClass:ee.icon,label:ee.label,isActive:ee.isActive,disabled:ee.disabled,hideLabel:ee.hideLabel,isMobile:T,className:V&&!ee.overrideDim&&!ee.disabled?"opacity-40 pointer-events-none":""})},ee.id))})},_8=({visible:e,onDismiss:t})=>re.jsx(mu,{children:e&&re.jsx(Bi.div,{id:"tutorial-overlay",className:"fixed inset-0 z-[150] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:re.jsx(Bi.div,{className:"w-full max-w-sm",initial:{scale:.8,y:50,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:50,opacity:0},transition:{type:"spring",stiffness:300,damping:25},children:re.jsxs(Qm,{className:"max-w-[360px] w-full border-none shadow-2xl bg-background/80 backdrop-blur-md overflow-hidden p-0",children:[re.jsxs(RE,{className:"text-center pb-2",children:[re.jsx("div",{className:"text-4xl mb-2",children:""}),re.jsx(LE,{className:"text-3xl font-bold text-[#d4af37]",style:{fontFamily:"'Labrada', serif"},children:"Kala Ghoda"}),re.jsx("div",{className:"text-sm font-medium text-muted-foreground uppercase tracking-widest",children:"Heritage Map"})]}),re.jsxs(eg,{className:"grid gap-4 pt-4",children:[re.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted border border-border",children:[re.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 shrink-0",children:re.jsx("i",{className:"fa-solid fa-hand-pointer text-lg"})}),re.jsxs("div",{className:"text-sm text-muted-foreground",children:[re.jsx("strong",{className:"text-foreground",children:"Tap markers"})," to explore heritage sites"]})]}),re.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted border border-border",children:[re.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 shrink-0",children:re.jsx("i",{className:"fa-solid fa-filter text-lg"})}),re.jsxs("div",{className:"text-sm text-muted-foreground",children:[re.jsx("strong",{className:"text-foreground",children:"Tap chips"})," to show/hide layer types"]})]}),re.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted border border-border",children:[re.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 shrink-0",children:re.jsx("i",{className:"fa-solid fa-hand text-lg"})}),re.jsxs("div",{className:"text-sm text-muted-foreground",children:[re.jsx("strong",{className:"text-foreground",children:"Long-press chips"})," for solo mode"]})]}),re.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted border border-border",children:[re.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 shrink-0",children:re.jsx("i",{className:"fa-solid fa-clock-rotate-left text-lg"})}),re.jsxs("div",{className:"text-sm text-muted-foreground",children:[re.jsx("strong",{className:"text-foreground",children:"Time slider"})," to filter by year built"]})]}),re.jsx(zs,{size:"lg",className:"w-full mt-2 font-bold bg-[#c0392b] hover:bg-[#a93226] text-white",onClick:t,children:"Got it, let's explore"})]})]})})})}),v8=({...e})=>re.jsx(m8,{theme:"system",className:"toaster group",closeButton:!0,toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-white group-[.toaster]:text-neutral-950 group-[.toaster]:border-neutral-200 group-[.toaster]:shadow-lg group-[.toaster]:rounded-lg group-[.toaster]:p-4 dark:group-[.toaster]:bg-neutral-900 dark:group-[.toaster]:text-white dark:group-[.toaster]:border-neutral-800 group-[.toaster]:font-['Lato'] group-[.toaster]:w-full group-[.toaster]:max-w-[250px] group-[.toaster]:relative group-[.toaster]:mx-auto group-[.toaster]:text-left",title:"group-[.toast]:font-bold group-[.toast]:text-sm group-[.toast]:text-left",description:"group-[.toast]:text-neutral-500 dark:group-[.toast]:text-neutral-400 group-[.toast]:text-sm group-[.toast]:text-left",actionButton:"group-[.toast]:bg-neutral-900 group-[.toast]:text-neutral-50 dark:group-[.toast]:bg-neutral-50 dark:group-[.toast]:text-neutral-900",cancelButton:"group-[.toast]:bg-neutral-100 group-[.toast]:text-neutral-500 dark:group-[.toast]:bg-neutral-800 dark:group-[.toast]:text-neutral-400",closeButton:"group-[.toast]:!bg-transparent group-[.toast]:!border-0 group-[.toast]:!text-neutral-500 group-[.toast]:hover:!text-neutral-900 group-[.toast]:!absolute group-[.toast]:!right-0 group-[.toast]:!top-3 group-[.toast]:!left-auto group-[.toast]:!h-15 group-[.toast]:!w-15"}},...e});function x8(){const e=K.useRef(null),[t,i]=K.useState(null),[a,h]=K.useState(2025),[g,p]=K.useState([]),[c,S]=K.useState(!1),[E,P]=K.useState(!1),[T,A]=K.useState(!0),[$,X]=K.useState(()=>window.innerWidth>768),[G,ne]=K.useState(()=>{const Ne=window.innerWidth<=768,De=localStorage.getItem("tutorialSeen");return Ne&&!De}),{theme:F}=Ox(),[V,H]=K.useState(!1),ee=K.useCallback(()=>{H(!0);const Ne=document.getElementById("loading-bar");Ne&&(Ne.style.width="100%")},[]);K.useEffect(()=>{if(V){const Ne=document.getElementById("loading-screen"),De=document.getElementById("loading-text");De&&(De.innerText="Ready!");const Ke=setTimeout(()=>{Ne&&(Ne.style.opacity="0",setTimeout(()=>{Ne.style.display="none"},800))},300);return()=>clearTimeout(Ke)}},[V]);const ye=K.useCallback(()=>{localStorage.setItem("tutorialSeen","true"),ne(!1)},[]);K.useEffect(()=>(c?document.body.classList.add("mode-1883"):document.body.classList.remove("mode-1883"),()=>{document.body.classList.remove("mode-1883")}),[c]),K.useEffect(()=>{const De=new URLSearchParams(window.location.search).get("site");if(De&&V){const Ke=fd.find(nt=>nt.id===De);Ke&&(i(Ke),Ke.location&&setTimeout(()=>{var nt;(nt=e.current)==null||nt.flyTo(Ke.location.center,18)},500))}},[V]);const be=K.useCallback(Ne=>{var De;i(Ne),Ne.location&&((De=e.current)==null||De.flyTo(Ne.location.center,18))},[]),fe=K.useCallback(()=>{i(null)},[]),le=K.useCallback(Ne=>{p(De=>De.includes(Ne)?De.filter(Ke=>Ke!==Ne):[...De,Ne])},[]),we=K.useCallback(Ne=>{const Ke=Object.keys(mr.colors).filter(nt=>nt!==Ne);p(nt=>{const Ze=!nt.includes(Ne),je=Ke.every($e=>nt.includes($e));return Ze&&je?[]:Ke})},[]),Le=K.useCallback(()=>{p([])},[]),ze=K.useCallback(()=>{P(Ne=>{const De=!Ne;return De&&setTimeout(()=>{Kv.custom(Ke=>re.jsxs("div",{className:"bg-[#FFF5F5] relative border-l-[6px] border-l-red-700 shadow-xl rounded-lg p-5 font-['Lato'] w-full max-w-[356px] pointer-events-auto flex flex-col gap-2 mx-auto",children:[re.jsxs("div",{className:"flex justify-between items-start gap-3",children:[re.jsx("div",{className:"text-red-700 uppercase font-black tracking-wider text-sm leading-tight",children:"The Invisible Ramparts"}),re.jsx("button",{onClick:()=>Kv.dismiss(Ke),className:"text-neutral-400 hover:text-neutral-600 transition-colors -mt-1 -mr-2 p-1","aria-label":"Close",children:re.jsx(Fx,{className:"h-4 w-4"})})]}),re.jsx("div",{className:"text-neutral-700 leading-normal text-sm",children:"This dashed line traces the demolished fortifications of the Bombay Fort (removed 1862)."})]}),{id:"fort-wall-toast",duration:1/0,className:"!bg-transparent !border-0 !shadow-none !p-0 !pointer-events-auto flex justify-center w-full",unstyled:!0})},0),De})},[]);return re.jsxs("div",{className:`app-container ${c?"mode-1883":""}`,children:[re.jsx(gN,{ref:e,selectedRecord:t,onSelectRecord:be,currentYear:a,disabledCategories:g,is1883Mode:c,isFortWallVisible:E,is3DBuildingsVisible:T,onMapLoad:ee},F),re.jsx(_N,{onSelectRecord:be,disabledCategories:g,onToggle:le,onSolo:we,onReset:Le,isFortWallVisible:E,onToggleFortWall:ze}),re.jsx(mu,{children:$&&re.jsx(UN,{currentYear:a,onChange:h,onClose:()=>X(!1)})}),re.jsx(y8,{onZoomIn:()=>{var Ne;return(Ne=e.current)==null?void 0:Ne.zoomIn()},onZoomOut:()=>{var Ne;return(Ne=e.current)==null?void 0:Ne.zoomOut()},onResetNorth:()=>{var Ne;return(Ne=e.current)==null?void 0:Ne.resetNorth()},onToggleTime:()=>X(!$),isTimeActive:$,is1883Mode:c,onToggle1883:()=>S(!c),is3DVisible:T,onToggle3D:()=>A(!T),onResetView:()=>{var Ne;return(Ne=e.current)==null?void 0:Ne.resetView()},onLocate:()=>{var Ne;return(Ne=e.current)==null?void 0:Ne.locate()}}),re.jsx(mu,{children:t&&re.jsx(fN,{selectedRecord:t,onClose:fe},"side-panel")}),re.jsx(_8,{visible:G,onDismiss:ye}),re.jsx(v8,{position:"bottom-center"})]})}function b8(){return re.jsx(mN,{defaultTheme:"light",storageKey:"kala-ghoda-theme",children:re.jsx(x8,{})})}NT(document.getElementById("root")).render(re.jsx(K.StrictMode,{children:re.jsx(b8,{})}));
